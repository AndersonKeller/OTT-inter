{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack:///./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack:///./components/Player/ShakaPlayer.js","webpack:///./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack:///./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack:///./node_modules/@babel/runtime/helpers/esm/createClass.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_setPrototypeOf","o","p","Object","setPrototypeOf","__proto__","_inherits","subClass","superClass","prototype","create","constructor","value","writable","configurable","ShakaPlayer","props","autoPlay","videoComponent","React","createRef","videoContainer","onErrorEvent","bind","onError","media","poster","height","width","event","this","detail","error","console","code","shaka","polyfill","installAll","Player","isBrowserSupported","initPlayer","video","current","player","configure","ui","Overlay","getControls","uiConfig","addBigPlayButton","controlPanelElements","overflowMenuButtons","addEventListener","hls_link","movie_links","find","element","movie_link_type_id","mpd_link","probeSupport","support","manifestUri","manifest","mpd","url","log","load","then","ref","muted","IS_PRODUCTION","style","outline","PureComponent","_typeof","obj","Symbol","iterator","_getPrototypeOf","getPrototypeOf","_possibleConstructorReturn","self","call","_defineProperties","target","i","length","descriptor","enumerable","defineProperty","key","_createClass","protoProps","staticProps"],"mappings":"8FAAe,SAASA,EAAgBC,EAAUC,GAChD,KAAMD,aAAoBC,GACxB,MAAM,IAAIC,UAAU,qCAFxB,mC,kCCAe,SAASC,EAAgBC,EAAGC,GAMzC,OALAF,EAAkBG,OAAOC,gBAAkB,SAAyBH,EAAGC,GAErE,OADAD,EAAEI,UAAYH,EACPD,IAGcA,EAAGC,GCLb,SAASI,EAAUC,EAAUC,GAC1C,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIT,UAAU,sDAGtBQ,EAASE,UAAYN,OAAOO,OAAOF,GAAcA,EAAWC,UAAW,CACrEE,YAAa,CACXC,MAAOL,EACPM,UAAU,EACVC,cAAc,KAGdN,GAAY,EAAeD,EAAUC,G,8tBCTrCO,E,wCAEJ,WAAYC,GAAO,kCACjB,cAAMA,IACDC,SAAW,EAAKD,MAAMC,WAAY,EACvC,EAAKC,eAAiBC,IAAMC,YAC5B,EAAKC,eAAiBF,IAAMC,YAC5B,EAAKE,aAAe,EAAKA,aAAaC,KAAlB,gBACpB,EAAKC,QAAU,EAAKA,QAAQD,KAAb,gBACf,EAAKE,MAAQ,EAAKT,MAAMS,MACxB,EAAKC,OAAS,EAAKV,MAAMU,OAAS,EAAKV,MAAMU,OAAS,KACtD,EAAKC,OAAS,EAAKX,MAAMW,OAAS,EAAKX,MAAMW,OAAS,IACtD,EAAKC,MAAQ,EAAKZ,MAAMY,MAAQ,EAAKZ,MAAMY,MAAQ,IAVlC,E,yDAaNC,GACXC,KAAKN,QAAQK,EAAME,U,8BAGbC,GACNC,QAAQD,MAAM,aAAcA,EAAME,KAAM,SAAUF,K,0CAKlDG,IAAMC,SAASC,aAGXF,IAAMG,OAAOC,qBAEfT,KAAKU,aAGLP,QAAQD,MAAM,4B,0KAMVS,EAAQX,KAAKZ,eAAewB,QAC5BrB,EAAiBS,KAAKT,eAAeqB,SACvCC,EAAS,IAAIR,IAAMG,OAAOG,IAGvBG,UAAU,wBAAyB,MAC1CD,EAAOC,UAAU,yBAA0B,MAC3B,GACM,IACtBD,EAAOC,UAAU,0BADK,MAIhBC,EAAK,IAAIV,IAAMU,GAAGC,QAAQH,EAAQtB,EAAgBoB,IACrDM,cACGC,EAAW,CACfC,kBAAkB,EAClBC,qBAAsB,CACpB,aAAc,oBAAqB,SAAU,OAAQ,SAAU,aAAc,iBAE/EC,oBAAqB,CAAC,OAAQ,UAAW,uBAE3CN,EAAGD,UAAUI,GAGbL,EAAOS,iBAAiB,QAAStB,KAAKR,cAGlB,EACA,EACd+B,EAAWvB,KAAKL,MAAQK,KAAKL,MAAM6B,YAAYC,MAAK,SAAAC,GACxD,OAHkB,IAGXA,EAAQC,sBACZ,KACCC,EAAW5B,KAAKL,MAAQK,KAAKL,MAAM6B,YAAYC,MAAK,SAAAC,GACxD,OALkB,IAKXA,EAAQC,sBACZ,K,UACiBtB,IAAMG,OAAOqB,e,QAA7BC,E,OACAC,EAAcD,EAAQE,SAASC,KAAOL,EAAWA,EAASM,IAC9DX,EAAWA,EAASW,IAAM,KAS5B/B,QAAQgC,IAAI,YAAcL,EAAQE,SAASC,IAAM,MAAQ,OAAQF,GAIjElB,EAAOuB,KAAKL,GAAaM,MAAK,WAE5BlC,QAAQgC,IAAI,qCAFd,MAGSnC,KAAKN,S,sIAId,OACE,SAAiC4C,IAAKtC,KAAKT,eAA3C,4CACE,WACEJ,SAAUa,KAAKb,SAEfU,OAAQG,KAAKH,OACb0C,OAAQC,IACR5C,OAAQI,KAAKJ,OACb0C,IAAKtC,KAAKZ,eACVqD,MAAO,CAAEC,QAAS,GAClB5C,MAAOE,KAAKF,MARd,0CADF,wgB,GAjGoBT,IAAMsD,eA+HjB1D,a,kCCnIA,SAAS2D,EAAQC,GAa9B,OATED,EADoB,oBAAXE,QAAoD,kBAApBA,OAAOC,SACtC,SAAiBF,GACzB,cAAcA,GAGN,SAAiBA,GACzB,OAAOA,GAAyB,oBAAXC,QAAyBD,EAAIhE,cAAgBiE,QAAUD,IAAQC,OAAOnE,UAAY,gBAAkBkE,IAI9GA,GAbjB,mC,kCCAe,SAASG,EAAgB7E,GAItC,OAHA6E,EAAkB3E,OAAOC,eAAiBD,OAAO4E,eAAiB,SAAyB9E,GACzF,OAAOA,EAAEI,WAAaF,OAAO4E,eAAe9E,KAEvBA,GAJzB,mC,kCCAA,8DAEe,SAAS+E,EAA2BC,EAAMC,GACvD,OAAIA,GAA2B,WAAlB,YAAQA,IAAsC,oBAATA,EAI3C,YAAsBD,GAHpBC,I,kCCJX,SAASC,EAAkBC,EAAQpE,GACjC,IAAK,IAAIqE,EAAI,EAAGA,EAAIrE,EAAMsE,OAAQD,IAAK,CACrC,IAAIE,EAAavE,EAAMqE,GACvBE,EAAWC,WAAaD,EAAWC,aAAc,EACjDD,EAAWzE,cAAe,EACtB,UAAWyE,IAAYA,EAAW1E,UAAW,GACjDV,OAAOsF,eAAeL,EAAQG,EAAWG,IAAKH,IAInC,SAASI,EAAa7F,EAAa8F,EAAYC,GAG5D,OAFID,GAAYT,EAAkBrF,EAAYW,UAAWmF,GACrDC,GAAaV,EAAkBrF,EAAa+F,GACzC/F,EAbT","file":"static/chunks/74.5538c6d7a52cc652b1e0.js","sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import React from 'react'\nimport shaka from 'shaka-player/dist/shaka-player.ui.js' // no SSR support\nimport { IS_PRODUCTION } from '~/constants/constants'\n\nclass ShakaPlayer extends React.PureComponent\n{\n  constructor(props) {\n    super(props)\n    this.autoPlay = this.props.autoPlay || true\n    this.videoComponent = React.createRef()\n    this.videoContainer = React.createRef()\n    this.onErrorEvent = this.onErrorEvent.bind(this)\n    this.onError = this.onError.bind(this)\n    this.media = this.props.media\n    this.poster = this.props.poster ? this.props.poster : null\n    this.height = this.props.height ? this.props.height : 400\n    this.width = this.props.width ? this.props.width : 600\n  }\n\n  onErrorEvent(event) {\n    this.onError(event.detail)\n  }\n\n  onError(error) {\n    console.error('Error code', error.code, 'object', error)\n  }\n\n  componentDidMount(){\n    // Install built-in polyfills to patch browser incompatibilities.\n    shaka.polyfill.installAll()\n\n    // Check to see if the browser supports the basic APIs Shaka needs.\n    if (shaka.Player.isBrowserSupported()) {\n      // Everything looks good!\n      this.initPlayer()\n    } else {\n      // This browser does not have the minimum set of APIs we need.\n      console.error('Browser not supported!')\n    }\n  }\n\n  async initPlayer() {\n    // Create a Player instance.\n    const video = this.videoComponent.current\n    const videoContainer = this.videoContainer.current\n    var player = new shaka.Player(video)\n\n    // player language configurations\n    player.configure('preferredTextLanguage', 'es')\n    player.configure('preferredAudioLanguage', 'es')\n    const minutes = 10\n    const bufferingGoal = 60 * minutes\n    player.configure('streaming.bufferingGoal', bufferingGoal)\n\n\t\t//Setting up shaka player UI\n    const ui = new shaka.ui.Overlay(player, videoContainer, video)\n    ui.getControls()\n    const uiConfig = {\n      addBigPlayButton: false,\n      controlPanelElements: [\n        'play_pause', 'time_and_duration', 'spacer', 'mute', 'volume', 'fullscreen', 'overflow_menu',\n      ],\n      overflowMenuButtons: ['cast', 'quality', 'picture_in_picture'],\n    }\n    ui.configure(uiConfig)\n\n    // Listen for error events.\n    player.addEventListener('error', this.onErrorEvent)\n\n    // Determine if it must load mpd or hls\n    const hls_type_id = 1\n    const mpd_type_id = 2\n    const hls_link = this.media ? this.media.movie_links.find(element => {\n      return element.movie_link_type_id === hls_type_id\n    }) : null\n    const mpd_link = this.media ? this.media.movie_links.find(element => {\n      return element.movie_link_type_id === mpd_type_id\n    }) : null\n    const support = await shaka.Player.probeSupport();\n    const manifestUri = support.manifest.mpd && mpd_link ? mpd_link.url :\n      hls_link ? hls_link.url : null\n\n    /* esse funciona: */\n    // const manifestUri = 'https://s3-us-west-1.amazonaws.com/videos.in/dale/dash/la+copa+eterna.mpd'\n\n    /* esses non: */\n    // const manifestUri = 'https://story-video-out.s3-us-west-1.amazonaws.com/teste/DASHIndex.mpd'\n    // const manifestUri = 'https://story-video-out.s3-us-west-1.amazonaws.com/teste/HLSIndex.m3u8'\n\n    console.log('Suporta ' + (support.manifest.mpd ? 'mpd' : 'hls'), manifestUri)\n\n    // Try to load a manifest.\n    // This is an asynchronous process.\n    player.load(manifestUri).then(function() {\n      // This runs if the asynchronous load is successful.\n      console.log('The video has now been loaded!')\n    }).catch(this.onError)  // onError is executed if the asynchronous load fails.\n  }\n\n  render() {\n    return (\n      <div className=\"video-container\" ref={this.videoContainer}>\n        <video\n          autoPlay={this.autoPlay}\n          className='video-player'\n          height={this.height}\n          muted={!IS_PRODUCTION}\n          poster={this.poster}\n          ref={this.videoComponent}\n          style={{ outline: 0 }}\n          width={this.width}\n        />\n        <style jsx>{`\n          .video-container :global(.shaka-bottom-controls) {\n            display: flex;\n            flex-direction: column;\n          }\n          .video-container :global(.shaka-bottom-controls .shaka-controls-button-panel) {\n            order: 2;\n            width: 100%;\n          }\n          .video-container :global(.shaka-bottom-controls .shaka-seek-bar-container) {\n            order: 1;\n            width: 100%;\n          }\n        `}</style>\n      </div>\n    )\n  }\n}\n\nexport default ShakaPlayer\n","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}"],"sourceRoot":""}