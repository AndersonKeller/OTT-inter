{"version":3,"sources":["webpack:///./node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?69b1","webpack:///./pages/samples/payments/js-api.js"],"names":["window","__NEXT_P","push","Page","POS","errorCode","layoutProps","onToken","result","json","JSON","parse","console","log","token","useEffect","script","document","createElement","src","async","onload","setPublicKey","setEnvironment","scriptLoaded","body","appendChild","color","CONFIG","appName","id","method","onSubmit","event","preventDefault","data","token_type","getElementById","value","holder_name","expiration_date","card_number","credit_card_cvv","custom_data","tokenize","type","placeholder","required","defaultValue","getInitialProps","_","IS_PRODUCTION"],"mappings":"gFACKA,OAAOC,SAAWD,OAAOC,UAAY,IAAIC,KAAK,CAC7C,2BACA,WACE,OAAO,EAAQ,Y,2JCGjBC,EAAO,SAAC,GAA+B,IAEvCC,EAFUC,EAA6B,EAA7BA,UAAWC,EAAkB,EAAlBA,YAiBzB,SAASC,EAAQC,GACf,IAAMC,EAAOC,KAAKC,MAAMH,GAExB,GADAI,QAAQC,IAAKJ,GACTA,EAAKK,aAgEX,OARAC,qBAAU,WACR,IAAMC,EAASC,SAASC,cAAc,UACtCF,EAAOG,IANW,mDAOlBH,EAAOI,OAAQ,EACfJ,EAAOK,OAAS,kBAnBlB,WAIE,KADAjB,EAAMJ,OAAOI,KAEX,OAAOQ,QAAQC,IAAI,mBAErBT,EAAIkB,aAL0B,wCAM9BlB,EAAImB,eAPY,QAkBMC,IACtBP,SAASQ,KAAKC,YAAYV,MAI1B,EAAC,IAAD,aAAQW,MAAM,QAAQtB,UAAWA,GAAeC,GAC9C,EAAC,IAAD,KACE,oCAA6BsB,IAAOC,UAFxC,WAKI,UAAMC,GAAG,eAAeC,OAAO,OAAOC,SAtF5C,SAAkBC,GAChBA,EAAMC,iBACN,IAAMC,EAAO,CACXC,WAAYnB,SAASoB,eAAe,cAAcC,MAClDC,YAAatB,SAASoB,eAAe,eAAeC,MACpDE,gBAAiBvB,SAASoB,eAAe,mBAAmBC,MAC5DG,YAAaxB,SAASoB,eAAe,eAAeC,MACpDI,gBAAiBzB,SAASoB,eAAe,mBAAmBC,MAC5DK,YAAa1B,SAASoB,eAAe,UAAUC,OAEjDlC,EAAIwC,SAAST,EAAM5B,KA+Eb,WAAOsC,KAAK,OAAOf,GAAG,SAASgB,YAAY,2BAG3C,aACE,WACEhB,GAAG,cACHgB,YAAY,WACZC,UAAQ,EACRF,KAAK,OACLG,aAAa,cAGjB,aACE,WACElB,GAAG,aACHgB,YAAY,cACZC,UAAQ,EACRF,KAAK,OACLG,aAAa,iBAGjB,aACE,WACElB,GAAG,kBACHgB,YAAY,YACZC,UAAQ,EACRF,KAAK,OACLG,aAAa,aAGjB,aACE,WACElB,GAAG,cACHgB,YAAY,cACZC,UAAQ,EACRF,KAAK,OACLG,aAAa,sBAGjB,aACE,WACElB,GAAG,kBACHgB,YAAY,MACZD,KAAK,OACLG,aAAa,SAIjB,YAAQH,KAAK,UAAb,UAMV1C,EAAK8C,gBAAkB,SAAAC,GACrB,GAAIC,IAAe,CAEjB,MAAO,CAAE9C,UADS,OAKPF,c","file":"static/dcIpIIp8RItFYv6DrvSvo/pages/samples/payments/js-api.js","sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/samples/payments/js-api\",\n      function () {\n        return require(\"private-next-pages/samples/payments/js-api.js\");\n      }\n    ]);\n  ","\nimport Head from 'next/head'\nimport Layout from '../../../components/layout/Layout'\nimport { CONFIG } from '../../../config'\nimport { useEffect } from 'react'\nimport { IS_PRODUCTION } from '../../../constants/constants'\n\nconst Page = ({ errorCode, layoutProps }) => {\n\n  let POS\n\n  function onSubmit(event) {\n    event.preventDefault();\n    const data = {\n      token_type: document.getElementById('token_type').value,\n      holder_name: document.getElementById('holder_name').value,\n      expiration_date: document.getElementById('expiration_date').value,\n      card_number: document.getElementById('card_number').value,\n      credit_card_cvv: document.getElementById('credit_card_cvv').value,\n      custom_data: document.getElementById('custom').value,\n    }\n    POS.tokenize(data, onToken)\n  }\n\n  function onToken(result) {\n    const json = JSON.parse(result)\n    console.log (json);\n    if (json.token) {\n      // sample response:\n      /* {\n        \"token\":\"3c82255a-7986-405b-9721-11be1d3ab6ed\",\n        \"created\":\"1575914964507\",\n        \"pass_luhn_validation\":true,\n        \"encrypted_cvv\":\"NjI0MzdmN2UtOGUwYS00MWVmLWFkZTItOGYyMDRhNjQ4YWRiY3Z2X2RlbGltaXRlcnZhdWx0OnYxOnIzd1g0aGowbXZ5NS9nQ2lPb2ZlR29tR2FDcnZHYVJEalUrTzJreTVxQ2VaSVNLSVpxNnRCSlNJQi9mVmV6am5zdzI1a3lLbFpwR2hSQjRLRExOZzVqWFBZYWtmdC9iVTE5MVZvU01y\",\n        \"token_type\":\"credit_card\",\n        \"type\":\"tokenized\",\n        \"state\":\"created\",\n        \"bin_number\":\"550209\",\n        \"vendor\":\"MASTERCARD\",\n        \"card_type\":\"CREDIT\",\n        \"issuer\":\"NU PAGAMENTOS SA\",\n        \"level\":\"GOLD\",\n        \"country_code\":\"BRA\",\n        \"holder_name\":\"Giovanni\",\n        \"expiration_date\":\"08/2027\",\n        \"last_4_digits\":\"3362\"\n      } */\n    } else {\n      const possibleErrors = [\n        {\n          category: \"client_validation_error\",\n          description: \"Invalid PAN\",\n          more_info: \"Card number did not pass luhn validation\"\n        },\n        {\n          category: \"client_validation_error\",\n          description: \"Invalid expiration date\",\n          more_info: \"expiration date have passed\"\n        },\n        {\n          category: \"client_validation_error\",\n          description: \"Missing required parameters\",\n          more_info: \"holder_name field is mandatory\"\n        },\n      ]\n    }\n  }\n\n  function scriptLoaded() {\n    const payUEnv = 'test'\n    const businessUnitPublicKey = '88985036-6530-4b5a-a7ec-c4e07ec07f6c'\n    POS = window.POS\n    if ( ! POS) {\n      return console.log('POS not defined')\n    }\n    POS.setPublicKey(businessUnitPublicKey)\n    POS.setEnvironment(payUEnv)\n  }\n\n  const latestJSApi = 'https://js.paymentsos.com/v2/latest/token.min.js'\n  const specifiedJSApi = 'https://js.paymentsos.com/v2/0.0.1/token.min.js'\n  const jsApi = latestJSApi || specifiedJSApi\n\n  useEffect(() => {\n    const script = document.createElement(\"script\")\n    script.src = jsApi\n    script.async = true\n    script.onload = () => scriptLoaded()\n    document.body.appendChild(script)\n  })\n\n  return (\n    <Layout color=\"white\" errorCode={errorCode} {...layoutProps}>\n      <Head>\n        <title>Payments Sample &lt; {CONFIG.appName}</title>\n      </Head>\n        Payments\n        <form id=\"payment-form\" method=\"post\" onSubmit={onSubmit}>\n\n          {/* custom additional data */}\n          <input type=\"text\" id=\"custom\" placeholder=\"Custom Additional Data\" />\n\n          {/* mandatory data */}\n          <div>\n            <input\n              id=\"holder_name\"\n              placeholder=\"John Doe\"\n              required\n              type=\"text\"\n              defaultValue=\"John Doe\"\n            />\n          </div>\n          <div>\n            <input\n              id=\"token_type\"\n              placeholder=\"Holder Type\"\n              required\n              type=\"text\"\n              defaultValue=\"credit_card\"\n            />\n          </div>\n          <div>\n            <input\n              id=\"expiration_date\"\n              placeholder=\"Exp. Date\"\n              required\n              type=\"text\"\n              defaultValue=\"09-2019\"\n            />\n          </div>\n          <div>\n            <input\n              id=\"card_number\"\n              placeholder=\"Card Number\"\n              required\n              type=\"text\"\n              defaultValue=\"4111111111111111\"\n            />\n          </div>\n          <div>\n            <input\n              id=\"credit_card_cvv\"\n              placeholder=\"CVV\"\n              type=\"text\"\n              defaultValue=\"123\"\n            />\n          </div>\n\n          <button type=\"submit\">Pay</button>\n        </form>\n    </Layout>\n  )\n}\n\nPage.getInitialProps = _ => {\n  if (IS_PRODUCTION) {\n    const errorCode = 404\n    return { errorCode }\n  }\n}\n\nexport default Page\n"],"sourceRoot":""}