{"version":3,"sources":["webpack:///./components/layout/changePassword/index.js","webpack:///./pages/user/changePassword.js","webpack:///./node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?c27a"],"names":["StyleChangePassword","styled","div","DataForm","isSubmitting","status","className","error","CardLogoHeader","class","FormGroup","name","type","label","autoComplete","disabled","loading","getYupSchema","_","nullable8CharMinString","Yup","nullable","required","min","password","max","password_confirmation","oneOf","oldpassword","withAuth","layoutProps","user","handleSubmit","fields","actions","a","msg","undefined","api","post","email","username","message","data","success","errors","response","setErrors","console","log","JSON","stringify","nookies","set","path","Router","push","Layout","CONFIG","appName","initialValues","validationSchema","onSubmit","component","window","__NEXT_P"],"mappings":"oVAEaA,E,UAAsBC,EAAOC,IAAV,sFAAGD,CAAH,iuB,ymBCmBhC,IA+DME,EAAW,SAAC,GAAD,IAAGC,EAAH,EAAGA,aAAcC,EAAjB,EAAiBA,OAAjB,OAA8B,EAAC,IAAD,KAC5CA,GAAU,SAAKC,UAAU,oBAAmB,YAAKD,EAAOE,QACzD,EAACC,EAAA,EAAD,KACE,EAACR,EAAD,KACE,QAAIM,UAAU,MAAd,4BAEA,SAAKG,MAAM,UACT,SAAKH,UAAU,OACb,EAACI,EAAA,EAAD,KACE,EAAC,IAAD,CAASC,KAAK,WAAWC,KAAK,SAC5BC,MAAM,WAAWC,aAAa,eAGpC,SAAKR,UAAU,OACb,EAACI,EAAA,EAAD,KACE,EAAC,IAAD,CAASC,KAAK,cAAcC,KAAK,WAC/BC,MAAM,yBAAsBC,aAAa,uBAG/C,SAAKR,UAAU,OACb,EAACI,EAAA,EAAD,KACE,EAAC,IAAD,CAASC,KAAK,WAAWC,KAAK,WAC5BC,MAAM,sBAAmBC,aAAa,oBAI9C,SAAKR,UAAU,iBACb,SAAKA,UAAU,UACb,EAACI,EAAA,EAAD,KACE,EAAC,IAAD,CAASC,KAAK,wBAAwBC,KAAK,WACzCC,MAAM,gCAA6BC,aAAa,kBAEpD,cAEF,SAAKR,UAAU,iBACb,EAAC,IAAD,CAAQM,KAAK,SAASG,SAAUX,EAAcY,QAASZ,GAAvD,iBAWJa,EAAe,SAAAC,GACnB,IAAMC,EAAyBC,MAC5BC,WAAWC,SAAS,eACpBC,IAAI,EAAG,oCAEV,OAAOH,IAAW,CAChBI,SAAUL,EACPM,IAAI,IAAK,qCACZC,sBAAuBP,EACpBM,IAAI,IAAK,qCACTE,MAAM,CAACP,IAAQ,YAAa,MAAO,sCACtCQ,YAAaR,MAAaC,cAIfQ,uBA5HM,SAAC,GAA0B,IAmCnC,EAnCWC,EAAwB,EAAxBA,YAAaC,EAAW,EAAXA,KAE7BC,EAAY,uCAAG,WAAOC,EAAQC,GAAf,uBAAAC,EAAA,6DACfC,OAAMC,EADS,kBAImBC,cAAMC,KAAK,WAAX,GAClCC,MAAOP,EAAOQ,UACXR,IANY,gBAIDS,EAJC,EAITC,KAAQD,QAIhBN,EAAM,CAAEQ,QAASF,GAAW,6BARX,gDAUYG,EAVZ,KAURC,SAAYH,KAAQE,OAAqBtC,EAVjC,KAUwBmC,QACzCN,EAAMS,EACJX,EAAQa,UAAUF,GAAU,CAAEtC,MAAO,+EAEvCyC,QAAQC,IAAI1C,GAdK,yBAiBb6B,IACFA,EAAMc,KAAKC,UAAUf,GACrBgB,IAAQC,IAAI,GAAI,gBAAiBjB,EAAK,CAAEkB,KAAM,MAC9CC,IAAOC,KAAK,kBApBG,4EAAH,wDAyBlB,OACE,EAACC,EAAA,EAAW3B,EACV,EAAC,IAAD,KACE,6CAAmC4B,IAAOC,UAE3C5B,GACC,EAAC,IAAD,CACE6B,eACG,EAEE7B,EADM,CAAEU,SADe,EAAtBD,MACiBZ,YAAa,GAAIJ,SAAU,GAAIE,sBAAuB,KAG7EmC,iBAAkB5C,IAClB6C,SAAU9B,EACV+B,UAAW5D,S,sBC7DhB6D,OAAOC,SAAWD,OAAOC,UAAY,IAAIT,KAAK,CAC7C,uBACA,WACE,OAAO,EAAQ,a","file":"static/dcIpIIp8RItFYv6DrvSvo/pages/user/changePassword.js","sourcesContent":["\nimport styled from 'styled-components'\nexport const StyleChangePassword = styled.div`\n\n\n    padding:20px;\n\n     label {\n        color: var(--black);\n        text-align: initial;\n\n     }\n     hr {\n       background: var(--black);\n     }\n     .row {\n       width:100%;\n       padding-top:20px;\n\n     }\n\n     .aling-button {\n       padding:  20px 0px 5px 0px;\n     }\n\n     .form-group {\n       width:100%;\n     }\n\n     .btn {\n      background-color: var(--primary);\n      height: 34px;\n      padding: 0px!important;\n      font-size: 15px;\n      width: 150px;\n    }\n\n    .row-aling {\n       display: flex;\n       flex-wrap: inherit;\n    }\n\n\n    .row-aling {\n      justify-content:  space-between;\n    }\n\n\n     h1 {\n        display: flex;\n        justify-content: center;\n        color: black;\n        padding:10px;\n        text-align: center;\n\n     }\n\n     .painel {\n        width: 58%;\n     }\n\n    @media(max-width:765px) {\n      label {\n        text-align: initial;\n      }\n\n      .painel {\n       width: 100%;\n       justify-content: center;\n       display: contant;\n      }\n\n      .row-aling {\n      justify-content:center\n      }\n      .input-aling {\n         width: 88%;\n\n      }\n      .row {\n            display: contents;\n      }\n\n      .btn {\n        padding: 7px;\n\n      }\n\n      .aling-button {\n        display: flex;\n       justify-content: center;\n      }\n\n\n    }\n\n\n    }\n\n\n\n`\n\n\n\n\n","// nextjs imports\nimport Router from 'next/router'\nimport Head from 'next/head'\n// import Link   from 'next/link'\n\n// react imports\nimport { Formik, Form } from 'formik'\nimport * as Yup from 'yup'\nimport nookies from 'nookies'\n\n// app imports\nimport FormGroup from '~/components/layout/AuthModal/FormGroup'\nimport withAuth from '~/components/withAuth'\nimport { FkInput } from '~/components/Formik/fields'\nimport Layout from '~/components/layout/Layout'\nimport Button from '~/components/button'\nimport api from '~/services/api'\nimport { CONFIG } from '~/config'\nimport { StyleChangePassword } from '~/components/layout/changePassword/index'\nimport CardLogoHeader from '~/components/CardLogoHeader/index'\n\nconst passwordPage = ({ layoutProps, user }) => {\n\n  const handleSubmit = async (fields, actions) => {\n    var msg = undefined\n\n    try {\n      const { data: { message } } = await api().post('password', {\n        email: fields.username,\n        ...fields\n      })\n      msg = { success: message || \"Cambio de datos completo.\" }\n\n    } catch ({ response: { data: { errors } }, message: error }) {\n      msg = errors ?\n        actions.setErrors(errors) : { error: 'Problemas al realizar esta operación. Inténtalo de nuevo más tarde' }\n\n      console.log(error)\n\n    } finally {\n      if (msg) {\n        msg = JSON.stringify(msg)\n        nookies.set({}, 'flash_message', msg, { path: '/' })\n        Router.push('/user/account')\n      }\n    }\n  }\n\n  return (\n    <Layout {...layoutProps}>\n      <Head>\n        <title>Cambiar la Contraseña &lt; {CONFIG.appName}</title>\n      </Head>\n      {user &&\n        <Formik\n          initialValues={\n            (({ email: username }) => {\n              return { username, oldpassword: '', password: '', password_confirmation: '' }\n            })(user)\n          }\n          validationSchema={getYupSchema()}\n          onSubmit={handleSubmit}\n          component={DataForm}\n        />\n      }\n      {/* <style jsx>{`\n        .rgpage {\n          padding-top: 40px;\n          padding-bottom: 120px;\n        }\n        .h2 {\n          margin-bottom: 10px;\n        }\n        hr {\n          margin-top: 25px;\n          margin-bottom: 15px;\n          background-color: white;\n        }\n      `}</style> */}\n    </Layout>\n  );\n\n}\n\nconst DataForm = ({ isSubmitting, status }) => <Form>\n  {status && <div className=\"invalid-feedback\"><h5>{status.error}</h5></div>}\n  <CardLogoHeader>\n    <StyleChangePassword>\n      <h1 className=\"h2\">Cambiar la contraseña</h1>\n\n      <div class=\"painel\">\n        <div className=\"row\" >\n          <FormGroup>\n            <FkInput name=\"username\" type=\"hidden\"\n              label=\"Username\" autoComplete=\"username\" />\n          </FormGroup>\n        </div>\n        <div className=\"row\" >\n          <FormGroup>\n            <FkInput name=\"oldpassword\" type=\"password\"\n              label=\"Contraseña anterior\" autoComplete=\"current-password\" />\n          </FormGroup>\n        </div>\n        <div className=\"row\" >\n          <FormGroup>\n            <FkInput name=\"password\" type=\"password\"\n              label=\"Nueva contraseña\" autoComplete=\"new-password\" />\n          </FormGroup>\n        </div>\n      </div>\n      <div className=\"row row-aling\">\n        <div className=\"painel\">\n          <FormGroup >\n            <FkInput name=\"password_confirmation\" type=\"password\"\n              label=\"Confirmar nueva contraseña\" autoComplete=\"new-password\" />\n          </FormGroup>\n          <hr />\n        </div>\n        <div className=\" aling-button\">\n          <Button type=\"submit\" disabled={isSubmitting} loading={isSubmitting}>\n            Aceptar\n      </Button>\n        </div>\n      </div>\n\n    </StyleChangePassword>\n  </CardLogoHeader >\n</Form >\n\n// create Yup validation Schema\nconst getYupSchema = _ => {\n  const nullable8CharMinString = Yup.string()\n    .nullable().required('Obligatorio')\n    .min(8, 'Debe tener 8 caracteres o más');\n\n  return Yup.object({\n    password: nullable8CharMinString\n      .max(255, 'Debe tener 255 caracteres o menos'),\n    password_confirmation: nullable8CharMinString\n      .max(255, 'Debe tener 255 caracteres o menos')\n      .oneOf([Yup.ref('password'), null], 'Las contraseñas deben coincidir'),\n    oldpassword: Yup.string().nullable(),\n  })\n}\n\nexport default withAuth(passwordPage)\n","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/user/changePassword\",\n      function () {\n        return require(\"private-next-pages/user/changePassword.js\");\n      }\n    ]);\n  "],"sourceRoot":""}