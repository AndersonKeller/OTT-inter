{"version":3,"sources":["webpack:///./pages/samples/payments/ssf.js","webpack:///./node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?11bc"],"names":["Page","POS","errorCode","layoutProps","useEffect","script","document","createElement","src","async","onload","window","console","log","setPublicKey","setEnvironment","initSecureFields","scriptLoaded","body","appendChild","color","CONFIG","appName","id","method","onSubmit","event","preventDefault","additionalData","holder_name","getElementById","value","custom_data","createToken","result","JSON","parse","token","type","placeholder","required","getInitialProps","_","IS_PRODUCTION","__NEXT_P","push"],"mappings":"uNAOMA,EAAO,SAAC,GAA+B,IACvCC,EADUC,EAA6B,EAA7BA,UAAWC,EAAkB,EAAlBA,YAqEzB,OAPAC,qBAAU,WACR,IAAMC,EAASC,SAASC,cAAc,UACtCF,EAAOG,IAAM,2DACbH,EAAOI,OAAQ,EACfJ,EAAOK,OAAS,kBAflB,WAIE,KADAT,EAAMU,OAAOV,KAEX,OAAOW,QAAQC,IAAI,mBAErBZ,EAAIa,aAL0B,wCAM9Bb,EAAIc,eAPY,QAQhBd,EAAIe,iBAAiB,sBAMCC,IACtBX,SAASY,KAAKC,YAAYd,MAG1B,EAAC,IAAD,aAAQe,MAAM,QAAQlB,UAAWA,GAAeC,GAC9C,EAAC,IAAD,KACE,oCAA6BkB,IAAOC,UAFxC,WAKI,UAAMC,GAAG,eAAeC,OAAO,OAAOC,SAzE5C,SAAkBC,GAChBA,EAAMC,iBACN,IAAMC,EAAiB,CACrBC,YAAavB,SAASwB,eAAe,mBAAmBC,MACxDC,YAAa1B,SAASwB,eAAe,UAAUC,OAEjD9B,EAAIgC,YAAYL,GAAgB,SAASM,GAEvC,GADaC,KAAKC,MAAMF,GACfG,kBAoEL,WAAOC,KAAK,OAAOf,GAAG,SAASgB,YAAY,2BAG3C,WAAOhB,GAAG,kBAAkBgB,YAAY,WAAWC,UAAQ,EAACF,KAAK,SAEjE,SAAKf,GAAG,sBACN,uDAEF,YAAQe,KAAK,UAAb,UAMVtC,EAAKyC,gBAAkB,SAAAC,GACrB,GAAIC,IAAe,CAEjB,MAAO,CAAEzC,UADS,OAKPF,a,wBCzGVW,OAAOiC,SAAWjC,OAAOiC,UAAY,IAAIC,KAAK,CAC7C,wBACA,WACE,OAAO,EAAQ,a","file":"static/oWCioDTqjRByfmKTo0Byb/pages/samples/payments/ssf.js","sourcesContent":["\nimport Head from 'next/head'\nimport Layout from '../../../components/layout/Layout'\nimport { CONFIG } from '../../../config'\nimport { useEffect } from 'react'\nimport { IS_PRODUCTION } from '../../../constants/constants'\n\nconst Page = ({ errorCode, layoutProps }) => {\n  let POS\n  function onSubmit(event) {\n    event.preventDefault()\n    const additionalData = {\n      holder_name: document.getElementById('cardholder-name').value,\n      custom_data: document.getElementById('custom').value,\n    }\n    POS.createToken(additionalData, function(result) {\n      const json = JSON.parse(result)\n      if (json.token) {\n        // sample response:\n        /* {\n          \"token\":\"3c82255a-7986-405b-9721-11be1d3ab6ed\",\n          \"created\":\"1575914964507\",\n          \"pass_luhn_validation\":true,\n          \"encrypted_cvv\":\"NjI0MzdmN2UtOGUwYS00MWVmLWFkZTItOGYyMDRhNjQ4YWRiY3Z2X2RlbGltaXRlcnZhdWx0OnYxOnIzd1g0aGowbXZ5NS9nQ2lPb2ZlR29tR2FDcnZHYVJEalUrTzJreTVxQ2VaSVNLSVpxNnRCSlNJQi9mVmV6am5zdzI1a3lLbFpwR2hSQjRLRExOZzVqWFBZYWtmdC9iVTE5MVZvU01y\",\n          \"token_type\":\"credit_card\",\n          \"type\":\"tokenized\",\n          \"state\":\"created\",\n          \"bin_number\":\"550209\",\n          \"vendor\":\"MASTERCARD\",\n          \"card_type\":\"CREDIT\",\n          \"issuer\":\"NU PAGAMENTOS SA\",\n          \"level\":\"GOLD\",\n          \"country_code\":\"BRA\",\n          \"holder_name\":\"Giovanni\",\n          \"expiration_date\":\"08/2027\",\n          \"last_4_digits\":\"3362\"\n        } */\n      } else {\n        const possibleErrors = [\n          {\n            category: \"client_validation_error\",\n            description: \"Invalid PAN\",\n            more_info: \"Card number did not pass luhn validation\"\n          },\n          {\n            category: \"client_validation_error\",\n            description: \"Invalid expiration date\",\n            more_info: \"expiration date have passed\"\n          },\n          {\n            category: \"client_validation_error\",\n            description: \"Missing required parameters\",\n            more_info: \"holder_name field is mandatory\"\n          },\n        ]\n      }\n    })\n  }\n  function scriptLoaded() {\n    const payUEnv = 'test'\n    const businessUnitPublicKey = '88985036-6530-4b5a-a7ec-c4e07ec07f6c'\n    POS = window.POS\n    if ( ! POS) {\n      return console.log('POS not defined')\n    }\n    POS.setPublicKey(businessUnitPublicKey)\n    POS.setEnvironment(payUEnv)\n    POS.initSecureFields('card-secure-fields')\n  }\n  useEffect(() => {\n    const script = document.createElement(\"script\")\n    script.src = \"https://js.paymentsos.com/v2/latest/secure-fields.min.js\"\n    script.async = true\n    script.onload = () => scriptLoaded()\n    document.body.appendChild(script)\n  })\n  return (\n    <Layout color=\"white\" errorCode={errorCode} {...layoutProps}>\n      <Head>\n        <title>Payments Sample &lt; {CONFIG.appName}</title>\n      </Head>\n        Payments\n        <form id=\"payment-form\" method=\"post\" onSubmit={onSubmit}>\n\n          {/* custom additional data */}\n          <input type=\"text\" id=\"custom\" placeholder=\"Custom Additional Data\" />\n\n          {/* mandatory data */}\n          <input id=\"cardholder-name\" placeholder=\"John Doe\" required type=\"text\" />\n\n          <div id=\"card-secure-fields\">\n            <p>The payment form will be displayed here</p>\n          </div>\n          <button type=\"submit\">Pay</button>\n        </form>\n    </Layout>\n  )\n}\n\nPage.getInitialProps = _ => {\n  if (IS_PRODUCTION) {\n    const errorCode = 404\n    return { errorCode }\n  }\n}\n\nexport default Page\n","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/samples/payments/ssf\",\n      function () {\n        return require(\"private-next-pages/samples/payments/ssf.js\");\n      }\n    ]);\n  "],"sourceRoot":""}