{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useContext, useState } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport Head from 'next/head';\nimport Link from 'next/link';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport Collapse from 'react-bootstrap/Collapse';\nimport Button from '~/components/button';\nimport Layout from '~/components/layout/Layout';\nimport MediaLink from '~/components/MediaLink/MediaLink';\nimport WishlistBtn from '~/components/wishlist-btn';\nimport withApi from '~/components/withApi';\nimport UserContext from '~/contexts/UserContext';\nimport { CONFIG } from '~/config';\nimport Chevron from '~/components/icons/chevron';\nimport Color from 'color';\n\nfunction MediaPage1(_ref) {\n  var category = _ref.category,\n      errorCode = _ref.errorCode,\n      layoutProps = _ref.layoutProps,\n      media = _ref.media,\n      related = _ref.related;\n  var appName = CONFIG.appName;\n  var mediaTitle = media.title;\n  var pageTitle = \"\".concat(mediaTitle, \" < \").concat(appName);\n  return __jsx(Layout, _extends({\n    errorCode: errorCode,\n    paddingTop: false\n  }, layoutProps), __jsx(Head, null, __jsx(\"title\", null, pageTitle)), __jsx(Cover, {\n    category: category,\n    media: media\n  }), category && related && __jsx(More, {\n    category: category,\n    related: related\n  }));\n}\n\nMediaPage1.getInitialProps = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(ctx) {\n    var api, query, movieSlug, categorySlug, url, _yield$api$get, data, category, media, related, errorCode;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            api = ctx.api, query = ctx.query;\n            movieSlug = query.slug, categorySlug = query.category;\n            _context.prev = 2;\n            url = \"movie/\".concat(movieSlug) + (categorySlug ? \"/category/\".concat(categorySlug) : '');\n            _context.next = 6;\n            return api.get(url);\n\n          case 6:\n            _yield$api$get = _context.sent;\n            data = _yield$api$get.data;\n            category = data.category, media = data.movie, related = data.related;\n            return _context.abrupt(\"return\", {\n              category: category,\n              media: media,\n              related: related\n            });\n\n          case 12:\n            _context.prev = 12;\n            _context.t0 = _context[\"catch\"](2);\n            errorCode = 404;\n            return _context.abrupt(\"return\", {\n              errorCode: errorCode\n            });\n\n          case 16:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[2, 12]]);\n  }));\n\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nvar Cover = function Cover(_ref3) {\n  var category = _ref3.category,\n      media = _ref3.media;\n\n  var _useState = useState(false),\n      open = _useState[0],\n      setOpen = _useState[1];\n\n  var _useContext = useContext(UserContext),\n      user = _useContext.user;\n\n  var smDown = useMediaQuery('(max-width: 767px)');\n  var probaGratis = CONFIG.lang === 'es-CL' ? 'Prueba gratis' : 'Probá Gratis';\n  var theme = useContext(ThemeContext);\n  var maskColor = Color(theme.colors.background);\n  var _media$detail = media.detail,\n      detail = _media$detail === void 0 ? null : _media$detail,\n      posterUrl = media.poster_url,\n      _media$publish_year = media.publish_year,\n      publishYear = _media$publish_year === void 0 ? null : _media$publish_year,\n      title = media.title;\n  return __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"846428598\", [maskColor.fade(1).string(), maskColor.fade(.075).string(), posterUrl]]]) + \" \" + \"cover container-fluid\"\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"846428598\", [maskColor.fade(1).string(), maskColor.fade(.075).string(), posterUrl]]]) + \" \" + \"row align-items-center\"\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"846428598\", [maskColor.fade(1).string(), maskColor.fade(.075).string(), posterUrl]]]) + \" \" + \"col-12 col-md-5 offset-md-1\"\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"846428598\", [maskColor.fade(1).string(), maskColor.fade(.075).string(), posterUrl]]]) + \" \" + \"info\"\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"846428598\", [maskColor.fade(1).string(), maskColor.fade(.075).string(), posterUrl]]]) + \" \" + \"heading\"\n  }, __jsx(\"h1\", {\n    className: _JSXStyle.dynamic([[\"846428598\", [maskColor.fade(1).string(), maskColor.fade(.075).string(), posterUrl]]]) + \" \" + \"h2\"\n  }, title), publishYear && __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"846428598\", [maskColor.fade(1).string(), maskColor.fade(.075).string(), posterUrl]]]) + \" \" + \"year\"\n  }, publishYear)), detail && __jsx(\"div\", {\n    style: {\n      display: 'flex'\n    },\n    className: _JSXStyle.dynamic([[\"846428598\", [maskColor.fade(1).string(), maskColor.fade(.075).string(), posterUrl]]]) + \" \" + \"description\"\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"846428598\", [maskColor.fade(1).string(), maskColor.fade(.075).string(), posterUrl]]]) + \" \" + (smDown && !open && 'short-description' || \"\")\n  }, smDown && !open && detail.replace(/^([\\s\\S]{70}[^\\s]*)[\\s\\S]*/, \"$1\"), __jsx(Collapse, {\n    \"in\": open || !smDown\n  }, __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"846428598\", [maskColor.fade(1).string(), maskColor.fade(.075).string(), posterUrl]]])\n  }, detail))), __jsx(\"div\", {\n    onClick: function onClick(_) {\n      return setOpen(!open);\n    },\n    \"aria-controls\": \"description\",\n    \"aria-expanded\": open,\n    className: _JSXStyle.dynamic([[\"846428598\", [maskColor.fade(1).string(), maskColor.fade(.075).string(), posterUrl]]]) + \" \" + ('chevron-collapse ' + (!smDown && 'd-none') || \"\")\n  }, __jsx(Chevron, {\n    dir: !open && \"bottom\",\n    alt: \"mas\",\n    className: \"chevron\",\n    height: \"10\",\n    width: \"17\",\n    inline: true\n  })))), !user ? __jsx(Link, {\n    href: \"/subscriptor\"\n  }, __jsx(Button, {\n    block: smDown\n  }, probaGratis)) : __jsx(React.Fragment, null, __jsx(MediaLink, _extends({\n    category: category,\n    media: media\n  }, {\n    watch: true\n  }), __jsx(Button, null, \"Mira\")), __jsx(WishlistBtn, {\n    movieId: media.id\n  })))), __jsx(_JSXStyle, {\n    id: \"846428598\",\n    dynamic: [maskColor.fade(1).string(), maskColor.fade(.075).string(), posterUrl]\n  }, [\".cover.__jsx-style-dynamic-selector{background-color:var(--background);background-position:50% 50%,100% 50%;background-image:radial-gradient(circle at 95% 75%,\".concat(maskColor.fade(1).string(), \" 20%,\").concat(maskColor.fade(.075).string(), \" 60%), url(\").concat(posterUrl, \");background-repeat:no-repeat,no-repeat;background-size:cover,cover;font-size:15px;line-height:1.5;}\"), \".cover.__jsx-style-dynamic-selector .row.__jsx-style-dynamic-selector{padding-top:calc(var(--padding-top) + 15px);padding-bottom:15px;}\", \".heading.__jsx-style-dynamic-selector{margin-bottom:15px;}\", \"h1.__jsx-style-dynamic-selector{font-size:31px;font-weight:bold;line-height:normal;margin-bottom:0;}\", \".year.__jsx-style-dynamic-selector{font-size:1.33em;}\", \".description.__jsx-style-dynamic-selector{color:var(--descriptions-color);}\", \".short-description.__jsx-style-dynamic-selector{margin-bottom:100px;}\", \".short-description.__jsx-style-dynamic-selector:after{content:\\\" . . .\\\";}\", \".cover.__jsx-style-dynamic-selector .btn-primary{margin-right:15px;margin-bottom:0;}\", \".chevron-collapse.__jsx-style-dynamic-selector{padding-left:10px;}\", \"@media (min-width:768px){.cover.__jsx-style-dynamic-selector .row.__jsx-style-dynamic-selector{height:560px;padding-top:var(--padding-top);padding-bottom:30px;}.info.__jsx-style-dynamic-selector{margin-bottom:30px;}.description.__jsx-style-dynamic-selector:after{content:\\\"\\\";}}\"]));\n};\n\nvar HMediaCard = function HMediaCard(_ref4) {\n  var category = _ref4.category,\n      media = _ref4.media;\n  var title = media.title;\n  return __jsx(\"div\", {\n    className: \"jsx-519892674\" + \" \" + \"h-media-card row\"\n  }, __jsx(\"div\", {\n    className: \"jsx-519892674\" + \" \" + \"col-md-4\"\n  }, __jsx(MediaLink, _extends({\n    watch: true\n  }, {\n    category: category,\n    media: media\n  }), __jsx(\"a\", {\n    className: \"jsx-519892674\"\n  }, __jsx(\"img\", {\n    height: \"220\",\n    src: media.thumbnail2_url ? media.thumbnail2_url : '//placehold.jp/390x220.png',\n    width: \"390\",\n    className: \"jsx-519892674\" + \" \" + \"img-fluid w-100 d-block\"\n  })))), __jsx(\"div\", {\n    className: \"jsx-519892674\" + \" \" + \"col-md-5\"\n  }, __jsx(\"h3\", {\n    className: \"jsx-519892674\" + \" \" + \"h3\"\n  }, __jsx(MediaLink, _extends({\n    watch: true\n  }, {\n    category: category,\n    media: media\n  }), __jsx(\"a\", {\n    className: \"jsx-519892674\"\n  }, title))), media.detail && __jsx(\"div\", {\n    className: \"jsx-519892674\" + \" \" + \"description\"\n  }, __jsx(\"p\", {\n    className: \"jsx-519892674\"\n  }, media.detail))), __jsx(_JSXStyle, {\n    id: \"519892674\"\n  }, [\".h-media-card.jsx-519892674{margin-bottom:30px;}\", \".h-media-card.jsx-519892674 a.jsx-519892674{color:var(--white);-webkit-text-decoration:none;text-decoration:none;}\", \".h-media-card.jsx-519892674 img.jsx-519892674{margin-bottom:15px;}\", \".h3.jsx-519892674{font-size:inherit;font-weight:bold;margin-top:15px;margin-bottom:15px;}\", \".h3.jsx-519892674 a.jsx-519892674:focus,.h3.jsx-519892674 a.jsx-519892674:hover{-webkit-text-decoration:underline;text-decoration:underline;}\", \".description.jsx-519892674{color:var(--descriptions-color);font-size:15px;}\", \"@media (min-width:768px){.h-media-card.jsx-519892674{margin-bottom:45px;}.h-media-card.jsx-519892674 img.jsx-519892674{margin-bottom:0;}}\"]));\n};\n\nvar More = function More(_ref5) {\n  var category = _ref5.category,\n      medias = _ref5.related;\n  var categoryName = category.name;\n  var theme = useContext(ThemeContext);\n  var backgroundColor = Color(theme.colors.backgroundContrast).hsl().string();\n  return __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1629699236\", [backgroundColor]]]) + \" \" + \"more container-fluid\"\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1629699236\", [backgroundColor]]]) + \" \" + \"row\"\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1629699236\", [backgroundColor]]]) + \" \" + \"col offset-md-1\"\n  }, __jsx(\"h2\", {\n    className: _JSXStyle.dynamic([[\"1629699236\", [backgroundColor]]]) + \" \" + \"h2 text-uppercase\"\n  }, \"M\\xE1s \", categoryName))), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1629699236\", [backgroundColor]]]) + \" \" + \"cards\"\n  }, medias.map(function (media, i) {\n    return __jsx(HMediaCard, _extends({\n      key: i\n    }, {\n      category: category,\n      media: media\n    }));\n  })), __jsx(_JSXStyle, {\n    id: \"1629699236\",\n    dynamic: [backgroundColor]\n  }, [\".more.__jsx-style-dynamic-selector{background-color:\".concat(backgroundColor, \";font-size:20px;line-height:1.5;padding-top:30px;}\"), \".h2.__jsx-style-dynamic-selector{font-size:30px;margin-top:0;margin-bottom:30px;}\", \".cards.__jsx-style-dynamic-selector{overflow:hidden;}\", \"@media (min-width:768px){.more.__jsx-style-dynamic-selector{padding-top:45px;}.h2.__jsx-style-dynamic-selector{font-size:31px;margin-bottom:60px;}.cards.__jsx-style-dynamic-selector{padding-left:4%;}}\"]));\n};\n\nexport default withApi(MediaPage1);","map":{"version":3,"sources":["/Users/rafael/Projects/somosgad/dale/pages/media/[slug].js"],"names":["useContext","useState","ThemeContext","Head","Link","useMediaQuery","Collapse","Button","Layout","MediaLink","WishlistBtn","withApi","UserContext","CONFIG","Chevron","Color","MediaPage1","category","errorCode","layoutProps","media","related","appName","mediaTitle","title","pageTitle","getInitialProps","ctx","api","query","movieSlug","slug","categorySlug","url","get","data","movie","Cover","open","setOpen","user","smDown","probaGratis","lang","theme","maskColor","colors","background","detail","posterUrl","poster_url","publish_year","publishYear","fade","string","display","replace","_","id","HMediaCard","thumbnail2_url","More","medias","categoryName","name","backgroundColor","backgroundContrast","hsl","map","i"],"mappings":"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","sourcesContent":["import { useContext, useState } from 'react'\nimport { ThemeContext } from 'styled-components'\nimport Head from 'next/head'\nimport Link from 'next/link'\nimport useMediaQuery from '@material-ui/core/useMediaQuery'\nimport Collapse from 'react-bootstrap/Collapse'\nimport Button from '~/components/button'\nimport Layout from '~/components/layout/Layout'\nimport MediaLink from '~/components/MediaLink/MediaLink'\nimport WishlistBtn from '~/components/wishlist-btn'\nimport withApi from '~/components/withApi'\nimport UserContext from '~/contexts/UserContext'\nimport { CONFIG } from '~/config'\nimport Chevron from '~/components/icons/chevron'\nimport Color from 'color'\n\nfunction MediaPage1({ category, errorCode, layoutProps, media, related }) {\n  const { appName } = CONFIG\n  const { title: mediaTitle } = media\n  const pageTitle = `${mediaTitle} < ${appName}`\n  return (\n    <Layout errorCode={errorCode} paddingTop={false} {...layoutProps}>\n      <Head>\n        <title>{pageTitle}</title>\n      </Head>\n      <Cover category={category} media={media} />\n      {category && related && (\n        <More category={category} related={related} />\n      )}\n    </Layout>\n  )\n}\n\nMediaPage1.getInitialProps = async ctx => {\n  const { api, query } = ctx\n  const { slug: movieSlug, category: categorySlug } = query;\n  try {\n    const url = `movie/${movieSlug}` + (categorySlug ? `/category/${categorySlug}` : '')\n    const { data } = await api.get(url)\n    const { category, movie: media, related } = data\n    return { category, media, related }\n  } catch (error) {\n    const errorCode = 404\n    return { errorCode }\n  }\n}\n\nconst Cover = ({ category, media }) => {\n  const [open, setOpen] = useState(false)\n  const { user } = useContext(UserContext)\n  const smDown = useMediaQuery('(max-width: 767px)')\n  const probaGratis = CONFIG.lang === 'es-CL' ? 'Prueba gratis' : 'Probá Gratis'\n  const theme = useContext(ThemeContext)\n  const maskColor = Color(theme.colors.background)\n  const {\n    detail = null,\n    poster_url: posterUrl,\n    publish_year: publishYear = null,\n    title,\n  } = media\n  return (\n    <div className=\"cover container-fluid\">\n      <div className=\"row align-items-center\">\n        <div className=\"col-12 col-md-5 offset-md-1\">\n          <div className=\"info\">\n            <div className=\"heading\">\n              <h1 className=\"h2\">{title}</h1>\n              {publishYear && (\n                <div className=\"year\">{publishYear}</div>\n              )}\n            </div>\n            {detail && (\n              <div className=\"description\" style={{display: 'flex'}}>\n                <div className={smDown && !open && 'short-description'}>\n                    { smDown && !open && detail.replace(/^([\\s\\S]{70}[^\\s]*)[\\s\\S]*/, \"$1\") }\n                    <Collapse in={open || !smDown}>\n                      <p>{detail}</p>\n                    </Collapse>\n                </div>\n                <div\n                  className={ 'chevron-collapse ' + (!smDown && 'd-none') }\n                  onClick={_ => setOpen(!open)}\n                  aria-controls=\"description\"\n                  aria-expanded={open}\n                >\n                  <Chevron\n                    dir={!open && \"bottom\"}\n                    alt=\"mas\" className=\"chevron\"\n                    height=\"10\" width=\"17\"\n                    inline\n                  />\n                </div>\n            </div>\n            )}\n          </div>\n\n          { ! user ? (\n            <Link href=\"/subscriptor\">\n              <Button block={smDown}>{probaGratis}</Button>\n            </Link>\n          ) : (\n            <>\n              <MediaLink {...{category, media}} watch>\n                <Button>Mira</Button>\n              </MediaLink>\n              <WishlistBtn movieId={media.id} />\n            </>\n          ) }\n\n        </div>\n      </div>\n      <style jsx>{`\n        .cover {\n          background-color: var(--background);\n          background-position: 50% 50%, 100% 50%;\n          background-image: radial-gradient(circle at 95% 75%, ${maskColor.fade(1).string()} 20%, ${maskColor.fade(.075).string()} 60%),\n            url(${posterUrl});\n          background-repeat: no-repeat, no-repeat;\n          background-size: cover, cover;\n          font-size: 15px;\n          line-height: 1.5;\n        }\n        .cover .row {\n          padding-top: calc(var(--padding-top) + 15px);\n          padding-bottom: 15px;\n        }\n        .heading {\n          margin-bottom: 15px;\n        }\n        h1 {\n          font-size: 31px;\n          font-weight: bold;\n          line-height: normal;\n          margin-bottom: 0;\n        }\n        .year {\n          font-size: 1.33em;\n        }\n        .description {\n          color: var(--descriptions-color);\n        }\n        .short-description {\n          margin-bottom: 100px;\n        }\n        .short-description :after {\n            content: \" . . .\";\n        }\n        .cover :global(.btn-primary) {\n          margin-right: 15px;\n          margin-bottom: 0;\n        }\n        .chevron-collapse {\n          padding-left: 10px;\n        }\n        @media (min-width: 768px) {\n          .cover .row {\n            height: 560px;\n            padding-top: var(--padding-top);\n            padding-bottom: 30px;\n          }\n          .info {\n            margin-bottom: 30px;\n          }\n          .description:after {\n            content: \"\";\n          }\n        }\n      `}</style>\n    </div>\n  )\n}\n\nconst HMediaCard = ({ category, media }) => {\n  const { title } = media\n  return (\n    <div className=\"h-media-card row\">\n      <div className=\"col-md-4\">\n        <MediaLink watch {...{category, media}}>\n          <a>\n            <img\n              className=\"img-fluid w-100 d-block\"\n              height=\"220\"\n              src={media.thumbnail2_url ? media.thumbnail2_url : '//placehold.jp/390x220.png'}\n              width=\"390\"\n            />\n          </a>\n        </MediaLink>\n      </div>\n      <div className=\"col-md-5\">\n        <h3 className=\"h3\">\n          <MediaLink watch {...{category, media}}>\n            <a>{title}</a>\n          </MediaLink>\n        </h3>\n        {media.detail && (\n          <div className=\"description\">\n            <p>{media.detail}</p>\n          </div>\n        )}\n      </div>\n      <style jsx>{`\n        .h-media-card {\n          margin-bottom: 30px;\n        }\n        .h-media-card a {\n          color: var(--white);\n          text-decoration: none;\n        }\n        .h-media-card img {\n          margin-bottom: 15px;\n        }\n        .h3 {\n          font-size: inherit;\n          font-weight: bold;\n          margin-top: 15px;\n          margin-bottom: 15px;\n        }\n        .h3 a:focus,\n        .h3 a:hover {\n          text-decoration: underline;\n        }\n        .description {\n          color: var(--descriptions-color);\n          font-size: 15px;\n        }\n        @media (min-width: 768px) {\n          .h-media-card {\n            margin-bottom: 45px;\n          }\n          .h-media-card img {\n            margin-bottom: 0;\n          }\n        }\n      `}</style>\n    </div>\n  )\n}\n\nconst More = ({ category, related: medias }) => {\n  const { name: categoryName } = category\n  const theme = useContext(ThemeContext)\n  const backgroundColor = Color(theme.colors.backgroundContrast).hsl().string()\n  return (\n    <div className=\"more container-fluid\">\n      <div className=\"row\">\n        <div className=\"col offset-md-1\">\n          <h2 className=\"h2 text-uppercase\">Más {categoryName}</h2>\n        </div>\n      </div>\n      <div className=\"cards\">\n        { medias.map((media, i) => (\n          <HMediaCard key={i} {...{category, media}} />\n        )) }\n      </div>\n      <style jsx>{`\n        .more {\n          background-color: ${backgroundColor};\n          font-size: 20px;\n          line-height: 1.5;\n          padding-top: 30px;\n        }\n        .h2 {\n          font-size: 30px;\n          margin-top: 0;\n          margin-bottom: 30px;\n        }\n        .cards {\n          overflow: hidden;\n        }\n        @media (min-width: 768px) {\n          .more {\n            padding-top: 45px;\n          }\n          .h2 {\n            font-size: 31px;\n            margin-bottom: 60px;\n          }\n          .cards {\n            padding-left: 4%;\n          }\n        }\n      `}</style>\n    </div>\n  );\n}\n\nexport default withApi(MediaPage1)\n"]},"metadata":{},"sourceType":"module"}