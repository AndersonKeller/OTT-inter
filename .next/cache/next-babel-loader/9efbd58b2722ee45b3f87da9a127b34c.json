{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _s = $RefreshSig$();\n\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useContext, useEffect } from 'react';\nimport nookies from 'nookies';\nimport { toast, ToastContainer } from 'react-toastify';\nimport Header from './Header';\nimport Footer from './Footer';\nimport loadMenus from '~/lib/load-menus';\nimport AuthModal from './AuthModal/AuthModal';\nimport CustomError from '~/pages/_error';\nimport withApi from '../withApi';\nimport Color from \"color\";\nimport { ThemeContext } from \"styled-components\";\nimport { TENANT } from \"~/constants/constants\";\n\nvar Layout = function Layout(_ref) {\n  _s();\n\n  var apiVersion = _ref.apiVersion,\n      children = _ref.children,\n      _ref$color = _ref.color,\n      layoutColor = _ref$color === void 0 ? 'black' : _ref$color,\n      errorCode = _ref.errorCode,\n      header = _ref.header,\n      menus = _ref.menus,\n      menusError = _ref.menusError,\n      _ref$paddingTop = _ref.paddingTop,\n      paddingTop = _ref$paddingTop === void 0 ? true : _ref$paddingTop,\n      _ref$footer = _ref.footer,\n      footer = _ref$footer === void 0 ? '' : _ref$footer,\n      _ref$customClass = _ref.customClass,\n      customClass = _ref$customClass === void 0 ? '' : _ref$customClass;\n  var theme = useContext(ThemeContext);\n  var primaryColor = Color(theme.colors.primary).hsl().string();\n\n  if (errorCode) {\n    return __jsx(CustomError, {\n      statusCode: errorCode\n    });\n  }\n\n  if (header === 'closed') {\n    paddingTop = false;\n  }\n\n  var _nookies$get = nookies.get({}, 'flash_message'),\n      flash_message = _nookies$get.flash_message;\n\n  useEffect(function (_) {\n    if (flash_message) {\n      var messages = JSON.parse(flash_message);\n      console.log(messages);\n      if (messages.error) toast.error(messages.error, {\n        delay: 500,\n        autoClose: 5000\n      });\n      if (messages.success) toast.success(messages.success, {\n        delay: 500,\n        autoClose: 4000\n      });\n      if (messages.info) toast.info(messages.info, {\n        delay: 500,\n        autoClose: 4000\n      });\n      nookies.destroy({}, 'flash_message', {\n        path: '/'\n      });\n    }\n  }, [flash_message]);\n\n  function renderHeader() {\n    if (header !== 'hidden') {\n      return __jsx(Header, {\n        closed: header === 'closed',\n        layoutColor: layoutColor,\n        menus: menusError ? null : menus\n      });\n    }\n\n    paddingTop = false;\n    return null;\n  }\n\n  function renderFooter() {\n    if (footer !== 'hidden') {\n      return __jsx(Footer, {\n        apiVersion: apiVersion,\n        layoutColor: layoutColor\n      });\n    }\n\n    return null;\n  }\n\n  return __jsx(\"div\", {\n    style: {\n      backgroundImage: \"url('/static/\".concat(TENANT, \"/subs/background.jpg')\")\n    },\n    className: _JSXStyle.dynamic([[\"3890659982\", [layoutColor === 'white' ? 'black' : 'white', layoutColor === 'white' ? 'background-color: var(--white) !important;' : '']]]) + \" \" + (customClass || \"\")\n  }, __jsx(ToastContainer, {\n    newestOnTop: true\n  }), renderHeader(), __jsx(\"main\", {\n    className: _JSXStyle.dynamic([[\"3890659982\", [layoutColor === 'white' ? 'black' : 'white', layoutColor === 'white' ? 'background-color: var(--white) !important;' : '']]]) + \" \" + ((!paddingTop ? 'no-padding' : '') || \"\")\n  }, children), renderFooter(), __jsx(AuthModal, null), __jsx(_JSXStyle, {\n    id: \"3890659982\",\n    dynamic: [layoutColor === 'white' ? 'black' : 'white', layoutColor === 'white' ? 'background-color: var(--white) !important;' : '']\n  }, \":root{--color:var(--\".concat(layoutColor === 'white' ? 'black' : 'white', \");}body{\").concat(layoutColor === 'white' ? 'background-color: var(--white) !important;' : '', \");;}main{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;padding-top:var(--padding-top);}main.no-padding{padding-top:0;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9yYWZhZWwvUHJvamVjdHMvc29tb3NnYWQvZGFsZS9jb21wb25lbnRzL2xheW91dC9MYXlvdXQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBMEYwQixBQUl1RCxBQUk5QyxBQUVjLEFBSUUsY0FDaEIsaUJBUEMsYUFIRCwyQkFNaUMsK0JBQ2pDIiwiZmlsZSI6Ii9Vc2Vycy9yYWZhZWwvUHJvamVjdHMvc29tb3NnYWQvZGFsZS9jb21wb25lbnRzL2xheW91dC9MYXlvdXQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VDb250ZXh0LCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCdcbmltcG9ydCBub29raWVzIGZyb20gJ25vb2tpZXMnXG5pbXBvcnQgeyB0b2FzdCwgVG9hc3RDb250YWluZXIgfSBmcm9tICdyZWFjdC10b2FzdGlmeSdcbmltcG9ydCBIZWFkZXIgZnJvbSAnLi9IZWFkZXInXG5pbXBvcnQgRm9vdGVyIGZyb20gJy4vRm9vdGVyJ1xuaW1wb3J0IGxvYWRNZW51cyBmcm9tICd+L2xpYi9sb2FkLW1lbnVzJ1xuaW1wb3J0IEF1dGhNb2RhbCBmcm9tICcuL0F1dGhNb2RhbC9BdXRoTW9kYWwnXG5pbXBvcnQgQ3VzdG9tRXJyb3IgZnJvbSAnfi9wYWdlcy9fZXJyb3InXG5pbXBvcnQgd2l0aEFwaSBmcm9tICcuLi93aXRoQXBpJ1xuaW1wb3J0IENvbG9yIGZyb20gXCJjb2xvclwiO1xuaW1wb3J0IHsgVGhlbWVDb250ZXh0IH0gZnJvbSBcInN0eWxlZC1jb21wb25lbnRzXCI7XG5pbXBvcnQgeyBURU5BTlQgfSBmcm9tIFwifi9jb25zdGFudHMvY29uc3RhbnRzXCI7XG5cbmNvbnN0IExheW91dCA9ICh7XG4gICAgICAgICAgICAgICAgICBhcGlWZXJzaW9uLFxuICAgICAgICAgICAgICAgICAgY2hpbGRyZW4sXG4gICAgICAgICAgICAgICAgICBjb2xvcjogbGF5b3V0Q29sb3IgPSAnYmxhY2snLFxuICAgICAgICAgICAgICAgICAgZXJyb3JDb2RlLFxuICAgICAgICAgICAgICAgICAgaGVhZGVyLFxuICAgICAgICAgICAgICAgICAgbWVudXMsXG4gICAgICAgICAgICAgICAgICBtZW51c0Vycm9yLFxuICAgICAgICAgICAgICAgICAgcGFkZGluZ1RvcCA9IHRydWUsXG4gICAgICAgICAgICAgICAgICBmb290ZXIgPSAnJyxcbiAgICAgICAgICAgICAgICAgIGN1c3RvbUNsYXNzID0gJydcbiAgICAgICAgICAgICAgICB9KSA9PiB7XG5cbiAgY29uc3QgdGhlbWUgPSB1c2VDb250ZXh0KFRoZW1lQ29udGV4dClcbiAgY29uc3QgcHJpbWFyeUNvbG9yXG4gICAgPSBDb2xvcih0aGVtZS5jb2xvcnMucHJpbWFyeSkuaHNsKCkuc3RyaW5nKClcblxuICBpZiAoZXJyb3JDb2RlKSB7XG4gICAgcmV0dXJuIDxDdXN0b21FcnJvciBzdGF0dXNDb2RlPXsgZXJyb3JDb2RlIH0vPlxuICB9XG4gIGlmIChoZWFkZXIgPT09ICdjbG9zZWQnKSB7XG4gICAgcGFkZGluZ1RvcCA9IGZhbHNlXG4gIH1cblxuICBjb25zdCB7IGZsYXNoX21lc3NhZ2UgfSA9IG5vb2tpZXMuZ2V0KHt9LCAnZmxhc2hfbWVzc2FnZScpXG5cbiAgdXNlRWZmZWN0KF8gPT4ge1xuICAgIGlmIChmbGFzaF9tZXNzYWdlKSB7XG4gICAgICBsZXQgbWVzc2FnZXMgPSBKU09OLnBhcnNlKGZsYXNoX21lc3NhZ2UpXG4gICAgICBjb25zb2xlLmxvZyhtZXNzYWdlcylcblxuICAgICAgaWYgKG1lc3NhZ2VzLmVycm9yKVxuICAgICAgICB0b2FzdC5lcnJvcihtZXNzYWdlcy5lcnJvciwgeyBkZWxheTogNTAwLCBhdXRvQ2xvc2U6IDUwMDAgfSlcblxuICAgICAgaWYgKG1lc3NhZ2VzLnN1Y2Nlc3MpXG4gICAgICAgIHRvYXN0LnN1Y2Nlc3MobWVzc2FnZXMuc3VjY2VzcywgeyBkZWxheTogNTAwLCBhdXRvQ2xvc2U6IDQwMDAgfSlcblxuICAgICAgaWYgKG1lc3NhZ2VzLmluZm8pXG4gICAgICAgIHRvYXN0LmluZm8obWVzc2FnZXMuaW5mbywgeyBkZWxheTogNTAwLCBhdXRvQ2xvc2U6IDQwMDAgfSlcblxuICAgICAgbm9va2llcy5kZXN0cm95KHt9LCAnZmxhc2hfbWVzc2FnZScsIHsgcGF0aDogJy8nIH0pXG4gICAgfVxuICB9LCBbZmxhc2hfbWVzc2FnZV0pXG5cbiAgZnVuY3Rpb24gcmVuZGVySGVhZGVyKCkge1xuICAgIGlmIChoZWFkZXIgIT09ICdoaWRkZW4nKSB7XG4gICAgICByZXR1cm4gPEhlYWRlciB7IC4uLntcbiAgICAgICAgY2xvc2VkOiBoZWFkZXIgPT09ICdjbG9zZWQnLFxuICAgICAgICBsYXlvdXRDb2xvcixcbiAgICAgICAgbWVudXM6IG1lbnVzRXJyb3IgPyBudWxsIDogbWVudXMsXG4gICAgICB9IH0gLz5cbiAgICB9XG4gICAgcGFkZGluZ1RvcCA9IGZhbHNlXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbmRlckZvb3RlcigpIHtcbiAgICBpZiAoZm9vdGVyICE9PSAnaGlkZGVuJykge1xuICAgICAgcmV0dXJuIDxGb290ZXIgYXBpVmVyc2lvbj17IGFwaVZlcnNpb24gfSBsYXlvdXRDb2xvcj17IGxheW91dENvbG9yIH0vPlxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT17Y3VzdG9tQ2xhc3N9IHN0eWxlPXt7YmFja2dyb3VuZEltYWdlOiBgdXJsKCcvc3RhdGljLyR7VEVOQU5UfS9zdWJzL2JhY2tncm91bmQuanBnJylgfX0+XG4gICAgICA8VG9hc3RDb250YWluZXIgbmV3ZXN0T25Ub3AvPlxuXG4gICAgICB7IHJlbmRlckhlYWRlcigpIH1cblxuICAgICAgPG1haW4gY2xhc3NOYW1lPXsgIXBhZGRpbmdUb3AgPyAnbm8tcGFkZGluZycgOiAnJyB9PlxuICAgICAgICB7IGNoaWxkcmVuIH1cbiAgICAgIDwvbWFpbj5cblxuICAgICAgeyByZW5kZXJGb290ZXIoKSB9XG5cbiAgICAgIDxBdXRoTW9kYWwvPlxuXG4gICAgICA8c3R5bGUganN4IGdsb2JhbD57IGBcbiAgICAgICAgXG4gICAgICAgIDpyb290IHtcbiAgICAgICAgICAtLWNvbG9yOiB2YXIoLS0keyBsYXlvdXRDb2xvciA9PT0gJ3doaXRlJyA/ICdibGFjaycgOiAnd2hpdGUnIH0pO1xuICAgICAgICB9XG4gICAgICAgIGJvZHkge1xuICAgICAgICAgICR7IGxheW91dENvbG9yID09PSAnd2hpdGUnID8gJ2JhY2tncm91bmQtY29sb3I6IHZhcigtLXdoaXRlKSAhaW1wb3J0YW50OycgOiAnJyB9KTtcbiAgICAgICAgfVxuICAgICAgICBtYWluIHtcbiAgICAgICAgICBmbGV4LWdyb3c6IDE7XG4gICAgICAgICAgcGFkZGluZy10b3A6IHZhcigtLXBhZGRpbmctdG9wKTtcbiAgICAgICAgfVxuICAgICAgICBtYWluLm5vLXBhZGRpbmcge1xuICAgICAgICAgIHBhZGRpbmctdG9wOiAwO1xuICAgICAgICB9XG4gICAgICBgIH08L3N0eWxlPlxuICAgIDwvZGl2PlxuICApO1xufVxuXG5MYXlvdXQuZ2V0SW5pdGlhbFByb3BzID0gYXN5bmMgY3R4ID0+IHtcbiAgY29uc3QgeyBhcGkgfSA9IGN0eFxuICB0cnkge1xuICAgIGNvbnN0IG1lbnVzID0gYXdhaXQgbG9hZE1lbnVzKGN0eClcbiAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGFwaS5nZXQoJ3ZlcnNpb24nKVxuICAgIGNvbnN0IHsgdmVyc2lvbjogYXBpVmVyc2lvbiB9ID0gZGF0YVxuICAgIHJldHVybiB7IGFwaVZlcnNpb24sIG1lbnVzIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBUaGUgcmVxdWVzdCB3YXMgbWFkZSBhbmQgdGhlIHNlcnZlciByZXNwb25kZWQgd2l0aCBhIHN0YXR1cyBjb2RlXG4gICAgICB0aGF0IGZhbGxzIG91dCBvZiB0aGUgcmFuZ2Ugb2YgMnh4YCwgZXJyb3IucmVzcG9uc2Uuc3RhdHVzKVxuICAgICAgLy8gY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UuaGVhZGVycylcbiAgICAgIC8vIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlLmRhdGEpXG4gICAgfSBlbHNlIGlmIChlcnJvci5yZXF1ZXN0KSB7XG4gICAgICBjb25zb2xlLmxvZygnVGhlIHJlcXVlc3Qgd2FzIG1hZGUgYnV0IG5vIHJlc3BvbnNlIHdhcyByZWNlaXZlZCcpXG4gICAgICAvLyBjb25zb2xlLmxvZyhlcnJvci5yZXF1ZXN0KVxuICAgICAgLy8gYGVycm9yLnJlcXVlc3RgIGlzIGFuIGluc3RhbmNlIG9mIFhNTEh0dHBSZXF1ZXN0IGluIHRoZSBicm93c2VyIGFuZCBhbiBpbnN0YW5jZSBvZlxuICAgICAgLy8gaHR0cC5DbGllbnRSZXF1ZXN0IGluIG5vZGUuanNcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU29tZXRoaW5nIGhhcHBlbmVkIGluIHNldHRpbmcgdXAgdGhlIHJlcXVlc3QgdGhhdCB0cmlnZ2VyZWQgYW4gRXJyb3JcbiAgICAgIGNvbnNvbGUubG9nKCdFcnJvcicsIGVycm9yLm1lc3NhZ2UpXG4gICAgfVxuICAgIHJldHVybiB7IGVycm9yQ29kZTogNTAzIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB3aXRoQXBpKExheW91dClcbiJdfQ== */\\n/*@ sourceURL=/Users/rafael/Projects/somosgad/dale/components/layout/Layout.js */\")));\n};\n\n_s(Layout, \"KDvGJR9NzGTgRtc8xlTDsuRJqjw=\");\n\n_c = Layout;\n\nLayout.getInitialProps = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(ctx) {\n    var api, menus, _yield$api$get, data, apiVersion;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            api = ctx.api;\n            _context.prev = 1;\n            _context.next = 4;\n            return loadMenus(ctx);\n\n          case 4:\n            menus = _context.sent;\n            _context.next = 7;\n            return api.get('version');\n\n          case 7:\n            _yield$api$get = _context.sent;\n            data = _yield$api$get.data;\n            apiVersion = data.version;\n            return _context.abrupt(\"return\", {\n              apiVersion: apiVersion,\n              menus: menus\n            });\n\n          case 13:\n            _context.prev = 13;\n            _context.t0 = _context[\"catch\"](1);\n\n            if (_context.t0.response) {\n              console.log(\"The request was made and the server responded with a status code\\n      that falls out of the range of 2xx\", _context.t0.response.status); // console.log(error.response.headers)\n              // console.log(error.response.data)\n            } else if (_context.t0.request) {\n              console.log('The request was made but no response was received'); // console.log(error.request)\n              // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n              // http.ClientRequest in node.js\n            } else {\n              // Something happened in setting up the request that triggered an Error\n              console.log('Error', _context.t0.message);\n            }\n\n            return _context.abrupt(\"return\", {\n              errorCode: 503\n            });\n\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[1, 13]]);\n  }));\n\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nexport default _c2 = withApi(Layout);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Layout\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/rafael/Projects/somosgad/dale/components/layout/Layout.js"],"names":["useContext","useEffect","nookies","toast","ToastContainer","Header","Footer","loadMenus","AuthModal","CustomError","withApi","Color","ThemeContext","TENANT","Layout","apiVersion","children","color","layoutColor","errorCode","header","menus","menusError","paddingTop","footer","customClass","theme","primaryColor","colors","primary","hsl","string","get","flash_message","_","messages","JSON","parse","console","log","error","delay","autoClose","success","info","destroy","path","renderHeader","closed","renderFooter","backgroundImage","getInitialProps","ctx","api","data","version","response","status","request","message"],"mappings":"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","sourcesContent":["import { useContext, useEffect } from 'react'\nimport nookies from 'nookies'\nimport { toast, ToastContainer } from 'react-toastify'\nimport Header from './Header'\nimport Footer from './Footer'\nimport loadMenus from '~/lib/load-menus'\nimport AuthModal from './AuthModal/AuthModal'\nimport CustomError from '~/pages/_error'\nimport withApi from '../withApi'\nimport Color from \"color\";\nimport { ThemeContext } from \"styled-components\";\nimport { TENANT } from \"~/constants/constants\";\n\nconst Layout = ({\n                  apiVersion,\n                  children,\n                  color: layoutColor = 'black',\n                  errorCode,\n                  header,\n                  menus,\n                  menusError,\n                  paddingTop = true,\n                  footer = '',\n                  customClass = ''\n                }) => {\n\n  const theme = useContext(ThemeContext)\n  const primaryColor\n    = Color(theme.colors.primary).hsl().string()\n\n  if (errorCode) {\n    return <CustomError statusCode={ errorCode }/>\n  }\n  if (header === 'closed') {\n    paddingTop = false\n  }\n\n  const { flash_message } = nookies.get({}, 'flash_message')\n\n  useEffect(_ => {\n    if (flash_message) {\n      let messages = JSON.parse(flash_message)\n      console.log(messages)\n\n      if (messages.error)\n        toast.error(messages.error, { delay: 500, autoClose: 5000 })\n\n      if (messages.success)\n        toast.success(messages.success, { delay: 500, autoClose: 4000 })\n\n      if (messages.info)\n        toast.info(messages.info, { delay: 500, autoClose: 4000 })\n\n      nookies.destroy({}, 'flash_message', { path: '/' })\n    }\n  }, [flash_message])\n\n  function renderHeader() {\n    if (header !== 'hidden') {\n      return <Header { ...{\n        closed: header === 'closed',\n        layoutColor,\n        menus: menusError ? null : menus,\n      } } />\n    }\n    paddingTop = false\n    return null\n  }\n\n  function renderFooter() {\n    if (footer !== 'hidden') {\n      return <Footer apiVersion={ apiVersion } layoutColor={ layoutColor }/>\n    }\n    return null\n  }\n\n  return (\n    <div className={customClass} style={{backgroundImage: `url('/static/${TENANT}/subs/background.jpg')`}}>\n      <ToastContainer newestOnTop/>\n\n      { renderHeader() }\n\n      <main className={ !paddingTop ? 'no-padding' : '' }>\n        { children }\n      </main>\n\n      { renderFooter() }\n\n      <AuthModal/>\n\n      <style jsx global>{ `\n        \n        :root {\n          --color: var(--${ layoutColor === 'white' ? 'black' : 'white' });\n        }\n        body {\n          ${ layoutColor === 'white' ? 'background-color: var(--white) !important;' : '' });\n        }\n        main {\n          flex-grow: 1;\n          padding-top: var(--padding-top);\n        }\n        main.no-padding {\n          padding-top: 0;\n        }\n      ` }</style>\n    </div>\n  );\n}\n\nLayout.getInitialProps = async ctx => {\n  const { api } = ctx\n  try {\n    const menus = await loadMenus(ctx)\n    const { data } = await api.get('version')\n    const { version: apiVersion } = data\n    return { apiVersion, menus }\n  } catch (error) {\n    if (error.response) {\n      console.log(`The request was made and the server responded with a status code\n      that falls out of the range of 2xx`, error.response.status)\n      // console.log(error.response.headers)\n      // console.log(error.response.data)\n    } else if (error.request) {\n      console.log('The request was made but no response was received')\n      // console.log(error.request)\n      // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n      // http.ClientRequest in node.js\n    } else {\n      // Something happened in setting up the request that triggered an Error\n      console.log('Error', error.message)\n    }\n    return { errorCode: 503 }\n  }\n}\n\nexport default withApi(Layout)\n"]},"metadata":{},"sourceType":"module"}