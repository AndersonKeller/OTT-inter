{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$(),\n    _s5 = $RefreshSig$();\n\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport useScript, { ScriptStatus } from '@charlietango/use-script';\nimport Head from 'next/head';\nimport Link from 'next/link';\nimport Router from 'next/router';\nimport nookies from 'nookies'; // import sleep from 'sleep-promise'\n\nimport { ThemeContext } from 'styled-components';\nimport Layout from '~/components/layout/Layout';\nimport { CONFIG } from '~/config';\nimport FormGroup from '~/components/layout/AuthModal/FormGroup';\nimport Label from '~/components/layout/AuthModal/Label';\nimport Input from '~/components/layout/AuthModal/Input';\nimport Button from '~/components/button';\nimport { useContext, useEffect, useState, useCallback } from 'react';\nimport UserContext from '~/contexts/UserContext';\nimport Packages from '~/components/Packages';\nimport Select from '~/components/Select/Select';\nimport { IS_PRODUCTION, HAS_WINDOW } from '~/constants/constants';\nimport withAuth from '~/components/withAuth';\nimport Loading from '~/components/Loading/Loading'; // page\n\nvar CompleteRegisterPage = function CompleteRegisterPage(_ref) {\n  _s();\n\n  var api = _ref.api,\n      layoutProps = _ref.layoutProps,\n      packages = _ref.packages,\n      user = _ref.user;\n\n  var _useScript = useScript('https://js.paymentsos.com/v2/latest/secure-fields.min.js'),\n      _useScript2 = _slicedToArray(_useScript, 2),\n      ready = _useScript2[0],\n      status = _useScript2[1];\n\n  var POS = ready && HAS_WINDOW ? window.POS : null;\n  var payUEnv = 'test';\n  var businessUnitPublicKey = '88985036-6530-4b5a-a7ec-c4e07ec07f6c';\n\n  var _useState = useState(false),\n      isPayUReady = _useState[0],\n      setIsPayUReady = _useState[1];\n\n  var POSStyle = {\n    base: {\n      borderRadius: '.15rem',\n      backgroundColor: 'white',\n      height: 'calc(1.5em + .75rem + 2px)',\n      fontSize: '12px',\n      padding: '0px 3px',\n      marginLeft: '5px',\n      cardImage: {\n        borderTopRightRadius: 0,\n        borderBottomRightRadius: 0,\n        margin: 0\n      },\n      pan: {\n        width: '160px',\n        borderTopLeftRadius: 0,\n        borderBottomLeftRadius: 0,\n        marginLeft: 0\n      },\n      expirationDate: {\n        width: '47px'\n      },\n      secureFields: {\n        left: '40px'\n      },\n      cvv: {\n        width: '35px'\n      }\n    }\n  };\n\n  if (status === ScriptStatus.ERROR) {\n    console.log('Failed to load POS API');\n  }\n\n  useEffect(function (_) {\n    if (POS) {\n      POS.setPublicKey(businessUnitPublicKey);\n      POS.setEnvironment(payUEnv);\n      POS.setStyle(POSStyle);\n      POS.setCardNumberPlaceholder('Tarjeta de crÃ©dito');\n      POS.setExpirationDatePlaceholder('MM/AA');\n      setIsPayUReady(true);\n    }\n  }, [POS]);\n  return __jsx(Layout, layoutProps, __jsx(Head, null, __jsx(\"title\", {\n    className: \"jsx-674601483\"\n  }, \"Confirmaci\\xF3n < Registro < \", CONFIG.appName)), __jsx(\"div\", {\n    className: \"jsx-674601483\" + \" \" + \"rgpage container-fluid\"\n  }, __jsx(\"div\", {\n    className: \"jsx-674601483\" + \" \" + \"row\"\n  }, __jsx(\"div\", {\n    className: \"jsx-674601483\" + \" \" + \"col-xl-8 offset-xl-2\"\n  }, __jsx(\"h1\", {\n    className: \"jsx-674601483\" + \" \" + \"h2\"\n  }, \"Completa tu registro\"), __jsx(CompleteRegisterForm, {\n    api: api,\n    isPayUReady: isPayUReady,\n    packages: packages,\n    POS: POS\n  })))), __jsx(_JSXStyle, {\n    id: \"674601483\"\n  }, \".rgpage.jsx-674601483{padding-top:40px;padding-bottom:120px;}.h2.jsx-674601483{margin-bottom:10px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9yYWZhZWwvUHJvamVjdHMvc29tb3NnYWQvZGFsZS9wYWdlcy9yZWdpc3Rlci9jb21wbGV0ZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFvRmtCLEFBRzRCLEFBSUUsaUJBSEUsRUFJdkIsbUJBSEEiLCJmaWxlIjoiL1VzZXJzL3JhZmFlbC9Qcm9qZWN0cy9zb21vc2dhZC9kYWxlL3BhZ2VzL3JlZ2lzdGVyL2NvbXBsZXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHVzZVNjcmlwdCwgeyBTY3JpcHRTdGF0dXMgfSBmcm9tICdAY2hhcmxpZXRhbmdvL3VzZS1zY3JpcHQnXG5pbXBvcnQgSGVhZCBmcm9tICduZXh0L2hlYWQnXG5pbXBvcnQgTGluayBmcm9tICduZXh0L2xpbmsnXG5pbXBvcnQgUm91dGVyIGZyb20gJ25leHQvcm91dGVyJ1xuaW1wb3J0IG5vb2tpZXMgZnJvbSAnbm9va2llcydcbi8vIGltcG9ydCBzbGVlcCBmcm9tICdzbGVlcC1wcm9taXNlJ1xuaW1wb3J0IHsgVGhlbWVDb250ZXh0IH0gZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnXG5pbXBvcnQgTGF5b3V0IGZyb20gJ34vY29tcG9uZW50cy9sYXlvdXQvTGF5b3V0J1xuaW1wb3J0IHsgQ09ORklHIH0gZnJvbSAnfi9jb25maWcnXG5pbXBvcnQgRm9ybUdyb3VwIGZyb20gJ34vY29tcG9uZW50cy9sYXlvdXQvQXV0aE1vZGFsL0Zvcm1Hcm91cCdcbmltcG9ydCBMYWJlbCBmcm9tICd+L2NvbXBvbmVudHMvbGF5b3V0L0F1dGhNb2RhbC9MYWJlbCdcbmltcG9ydCBJbnB1dCBmcm9tICd+L2NvbXBvbmVudHMvbGF5b3V0L0F1dGhNb2RhbC9JbnB1dCdcbmltcG9ydCBCdXR0b24gZnJvbSAnfi9jb21wb25lbnRzL2J1dHRvbidcbmltcG9ydCB7IHVzZUNvbnRleHQsIHVzZUVmZmVjdCwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgVXNlckNvbnRleHQgZnJvbSAnfi9jb250ZXh0cy9Vc2VyQ29udGV4dCdcbmltcG9ydCBQYWNrYWdlcyBmcm9tICd+L2NvbXBvbmVudHMvUGFja2FnZXMnXG5pbXBvcnQgU2VsZWN0IGZyb20gJ34vY29tcG9uZW50cy9TZWxlY3QvU2VsZWN0J1xuaW1wb3J0IHsgSVNfUFJPRFVDVElPTiwgSEFTX1dJTkRPVyB9IGZyb20gJ34vY29uc3RhbnRzL2NvbnN0YW50cydcbmltcG9ydCB3aXRoQXV0aCBmcm9tICd+L2NvbXBvbmVudHMvd2l0aEF1dGgnXG5pbXBvcnQgTG9hZGluZyBmcm9tICd+L2NvbXBvbmVudHMvTG9hZGluZy9Mb2FkaW5nJ1xuXG4vLyBwYWdlXG5jb25zdCBDb21wbGV0ZVJlZ2lzdGVyUGFnZSA9ICh7IGFwaSwgbGF5b3V0UHJvcHMsIHBhY2thZ2VzLCB1c2VyIH0pID0+IHtcbiAgY29uc3QgWyByZWFkeSwgc3RhdHVzIF0gPSB1c2VTY3JpcHQoJ2h0dHBzOi8vanMucGF5bWVudHNvcy5jb20vdjIvbGF0ZXN0L3NlY3VyZS1maWVsZHMubWluLmpzJylcbiAgY29uc3QgUE9TID0gcmVhZHkgJiYgSEFTX1dJTkRPVyA/IHdpbmRvdy5QT1MgOiBudWxsXG4gIGNvbnN0IHBheVVFbnYgPSAndGVzdCdcbiAgY29uc3QgYnVzaW5lc3NVbml0UHVibGljS2V5ID0gJzg4OTg1MDM2LTY1MzAtNGI1YS1hN2VjLWM0ZTA3ZWMwN2Y2YydcbiAgY29uc3QgWyBpc1BheVVSZWFkeSwgc2V0SXNQYXlVUmVhZHkgXSA9IHVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBQT1NTdHlsZSA9IHtcbiAgICBiYXNlOiB7XG4gICAgICBib3JkZXJSYWRpdXM6ICcuMTVyZW0nLFxuICAgICAgYmFja2dyb3VuZENvbG9yOiAnd2hpdGUnLFxuICAgICAgaGVpZ2h0OiAnY2FsYygxLjVlbSArIC43NXJlbSArIDJweCknLFxuICAgICAgZm9udFNpemU6ICcxMnB4JyxcbiAgICAgIHBhZGRpbmc6JzBweCAzcHgnLFxuICAgICAgbWFyZ2luTGVmdDogJzVweCcsXG4gICAgICBjYXJkSW1hZ2U6IHtcbiAgICAgICAgYm9yZGVyVG9wUmlnaHRSYWRpdXM6IDAsXG4gICAgICAgIGJvcmRlckJvdHRvbVJpZ2h0UmFkaXVzOiAwLFxuICAgICAgICBtYXJnaW46IDAsXG4gICAgICB9LFxuICAgICAgcGFuOntcbiAgICAgICAgd2lkdGg6JzE2MHB4JyxcbiAgICAgICAgYm9yZGVyVG9wTGVmdFJhZGl1czogMCxcbiAgICAgICAgYm9yZGVyQm90dG9tTGVmdFJhZGl1czogMCxcbiAgICAgICAgbWFyZ2luTGVmdDogMCxcbiAgICAgIH0sXG4gICAgICBleHBpcmF0aW9uRGF0ZTogeyB3aWR0aDogJzQ3cHgnIH0sXG4gICAgICBzZWN1cmVGaWVsZHM6IHsgbGVmdDogJzQwcHgnIH0sXG4gICAgICBjdnY6IHsgd2lkdGg6ICczNXB4JyB9XG4gICAgfVxuICB9XG5cbiAgaWYgKHN0YXR1cyA9PT0gU2NyaXB0U3RhdHVzLkVSUk9SKSB7XG4gICAgY29uc29sZS5sb2coJ0ZhaWxlZCB0byBsb2FkIFBPUyBBUEknKVxuICB9XG5cbiAgdXNlRWZmZWN0KF8gPT4ge1xuICAgIGlmIChQT1MpIHtcbiAgICAgIFBPUy5zZXRQdWJsaWNLZXkoYnVzaW5lc3NVbml0UHVibGljS2V5KVxuICAgICAgUE9TLnNldEVudmlyb25tZW50KHBheVVFbnYpXG4gICAgICBQT1Muc2V0U3R5bGUoUE9TU3R5bGUpXG4gICAgICBQT1Muc2V0Q2FyZE51bWJlclBsYWNlaG9sZGVyKCdUYXJqZXRhIGRlIGNyw6lkaXRvJylcbiAgICAgIFBPUy5zZXRFeHBpcmF0aW9uRGF0ZVBsYWNlaG9sZGVyKCdNTS9BQScpO1xuICAgICAgc2V0SXNQYXlVUmVhZHkodHJ1ZSlcbiAgICB9XG4gIH0sIFtQT1NdKVxuXG4gIHJldHVybiAoXG4gICAgPExheW91dCB7Li4ubGF5b3V0UHJvcHN9PlxuICAgICAgPEhlYWQ+XG4gICAgICAgIDx0aXRsZT5Db25maXJtYWNpw7NuICZsdDsgUmVnaXN0cm8gJmx0OyB7Q09ORklHLmFwcE5hbWV9PC90aXRsZT5cbiAgICAgIDwvSGVhZD5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmdwYWdlIGNvbnRhaW5lci1mbHVpZFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXhsLTggb2Zmc2V0LXhsLTJcIj5cblxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImgyXCI+Q29tcGxldGEgdHUgcmVnaXN0cm88L2gxPlxuXG4gICAgICAgICAgICA8Q29tcGxldGVSZWdpc3RlckZvcm0gey4uLnthcGksIGlzUGF5VVJlYWR5LCBwYWNrYWdlcywgUE9TfX0gLz5cblxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAucmdwYWdlIHtcbiAgICAgICAgICBwYWRkaW5nLXRvcDogNDBweDtcbiAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLmgyIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgICAgICB9XG4gICAgICBgfTwvc3R5bGU+XG4gICAgPC9MYXlvdXQ+XG4gIClcbn1cblxuY29uc3QgQ29tcGxldGVSZWdpc3RlckZvcm0gPSAoeyBhcGksIGlzUGF5VVJlYWR5LCBwYWNrYWdlcywgUE9TIH0pID0+IHtcblxuICBjb25zdCB7IGlkOiBmcmVlX3BhY2thZ2VfaWQgfSA9IHBhY2thZ2VzLml0ZW1zLmZpbmQoaXRlbSA9PiBpdGVtLmFtb3VudCA9PSAwKSB8fCB7fVxuXG4gIGNvbnN0IGRlYnVnID0gZmFsc2UgJiYgISBJU19QUk9EVUNUSU9OXG4gIGNvbnN0IHJlcXVpcmVkcyA9IElTX1BST0RVQ1RJT05cblxuICBjb25zdCB7IHVzZXIsIHVwZGF0ZVVzZXIgfSA9IHVzZUNvbnRleHQoVXNlckNvbnRleHQpXG5cbiAgY29uc3QgWyBnZW5kZXJzLCBzZXRHZW5kZXJzIF0gPSB1c2VTdGF0ZSgpXG4gIGNvbnN0IFsgZGlzY291bnRzLCBzZXREaXNjb3VudHMgXSA9IHVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBbIGJsb2NrRGlzY291bnRGaWVsZHMsIHNldEJsb2NrRGlzY291bnRGaWVsZHMgXSA9IHVzZVN0YXRlKGZhbHNlKVxuXG4gIGNvbnN0IFsgdmFsdWVzLCBzZXRWYWx1ZXMgXSA9IHVzZVN0YXRlKHtcbiAgICBuYW1lOiAnJyxcbiAgICBnZW5kZXJfaWQ6ICcnLFxuICAgIGRvY3VtZW50OiAnJyxcbiAgICBjb3VudHJ5X2lkOiAnJyxcbiAgICBhZGRyZXNzXzFzdF9sZXZlbDogJycsXG4gICAgY2l0eTogJycsXG4gICAgYWRkcmVzc18zcmRfbGV2ZWw6ICcnLFxuICAgIGFkZHJlc3M6ICcnLFxuICAgIHBhY2thZ2VfaWQ6ICcnLFxuICAgIHBheW1lbnRfbWV0aG9kX2lkOiBudWxsLFxuICAgIHBheW1lbnRfb3M6IG51bGwsXG4gICAgY2FzaF9wYXltZW50X21ldGhvZF9pZDogbnVsbCxcbiAgICB0ZXJtczogbnVsbCxcbiAgICBkaXNjb3VudF9pZDogbnVsbCxcbiAgfSlcblxuICBjb25zdCBbIGxvYWRpbmcsIHNldExvYWRpbmcgXSA9IHVzZVN0YXRlKClcbiAgY29uc3QgWyBlcnJvciwgc2V0RXJyb3IgXSA9IHVzZVN0YXRlKClcblxuICAvKiBnZXQgZ2VuZGVycyAqL1xuICB1c2VFZmZlY3QoXyA9PiB7XG4gICAgKGFzeW5jIF8gPT4ge1xuICAgICAgY29uc3Qge2RhdGF9ID0gYXdhaXQgYXBpLmdldCgnZ2VuZGVycycpXG4gICAgICBzZXRHZW5kZXJzKGRhdGEpXG4gICAgfSkoKVxuICB9LCBbXSlcblxuICAgLyogZ2V0IGRpc2NvdW50cyAqL1xuICAgdXNlRWZmZWN0KF8gPT4ge1xuICAgIChhc3luYyBfID0+IHtcbiAgICAgIHZhciB7IGRhdGEgfSA9IGF3YWl0IGFwaS5nZXQoJ2Rpc2NvdW50cycpXG5cbiAgICAgIGRhdGEgPSBkYXRhLm1hcCggKGRpc2MsIGluZGV4KSA9PiB7XG4gICAgICAgIGRpc2MuZHNjX2lkID0gJ2RzY18nICsgaW5kZXhcbiAgICAgICAgcmV0dXJuIGRpc2NcbiAgICAgIH0pXG5cbiAgICAgIHNldERpc2NvdW50cyhkYXRhKVxuICAgIH0pKClcbiAgfSwgW10pXG5cbiAgLyogZmlsbCB1c2VyIGZvcm0gKi9cbiAgdXNlRWZmZWN0KF8gPT4ge1xuICAgIGlmICh1c2VyKSB7XG4gICAgICBzZXRWYWx1ZXMoe1xuICAgICAgICAuLi52YWx1ZXMsXG4gICAgICAgIG5hbWU6IHVzZXIubmFtZSxcbiAgICAgICAgZ2VuZGVyX2lkOiB1c2VyLmdlbmRlcl9pZCA/IHVzZXIuZ2VuZGVyX2lkIDogJycsXG4gICAgICAgIGRvY3VtZW50OiB1c2VyLmRvY3VtZW50ID8gdXNlci5kb2N1bWVudCA6ICcnLFxuICAgICAgICBhZGRyZXNzOiB1c2VyLmFkZHJlc3MgPyB1c2VyLmFkZHJlc3MgOiAnJyxcbiAgICAgICAgY2l0eTogdXNlci5jaXR5ID8gdXNlci5jaXR5IDogJycsXG4gICAgICAgIGNvdW50cnlfaWQ6IHVzZXIuY291bnRyeV9pZCA/IHVzZXIuY291bnRyeV9pZCA6ICcnLFxuICAgICAgICBwYWNrYWdlX2lkOiB1c2VyLnBhY2thZ2VfaWRfaW50ZW50aW9uID8gdXNlci5wYWNrYWdlX2lkX2ludGVudGlvbiA6ICcnLFxuICAgICAgfSlcbiAgICB9XG4gIH0sIFt1c2VyXSlcblxuICAvKiBoYW5kbGUgZ2VuZXJhbCBpbnB1dCBjaGFuZ2UgKi9cbiAgY29uc3QgaGFuZGxlSW5wdXRDaGFuZ2UgPSBlID0+IHtcbiAgICBjb25zdCB7IGNoZWNrZWQsIG5hbWUsIHZhbHVlLCB0eXBlIH0gPSBlLnRhcmdldFxuICAgIHNldFZhbHVlcyh7XG4gICAgICAuLi52YWx1ZXMsXG4gICAgICBbbmFtZV06IHR5cGUgPT09ICdjaGVja2JveCcgP1xuICAgICAgICAoY2hlY2tlZCA/ICh2YWx1ZSA9PT0gJ3RydWUnID8gdHJ1ZSA6IHZhbHVlKSA6IGZhbHNlKSA6XG4gICAgICAgIHZhbHVlLFxuICAgIH0pXG4gIH1cblxuICAvKiBoYW5kbGUgZGlzb2N1bnQgY2hhbmdlICovXG4gIGNvbnN0IGhhbmRsZURpc2NvdW50Q2hhbmdlID0gYXN5bmMgKHt0YXJnZXQ6eyBuYW1lLCB2YWx1ZSwgaWQgfX0pID0+IHtcblxuICAgIGxldCB2YWxpZCA9IGF3YWl0IGNoZWNrRGlzY291bnQodmFsdWUpXG4gICAgLy8gY29uc29sZS50YWJsZSh2YWxpZClcblxuICAgIHNldFZhbHVlcyh7XG4gICAgICAuLi52YWx1ZXMsXG4gICAgICBbbmFtZV06IHZhbHVlLFxuICAgICAgZGlzY291bnRfaWQ6IHZhbGlkID8gaWQgOiBudWxsXG4gICAgfSlcbiAgfVxuXG4gIC8qIGhhbmRsZSBkaXNjb3VudCBjaGFuZ2UgKi9cbiAgY29uc3QgY2hlY2tEaXNjb3VudCA9IGFzeW5jIHN1cHBvcnRlckNvZGUgPT4ge1xuXG4gICAgLy8gU2ltdWxhdGUgQVBJIENhbGxcbiAgICBjb25zdCBwcm9tID0gKGRlbGF5LCB2YWx1ZSkgPT4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGRlbGF5LCB2YWx1ZSkpXG5cbiAgICByZXR1cm4gYXdhaXQgcHJvbSg1MCwgc3VwcG9ydGVyQ29kZS5sZW5ndGggPT09IDUpXG5cbiAgfVxuXG4gIC8qIGhhbmRsZSBwYWNrYWdlIGNoYW5nZSAqL1xuICBjb25zdCBvblBhY2thZ2VDaGFuZ2UgPSB1c2VDYWxsYmFjayggZSA9PiB7XG4gICAgY29uc3QgcGFja2FnZV9pZCA9IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlLCAxMClcbiAgICBzZXRWYWx1ZXMoIG9sZFZhbHVlcyA9PiAoe1xuICAgICAgLi4ub2xkVmFsdWVzLFxuICAgICAgcGFja2FnZV9pZCxcbiAgICAgIHBheW1lbnRfbWV0aG9kX2lkOiBwYWNrYWdlX2lkID09PSBmcmVlX3BhY2thZ2VfaWQgPyBudWxsIDogdmFsdWVzLnBheW1lbnRfbWV0aG9kX2lkLFxuICAgIH0pKVxuICB9LFtdKVxuXG4gIC8qIGhhbmRsZSBwYXltZW50IG1ldGhvZCBjaGFuZ2UgKi9cbiAgZnVuY3Rpb24gb25QYXltZW50Q2hhbmdlKGUpIHtcbiAgICBzZXRWYWx1ZXMoe1xuICAgICAgLi4udmFsdWVzLFxuICAgICAgcGF5bWVudF9tZXRob2RfaWQ6IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlLCAxMCksXG4gICAgICBjYXNoX3BheW1lbnRfbWV0aG9kX2lkOiBudWxsLFxuICAgIH0pXG4gIH1cblxuICBmdW5jdGlvbiBvbkNhc2hQYXltZW50TWV0aG9kQ2hhbmdlKGUpIHtcbiAgICBzZXRWYWx1ZXMoe1xuICAgICAgLi4udmFsdWVzLFxuICAgICAgY2FzaF9wYXltZW50X21ldGhvZF9pZDogcGFyc2VJbnQoZS50YXJnZXQudmFsdWUsIDEwKSxcbiAgICB9KVxuICB9XG5cbiAgLyogdG9rZW4gKi9cbiAgYXN5bmMgZnVuY3Rpb24gY3JlYXRlVG9rZW4oKSB7XG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IGFkZGl0aW9uYWxEYXRhID0ge1xuICAgICAgICBob2xkZXJfbmFtZTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhcmRob2xkZXItbmFtZScpLnZhbHVlLFxuICAgICAgICAvLyBjdXN0b21fZGF0YTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1c3RvbScpLnZhbHVlLFxuICAgICAgfVxuICAgICAgUE9TLmNyZWF0ZVRva2VuKGFkZGl0aW9uYWxEYXRhLCAocmVzdWx0KSA9PiB7XG4gICAgICAgIGNvbnN0IGpzb24gPSBKU09OLnBhcnNlKHJlc3VsdClcbiAgICAgICAgY29uc29sZS5sb2coJ2pzb24nLCBqc29uKVxuICAgICAgICBqc29uLnRva2VuID8gcmVzb2x2ZShqc29uKSA6IHJlamVjdChqc29uKVxuICAgICAgfSlcbiAgICB9KVxuICAgIHJldHVybiBwcm9taXNlXG4gIH1cblxuICAvLyBpcyBjYXJkIHBheW1lbnRcbiAgY29uc3QgY3JlZGl0X2NhcmRfaWQgPSAxXG4gIGNvbnN0IGRlYml0X2NhcmRfaWQgPSAyXG4gIGNvbnN0IGlzQ2FyZFBheW1lbnQgPSBbY3JlZGl0X2NhcmRfaWQsIGRlYml0X2NhcmRfaWRdLmluY2x1ZGVzKHZhbHVlcy5wYXltZW50X21ldGhvZF9pZClcblxuICAvKiBzdWJtaXQgKi9cbiAgY29uc3QgaGFuZGxlU3VibWl0ID0gYXN5bmMgZSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgc2V0TG9hZGluZyh0cnVlKVxuICAgIHNldEVycm9yKGZhbHNlKVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXltZW50RGF0YSA9IHZhbHVlcy5wYWNrYWdlX2lkICYmIHZhbHVlcy5wYWNrYWdlX2lkICE9PSBmcmVlX3BhY2thZ2VfaWQgJiZcbiAgICAgICAgdmFsdWVzLnBheW1lbnRfbWV0aG9kX2lkICYmIGlzQ2FyZFBheW1lbnQgPyBhd2FpdCBjcmVhdGVUb2tlbigpIDogbnVsbFxuICAgICAgY29uc3QgZGF0YSA9IHsgLi4udmFsdWVzLCBwYXltZW50X29zOiBwYXltZW50RGF0YSB9XG4gICAgICBpZiAoZGF0YS5jb3VudHJ5X2lkID09PSAnJykge1xuICAgICAgICBkZWxldGUgZGF0YS5jb3VudHJ5X2lkXG4gICAgICB9XG4gICAgICBpZiAoZGF0YS5hZGRyZXNzXzFzdF9sZXZlbCA9PT0gJycpIHtcbiAgICAgICAgZGVsZXRlIGRhdGEuYWRkcmVzc18xc3RfbGV2ZWxcbiAgICAgIH1cbiAgICAgIGlmIChkYXRhLmFkZHJlc3NfM3JkX2xldmVsID09PSAnJykge1xuICAgICAgICBkZWxldGUgZGF0YS5hZGRyZXNzXzNyZF9sZXZlbFxuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBkYXRhOiB7IHVzZXIsIG9yZGVyIH0gfSA9IGF3YWl0IGFwaS5wb3N0KCdyZWdpc3Rlci9jb21wbGV0ZScsIGRhdGEpXG4gICAgICAgIHVwZGF0ZVVzZXIodXNlcilcbiAgICAgICAgaWYgKG9yZGVyKSB7XG4gICAgICAgICAgUm91dGVyLnB1c2goe1xuICAgICAgICAgICAgcGF0aG5hbWU6ICcvcmVnaXN0ZXIvY29uZmlybScsXG4gICAgICAgICAgICBxdWVyeToge1xuICAgICAgICAgICAgICBkb3dubG9hZF9saW5rOiBvcmRlci5kb3dubG9hZF9saW5rLFxuICAgICAgICAgICAgICBsaW5rOiBvcmRlci5saW5rLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LCAnL3JlZ2lzdGVyL2NvbmZpcm0nKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIFJvdXRlci5wdXNoKCcvJylcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7XG4gICAgICAgICAgY29uc3QgeyBkYXRhLCBzdGF0dXMgfSA9IGVycm9yLnJlc3BvbnNlXG4gICAgICAgICAgaWYgKHN0YXR1cyA9PT0gNDIyKSB7XG4gICAgICAgICAgICBzZXRFcnJvcihkYXRhKVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChlcnJvci5yZXF1ZXN0KSB7XG4gICAgICAgICAgc2V0RXJyb3IoZXJyb3IpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2V0RXJyb3IoZXJyb3IpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgc2V0RXJyb3IoZXJyb3IuZGVzY3JpcHRpb24gPyB7IGVycm9yczogeyBwYXltZW50X29zOiBlcnJvci5kZXNjcmlwdGlvbiB9IH0gOiBlcnJvcilcbiAgICB9XG4gICAgc2V0TG9hZGluZyhmYWxzZSlcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGZvcm0gbWV0aG9kPVwicG9zdFwiIG9uU3VibWl0PXtoYW5kbGVTdWJtaXR9PlxuXG4gICAgICB7LyogbWFpbiBlcnJvciBtc2cgKi99XG4gICAgICB7IGVycm9yICYmIGVycm9yLm1lc3NhZ2UgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImludmFsaWQtZmVlZGJhY2tcIj57ZXJyb3IubWVzc2FnZX08L2Rpdj5cbiAgICAgICkgfVxuXG4gICAgICB7LyogZm9ybSBkYXRhIGRlYnVnICovfVxuICAgICAgeyBkZWJ1ZyAmJiAoXG4gICAgICAgIDxwcmUgc3R5bGU9e3sgY29sb3I6ICcjZmZmJyB9fT5cbiAgICAgICAgICB7SlNPTi5zdHJpbmdpZnkodmFsdWVzLCBudWxsLCAyKX1cbiAgICAgICAgPC9wcmU+XG4gICAgICApfVxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLW1kLTZcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRhdGFcIj5cblxuICAgICAgICAgICAgey8qIGhlYWRpbmcgKi99XG4gICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwiaDNcIj5UdXMgZGF0b3M8L2gzPlxuXG4gICAgICAgICAgICB7LyogbmFtZSAqL31cbiAgICAgICAgICAgIDxGb3JtR3JvdXA+XG4gICAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPVwibmFtZVwiPk5vbWJyZSBjb21wbGV0bzwvTGFiZWw+XG4gICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgIGlkPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVJbnB1dENoYW5nZX1cbiAgICAgICAgICAgICAgICByZXF1aXJlZD17cmVxdWlyZWRzfVxuICAgICAgICAgICAgICAgIHZhbHVlPXt2YWx1ZXMubmFtZX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPEludmFsaWRGZWVkYmFjayBlcnJvcj17ZXJyb3J9IGxvYWRpbmc9e2xvYWRpbmd9IG5hbWU9XCJuYW1lXCIgLz5cbiAgICAgICAgICAgIDwvRm9ybUdyb3VwPlxuXG4gICAgICAgICAgICB7LyogZ2VucmUgKi99XG4gICAgICAgICAgICA8Rm9ybUdyb3VwPlxuICAgICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj1cImdlbmRlcl9pZFwiPkfDqW5lcm88L0xhYmVsPlxuICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgaWQ9XCJnZW5kZXJfaWRcIlxuICAgICAgICAgICAgICAgIG5hbWU9XCJnZW5kZXJfaWRcIlxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVJbnB1dENoYW5nZX1cbiAgICAgICAgICAgICAgICByZXF1aXJlZD17cmVxdWlyZWRzfVxuICAgICAgICAgICAgICAgIHZhbHVlPXt2YWx1ZXMuZ2VuZGVyX2lkfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgeyAhIGdlbmRlcnMgPyAoXG4gICAgICAgICAgICAgICAgICA8b3B0aW9uIGRpc2FibGVkIHZhbHVlPVwiXCI+Q2FyZ2FuZG8uLi48L29wdGlvbj5cbiAgICAgICAgICAgICAgICApIDogZ2VuZGVycy5sZW5ndGggPyA8PlxuICAgICAgICAgICAgICAgICAgPG9wdGlvbiBkaXNhYmxlZCB2YWx1ZT1cIlwiPlNlbGVjY2lvbmEgdHUgZ8OpbmVybzwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgeyBnZW5kZXJzLm1hcCgoZ2VucmUsIGtleSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHsuLi57a2V5fX0gdmFsdWU9e2dlbnJlLmlkfT57Z2VucmUubmFtZX08L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgIDwvPiA6IChcbiAgICAgICAgICAgICAgICAgIDxvcHRpb24gZGlzYWJsZWQgdmFsdWU9XCJcIj5JbmNhcGF6IGRlIGNhcmdhciBnw6luZXJvczwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICkgfVxuICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgPEludmFsaWRGZWVkYmFjayBlcnJvcj17ZXJyb3J9IGxvYWRpbmc9e2xvYWRpbmd9IG5hbWU9XCJnZW5kZXJfaWRcIiAvPlxuICAgICAgICAgICAgPC9Gb3JtR3JvdXA+XG5cbiAgICAgICAgICAgIHsvKiBkb2N1bWVudCAqL31cbiAgICAgICAgICAgIDxGb3JtR3JvdXA+XG4gICAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPVwiZG9jdW1lbnRcIj5Eb2N1bWVudG88L0xhYmVsPlxuICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICBpZD1cImRvY3VtZW50XCJcbiAgICAgICAgICAgICAgICBuYW1lPVwiZG9jdW1lbnRcIlxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVJbnB1dENoYW5nZX1cbiAgICAgICAgICAgICAgICByZXF1aXJlZD17cmVxdWlyZWRzfVxuICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICB2YWx1ZT17dmFsdWVzLmRvY3VtZW50fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8SW52YWxpZEZlZWRiYWNrIGVycm9yPXtlcnJvcn0gbG9hZGluZz17bG9hZGluZ30gbmFtZT1cImRvY3VtZW50XCIgLz5cbiAgICAgICAgICAgIDwvRm9ybUdyb3VwPlxuXG4gICAgICAgICAgICB7ZGlzY291bnRzICYmIGRpc2NvdW50cy5tYXAoIGQgPT4gKFxuICAgICAgICAgICAgICA8Rm9ybUdyb3VwIGtleT17ZC5pZH0+XG4gICAgICAgICAgICAgICAgPExhYmVsIGh0bWxGb3I9e2QuZHNjX2lkfT57ZC5uYW1lfTwvTGFiZWw+XG4gICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzY291bnRzLmZpbmQoXG4gICAgICAgICAgICAgICAgICAgIGRpc2MgPT4gKCFbJycsdW5kZWZpbmVkXS5pbmNsdWRlcyh2YWx1ZXNbZGlzYy5kc2NfaWRdKSAmJiBkaXNjLmlkICE9IGQuaWQpXG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgaWQ9e2QuaWR9XG4gICAgICAgICAgICAgICAgICBtYXhMZW5ndGg9ezV9XG4gICAgICAgICAgICAgICAgICBuYW1lPXtkLmRzY19pZH1cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVEaXNjb3VudENoYW5nZX1cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt2YWx1ZXMuZGlzY291bnRfaWQgPT0gZC5pZCA/IHtiYWNrZ3JvdW5kQ29sb3I6ICdyZ2IoMjA2LCAyNDksIDIwNiknfSA6IHt9fVxuICAgICAgICAgICAgICAgICAgdmFsdWU9e3ZhbHVlc1tkLmRzY19pZF0gfHwgJyd9XG4gICAgICAgICAgICAgICAgICByZWFkT25seT17YmxvY2tEaXNjb3VudEZpZWxkc31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tmbG9hdDogJ3JpZ2h0JywgcGFkZGluZ1RvcDonMTBweCd9fT5cbiAgICAgICAgICAgICAgICAgIDxMb2FkaW5nIHNpemU9XCIyMFwiIGNvbG9yPVwid2hpdGVcIiBsb2FkaW5nU3RhdGU9e3ZhbHVlcy5kaXNjb3VudF9pZCA9PSBkLmlkICAmJiBibG9ja0Rpc2NvdW50RmllbGRzfS8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvRm9ybUdyb3VwPlxuICAgICAgICAgICAgKSl9XG5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgey8qIGFkZHJlc3MgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLW1kLTZcIj5cbiAgICAgICAgICA8QWRkcmVzc1xuICAgICAgICAgICAgYXBpPXthcGl9XG4gICAgICAgICAgICBlcnJvcj17ZXJyb3J9XG4gICAgICAgICAgICBoYW5kbGVJbnB1dENoYW5nZT17aGFuZGxlSW5wdXRDaGFuZ2V9XG4gICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nfVxuICAgICAgICAgICAgcmVxdWlyZWRzPXtyZXF1aXJlZHN9XG4gICAgICAgICAgICBzZXRWYWx1ZXM9e3NldFZhbHVlc31cbiAgICAgICAgICAgIHZhbHVlcz17dmFsdWVzfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIHBhY2thZ2Ugc2VsZWN0aW9uICovfVxuICAgICAgPFBhY2thZ2VzIHsuLi57XG4gICAgICAgIGVycm9yOiBwYWNrYWdlcy5lcnJvciA/IHBhY2thZ2VzLmVycm9yIDogbnVsbCxcbiAgICAgICAgaXRlbXM6IHBhY2thZ2VzLml0ZW1zID8gcGFja2FnZXMuaXRlbXMgOiBudWxsLFxuICAgICAgICBvbkNoYW5nZTogb25QYWNrYWdlQ2hhbmdlLFxuICAgICAgICBwYWNrYWdlX2lkOiB2YWx1ZXMucGFja2FnZV9pZCxcbiAgICAgICAgdmFsaWRhdGlvbkVycm9yOiAhIGxvYWRpbmcgJiYgZXJyb3IgJiYgZXJyb3IuZXJyb3JzICYmIGVycm9yLmVycm9ycy5wYWNrYWdlX2lkLFxuICAgICAgICBkaXNjb3VudF9pZDogdmFsdWVzLmRpc2NvdW50X2lkLFxuICAgICAgICBzZXRCbG9ja0Rpc2NvdW50RmllbGRzLFxuICAgICAgfX0gLz5cblxuICAgICAgey8qIHBheW1lbnQgKi99XG4gICAgICB7IHZhbHVlcy5wYWNrYWdlX2lkICYmIHZhbHVlcy5wYWNrYWdlX2lkICE9PSBmcmVlX3BhY2thZ2VfaWQgJiYgKFxuICAgICAgICA8UGF5bWVudCB7Li4ue1xuICAgICAgICAgIGFwaSxcbiAgICAgICAgICBjYXNoX3BheW1lbnRfbWV0aG9kX2lkOiB2YWx1ZXMuY2FzaF9wYXltZW50X21ldGhvZF9pZCxcbiAgICAgICAgICBlcnJvcixcbiAgICAgICAgICBpc0NhcmRQYXltZW50LFxuICAgICAgICAgIGlzUGF5VVJlYWR5LFxuICAgICAgICAgIGxvYWRpbmcsXG4gICAgICAgICAgb25DYXNoUGF5bWVudE1ldGhvZENoYW5nZSxcbiAgICAgICAgICBvbkNoYW5nZTogb25QYXltZW50Q2hhbmdlLFxuICAgICAgICAgIHBheW1lbnRfbWV0aG9kX2lkOiB2YWx1ZXMucGF5bWVudF9tZXRob2RfaWQsXG4gICAgICAgICAgUE9TLFxuICAgICAgICAgIHJlcXVpcmVkcyxcbiAgICAgICAgICB2YWxpZGF0aW9uRXJyb3I6ICEgbG9hZGluZyAmJiBlcnJvciAmJiBlcnJvci5lcnJvcnMgJiYgZXJyb3IuZXJyb3JzLnBheW1lbnRfbWV0aG9kX2lkLFxuICAgICAgICB9fSAvPlxuICAgICAgKSB9XG5cbiAgICAgIHsvKiBmb290ZXIgKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdyBhbGlnbi1pdGVtcy1jZW50ZXJcIj5cblxuICAgICAgICB7LyogdGVybXMgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLW1kLTYgb2Zmc2V0LW1kLTRcIj5cbiAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwidGVybXNcIj5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICBjaGVja2VkPXt2YWx1ZXMudGVybXN9XG4gICAgICAgICAgICAgIG5hbWU9XCJ0ZXJtc1wiXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVJbnB1dENoYW5nZX1cbiAgICAgICAgICAgICAgcmVxdWlyZWQ9e3JlcXVpcmVkc31cbiAgICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgdmFsdWU9e2B0cnVlYH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8c3Bhbj5IZSBsZcOtZG8geSBhY2VwdG8gPExpbmsgaHJlZj1cIi90ZXJtaW5vcy15LXBvbGl0aWNhc1wiPlxuICAgICAgICAgICAgICAgIDxhIHRhcmdldD1cIl9ibGFua1wiPmVsIGNvbnRyYXRvPC9hPlxuICAgICAgICAgICAgICA8L0xpbms+IGRlIHtDT05GSUcuYXBwTmFtZX08L3NwYW4+XG4gICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICA8SW52YWxpZEZlZWRiYWNrIGVycm9yPXtlcnJvcn0gbG9hZGluZz17bG9hZGluZ30gbmFtZT1cInRlcm1zXCIgLz5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgey8qIHNlbmQgYnRuICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC0yIHRleHQtcmlnaHRcIj5cbiAgICAgICAgICA8QnV0dG9uIGJsb2NrIGNvbG9yPVwic2Vjb25kYXJ5XCIgZGlzYWJsZWQ9e2xvYWRpbmd9IHR5cGU9XCJzdWJtaXRcIj5FbnZpYXI8L0J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8c3R5bGUganN4PntgXG4gICAgICAgIDpnbG9iYWwoLmgzKSB7XG4gICAgICAgICAgZm9udC1zaXplOiAyMHB4O1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICAgIH1cbiAgICAgICAgaHIsXG4gICAgICAgIC5ociB7XG4gICAgICAgICAgbWFyZ2luLXRvcDogMDtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICB9XG4gICAgICAgIC50ZXJtcyB7XG4gICAgICAgICAgZm9udC1zaXplOiAxOHB4O1xuICAgICAgICB9XG4gICAgICAgIC50ZXJtcyBpbnB1dCB7XG4gICAgICAgICAgbWFyZ2luLXJpZ2h0OiA1cHg7XG4gICAgICAgIH1cbiAgICAgIGB9PC9zdHlsZT5cbiAgICA8L2Zvcm0+XG4gIClcbn1cblxuY29uc3QgSW52YWxpZEZlZWRiYWNrID0gKHtlcnJvciwgbG9hZGluZywgbmFtZX0pID0+IHtcbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgeyAhIGxvYWRpbmcgJiYgZXJyb3IgJiYgZXJyb3IuZXJyb3JzICYmIGVycm9yLmVycm9yc1tuYW1lXSAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW52YWxpZC1mZWVkYmFja1wiPntlcnJvci5lcnJvcnNbbmFtZV19PC9kaXY+XG4gICAgICApfVxuICAgIDwvPlxuICApXG59XG5cbmNvbnN0IFNlbGVjdEZvcm1Hcm91cCA9ICh7IGVycm9yLCBsYWJlbCwgbGlzdCwgbGlzdE1hcFZhbHVlID0gbnVsbCwgbG9hZGluZywgbmFtZSwgb25DaGFuZ2UsIHBsdXJhbExhYmVsLCByZXF1aXJlZHMsIHZhbHVlIH0pID0+IHtcbiAgcmV0dXJuIChcbiAgICA8Rm9ybUdyb3VwPlxuICAgICAgPExhYmVsIGh0bWxGb3I9e25hbWV9PntsYWJlbH08L0xhYmVsPlxuICAgICAgPFNlbGVjdFxuICAgICAgICBpZD17bmFtZX1cbiAgICAgICAgbmFtZT17bmFtZX1cbiAgICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlfVxuICAgICAgICByZXF1aXJlZD17cmVxdWlyZWRzfVxuICAgICAgICB2YWx1ZT17dmFsdWV9XG4gICAgICA+XG4gICAgICAgIHsgISBsaXN0ID8gKFxuICAgICAgICAgIDxvcHRpb24gZGlzYWJsZWQgdmFsdWU9XCJcIj5DYXJnYW5kby4uLjwvb3B0aW9uPlxuICAgICAgICApIDogbGlzdC5sZW5ndGggPyA8PlxuICAgICAgICAgIDxvcHRpb24gZGlzYWJsZWQgdmFsdWU9XCJcIj5TZWxlY2Npb25hIHR1IHtsYWJlbC50b0xvd2VyQ2FzZSgpfTwvb3B0aW9uPlxuICAgICAgICAgIHsgbGlzdC5tYXAoKGl0ZW0sIGtleSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBsaXN0TWFwVmFsdWUgPyBpdGVtW2xpc3RNYXBWYWx1ZV0gOiBpdGVtXG4gICAgICAgICAgICBjb25zdCBvcHRpb25OYW1lID0gbGlzdE1hcFZhbHVlID8gaXRlbS5uYW1lIDogaXRlbVxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPG9wdGlvbiBrZXk9e2tleX0gdmFsdWU9e3ZhbHVlfT57b3B0aW9uTmFtZX08L29wdGlvbj5cbiAgICAgICAgICAgIClcbiAgICAgICAgICB9KX1cbiAgICAgICAgPC8+IDogKFxuICAgICAgICAgIDxvcHRpb24gZGlzYWJsZWQgdmFsdWU9XCJcIj5JbmNhcGF6IGRlIGNhcmdhciB7cGx1cmFsTGFiZWx9PC9vcHRpb24+XG4gICAgICAgICkgfVxuICAgICAgPC9TZWxlY3Q+XG4gICAgICA8SW52YWxpZEZlZWRiYWNrIGVycm9yPXtlcnJvcn0gbG9hZGluZz17bG9hZGluZ30gbmFtZT17bmFtZX0gLz5cbiAgICA8L0Zvcm1Hcm91cD5cbiAgKVxufVxuXG5jb25zdCBBZGRyZXNzID0gKHtcbiAgYXBpLFxuICBlcnJvcixcbiAgaGFuZGxlSW5wdXRDaGFuZ2UsXG4gIHNldFZhbHVlcyxcbiAgbG9hZGluZyxcbiAgcmVxdWlyZWRzLFxuICB2YWx1ZXMsXG59KSA9PiB7XG5cbiAgY29uc3QgYXJnQ291bnRyeUlkID0gMTFcbiAgY29uc3QgYnJhQ291bnRyeUlkID0gMzJcbiAgY29uc3QgY2hsQ291bnRyeUlkID0gNDhcblxuICBjb25zdCB7IGNvdW50cnlfaWQ6IGNvdW50cnlJZCwgYWRkcmVzc18xc3RfbGV2ZWwsIGNpdHksIGFkZHJlc3NfM3JkX2xldmVsLCBhZGRyZXNzIH0gPSB2YWx1ZXNcblxuICBjb25zdCBbIGNvdW50cmllcywgc2V0Q291bnRyaWVzIF0gPSB1c2VTdGF0ZSgpXG5cbiAgdXNlRWZmZWN0KCBfID0+IHtcbiAgICAoYXN5bmMgXyA9PiB7XG4gICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGFwaS5nZXQoJ2NvdW50cmllcycpXG4gICAgICBzZXRDb3VudHJpZXMoZGF0YSlcbiAgICB9KSgpXG4gIH0sIFtdKVxuXG4gIGNvbnN0IGhhbmRsZUNvdW50cnlDaGFuZ2UgPSBlID0+IHtcbiAgICBjb25zdCB7IG5hbWUsIHZhbHVlIH0gPSBlLnRhcmdldFxuICAgIHNldFZhbHVlcyh7XG4gICAgICAuLi52YWx1ZXMsXG4gICAgICBbbmFtZV06IHZhbHVlLFxuICAgICAgYWRkcmVzc18xc3RfbGV2ZWw6ICcnLFxuICAgIH0pXG4gIH1cblxuICBjb25zdCBmaXJzdExldmVsTGFiZWwgPSBjb3VudHJ5SWQgPT0gYXJnQ291bnRyeUlkID8gJ1Byb3ZpbmNpYScgOlxuICBjb3VudHJ5SWQgPT0gYnJhQ291bnRyeUlkID8gJ0VzdGFkbycgOlxuICBjb3VudHJ5SWQgPT0gY2hsQ291bnRyeUlkID8gJ1JlZ2nDs24nIDpcbiAgJ1N0YXRlJ1xuXG4gIGNvbnN0IGZpcnN0TGV2ZWxQbHVyYWxMYWJlbCA9IGNvdW50cnlJZCA9PSBhcmdDb3VudHJ5SWQgPyAnUHJvdmluY2lhcycgOlxuICBjb3VudHJ5SWQgPT0gYnJhQ291bnRyeUlkID8gJ0VzdGFkb3MnIDpcbiAgY291bnRyeUlkID09IGNobENvdW50cnlJZCA/ICdSZWdpb25lcycgOlxuICAnU3RhdGVzJ1xuXG4gIGNvbnN0IFsgZmlyc3RMZXZlbExpc3QsIHNldEZpcnN0TGV2ZWxMaXN0IF0gPSB1c2VTdGF0ZSgpXG5cbiAgdXNlRWZmZWN0KF8gPT4ge1xuICAgIChhc3luYyBfID0+IHtcbiAgICAgIGNvbnN0IHBhcnNlZENvdW50cnlJZCA9IHBhcnNlSW50KGNvdW50cnlJZClcbiAgICAgIGNvbnN0IHsgZGF0YTogYWRkcmVzc2VzIH0gPSBbYXJnQ291bnRyeUlkLCBicmFDb3VudHJ5SWQsIGNobENvdW50cnlJZF0uaW5jbHVkZXMocGFyc2VkQ291bnRyeUlkKSA/XG4gICAgICAgIGF3YWl0IGFwaS5nZXQoJ2FkZHJlc3MtMXN0LWxldmVscycsIHtcbiAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgIGNvdW50cnlfaWQ6IGNvdW50cnlJZCxcbiAgICAgICAgICB9LFxuICAgICAgICB9KSA6IHsgZGF0YTogbnVsbCB9XG4gICAgICAgIHNldEZpcnN0TGV2ZWxMaXN0KGFkZHJlc3NlcylcbiAgICB9KSgpXG4gIH0sIFtjb3VudHJ5SWRdKVxuXG4gIGNvbnN0IGNpdHlMYWJlbCA9IGNvdW50cnlJZCA9PSBicmFDb3VudHJ5SWQgPyAnQ2lkYWRlJyA6XG4gIGNvdW50cnlJZCA9PSBjaGxDb3VudHJ5SWQgPyAnUHJvdmluY2lhJyA6XG4gICdDaXVkYWQnXG5cbiAgY29uc3QgdGhpcmRMZXZlbExhYmVsID0gY291bnRyeUlkID09IGNobENvdW50cnlJZCA/ICdDb211bmEnIDogJ0Rpc3RyaWN0J1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJhZGRyZXNzXCI+XG4gICAgICA8aDMgY2xhc3NOYW1lPVwiaDNcIj5VYmljYWNpw7NuPC9oMz5cblxuICAgICAgey8qIGNvdW50cnkgKi99XG4gICAgICA8U2VsZWN0Rm9ybUdyb3VwXG4gICAgICAgIGVycm9yPXtlcnJvcn1cbiAgICAgICAgbGFiZWw9XCJQYcOtc1wiXG4gICAgICAgIGxvYWRpbmc9e2xvYWRpbmd9XG4gICAgICAgIGxpc3Q9e2NvdW50cmllc31cbiAgICAgICAgbGlzdE1hcFZhbHVlPVwiaWRcIlxuICAgICAgICBuYW1lPVwiY291bnRyeV9pZFwiXG4gICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDb3VudHJ5Q2hhbmdlfVxuICAgICAgICBwbHVyYWxMYWJlbD1cIlBhw61zZXNcIlxuICAgICAgICByZXF1aXJlZHM9e3JlcXVpcmVkc31cbiAgICAgICAgdmFsdWU9e2NvdW50cnlJZH1cbiAgICAgIC8+XG5cbiAgICAgIHsvKiAxc3QgbGV2ZWwgKi99XG4gICAgICB7W2FyZ0NvdW50cnlJZCwgYnJhQ291bnRyeUlkLCBjaGxDb3VudHJ5SWRdLm1hcChpZCA9PiBpZCsnJykuaW5jbHVkZXMoY291bnRyeUlkKSAmJiAoXG4gICAgICAgIDxTZWxlY3RGb3JtR3JvdXBcbiAgICAgICAgICBlcnJvcj17ZXJyb3J9XG4gICAgICAgICAgbGFiZWw9e2ZpcnN0TGV2ZWxMYWJlbH1cbiAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nfVxuICAgICAgICAgIGxpc3Q9e2ZpcnN0TGV2ZWxMaXN0fVxuICAgICAgICAgIGxpc3RNYXBWYWx1ZT1cImlkXCJcbiAgICAgICAgICBuYW1lPVwiYWRkcmVzc18xc3RfbGV2ZWxcIlxuICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVJbnB1dENoYW5nZX1cbiAgICAgICAgICBwbHVyYWxMYWJlbD17Zmlyc3RMZXZlbFBsdXJhbExhYmVsfVxuICAgICAgICAgIHJlcXVpcmVkcz17cmVxdWlyZWRzfVxuICAgICAgICAgIHZhbHVlPXthZGRyZXNzXzFzdF9sZXZlbH1cbiAgICAgICAgLz5cbiAgICAgICl9XG5cbiAgICAgIHsvKiBjaXR5ICovfVxuICAgICAge1ticmFDb3VudHJ5SWQsIGNobENvdW50cnlJZF0ubWFwKGlkID0+IGlkKycnKS5pbmNsdWRlcyhjb3VudHJ5SWQpICYmIChcbiAgICAgICAgPEZvcm1Hcm91cD5cbiAgICAgICAgICA8TGFiZWwgaHRtbEZvcj1cImNpdHlcIj57Y2l0eUxhYmVsfTwvTGFiZWw+XG4gICAgICAgICAgPElucHV0XG4gICAgICAgICAgICBpZD1cImNpdHlcIlxuICAgICAgICAgICAgbmFtZT1cImNpdHlcIlxuICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUlucHV0Q2hhbmdlfVxuICAgICAgICAgICAgcmVxdWlyZWQ9e3JlcXVpcmVkc31cbiAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgIHZhbHVlPXtjaXR5fVxuICAgICAgICAgIC8+XG4gICAgICAgICAgPEludmFsaWRGZWVkYmFjayBlcnJvcj17ZXJyb3J9IGxvYWRpbmc9e2xvYWRpbmd9IG5hbWU9XCJjaXR5XCIgLz5cbiAgICAgICAgPC9Gb3JtR3JvdXA+XG4gICAgICApfVxuXG4gICAgICB7LyogM3JkIGxldmVsICovfVxuICAgICAge1tjaGxDb3VudHJ5SWRdLm1hcChpZCA9PiBpZCsnJykuaW5jbHVkZXMoY291bnRyeUlkKSAmJiAoXG4gICAgICAgIDxGb3JtR3JvdXA+XG4gICAgICAgICAgPExhYmVsIGh0bWxGb3I9XCJhZGRyZXNzXzNyZF9sZXZlbFwiPnt0aGlyZExldmVsTGFiZWx9PC9MYWJlbD5cbiAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgIGlkPVwiYWRkcmVzc18zcmRfbGV2ZWxcIlxuICAgICAgICAgICAgbmFtZT1cImFkZHJlc3NfM3JkX2xldmVsXCJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVJbnB1dENoYW5nZX1cbiAgICAgICAgICAgIHJlcXVpcmVkPXtyZXF1aXJlZHN9XG4gICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICB2YWx1ZT17YWRkcmVzc18zcmRfbGV2ZWx9XG4gICAgICAgICAgLz5cbiAgICAgICAgICA8SW52YWxpZEZlZWRiYWNrIGVycm9yPXtlcnJvcn0gbG9hZGluZz17bG9hZGluZ30gbmFtZT1cImFkZHJlc3NfM3JkX2xldmVsXCIgLz5cbiAgICAgICAgPC9Gb3JtR3JvdXA+XG4gICAgICApfVxuXG4gICAgICA8Rm9ybUdyb3VwPlxuICAgICAgICA8TGFiZWwgaHRtbEZvcj1cImFkZHJlc3NcIj5EaXJlY2Npw7NuPC9MYWJlbD5cbiAgICAgICAgPElucHV0XG4gICAgICAgICAgaWQ9XCJhZGRyZXNzXCJcbiAgICAgICAgICBuYW1lPVwiYWRkcmVzc1wiXG4gICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUlucHV0Q2hhbmdlfVxuICAgICAgICAgIHJlcXVpcmVkPXtyZXF1aXJlZHN9XG4gICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgIHZhbHVlPXthZGRyZXNzfVxuICAgICAgICAvPlxuICAgICAgICA8SW52YWxpZEZlZWRiYWNrIGVycm9yPXtlcnJvcn0gbG9hZGluZz17bG9hZGluZ30gbmFtZT1cImFkZHJlc3NcIiAvPlxuICAgICAgPC9Gb3JtR3JvdXA+XG5cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5jb25zdCBQYXltZW50ID0gKHtcbiAgYXBpLFxuICBjYXNoX3BheW1lbnRfbWV0aG9kX2lkLFxuICBlcnJvcixcbiAgaXNDYXJkUGF5bWVudCxcbiAgaXNQYXlVUmVhZHksXG4gIGxvYWRpbmcsXG4gIG9uQ2FzaFBheW1lbnRNZXRob2RDaGFuZ2UsXG4gIG9uQ2hhbmdlLFxuICBwYXltZW50X21ldGhvZF9pZCxcbiAgUE9TLFxuICByZXF1aXJlZHMsXG4gIHZhbGlkYXRpb25FcnJvclxufSkgPT4ge1xuXG4gIC8vIHBheW1lbnQgbWV0aG9kc1xuICBjb25zdCBbIHBheW1lbnRNZXRob2RzLCBzZXRQYXltZW50TWV0aG9kcyBdID0gdXNlU3RhdGUoKVxuXG4gIC8vIGdldCBwYXltZW50IG1ldGhvZHNcbiAgdXNlRWZmZWN0KCBfID0+IHtcbiAgICBjb25zdCBnZXRQYXltZW50TWV0aG9kcyA9IGFzeW5jIF8gPT4ge1xuICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBhcGkuZ2V0KCdwYXltZW50LW1ldGhvZHMnKVxuICAgICAgc2V0UGF5bWVudE1ldGhvZHMoZGF0YSlcbiAgICB9XG4gICAgZ2V0UGF5bWVudE1ldGhvZHMoKVxuICB9LCBbXSlcblxuICAvLyBpbml0IGNhcmQgc2VjdXJlIGZpZWxkc1xuICB1c2VFZmZlY3QoXyA9PiB7XG4gICAgaWYgKGlzUGF5VVJlYWR5ICYmIGlzQ2FyZFBheW1lbnQpIHtcbiAgICAgIFBPUy5pbml0U2VjdXJlRmllbGRzKCdjYXJkLXNlY3VyZS1maWVsZHMnKVxuICAgIH1cbiAgfSwgW2lzUGF5VVJlYWR5LCBpc0NhcmRQYXltZW50XSlcblxuICAvLyBjYXNoIHBheW1lbnQgbWV0aG9kc1xuICBjb25zdCBbIGNhc2hQYXltZW50TWV0aG9kcywgc2V0Q2FzaFBheW1lbnRNZXRob2RzIF0gPSB1c2VTdGF0ZSgpXG5cbiAgLy8gZ2V0IGNhc2ggcGF5bWVudCBtZXRob2RzXG4gIHVzZUVmZmVjdCggXyA9PiB7XG4gICAgY29uc3QgZ2V0Q2FzaFBheW1lbnRNZXRob2RzID0gYXN5bmMgXyA9PiB7XG4gICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGFwaS5nZXQoJ2Nhc2gtcGF5bWVudC1tZXRob2RzJylcbiAgICAgIHNldENhc2hQYXltZW50TWV0aG9kcyhkYXRhKVxuICAgIH1cbiAgICBnZXRDYXNoUGF5bWVudE1ldGhvZHMoKVxuICB9LCBbXSlcblxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwib2Zmc2V0LW1kLTIgY29sLW1kLThcIj5cblxuICAgICAgICA8aDMgY2xhc3NOYW1lPVwiaDNcIj5QYWdvPC9oMz5cblxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC02XCI+XG4gICAgICAgICAgICAgIDxGb3JtR3JvdXA+XG4gICAgICAgICAgICAgICAgeyBwYXltZW50TWV0aG9kcyAmJiBwYXltZW50TWV0aG9kcy5tYXAoKHBheW1lbnRNZXRob2QsIGtleSkgPT4gKFxuICAgICAgICAgICAgICAgICAgPElucHV0UmFkaW9cbiAgICAgICAgICAgICAgICAgICAga2V5PXtrZXl9XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsPXtwYXltZW50TWV0aG9kLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJwYXltZW50XCJcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICBzdGF0ZT17cGF5bWVudF9tZXRob2RfaWR9XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXtwYXltZW50TWV0aG9kLmlkfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApKSB9XG4gICAgICAgICAgICAgICAgeyB2YWxpZGF0aW9uRXJyb3IgJiYgKFxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbnZhbGlkLWZlZWRiYWNrXCI+e3ZhbGlkYXRpb25FcnJvcn08L2Rpdj5cbiAgICAgICAgICAgICAgICApIH1cbiAgICAgICAgICAgICAgPC9Gb3JtR3JvdXA+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtbWQtNlwiPlxuXG4gICAgICAgICAgICAgIHsvKiBjcmVkaXQgLyBkZWJpdCBjYXJkICovfVxuICAgICAgICAgICAgICB7aXNDYXJkUGF5bWVudCA/IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtaW5wdXRzXCI+XG5cbiAgICAgICAgICAgICAgICAgIHsvKiBtYW5kYXRvcnkgZGF0YSAqL31cbiAgICAgICAgICAgICAgICAgIDxGb3JtR3JvdXA+XG4gICAgICAgICAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPVwiY2FyZGhvbGRlci1uYW1lXCI+Tm9tYnJlIGltcHJlc28gZW4gdGFyamV0YTwvTGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxJbnB1dCBpZD1cImNhcmRob2xkZXItbmFtZVwiIG5hbWU9XCJjYXJkaG9sZGVyLW5hbWVcIiByZXF1aXJlZD17cmVxdWlyZWRzfSB0eXBlPVwidGV4dFwiIC8+XG4gICAgICAgICAgICAgICAgICA8L0Zvcm1Hcm91cD5cblxuICAgICAgICAgICAgICAgICAgey8qIGNhcmQgZmllbGRzICovfVxuICAgICAgICAgICAgICAgICAgPEZvcm1Hcm91cD5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD1cImNhcmQtc2VjdXJlLWZpZWxkc1wiIC8+XG4gICAgICAgICAgICAgICAgICAgIDxJbnZhbGlkRmVlZGJhY2sgZXJyb3I9e2Vycm9yfSBsb2FkaW5nPXtsb2FkaW5nfSBuYW1lPVwicGF5bWVudF9vc1wiIC8+XG4gICAgICAgICAgICAgICAgICA8L0Zvcm1Hcm91cD5cblxuICAgICAgICAgICAgICAgICAgey8qIDxGb3JtR3JvdXA+XG4gICAgICAgICAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPVwiY3JlZGl0Q2FyZE5hbWVcIj5Ob21icmUgaW1wcmVzbzwvTGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxJbnB1dCBpZD1cImNyZWRpdENhcmROYW1lXCIgbmFtZT1cImNyZWRpdENhcmROYW1lXCIgcmVxdWlyZWQ9e3JlcXVpcmVkc30gdHlwZT1cInRleHRcIiAvPlxuICAgICAgICAgICAgICAgICAgPC9Gb3JtR3JvdXA+XG4gICAgICAgICAgICAgICAgICA8Rm9ybUdyb3VwPlxuICAgICAgICAgICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj1cImNyZWRpdENhcmROdW1iZXJcIj5OdW1lcm88L0xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8SW5wdXQgaWQ9XCJjcmVkaXRDYXJkTnVtYmVyXCIgbmFtZT1cImNyZWRpdENhcmROdW1iZXJcIiByZXF1aXJlZD17cmVxdWlyZWRzfSB0eXBlPVwidGV4dFwiIC8+XG4gICAgICAgICAgICAgICAgICA8L0Zvcm1Hcm91cD5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLTZcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8Rm9ybUdyb3VwPlxuICAgICAgICAgICAgICAgICAgICAgICAgPExhYmVsIGh0bWxGb3I9XCJjcmVkaXRDYXJkRGF0ZVwiPlZhbGlkZXo8L0xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IGlkPVwiY3JlZGl0Q2FyZERhdGVcIiBuYW1lPVwiY3JlZGl0Q2FyZERhdGVcIiByZXF1aXJlZD17cmVxdWlyZWRzfSB0eXBlPVwidGV4dFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtR3JvdXA+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC02XCI+XG4gICAgICAgICAgICAgICAgICAgICAgPEZvcm1Hcm91cD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPVwiY3JlZGl0Q2FyZENvZGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGFiYnIgdGl0bGU9XCJDw7NkaWdvIGRlIHNlZ3VyaWRhZFwiPkNWVjwvYWJicj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvTGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQgaWQ9XCJjcmVkaXRDYXJkQ29kZVwiIG5hbWU9XCJjcmVkaXRDYXJkQ29kZVwiIHJlcXVpcmVkPXtyZXF1aXJlZHN9IHR5cGU9XCJ0ZXh0XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm1Hcm91cD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj4gKi99XG5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAvLyBjYXNoIHBheW1lbnQgbWV0aG9kc1xuICAgICAgICAgICAgICApIDogcGF5bWVudF9tZXRob2RfaWQgPT09IDMgJiYgKFxuICAgICAgICAgICAgICAgIDxGb3JtR3JvdXA+XG4gICAgICAgICAgICAgICAgICB7Y2FzaFBheW1lbnRNZXRob2RzID09IG51bGwgPyAoXG4gICAgICAgICAgICAgICAgICAgIDxwPkNhcmdhbmRvLi4uPC9wPlxuICAgICAgICAgICAgICAgICAgKSA6IGNhc2hQYXltZW50TWV0aG9kcy5sZW5ndGggPyBjYXNoUGF5bWVudE1ldGhvZHMubWFwKChpdGVtLCBrZXkpID0+IChcbiAgICAgICAgICAgICAgICAgICAgPElucHV0UmFkaW9cbiAgICAgICAgICAgICAgICAgICAgICBrZXk9e2tleX1cbiAgICAgICAgICAgICAgICAgICAgICBsYWJlbD17aXRlbS5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJjYXNoX3BheW1lbnRfbWV0aG9kX2lkXCJcbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17b25DYXNoUGF5bWVudE1ldGhvZENoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgICBzdGF0ZT17Y2FzaF9wYXltZW50X21ldGhvZF9pZH1cbiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17aXRlbS5pZH1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICkpIDogKFxuICAgICAgICAgICAgICAgICAgICA8cD5TaW4gbcOpdG9kbyBkZSBwYWdvIGNvbmZpZ3VyYWRvLjwvcD5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8SW52YWxpZEZlZWRiYWNrIGVycm9yPXtlcnJvcn0gbG9hZGluZz17bG9hZGluZ30gbmFtZT1cImNhc2hfcGF5bWVudF9tZXRob2RfaWRcIiAvPlxuICAgICAgICAgICAgICAgIDwvRm9ybUdyb3VwPlxuICAgICAgICAgICAgICApIH1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgIDwvZGl2PlxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICBAbWVkaWEgKG1pbi13aWR0aDogNzY4cHgpIHtcbiAgICAgICAgICAuY2FyZC1pbnB1dHMge1xuICAgICAgICAgICAgbWFyZ2luLXRvcDogLTIxcHg7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBgfTwvc3R5bGU+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuLy8gUmFkaW9cbmNvbnN0IElucHV0UmFkaW8gPSAoeyBsYWJlbCwgbmFtZSwgb25DaGFuZ2UsIHN0YXRlLCB2YWx1ZSB9KSA9PiB7XG4gIGNvbnN0IHRoZW1lID0gdXNlQ29udGV4dChUaGVtZUNvbnRleHQpXG4gIGNvbnN0IHJhZGlvQ29sb3IgPSB0aGVtZS5jb2xvcnMuYmFja2dyb3VuZFxuICByZXR1cm4gKFxuICAgIDxsYWJlbD5cbiAgICAgIDxpbnB1dCBjaGVja2VkPXtzdGF0ZSA9PT0gdmFsdWV9IHR5cGU9XCJyYWRpb1wiIHsuLi57bmFtZSwgb25DaGFuZ2UsIHZhbHVlfX0gLz5cbiAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZha2UtaW5wdXRcIj5cbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZmFrZS1yYWRpb1wiPjwvc3Bhbj5cbiAgICAgICAgPHNwYW4+e2xhYmVsfTwvc3Bhbj5cbiAgICAgIDwvc3Bhbj5cbiAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgbGFiZWwge1xuICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDVweDtcbiAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgfVxuICAgICAgICBpbnB1dCB7XG4gICAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIH1cbiAgICAgICAgLmZha2UtaW5wdXQge1xuICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLXByaW1hcnkpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICBmb250LXNpemU6IDFyZW07XG4gICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNDtcbiAgICAgICAgICBwYWRkaW5nOiAuMzc1cmVtIC43NXJlbTtcbiAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIC4zcywgYm9yZGVyLWNvbG9yIC4zcywgY29sb3IgLjNzO1xuICAgICAgICB9XG4gICAgICAgIC5mYWtlLXJhZGlvIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS13aGl0ZSk7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tZ3JheTIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgICAgaGVpZ2h0OiAxNXB4O1xuICAgICAgICAgIG1hcmdpbi1yaWdodDogNy41cHg7XG4gICAgICAgICAgcGFkZGluZzogMXB4O1xuICAgICAgICAgIHZlcnRpY2FsLWFsaWduOiAtMnB4O1xuICAgICAgICAgIHdpZHRoOiAxNXB4O1xuICAgICAgICB9XG4gICAgICAgIC5mYWtlLXJhZGlvOjpiZWZvcmUge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7cmFkaW9Db2xvcn07XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICAgIGNvbnRlbnQ6ICcnO1xuICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgLjNzO1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICB9XG4gICAgICAgIGlucHV0OmNoZWNrZWQgKyAuZmFrZS1pbnB1dCB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeSk7XG4gICAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICB9XG4gICAgICAgIGlucHV0OmNoZWNrZWQgKyAuZmFrZS1pbnB1dCAuZmFrZS1yYWRpbzo6YmVmb3JlIHtcbiAgICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICB9XG4gICAgICAgIHsvKiBpbnB1dDpmb2N1cyArIC5mYWtlLWlucHV0IHtcbiAgICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLXdoaXRlKTtcbiAgICAgICAgfSAqL31cbiAgICAgIGB9PC9zdHlsZT5cbiAgICA8L2xhYmVsPlxuICApXG59XG5cbi8vIGdldEluaXRpYWxQcm9wc1xuQ29tcGxldGVSZWdpc3RlclBhZ2UuZ2V0SW5pdGlhbFByb3BzID0gYXN5bmMgY3R4ID0+IHtcblxuICBjb25zdCB7YXBpLCByZXMsIHVzZXJ9ID0gY3R4XG5cbiAgLy8gaWYgdXNlciBoYXMgYWxyZWFkeSBjb21wbGV0ZWQgcmVnaXN0cnksIHJlZGlyZWN0IGl0XG4gIGlmICh1c2VyLnJlZ2lzdGVyX2NvbXBsZXRlZF9hdCkge1xuICAgIGxldCBtZXNzYWdlID0gSlNPTi5zdHJpbmdpZnkoeyBpbmZvOiBcIllhIGhhIGNvbXBsZXRhZG8gc3UgcmVnaXN0cm8uXCIgfSlcbiAgICBub29raWVzLnNldChjdHgsICdmbGFzaF9tZXNzYWdlJywgbWVzc2FnZSwgeyBwYXRoOiAnLycgfSlcbiAgICBpZiAocmVzKSB7XG4gICAgICByZXMucmVkaXJlY3QoJy8nKVxuICAgICAgcmVzLmVuZCgpXG4gICAgICByZXR1cm4geyB9XG4gICAgfSBlbHNlIHtcbiAgICAgIFJvdXRlci5iYWNrKClcbiAgICB9XG4gIH1cblxuICAvLyBnZXQgcGFja2FnZXNcbiAgbGV0IHBhY2thZ2VzXG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBhcGkuZ2V0KCdwYWNrYWdlcycpXG4gICAgcGFja2FnZXMgPSB7IGl0ZW1zOiBkYXRhIH1cbiAgfSBjYXRjaChlcnJvcikge1xuICAgIHBhY2thZ2VzID0geyBlcnJvciB9XG4gIH1cblxuICAvLyByZXR1cm5cbiAgcmV0dXJuIHsgcGFja2FnZXMsIHVzZXIgfVxufVxuXG4vLyBleHBvcnRcbmV4cG9ydCBkZWZhdWx0IHdpdGhBdXRoKENvbXBsZXRlUmVnaXN0ZXJQYWdlKVxuIl19 */\\n/*@ sourceURL=/Users/rafael/Projects/somosgad/dale/pages/register/complete.js */\"));\n};\n\n_s(CompleteRegisterPage, \"ldKt2dWsS4ExnfWlqIlfnaAm2DQ=\", false, function () {\n  return [useScript];\n});\n\n_c = CompleteRegisterPage;\n\nvar CompleteRegisterForm = function CompleteRegisterForm(_ref2) {\n  _s2();\n\n  var api = _ref2.api,\n      isPayUReady = _ref2.isPayUReady,\n      packages = _ref2.packages,\n      POS = _ref2.POS;\n\n  var _ref3 = packages.items.find(function (item) {\n    return item.amount == 0;\n  }) || {},\n      free_package_id = _ref3.id;\n\n  var debug = false && !IS_PRODUCTION;\n  var requireds = IS_PRODUCTION;\n\n  var _useContext = useContext(UserContext),\n      user = _useContext.user,\n      updateUser = _useContext.updateUser;\n\n  var _useState2 = useState(),\n      genders = _useState2[0],\n      setGenders = _useState2[1];\n\n  var _useState3 = useState(false),\n      discounts = _useState3[0],\n      setDiscounts = _useState3[1];\n\n  var _useState4 = useState(false),\n      blockDiscountFields = _useState4[0],\n      setBlockDiscountFields = _useState4[1];\n\n  var _useState5 = useState({\n    name: '',\n    gender_id: '',\n    document: '',\n    country_id: '',\n    address_1st_level: '',\n    city: '',\n    address_3rd_level: '',\n    address: '',\n    package_id: '',\n    payment_method_id: null,\n    payment_os: null,\n    cash_payment_method_id: null,\n    terms: null,\n    discount_id: null\n  }),\n      values = _useState5[0],\n      setValues = _useState5[1];\n\n  var _useState6 = useState(),\n      loading = _useState6[0],\n      setLoading = _useState6[1];\n\n  var _useState7 = useState(),\n      error = _useState7[0],\n      setError = _useState7[1];\n  /* get genders */\n\n\n  useEffect(function (_) {\n    (function () {\n      var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_) {\n        var _yield$api$get, data;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return api.get('genders');\n\n              case 2:\n                _yield$api$get = _context.sent;\n                data = _yield$api$get.data;\n                setGenders(data);\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref4.apply(this, arguments);\n      };\n    })()();\n  }, []);\n  /* get discounts */\n\n  useEffect(function (_) {\n    (function () {\n      var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_) {\n        var _yield$api$get2, data;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return api.get('discounts');\n\n              case 2:\n                _yield$api$get2 = _context2.sent;\n                data = _yield$api$get2.data;\n                data = data.map(function (disc, index) {\n                  disc.dsc_id = 'dsc_' + index;\n                  return disc;\n                });\n                setDiscounts(data);\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x2) {\n        return _ref5.apply(this, arguments);\n      };\n    })()();\n  }, []);\n  /* fill user form */\n\n  useEffect(function (_) {\n    if (user) {\n      setValues(_objectSpread(_objectSpread({}, values), {}, {\n        name: user.name,\n        gender_id: user.gender_id ? user.gender_id : '',\n        document: user.document ? user.document : '',\n        address: user.address ? user.address : '',\n        city: user.city ? user.city : '',\n        country_id: user.country_id ? user.country_id : '',\n        package_id: user.package_id_intention ? user.package_id_intention : ''\n      }));\n    }\n  }, [user]);\n  /* handle general input change */\n\n  var handleInputChange = function handleInputChange(e) {\n    var _e$target = e.target,\n        checked = _e$target.checked,\n        name = _e$target.name,\n        value = _e$target.value,\n        type = _e$target.type;\n    setValues(_objectSpread(_objectSpread({}, values), {}, _defineProperty({}, name, type === 'checkbox' ? checked ? value === 'true' ? true : value : false : value)));\n  };\n  /* handle disocunt change */\n\n\n  var handleDiscountChange = /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_ref6) {\n      var _objectSpread3;\n\n      var _ref6$target, name, value, id, valid;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _ref6$target = _ref6.target, name = _ref6$target.name, value = _ref6$target.value, id = _ref6$target.id;\n              _context3.next = 3;\n              return checkDiscount(value);\n\n            case 3:\n              valid = _context3.sent;\n              // console.table(valid)\n              setValues(_objectSpread(_objectSpread({}, values), {}, (_objectSpread3 = {}, _defineProperty(_objectSpread3, name, value), _defineProperty(_objectSpread3, \"discount_id\", valid ? id : null), _objectSpread3)));\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function handleDiscountChange(_x3) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n  /* handle discount change */\n\n\n  var checkDiscount = /*#__PURE__*/function () {\n    var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(supporterCode) {\n      var prom;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              // Simulate API Call\n              prom = function prom(delay, value) {\n                return new Promise(function (resolve) {\n                  return setTimeout(resolve, delay, value);\n                });\n              };\n\n              _context4.next = 3;\n              return prom(50, supporterCode.length === 5);\n\n            case 3:\n              return _context4.abrupt(\"return\", _context4.sent);\n\n            case 4:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function checkDiscount(_x4) {\n      return _ref8.apply(this, arguments);\n    };\n  }();\n  /* handle package change */\n\n\n  var onPackageChange = useCallback(function (e) {\n    var package_id = parseInt(e.target.value, 10);\n    setValues(function (oldValues) {\n      return _objectSpread(_objectSpread({}, oldValues), {}, {\n        package_id: package_id,\n        payment_method_id: package_id === free_package_id ? null : values.payment_method_id\n      });\n    });\n  }, []);\n  /* handle payment method change */\n\n  function onPaymentChange(e) {\n    setValues(_objectSpread(_objectSpread({}, values), {}, {\n      payment_method_id: parseInt(e.target.value, 10),\n      cash_payment_method_id: null\n    }));\n  }\n\n  function onCashPaymentMethodChange(e) {\n    setValues(_objectSpread(_objectSpread({}, values), {}, {\n      cash_payment_method_id: parseInt(e.target.value, 10)\n    }));\n  }\n  /* token */\n\n\n  function createToken() {\n    return _createToken.apply(this, arguments);\n  } // is card payment\n\n\n  function _createToken() {\n    _createToken = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n      var promise;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              promise = new Promise(function (resolve, reject) {\n                var additionalData = {\n                  holder_name: document.getElementById('cardholder-name').value // custom_data: document.getElementById('custom').value,\n\n                };\n                POS.createToken(additionalData, function (result) {\n                  var json = JSON.parse(result);\n                  console.log('json', json);\n                  json.token ? resolve(json) : reject(json);\n                });\n              });\n              return _context6.abrupt(\"return\", promise);\n\n            case 2:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n    return _createToken.apply(this, arguments);\n  }\n\n  var credit_card_id = 1;\n  var debit_card_id = 2;\n  var isCardPayment = [credit_card_id, debit_card_id].includes(values.payment_method_id);\n  /* submit */\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(e) {\n      var paymentData, data, _yield$api$post, _yield$api$post$data, _user, order, _error$response, _data, status;\n\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              e.preventDefault();\n              setLoading(true);\n              setError(false);\n              _context5.prev = 3;\n\n              if (!(values.package_id && values.package_id !== free_package_id && values.payment_method_id && isCardPayment)) {\n                _context5.next = 10;\n                break;\n              }\n\n              _context5.next = 7;\n              return createToken();\n\n            case 7:\n              _context5.t0 = _context5.sent;\n              _context5.next = 11;\n              break;\n\n            case 10:\n              _context5.t0 = null;\n\n            case 11:\n              paymentData = _context5.t0;\n              data = _objectSpread(_objectSpread({}, values), {}, {\n                payment_os: paymentData\n              });\n\n              if (data.country_id === '') {\n                delete data.country_id;\n              }\n\n              if (data.address_1st_level === '') {\n                delete data.address_1st_level;\n              }\n\n              if (data.address_3rd_level === '') {\n                delete data.address_3rd_level;\n              }\n\n              _context5.prev = 16;\n              _context5.next = 19;\n              return api.post('register/complete', data);\n\n            case 19:\n              _yield$api$post = _context5.sent;\n              _yield$api$post$data = _yield$api$post.data;\n              _user = _yield$api$post$data.user;\n              order = _yield$api$post$data.order;\n              updateUser(_user);\n\n              if (order) {\n                Router.push({\n                  pathname: '/register/confirm',\n                  query: {\n                    download_link: order.download_link,\n                    link: order.link\n                  }\n                }, '/register/confirm');\n              } else {\n                Router.push('/');\n              }\n\n              _context5.next = 30;\n              break;\n\n            case 27:\n              _context5.prev = 27;\n              _context5.t1 = _context5[\"catch\"](16);\n\n              if (_context5.t1.response) {\n                _error$response = _context5.t1.response, _data = _error$response.data, status = _error$response.status;\n\n                if (status === 422) {\n                  setError(_data);\n                }\n              } else if (_context5.t1.request) {\n                setError(_context5.t1);\n              } else {\n                setError(_context5.t1);\n              }\n\n            case 30:\n              _context5.next = 35;\n              break;\n\n            case 32:\n              _context5.prev = 32;\n              _context5.t2 = _context5[\"catch\"](3);\n              setError(_context5.t2.description ? {\n                errors: {\n                  payment_os: _context5.t2.description\n                }\n              } : _context5.t2);\n\n            case 35:\n              setLoading(false);\n\n            case 36:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5, null, [[3, 32], [16, 27]]);\n    }));\n\n    return function handleSubmit(_x5) {\n      return _ref9.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"form\", {\n    method: \"post\",\n    onSubmit: handleSubmit,\n    className: \"jsx-1643220738\"\n  }, error && error.message && __jsx(\"div\", {\n    className: \"jsx-1643220738\" + \" \" + \"invalid-feedback\"\n  }, error.message), debug && __jsx(\"pre\", {\n    style: {\n      color: '#fff'\n    },\n    className: \"jsx-1643220738\"\n  }, JSON.stringify(values, null, 2)), __jsx(\"div\", {\n    className: \"jsx-1643220738\" + \" \" + \"row\"\n  }, __jsx(\"div\", {\n    className: \"jsx-1643220738\" + \" \" + \"col-md-6\"\n  }, __jsx(\"div\", {\n    className: \"jsx-1643220738\" + \" \" + \"data\"\n  }, __jsx(\"h3\", {\n    className: \"jsx-1643220738\" + \" \" + \"h3\"\n  }, \"Tus datos\"), __jsx(FormGroup, null, __jsx(Label, {\n    htmlFor: \"name\"\n  }, \"Nombre completo\"), __jsx(Input, {\n    id: \"name\",\n    name: \"name\",\n    onChange: handleInputChange,\n    required: requireds,\n    value: values.name\n  }), __jsx(InvalidFeedback, {\n    error: error,\n    loading: loading,\n    name: \"name\"\n  })), __jsx(FormGroup, null, __jsx(Label, {\n    htmlFor: \"gender_id\"\n  }, \"G\\xE9nero\"), __jsx(Select, {\n    id: \"gender_id\",\n    name: \"gender_id\",\n    onChange: handleInputChange,\n    required: requireds,\n    value: values.gender_id\n  }, !genders ? __jsx(\"option\", {\n    disabled: true,\n    value: \"\",\n    className: \"jsx-1643220738\"\n  }, \"Cargando...\") : genders.length ? __jsx(React.Fragment, null, __jsx(\"option\", {\n    disabled: true,\n    value: \"\",\n    className: \"jsx-1643220738\"\n  }, \"Selecciona tu g\\xE9nero\"), genders.map(function (genre, key) {\n    return __jsx(\"option\", _extends({\n      key: key\n    }, {\n      value: genre.id,\n      className: \"jsx-1643220738\"\n    }), genre.name);\n  })) : __jsx(\"option\", {\n    disabled: true,\n    value: \"\",\n    className: \"jsx-1643220738\"\n  }, \"Incapaz de cargar g\\xE9neros\")), __jsx(InvalidFeedback, {\n    error: error,\n    loading: loading,\n    name: \"gender_id\"\n  })), __jsx(FormGroup, null, __jsx(Label, {\n    htmlFor: \"document\"\n  }, \"Documento\"), __jsx(Input, {\n    id: \"document\",\n    name: \"document\",\n    onChange: handleInputChange,\n    required: requireds,\n    type: \"text\",\n    value: values.document\n  }), __jsx(InvalidFeedback, {\n    error: error,\n    loading: loading,\n    name: \"document\"\n  })), discounts && discounts.map(function (d) {\n    return __jsx(FormGroup, {\n      key: d.id\n    }, __jsx(Label, {\n      htmlFor: d.dsc_id\n    }, d.name), __jsx(Input, {\n      disabled: discounts.find(function (disc) {\n        return !['', undefined].includes(values[disc.dsc_id]) && disc.id != d.id;\n      }),\n      id: d.id,\n      maxLength: 5,\n      name: d.dsc_id,\n      onChange: handleDiscountChange,\n      type: \"text\",\n      style: values.discount_id == d.id ? {\n        backgroundColor: 'rgb(206, 249, 206)'\n      } : {},\n      value: values[d.dsc_id] || '',\n      readOnly: blockDiscountFields\n    }), __jsx(\"div\", {\n      style: {\n        \"float\": 'right',\n        paddingTop: '10px'\n      },\n      className: \"jsx-1643220738\"\n    }, __jsx(Loading, {\n      size: \"20\",\n      color: \"white\",\n      loadingState: values.discount_id == d.id && blockDiscountFields\n    })));\n  }))), __jsx(\"div\", {\n    className: \"jsx-1643220738\" + \" \" + \"col-md-6\"\n  }, __jsx(Address, {\n    api: api,\n    error: error,\n    handleInputChange: handleInputChange,\n    loading: loading,\n    requireds: requireds,\n    setValues: setValues,\n    values: values\n  }))), __jsx(Packages, {\n    error: packages.error ? packages.error : null,\n    items: packages.items ? packages.items : null,\n    onChange: onPackageChange,\n    package_id: values.package_id,\n    validationError: !loading && error && error.errors && error.errors.package_id,\n    discount_id: values.discount_id,\n    setBlockDiscountFields: setBlockDiscountFields\n  }), values.package_id && values.package_id !== free_package_id && __jsx(Payment, {\n    api: api,\n    cash_payment_method_id: values.cash_payment_method_id,\n    error: error,\n    isCardPayment: isCardPayment,\n    isPayUReady: isPayUReady,\n    loading: loading,\n    onCashPaymentMethodChange: onCashPaymentMethodChange,\n    onChange: onPaymentChange,\n    payment_method_id: values.payment_method_id,\n    POS: POS,\n    requireds: requireds,\n    validationError: !loading && error && error.errors && error.errors.payment_method_id\n  }), __jsx(\"div\", {\n    className: \"jsx-1643220738\" + \" \" + \"row align-items-center\"\n  }, __jsx(\"div\", {\n    className: \"jsx-1643220738\" + \" \" + \"col-md-6 offset-md-4\"\n  }, __jsx(\"label\", {\n    className: \"jsx-1643220738\" + \" \" + \"terms\"\n  }, __jsx(\"input\", {\n    checked: values.terms,\n    name: \"terms\",\n    onChange: handleInputChange,\n    required: requireds,\n    type: \"checkbox\",\n    value: \"true\",\n    className: \"jsx-1643220738\"\n  }), __jsx(\"span\", {\n    className: \"jsx-1643220738\"\n  }, \"He le\\xEDdo y acepto \", __jsx(Link, {\n    href: \"/terminos-y-politicas\"\n  }, __jsx(\"a\", {\n    target: \"_blank\",\n    className: \"jsx-1643220738\"\n  }, \"el contrato\")), \" de \", CONFIG.appName)), __jsx(InvalidFeedback, {\n    error: error,\n    loading: loading,\n    name: \"terms\"\n  })), __jsx(\"div\", {\n    className: \"jsx-1643220738\" + \" \" + \"col-md-2 text-right\"\n  }, __jsx(Button, {\n    block: true,\n    color: \"secondary\",\n    disabled: loading,\n    type: \"submit\"\n  }, \"Enviar\"))), __jsx(_JSXStyle, {\n    id: \"1643220738\"\n  }, \".h3{font-size:20px;font-weight:bold;margin-bottom:10px;}hr.jsx-1643220738,.hr.jsx-1643220738{margin-top:0;margin-bottom:15px;}.terms.jsx-1643220738{font-size:18px;}.terms.jsx-1643220738 input.jsx-1643220738{margin-right:5px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9yYWZhZWwvUHJvamVjdHMvc29tb3NnYWQvZGFsZS9wYWdlcy9yZWdpc3Rlci9jb21wbGV0ZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFzZGtCLEFBRzBCLEFBTUYsQUFJRSxBQUdFLGFBTkUsRUFORixBQVVuQixFQUdBLGVBWnFCLEFBTXJCLG1CQUxBIiwiZmlsZSI6Ii9Vc2Vycy9yYWZhZWwvUHJvamVjdHMvc29tb3NnYWQvZGFsZS9wYWdlcy9yZWdpc3Rlci9jb21wbGV0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB1c2VTY3JpcHQsIHsgU2NyaXB0U3RhdHVzIH0gZnJvbSAnQGNoYXJsaWV0YW5nby91c2Utc2NyaXB0J1xuaW1wb3J0IEhlYWQgZnJvbSAnbmV4dC9oZWFkJ1xuaW1wb3J0IExpbmsgZnJvbSAnbmV4dC9saW5rJ1xuaW1wb3J0IFJvdXRlciBmcm9tICduZXh0L3JvdXRlcidcbmltcG9ydCBub29raWVzIGZyb20gJ25vb2tpZXMnXG4vLyBpbXBvcnQgc2xlZXAgZnJvbSAnc2xlZXAtcHJvbWlzZSdcbmltcG9ydCB7IFRoZW1lQ29udGV4dCB9IGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJ1xuaW1wb3J0IExheW91dCBmcm9tICd+L2NvbXBvbmVudHMvbGF5b3V0L0xheW91dCdcbmltcG9ydCB7IENPTkZJRyB9IGZyb20gJ34vY29uZmlnJ1xuaW1wb3J0IEZvcm1Hcm91cCBmcm9tICd+L2NvbXBvbmVudHMvbGF5b3V0L0F1dGhNb2RhbC9Gb3JtR3JvdXAnXG5pbXBvcnQgTGFiZWwgZnJvbSAnfi9jb21wb25lbnRzL2xheW91dC9BdXRoTW9kYWwvTGFiZWwnXG5pbXBvcnQgSW5wdXQgZnJvbSAnfi9jb21wb25lbnRzL2xheW91dC9BdXRoTW9kYWwvSW5wdXQnXG5pbXBvcnQgQnV0dG9uIGZyb20gJ34vY29tcG9uZW50cy9idXR0b24nXG5pbXBvcnQgeyB1c2VDb250ZXh0LCB1c2VFZmZlY3QsIHVzZVN0YXRlLCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IFVzZXJDb250ZXh0IGZyb20gJ34vY29udGV4dHMvVXNlckNvbnRleHQnXG5pbXBvcnQgUGFja2FnZXMgZnJvbSAnfi9jb21wb25lbnRzL1BhY2thZ2VzJ1xuaW1wb3J0IFNlbGVjdCBmcm9tICd+L2NvbXBvbmVudHMvU2VsZWN0L1NlbGVjdCdcbmltcG9ydCB7IElTX1BST0RVQ1RJT04sIEhBU19XSU5ET1cgfSBmcm9tICd+L2NvbnN0YW50cy9jb25zdGFudHMnXG5pbXBvcnQgd2l0aEF1dGggZnJvbSAnfi9jb21wb25lbnRzL3dpdGhBdXRoJ1xuaW1wb3J0IExvYWRpbmcgZnJvbSAnfi9jb21wb25lbnRzL0xvYWRpbmcvTG9hZGluZydcblxuLy8gcGFnZVxuY29uc3QgQ29tcGxldGVSZWdpc3RlclBhZ2UgPSAoeyBhcGksIGxheW91dFByb3BzLCBwYWNrYWdlcywgdXNlciB9KSA9PiB7XG4gIGNvbnN0IFsgcmVhZHksIHN0YXR1cyBdID0gdXNlU2NyaXB0KCdodHRwczovL2pzLnBheW1lbnRzb3MuY29tL3YyL2xhdGVzdC9zZWN1cmUtZmllbGRzLm1pbi5qcycpXG4gIGNvbnN0IFBPUyA9IHJlYWR5ICYmIEhBU19XSU5ET1cgPyB3aW5kb3cuUE9TIDogbnVsbFxuICBjb25zdCBwYXlVRW52ID0gJ3Rlc3QnXG4gIGNvbnN0IGJ1c2luZXNzVW5pdFB1YmxpY0tleSA9ICc4ODk4NTAzNi02NTMwLTRiNWEtYTdlYy1jNGUwN2VjMDdmNmMnXG4gIGNvbnN0IFsgaXNQYXlVUmVhZHksIHNldElzUGF5VVJlYWR5IF0gPSB1c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgUE9TU3R5bGUgPSB7XG4gICAgYmFzZToge1xuICAgICAgYm9yZGVyUmFkaXVzOiAnLjE1cmVtJyxcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJ3doaXRlJyxcbiAgICAgIGhlaWdodDogJ2NhbGMoMS41ZW0gKyAuNzVyZW0gKyAycHgpJyxcbiAgICAgIGZvbnRTaXplOiAnMTJweCcsXG4gICAgICBwYWRkaW5nOicwcHggM3B4JyxcbiAgICAgIG1hcmdpbkxlZnQ6ICc1cHgnLFxuICAgICAgY2FyZEltYWdlOiB7XG4gICAgICAgIGJvcmRlclRvcFJpZ2h0UmFkaXVzOiAwLFxuICAgICAgICBib3JkZXJCb3R0b21SaWdodFJhZGl1czogMCxcbiAgICAgICAgbWFyZ2luOiAwLFxuICAgICAgfSxcbiAgICAgIHBhbjp7XG4gICAgICAgIHdpZHRoOicxNjBweCcsXG4gICAgICAgIGJvcmRlclRvcExlZnRSYWRpdXM6IDAsXG4gICAgICAgIGJvcmRlckJvdHRvbUxlZnRSYWRpdXM6IDAsXG4gICAgICAgIG1hcmdpbkxlZnQ6IDAsXG4gICAgICB9LFxuICAgICAgZXhwaXJhdGlvbkRhdGU6IHsgd2lkdGg6ICc0N3B4JyB9LFxuICAgICAgc2VjdXJlRmllbGRzOiB7IGxlZnQ6ICc0MHB4JyB9LFxuICAgICAgY3Z2OiB7IHdpZHRoOiAnMzVweCcgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChzdGF0dXMgPT09IFNjcmlwdFN0YXR1cy5FUlJPUikge1xuICAgIGNvbnNvbGUubG9nKCdGYWlsZWQgdG8gbG9hZCBQT1MgQVBJJylcbiAgfVxuXG4gIHVzZUVmZmVjdChfID0+IHtcbiAgICBpZiAoUE9TKSB7XG4gICAgICBQT1Muc2V0UHVibGljS2V5KGJ1c2luZXNzVW5pdFB1YmxpY0tleSlcbiAgICAgIFBPUy5zZXRFbnZpcm9ubWVudChwYXlVRW52KVxuICAgICAgUE9TLnNldFN0eWxlKFBPU1N0eWxlKVxuICAgICAgUE9TLnNldENhcmROdW1iZXJQbGFjZWhvbGRlcignVGFyamV0YSBkZSBjcsOpZGl0bycpXG4gICAgICBQT1Muc2V0RXhwaXJhdGlvbkRhdGVQbGFjZWhvbGRlcignTU0vQUEnKTtcbiAgICAgIHNldElzUGF5VVJlYWR5KHRydWUpXG4gICAgfVxuICB9LCBbUE9TXSlcblxuICByZXR1cm4gKFxuICAgIDxMYXlvdXQgey4uLmxheW91dFByb3BzfT5cbiAgICAgIDxIZWFkPlxuICAgICAgICA8dGl0bGU+Q29uZmlybWFjacOzbiAmbHQ7IFJlZ2lzdHJvICZsdDsge0NPTkZJRy5hcHBOYW1lfTwvdGl0bGU+XG4gICAgICA8L0hlYWQ+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInJncGFnZSBjb250YWluZXItZmx1aWRcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC14bC04IG9mZnNldC14bC0yXCI+XG5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJoMlwiPkNvbXBsZXRhIHR1IHJlZ2lzdHJvPC9oMT5cblxuICAgICAgICAgICAgPENvbXBsZXRlUmVnaXN0ZXJGb3JtIHsuLi57YXBpLCBpc1BheVVSZWFkeSwgcGFja2FnZXMsIFBPU319IC8+XG5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgLnJncGFnZSB7XG4gICAgICAgICAgcGFkZGluZy10b3A6IDQwcHg7XG4gICAgICAgICAgcGFkZGluZy1ib3R0b206IDEyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC5oMiB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICAgICAgfVxuICAgICAgYH08L3N0eWxlPlxuICAgIDwvTGF5b3V0PlxuICApXG59XG5cbmNvbnN0IENvbXBsZXRlUmVnaXN0ZXJGb3JtID0gKHsgYXBpLCBpc1BheVVSZWFkeSwgcGFja2FnZXMsIFBPUyB9KSA9PiB7XG5cbiAgY29uc3QgeyBpZDogZnJlZV9wYWNrYWdlX2lkIH0gPSBwYWNrYWdlcy5pdGVtcy5maW5kKGl0ZW0gPT4gaXRlbS5hbW91bnQgPT0gMCkgfHwge31cblxuICBjb25zdCBkZWJ1ZyA9IGZhbHNlICYmICEgSVNfUFJPRFVDVElPTlxuICBjb25zdCByZXF1aXJlZHMgPSBJU19QUk9EVUNUSU9OXG5cbiAgY29uc3QgeyB1c2VyLCB1cGRhdGVVc2VyIH0gPSB1c2VDb250ZXh0KFVzZXJDb250ZXh0KVxuXG4gIGNvbnN0IFsgZ2VuZGVycywgc2V0R2VuZGVycyBdID0gdXNlU3RhdGUoKVxuICBjb25zdCBbIGRpc2NvdW50cywgc2V0RGlzY291bnRzIF0gPSB1c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgWyBibG9ja0Rpc2NvdW50RmllbGRzLCBzZXRCbG9ja0Rpc2NvdW50RmllbGRzIF0gPSB1c2VTdGF0ZShmYWxzZSlcblxuICBjb25zdCBbIHZhbHVlcywgc2V0VmFsdWVzIF0gPSB1c2VTdGF0ZSh7XG4gICAgbmFtZTogJycsXG4gICAgZ2VuZGVyX2lkOiAnJyxcbiAgICBkb2N1bWVudDogJycsXG4gICAgY291bnRyeV9pZDogJycsXG4gICAgYWRkcmVzc18xc3RfbGV2ZWw6ICcnLFxuICAgIGNpdHk6ICcnLFxuICAgIGFkZHJlc3NfM3JkX2xldmVsOiAnJyxcbiAgICBhZGRyZXNzOiAnJyxcbiAgICBwYWNrYWdlX2lkOiAnJyxcbiAgICBwYXltZW50X21ldGhvZF9pZDogbnVsbCxcbiAgICBwYXltZW50X29zOiBudWxsLFxuICAgIGNhc2hfcGF5bWVudF9tZXRob2RfaWQ6IG51bGwsXG4gICAgdGVybXM6IG51bGwsXG4gICAgZGlzY291bnRfaWQ6IG51bGwsXG4gIH0pXG5cbiAgY29uc3QgWyBsb2FkaW5nLCBzZXRMb2FkaW5nIF0gPSB1c2VTdGF0ZSgpXG4gIGNvbnN0IFsgZXJyb3IsIHNldEVycm9yIF0gPSB1c2VTdGF0ZSgpXG5cbiAgLyogZ2V0IGdlbmRlcnMgKi9cbiAgdXNlRWZmZWN0KF8gPT4ge1xuICAgIChhc3luYyBfID0+IHtcbiAgICAgIGNvbnN0IHtkYXRhfSA9IGF3YWl0IGFwaS5nZXQoJ2dlbmRlcnMnKVxuICAgICAgc2V0R2VuZGVycyhkYXRhKVxuICAgIH0pKClcbiAgfSwgW10pXG5cbiAgIC8qIGdldCBkaXNjb3VudHMgKi9cbiAgIHVzZUVmZmVjdChfID0+IHtcbiAgICAoYXN5bmMgXyA9PiB7XG4gICAgICB2YXIgeyBkYXRhIH0gPSBhd2FpdCBhcGkuZ2V0KCdkaXNjb3VudHMnKVxuXG4gICAgICBkYXRhID0gZGF0YS5tYXAoIChkaXNjLCBpbmRleCkgPT4ge1xuICAgICAgICBkaXNjLmRzY19pZCA9ICdkc2NfJyArIGluZGV4XG4gICAgICAgIHJldHVybiBkaXNjXG4gICAgICB9KVxuXG4gICAgICBzZXREaXNjb3VudHMoZGF0YSlcbiAgICB9KSgpXG4gIH0sIFtdKVxuXG4gIC8qIGZpbGwgdXNlciBmb3JtICovXG4gIHVzZUVmZmVjdChfID0+IHtcbiAgICBpZiAodXNlcikge1xuICAgICAgc2V0VmFsdWVzKHtcbiAgICAgICAgLi4udmFsdWVzLFxuICAgICAgICBuYW1lOiB1c2VyLm5hbWUsXG4gICAgICAgIGdlbmRlcl9pZDogdXNlci5nZW5kZXJfaWQgPyB1c2VyLmdlbmRlcl9pZCA6ICcnLFxuICAgICAgICBkb2N1bWVudDogdXNlci5kb2N1bWVudCA/IHVzZXIuZG9jdW1lbnQgOiAnJyxcbiAgICAgICAgYWRkcmVzczogdXNlci5hZGRyZXNzID8gdXNlci5hZGRyZXNzIDogJycsXG4gICAgICAgIGNpdHk6IHVzZXIuY2l0eSA/IHVzZXIuY2l0eSA6ICcnLFxuICAgICAgICBjb3VudHJ5X2lkOiB1c2VyLmNvdW50cnlfaWQgPyB1c2VyLmNvdW50cnlfaWQgOiAnJyxcbiAgICAgICAgcGFja2FnZV9pZDogdXNlci5wYWNrYWdlX2lkX2ludGVudGlvbiA/IHVzZXIucGFja2FnZV9pZF9pbnRlbnRpb24gOiAnJyxcbiAgICAgIH0pXG4gICAgfVxuICB9LCBbdXNlcl0pXG5cbiAgLyogaGFuZGxlIGdlbmVyYWwgaW5wdXQgY2hhbmdlICovXG4gIGNvbnN0IGhhbmRsZUlucHV0Q2hhbmdlID0gZSA9PiB7XG4gICAgY29uc3QgeyBjaGVja2VkLCBuYW1lLCB2YWx1ZSwgdHlwZSB9ID0gZS50YXJnZXRcbiAgICBzZXRWYWx1ZXMoe1xuICAgICAgLi4udmFsdWVzLFxuICAgICAgW25hbWVdOiB0eXBlID09PSAnY2hlY2tib3gnID9cbiAgICAgICAgKGNoZWNrZWQgPyAodmFsdWUgPT09ICd0cnVlJyA/IHRydWUgOiB2YWx1ZSkgOiBmYWxzZSkgOlxuICAgICAgICB2YWx1ZSxcbiAgICB9KVxuICB9XG5cbiAgLyogaGFuZGxlIGRpc29jdW50IGNoYW5nZSAqL1xuICBjb25zdCBoYW5kbGVEaXNjb3VudENoYW5nZSA9IGFzeW5jICh7dGFyZ2V0OnsgbmFtZSwgdmFsdWUsIGlkIH19KSA9PiB7XG5cbiAgICBsZXQgdmFsaWQgPSBhd2FpdCBjaGVja0Rpc2NvdW50KHZhbHVlKVxuICAgIC8vIGNvbnNvbGUudGFibGUodmFsaWQpXG5cbiAgICBzZXRWYWx1ZXMoe1xuICAgICAgLi4udmFsdWVzLFxuICAgICAgW25hbWVdOiB2YWx1ZSxcbiAgICAgIGRpc2NvdW50X2lkOiB2YWxpZCA/IGlkIDogbnVsbFxuICAgIH0pXG4gIH1cblxuICAvKiBoYW5kbGUgZGlzY291bnQgY2hhbmdlICovXG4gIGNvbnN0IGNoZWNrRGlzY291bnQgPSBhc3luYyBzdXBwb3J0ZXJDb2RlID0+IHtcblxuICAgIC8vIFNpbXVsYXRlIEFQSSBDYWxsXG4gICAgY29uc3QgcHJvbSA9IChkZWxheSwgdmFsdWUpID0+IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBkZWxheSwgdmFsdWUpKVxuXG4gICAgcmV0dXJuIGF3YWl0IHByb20oNTAsIHN1cHBvcnRlckNvZGUubGVuZ3RoID09PSA1KVxuXG4gIH1cblxuICAvKiBoYW5kbGUgcGFja2FnZSBjaGFuZ2UgKi9cbiAgY29uc3Qgb25QYWNrYWdlQ2hhbmdlID0gdXNlQ2FsbGJhY2soIGUgPT4ge1xuICAgIGNvbnN0IHBhY2thZ2VfaWQgPSBwYXJzZUludChlLnRhcmdldC52YWx1ZSwgMTApXG4gICAgc2V0VmFsdWVzKCBvbGRWYWx1ZXMgPT4gKHtcbiAgICAgIC4uLm9sZFZhbHVlcyxcbiAgICAgIHBhY2thZ2VfaWQsXG4gICAgICBwYXltZW50X21ldGhvZF9pZDogcGFja2FnZV9pZCA9PT0gZnJlZV9wYWNrYWdlX2lkID8gbnVsbCA6IHZhbHVlcy5wYXltZW50X21ldGhvZF9pZCxcbiAgICB9KSlcbiAgfSxbXSlcblxuICAvKiBoYW5kbGUgcGF5bWVudCBtZXRob2QgY2hhbmdlICovXG4gIGZ1bmN0aW9uIG9uUGF5bWVudENoYW5nZShlKSB7XG4gICAgc2V0VmFsdWVzKHtcbiAgICAgIC4uLnZhbHVlcyxcbiAgICAgIHBheW1lbnRfbWV0aG9kX2lkOiBwYXJzZUludChlLnRhcmdldC52YWx1ZSwgMTApLFxuICAgICAgY2FzaF9wYXltZW50X21ldGhvZF9pZDogbnVsbCxcbiAgICB9KVxuICB9XG5cbiAgZnVuY3Rpb24gb25DYXNoUGF5bWVudE1ldGhvZENoYW5nZShlKSB7XG4gICAgc2V0VmFsdWVzKHtcbiAgICAgIC4uLnZhbHVlcyxcbiAgICAgIGNhc2hfcGF5bWVudF9tZXRob2RfaWQ6IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlLCAxMCksXG4gICAgfSlcbiAgfVxuXG4gIC8qIHRva2VuICovXG4gIGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVRva2VuKCkge1xuICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBhZGRpdGlvbmFsRGF0YSA9IHtcbiAgICAgICAgaG9sZGVyX25hbWU6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXJkaG9sZGVyLW5hbWUnKS52YWx1ZSxcbiAgICAgICAgLy8gY3VzdG9tX2RhdGE6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0b20nKS52YWx1ZSxcbiAgICAgIH1cbiAgICAgIFBPUy5jcmVhdGVUb2tlbihhZGRpdGlvbmFsRGF0YSwgKHJlc3VsdCkgPT4ge1xuICAgICAgICBjb25zdCBqc29uID0gSlNPTi5wYXJzZShyZXN1bHQpXG4gICAgICAgIGNvbnNvbGUubG9nKCdqc29uJywganNvbilcbiAgICAgICAganNvbi50b2tlbiA/IHJlc29sdmUoanNvbikgOiByZWplY3QoanNvbilcbiAgICAgIH0pXG4gICAgfSlcbiAgICByZXR1cm4gcHJvbWlzZVxuICB9XG5cbiAgLy8gaXMgY2FyZCBwYXltZW50XG4gIGNvbnN0IGNyZWRpdF9jYXJkX2lkID0gMVxuICBjb25zdCBkZWJpdF9jYXJkX2lkID0gMlxuICBjb25zdCBpc0NhcmRQYXltZW50ID0gW2NyZWRpdF9jYXJkX2lkLCBkZWJpdF9jYXJkX2lkXS5pbmNsdWRlcyh2YWx1ZXMucGF5bWVudF9tZXRob2RfaWQpXG5cbiAgLyogc3VibWl0ICovXG4gIGNvbnN0IGhhbmRsZVN1Ym1pdCA9IGFzeW5jIGUgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIHNldExvYWRpbmcodHJ1ZSlcbiAgICBzZXRFcnJvcihmYWxzZSlcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGF5bWVudERhdGEgPSB2YWx1ZXMucGFja2FnZV9pZCAmJiB2YWx1ZXMucGFja2FnZV9pZCAhPT0gZnJlZV9wYWNrYWdlX2lkICYmXG4gICAgICAgIHZhbHVlcy5wYXltZW50X21ldGhvZF9pZCAmJiBpc0NhcmRQYXltZW50ID8gYXdhaXQgY3JlYXRlVG9rZW4oKSA6IG51bGxcbiAgICAgIGNvbnN0IGRhdGEgPSB7IC4uLnZhbHVlcywgcGF5bWVudF9vczogcGF5bWVudERhdGEgfVxuICAgICAgaWYgKGRhdGEuY291bnRyeV9pZCA9PT0gJycpIHtcbiAgICAgICAgZGVsZXRlIGRhdGEuY291bnRyeV9pZFxuICAgICAgfVxuICAgICAgaWYgKGRhdGEuYWRkcmVzc18xc3RfbGV2ZWwgPT09ICcnKSB7XG4gICAgICAgIGRlbGV0ZSBkYXRhLmFkZHJlc3NfMXN0X2xldmVsXG4gICAgICB9XG4gICAgICBpZiAoZGF0YS5hZGRyZXNzXzNyZF9sZXZlbCA9PT0gJycpIHtcbiAgICAgICAgZGVsZXRlIGRhdGEuYWRkcmVzc18zcmRfbGV2ZWxcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgZGF0YTogeyB1c2VyLCBvcmRlciB9IH0gPSBhd2FpdCBhcGkucG9zdCgncmVnaXN0ZXIvY29tcGxldGUnLCBkYXRhKVxuICAgICAgICB1cGRhdGVVc2VyKHVzZXIpXG4gICAgICAgIGlmIChvcmRlcikge1xuICAgICAgICAgIFJvdXRlci5wdXNoKHtcbiAgICAgICAgICAgIHBhdGhuYW1lOiAnL3JlZ2lzdGVyL2NvbmZpcm0nLFxuICAgICAgICAgICAgcXVlcnk6IHtcbiAgICAgICAgICAgICAgZG93bmxvYWRfbGluazogb3JkZXIuZG93bmxvYWRfbGluayxcbiAgICAgICAgICAgICAgbGluazogb3JkZXIubGluayxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSwgJy9yZWdpc3Rlci9jb25maXJtJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBSb3V0ZXIucHVzaCgnLycpXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkge1xuICAgICAgICAgIGNvbnN0IHsgZGF0YSwgc3RhdHVzIH0gPSBlcnJvci5yZXNwb25zZVxuICAgICAgICAgIGlmIChzdGF0dXMgPT09IDQyMikge1xuICAgICAgICAgICAgc2V0RXJyb3IoZGF0YSlcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZXJyb3IucmVxdWVzdCkge1xuICAgICAgICAgIHNldEVycm9yKGVycm9yKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldEVycm9yKGVycm9yKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHNldEVycm9yKGVycm9yLmRlc2NyaXB0aW9uID8geyBlcnJvcnM6IHsgcGF5bWVudF9vczogZXJyb3IuZGVzY3JpcHRpb24gfSB9IDogZXJyb3IpXG4gICAgfVxuICAgIHNldExvYWRpbmcoZmFsc2UpXG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxmb3JtIG1ldGhvZD1cInBvc3RcIiBvblN1Ym1pdD17aGFuZGxlU3VibWl0fT5cblxuICAgICAgey8qIG1haW4gZXJyb3IgbXNnICovfVxuICAgICAgeyBlcnJvciAmJiBlcnJvci5tZXNzYWdlICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbnZhbGlkLWZlZWRiYWNrXCI+e2Vycm9yLm1lc3NhZ2V9PC9kaXY+XG4gICAgICApIH1cblxuICAgICAgey8qIGZvcm0gZGF0YSBkZWJ1ZyAqL31cbiAgICAgIHsgZGVidWcgJiYgKFxuICAgICAgICA8cHJlIHN0eWxlPXt7IGNvbG9yOiAnI2ZmZicgfX0+XG4gICAgICAgICAge0pTT04uc3RyaW5naWZ5KHZhbHVlcywgbnVsbCwgMil9XG4gICAgICAgIDwvcHJlPlxuICAgICAgKX1cblxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cblxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC02XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkYXRhXCI+XG5cbiAgICAgICAgICAgIHsvKiBoZWFkaW5nICovfVxuICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cImgzXCI+VHVzIGRhdG9zPC9oMz5cblxuICAgICAgICAgICAgey8qIG5hbWUgKi99XG4gICAgICAgICAgICA8Rm9ybUdyb3VwPlxuICAgICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj1cIm5hbWVcIj5Ob21icmUgY29tcGxldG88L0xhYmVsPlxuICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICBpZD1cIm5hbWVcIlxuICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlSW5wdXRDaGFuZ2V9XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ9e3JlcXVpcmVkc31cbiAgICAgICAgICAgICAgICB2YWx1ZT17dmFsdWVzLm5hbWV9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxJbnZhbGlkRmVlZGJhY2sgZXJyb3I9e2Vycm9yfSBsb2FkaW5nPXtsb2FkaW5nfSBuYW1lPVwibmFtZVwiIC8+XG4gICAgICAgICAgICA8L0Zvcm1Hcm91cD5cblxuICAgICAgICAgICAgey8qIGdlbnJlICovfVxuICAgICAgICAgICAgPEZvcm1Hcm91cD5cbiAgICAgICAgICAgICAgPExhYmVsIGh0bWxGb3I9XCJnZW5kZXJfaWRcIj5Hw6luZXJvPC9MYWJlbD5cbiAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgIGlkPVwiZ2VuZGVyX2lkXCJcbiAgICAgICAgICAgICAgICBuYW1lPVwiZ2VuZGVyX2lkXCJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlSW5wdXRDaGFuZ2V9XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ9e3JlcXVpcmVkc31cbiAgICAgICAgICAgICAgICB2YWx1ZT17dmFsdWVzLmdlbmRlcl9pZH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHsgISBnZW5kZXJzID8gKFxuICAgICAgICAgICAgICAgICAgPG9wdGlvbiBkaXNhYmxlZCB2YWx1ZT1cIlwiPkNhcmdhbmRvLi4uPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgKSA6IGdlbmRlcnMubGVuZ3RoID8gPD5cbiAgICAgICAgICAgICAgICAgIDxvcHRpb24gZGlzYWJsZWQgdmFsdWU9XCJcIj5TZWxlY2Npb25hIHR1IGfDqW5lcm88L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgIHsgZ2VuZGVycy5tYXAoKGdlbnJlLCBrZXkpID0+IChcbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB7Li4ue2tleX19IHZhbHVlPXtnZW5yZS5pZH0+e2dlbnJlLm5hbWV9PC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICA8Lz4gOiAoXG4gICAgICAgICAgICAgICAgICA8b3B0aW9uIGRpc2FibGVkIHZhbHVlPVwiXCI+SW5jYXBheiBkZSBjYXJnYXIgZ8OpbmVyb3M8L29wdGlvbj5cbiAgICAgICAgICAgICAgICApIH1cbiAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgIDxJbnZhbGlkRmVlZGJhY2sgZXJyb3I9e2Vycm9yfSBsb2FkaW5nPXtsb2FkaW5nfSBuYW1lPVwiZ2VuZGVyX2lkXCIgLz5cbiAgICAgICAgICAgIDwvRm9ybUdyb3VwPlxuXG4gICAgICAgICAgICB7LyogZG9jdW1lbnQgKi99XG4gICAgICAgICAgICA8Rm9ybUdyb3VwPlxuICAgICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj1cImRvY3VtZW50XCI+RG9jdW1lbnRvPC9MYWJlbD5cbiAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgaWQ9XCJkb2N1bWVudFwiXG4gICAgICAgICAgICAgICAgbmFtZT1cImRvY3VtZW50XCJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlSW5wdXRDaGFuZ2V9XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ9e3JlcXVpcmVkc31cbiAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgdmFsdWU9e3ZhbHVlcy5kb2N1bWVudH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPEludmFsaWRGZWVkYmFjayBlcnJvcj17ZXJyb3J9IGxvYWRpbmc9e2xvYWRpbmd9IG5hbWU9XCJkb2N1bWVudFwiIC8+XG4gICAgICAgICAgICA8L0Zvcm1Hcm91cD5cblxuICAgICAgICAgICAge2Rpc2NvdW50cyAmJiBkaXNjb3VudHMubWFwKCBkID0+IChcbiAgICAgICAgICAgICAgPEZvcm1Hcm91cCBrZXk9e2QuaWR9PlxuICAgICAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPXtkLmRzY19pZH0+e2QubmFtZX08L0xhYmVsPlxuICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2NvdW50cy5maW5kKFxuICAgICAgICAgICAgICAgICAgICBkaXNjID0+ICghWycnLHVuZGVmaW5lZF0uaW5jbHVkZXModmFsdWVzW2Rpc2MuZHNjX2lkXSkgJiYgZGlzYy5pZCAhPSBkLmlkKVxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIGlkPXtkLmlkfVxuICAgICAgICAgICAgICAgICAgbWF4TGVuZ3RoPXs1fVxuICAgICAgICAgICAgICAgICAgbmFtZT17ZC5kc2NfaWR9XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlRGlzY291bnRDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgICBzdHlsZT17dmFsdWVzLmRpc2NvdW50X2lkID09IGQuaWQgPyB7YmFja2dyb3VuZENvbG9yOiAncmdiKDIwNiwgMjQ5LCAyMDYpJ30gOiB7fX1cbiAgICAgICAgICAgICAgICAgIHZhbHVlPXt2YWx1ZXNbZC5kc2NfaWRdIHx8ICcnfVxuICAgICAgICAgICAgICAgICAgcmVhZE9ubHk9e2Jsb2NrRGlzY291bnRGaWVsZHN9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7ZmxvYXQ6ICdyaWdodCcsIHBhZGRpbmdUb3A6JzEwcHgnfX0+XG4gICAgICAgICAgICAgICAgICA8TG9hZGluZyBzaXplPVwiMjBcIiBjb2xvcj1cIndoaXRlXCIgbG9hZGluZ1N0YXRlPXt2YWx1ZXMuZGlzY291bnRfaWQgPT0gZC5pZCAgJiYgYmxvY2tEaXNjb3VudEZpZWxkc30vPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L0Zvcm1Hcm91cD5cbiAgICAgICAgICAgICkpfVxuXG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHsvKiBhZGRyZXNzICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC02XCI+XG4gICAgICAgICAgPEFkZHJlc3NcbiAgICAgICAgICAgIGFwaT17YXBpfVxuICAgICAgICAgICAgZXJyb3I9e2Vycm9yfVxuICAgICAgICAgICAgaGFuZGxlSW5wdXRDaGFuZ2U9e2hhbmRsZUlucHV0Q2hhbmdlfVxuICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ31cbiAgICAgICAgICAgIHJlcXVpcmVkcz17cmVxdWlyZWRzfVxuICAgICAgICAgICAgc2V0VmFsdWVzPXtzZXRWYWx1ZXN9XG4gICAgICAgICAgICB2YWx1ZXM9e3ZhbHVlc31cbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgPC9kaXY+XG5cbiAgICAgIHsvKiBwYWNrYWdlIHNlbGVjdGlvbiAqL31cbiAgICAgIDxQYWNrYWdlcyB7Li4ue1xuICAgICAgICBlcnJvcjogcGFja2FnZXMuZXJyb3IgPyBwYWNrYWdlcy5lcnJvciA6IG51bGwsXG4gICAgICAgIGl0ZW1zOiBwYWNrYWdlcy5pdGVtcyA/IHBhY2thZ2VzLml0ZW1zIDogbnVsbCxcbiAgICAgICAgb25DaGFuZ2U6IG9uUGFja2FnZUNoYW5nZSxcbiAgICAgICAgcGFja2FnZV9pZDogdmFsdWVzLnBhY2thZ2VfaWQsXG4gICAgICAgIHZhbGlkYXRpb25FcnJvcjogISBsb2FkaW5nICYmIGVycm9yICYmIGVycm9yLmVycm9ycyAmJiBlcnJvci5lcnJvcnMucGFja2FnZV9pZCxcbiAgICAgICAgZGlzY291bnRfaWQ6IHZhbHVlcy5kaXNjb3VudF9pZCxcbiAgICAgICAgc2V0QmxvY2tEaXNjb3VudEZpZWxkcyxcbiAgICAgIH19IC8+XG5cbiAgICAgIHsvKiBwYXltZW50ICovfVxuICAgICAgeyB2YWx1ZXMucGFja2FnZV9pZCAmJiB2YWx1ZXMucGFja2FnZV9pZCAhPT0gZnJlZV9wYWNrYWdlX2lkICYmIChcbiAgICAgICAgPFBheW1lbnQgey4uLntcbiAgICAgICAgICBhcGksXG4gICAgICAgICAgY2FzaF9wYXltZW50X21ldGhvZF9pZDogdmFsdWVzLmNhc2hfcGF5bWVudF9tZXRob2RfaWQsXG4gICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgaXNDYXJkUGF5bWVudCxcbiAgICAgICAgICBpc1BheVVSZWFkeSxcbiAgICAgICAgICBsb2FkaW5nLFxuICAgICAgICAgIG9uQ2FzaFBheW1lbnRNZXRob2RDaGFuZ2UsXG4gICAgICAgICAgb25DaGFuZ2U6IG9uUGF5bWVudENoYW5nZSxcbiAgICAgICAgICBwYXltZW50X21ldGhvZF9pZDogdmFsdWVzLnBheW1lbnRfbWV0aG9kX2lkLFxuICAgICAgICAgIFBPUyxcbiAgICAgICAgICByZXF1aXJlZHMsXG4gICAgICAgICAgdmFsaWRhdGlvbkVycm9yOiAhIGxvYWRpbmcgJiYgZXJyb3IgJiYgZXJyb3IuZXJyb3JzICYmIGVycm9yLmVycm9ycy5wYXltZW50X21ldGhvZF9pZCxcbiAgICAgICAgfX0gLz5cbiAgICAgICkgfVxuXG4gICAgICB7LyogZm9vdGVyICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3cgYWxpZ24taXRlbXMtY2VudGVyXCI+XG5cbiAgICAgICAgey8qIHRlcm1zICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC02IG9mZnNldC1tZC00XCI+XG4gICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cInRlcm1zXCI+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgY2hlY2tlZD17dmFsdWVzLnRlcm1zfVxuICAgICAgICAgICAgICBuYW1lPVwidGVybXNcIlxuICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlSW5wdXRDaGFuZ2V9XG4gICAgICAgICAgICAgIHJlcXVpcmVkPXtyZXF1aXJlZHN9XG4gICAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXG4gICAgICAgICAgICAgIHZhbHVlPXtgdHJ1ZWB9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPHNwYW4+SGUgbGXDrWRvIHkgYWNlcHRvIDxMaW5rIGhyZWY9XCIvdGVybWlub3MteS1wb2xpdGljYXNcIj5cbiAgICAgICAgICAgICAgICA8YSB0YXJnZXQ9XCJfYmxhbmtcIj5lbCBjb250cmF0bzwvYT5cbiAgICAgICAgICAgICAgPC9MaW5rPiBkZSB7Q09ORklHLmFwcE5hbWV9PC9zcGFuPlxuICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgPEludmFsaWRGZWVkYmFjayBlcnJvcj17ZXJyb3J9IGxvYWRpbmc9e2xvYWRpbmd9IG5hbWU9XCJ0ZXJtc1wiIC8+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHsvKiBzZW5kIGJ0biAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtbWQtMiB0ZXh0LXJpZ2h0XCI+XG4gICAgICAgICAgPEJ1dHRvbiBibG9jayBjb2xvcj1cInNlY29uZGFyeVwiIGRpc2FibGVkPXtsb2FkaW5nfSB0eXBlPVwic3VibWl0XCI+RW52aWFyPC9CdXR0b24+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICA8L2Rpdj5cblxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICA6Z2xvYmFsKC5oMykge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMjBweDtcbiAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgICAgICB9XG4gICAgICAgIGhyLFxuICAgICAgICAuaHIge1xuICAgICAgICAgIG1hcmdpbi10b3A6IDA7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgfVxuICAgICAgICAudGVybXMge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMThweDtcbiAgICAgICAgfVxuICAgICAgICAudGVybXMgaW5wdXQge1xuICAgICAgICAgIG1hcmdpbi1yaWdodDogNXB4O1xuICAgICAgICB9XG4gICAgICBgfTwvc3R5bGU+XG4gICAgPC9mb3JtPlxuICApXG59XG5cbmNvbnN0IEludmFsaWRGZWVkYmFjayA9ICh7ZXJyb3IsIGxvYWRpbmcsIG5hbWV9KSA9PiB7XG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIHsgISBsb2FkaW5nICYmIGVycm9yICYmIGVycm9yLmVycm9ycyAmJiBlcnJvci5lcnJvcnNbbmFtZV0gJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImludmFsaWQtZmVlZGJhY2tcIj57ZXJyb3IuZXJyb3JzW25hbWVdfTwvZGl2PlxuICAgICAgKX1cbiAgICA8Lz5cbiAgKVxufVxuXG5jb25zdCBTZWxlY3RGb3JtR3JvdXAgPSAoeyBlcnJvciwgbGFiZWwsIGxpc3QsIGxpc3RNYXBWYWx1ZSA9IG51bGwsIGxvYWRpbmcsIG5hbWUsIG9uQ2hhbmdlLCBwbHVyYWxMYWJlbCwgcmVxdWlyZWRzLCB2YWx1ZSB9KSA9PiB7XG4gIHJldHVybiAoXG4gICAgPEZvcm1Hcm91cD5cbiAgICAgIDxMYWJlbCBodG1sRm9yPXtuYW1lfT57bGFiZWx9PC9MYWJlbD5cbiAgICAgIDxTZWxlY3RcbiAgICAgICAgaWQ9e25hbWV9XG4gICAgICAgIG5hbWU9e25hbWV9XG4gICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZX1cbiAgICAgICAgcmVxdWlyZWQ9e3JlcXVpcmVkc31cbiAgICAgICAgdmFsdWU9e3ZhbHVlfVxuICAgICAgPlxuICAgICAgICB7ICEgbGlzdCA/IChcbiAgICAgICAgICA8b3B0aW9uIGRpc2FibGVkIHZhbHVlPVwiXCI+Q2FyZ2FuZG8uLi48L29wdGlvbj5cbiAgICAgICAgKSA6IGxpc3QubGVuZ3RoID8gPD5cbiAgICAgICAgICA8b3B0aW9uIGRpc2FibGVkIHZhbHVlPVwiXCI+U2VsZWNjaW9uYSB0dSB7bGFiZWwudG9Mb3dlckNhc2UoKX08L29wdGlvbj5cbiAgICAgICAgICB7IGxpc3QubWFwKChpdGVtLCBrZXkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gbGlzdE1hcFZhbHVlID8gaXRlbVtsaXN0TWFwVmFsdWVdIDogaXRlbVxuICAgICAgICAgICAgY29uc3Qgb3B0aW9uTmFtZSA9IGxpc3RNYXBWYWx1ZSA/IGl0ZW0ubmFtZSA6IGl0ZW1cbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtrZXl9IHZhbHVlPXt2YWx1ZX0+e29wdGlvbk5hbWV9PC9vcHRpb24+XG4gICAgICAgICAgICApXG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvPiA6IChcbiAgICAgICAgICA8b3B0aW9uIGRpc2FibGVkIHZhbHVlPVwiXCI+SW5jYXBheiBkZSBjYXJnYXIge3BsdXJhbExhYmVsfTwvb3B0aW9uPlxuICAgICAgICApIH1cbiAgICAgIDwvU2VsZWN0PlxuICAgICAgPEludmFsaWRGZWVkYmFjayBlcnJvcj17ZXJyb3J9IGxvYWRpbmc9e2xvYWRpbmd9IG5hbWU9e25hbWV9IC8+XG4gICAgPC9Gb3JtR3JvdXA+XG4gIClcbn1cblxuY29uc3QgQWRkcmVzcyA9ICh7XG4gIGFwaSxcbiAgZXJyb3IsXG4gIGhhbmRsZUlucHV0Q2hhbmdlLFxuICBzZXRWYWx1ZXMsXG4gIGxvYWRpbmcsXG4gIHJlcXVpcmVkcyxcbiAgdmFsdWVzLFxufSkgPT4ge1xuXG4gIGNvbnN0IGFyZ0NvdW50cnlJZCA9IDExXG4gIGNvbnN0IGJyYUNvdW50cnlJZCA9IDMyXG4gIGNvbnN0IGNobENvdW50cnlJZCA9IDQ4XG5cbiAgY29uc3QgeyBjb3VudHJ5X2lkOiBjb3VudHJ5SWQsIGFkZHJlc3NfMXN0X2xldmVsLCBjaXR5LCBhZGRyZXNzXzNyZF9sZXZlbCwgYWRkcmVzcyB9ID0gdmFsdWVzXG5cbiAgY29uc3QgWyBjb3VudHJpZXMsIHNldENvdW50cmllcyBdID0gdXNlU3RhdGUoKVxuXG4gIHVzZUVmZmVjdCggXyA9PiB7XG4gICAgKGFzeW5jIF8gPT4ge1xuICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBhcGkuZ2V0KCdjb3VudHJpZXMnKVxuICAgICAgc2V0Q291bnRyaWVzKGRhdGEpXG4gICAgfSkoKVxuICB9LCBbXSlcblxuICBjb25zdCBoYW5kbGVDb3VudHJ5Q2hhbmdlID0gZSA9PiB7XG4gICAgY29uc3QgeyBuYW1lLCB2YWx1ZSB9ID0gZS50YXJnZXRcbiAgICBzZXRWYWx1ZXMoe1xuICAgICAgLi4udmFsdWVzLFxuICAgICAgW25hbWVdOiB2YWx1ZSxcbiAgICAgIGFkZHJlc3NfMXN0X2xldmVsOiAnJyxcbiAgICB9KVxuICB9XG5cbiAgY29uc3QgZmlyc3RMZXZlbExhYmVsID0gY291bnRyeUlkID09IGFyZ0NvdW50cnlJZCA/ICdQcm92aW5jaWEnIDpcbiAgY291bnRyeUlkID09IGJyYUNvdW50cnlJZCA/ICdFc3RhZG8nIDpcbiAgY291bnRyeUlkID09IGNobENvdW50cnlJZCA/ICdSZWdpw7NuJyA6XG4gICdTdGF0ZSdcblxuICBjb25zdCBmaXJzdExldmVsUGx1cmFsTGFiZWwgPSBjb3VudHJ5SWQgPT0gYXJnQ291bnRyeUlkID8gJ1Byb3ZpbmNpYXMnIDpcbiAgY291bnRyeUlkID09IGJyYUNvdW50cnlJZCA/ICdFc3RhZG9zJyA6XG4gIGNvdW50cnlJZCA9PSBjaGxDb3VudHJ5SWQgPyAnUmVnaW9uZXMnIDpcbiAgJ1N0YXRlcydcblxuICBjb25zdCBbIGZpcnN0TGV2ZWxMaXN0LCBzZXRGaXJzdExldmVsTGlzdCBdID0gdXNlU3RhdGUoKVxuXG4gIHVzZUVmZmVjdChfID0+IHtcbiAgICAoYXN5bmMgXyA9PiB7XG4gICAgICBjb25zdCBwYXJzZWRDb3VudHJ5SWQgPSBwYXJzZUludChjb3VudHJ5SWQpXG4gICAgICBjb25zdCB7IGRhdGE6IGFkZHJlc3NlcyB9ID0gW2FyZ0NvdW50cnlJZCwgYnJhQ291bnRyeUlkLCBjaGxDb3VudHJ5SWRdLmluY2x1ZGVzKHBhcnNlZENvdW50cnlJZCkgP1xuICAgICAgICBhd2FpdCBhcGkuZ2V0KCdhZGRyZXNzLTFzdC1sZXZlbHMnLCB7XG4gICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICBjb3VudHJ5X2lkOiBjb3VudHJ5SWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSkgOiB7IGRhdGE6IG51bGwgfVxuICAgICAgICBzZXRGaXJzdExldmVsTGlzdChhZGRyZXNzZXMpXG4gICAgfSkoKVxuICB9LCBbY291bnRyeUlkXSlcblxuICBjb25zdCBjaXR5TGFiZWwgPSBjb3VudHJ5SWQgPT0gYnJhQ291bnRyeUlkID8gJ0NpZGFkZScgOlxuICBjb3VudHJ5SWQgPT0gY2hsQ291bnRyeUlkID8gJ1Byb3ZpbmNpYScgOlxuICAnQ2l1ZGFkJ1xuXG4gIGNvbnN0IHRoaXJkTGV2ZWxMYWJlbCA9IGNvdW50cnlJZCA9PSBjaGxDb3VudHJ5SWQgPyAnQ29tdW5hJyA6ICdEaXN0cmljdCdcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiYWRkcmVzc1wiPlxuICAgICAgPGgzIGNsYXNzTmFtZT1cImgzXCI+VWJpY2FjacOzbjwvaDM+XG5cbiAgICAgIHsvKiBjb3VudHJ5ICovfVxuICAgICAgPFNlbGVjdEZvcm1Hcm91cFxuICAgICAgICBlcnJvcj17ZXJyb3J9XG4gICAgICAgIGxhYmVsPVwiUGHDrXNcIlxuICAgICAgICBsb2FkaW5nPXtsb2FkaW5nfVxuICAgICAgICBsaXN0PXtjb3VudHJpZXN9XG4gICAgICAgIGxpc3RNYXBWYWx1ZT1cImlkXCJcbiAgICAgICAgbmFtZT1cImNvdW50cnlfaWRcIlxuICAgICAgICBvbkNoYW5nZT17aGFuZGxlQ291bnRyeUNoYW5nZX1cbiAgICAgICAgcGx1cmFsTGFiZWw9XCJQYcOtc2VzXCJcbiAgICAgICAgcmVxdWlyZWRzPXtyZXF1aXJlZHN9XG4gICAgICAgIHZhbHVlPXtjb3VudHJ5SWR9XG4gICAgICAvPlxuXG4gICAgICB7LyogMXN0IGxldmVsICovfVxuICAgICAge1thcmdDb3VudHJ5SWQsIGJyYUNvdW50cnlJZCwgY2hsQ291bnRyeUlkXS5tYXAoaWQgPT4gaWQrJycpLmluY2x1ZGVzKGNvdW50cnlJZCkgJiYgKFxuICAgICAgICA8U2VsZWN0Rm9ybUdyb3VwXG4gICAgICAgICAgZXJyb3I9e2Vycm9yfVxuICAgICAgICAgIGxhYmVsPXtmaXJzdExldmVsTGFiZWx9XG4gICAgICAgICAgbG9hZGluZz17bG9hZGluZ31cbiAgICAgICAgICBsaXN0PXtmaXJzdExldmVsTGlzdH1cbiAgICAgICAgICBsaXN0TWFwVmFsdWU9XCJpZFwiXG4gICAgICAgICAgbmFtZT1cImFkZHJlc3NfMXN0X2xldmVsXCJcbiAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlSW5wdXRDaGFuZ2V9XG4gICAgICAgICAgcGx1cmFsTGFiZWw9e2ZpcnN0TGV2ZWxQbHVyYWxMYWJlbH1cbiAgICAgICAgICByZXF1aXJlZHM9e3JlcXVpcmVkc31cbiAgICAgICAgICB2YWx1ZT17YWRkcmVzc18xc3RfbGV2ZWx9XG4gICAgICAgIC8+XG4gICAgICApfVxuXG4gICAgICB7LyogY2l0eSAqL31cbiAgICAgIHtbYnJhQ291bnRyeUlkLCBjaGxDb3VudHJ5SWRdLm1hcChpZCA9PiBpZCsnJykuaW5jbHVkZXMoY291bnRyeUlkKSAmJiAoXG4gICAgICAgIDxGb3JtR3JvdXA+XG4gICAgICAgICAgPExhYmVsIGh0bWxGb3I9XCJjaXR5XCI+e2NpdHlMYWJlbH08L0xhYmVsPlxuICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgaWQ9XCJjaXR5XCJcbiAgICAgICAgICAgIG5hbWU9XCJjaXR5XCJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVJbnB1dENoYW5nZX1cbiAgICAgICAgICAgIHJlcXVpcmVkPXtyZXF1aXJlZHN9XG4gICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICB2YWx1ZT17Y2l0eX1cbiAgICAgICAgICAvPlxuICAgICAgICAgIDxJbnZhbGlkRmVlZGJhY2sgZXJyb3I9e2Vycm9yfSBsb2FkaW5nPXtsb2FkaW5nfSBuYW1lPVwiY2l0eVwiIC8+XG4gICAgICAgIDwvRm9ybUdyb3VwPlxuICAgICAgKX1cblxuICAgICAgey8qIDNyZCBsZXZlbCAqL31cbiAgICAgIHtbY2hsQ291bnRyeUlkXS5tYXAoaWQgPT4gaWQrJycpLmluY2x1ZGVzKGNvdW50cnlJZCkgJiYgKFxuICAgICAgICA8Rm9ybUdyb3VwPlxuICAgICAgICAgIDxMYWJlbCBodG1sRm9yPVwiYWRkcmVzc18zcmRfbGV2ZWxcIj57dGhpcmRMZXZlbExhYmVsfTwvTGFiZWw+XG4gICAgICAgICAgPElucHV0XG4gICAgICAgICAgICBpZD1cImFkZHJlc3NfM3JkX2xldmVsXCJcbiAgICAgICAgICAgIG5hbWU9XCJhZGRyZXNzXzNyZF9sZXZlbFwiXG4gICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlSW5wdXRDaGFuZ2V9XG4gICAgICAgICAgICByZXF1aXJlZD17cmVxdWlyZWRzfVxuICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgdmFsdWU9e2FkZHJlc3NfM3JkX2xldmVsfVxuICAgICAgICAgIC8+XG4gICAgICAgICAgPEludmFsaWRGZWVkYmFjayBlcnJvcj17ZXJyb3J9IGxvYWRpbmc9e2xvYWRpbmd9IG5hbWU9XCJhZGRyZXNzXzNyZF9sZXZlbFwiIC8+XG4gICAgICAgIDwvRm9ybUdyb3VwPlxuICAgICAgKX1cblxuICAgICAgPEZvcm1Hcm91cD5cbiAgICAgICAgPExhYmVsIGh0bWxGb3I9XCJhZGRyZXNzXCI+RGlyZWNjacOzbjwvTGFiZWw+XG4gICAgICAgIDxJbnB1dFxuICAgICAgICAgIGlkPVwiYWRkcmVzc1wiXG4gICAgICAgICAgbmFtZT1cImFkZHJlc3NcIlxuICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVJbnB1dENoYW5nZX1cbiAgICAgICAgICByZXF1aXJlZD17cmVxdWlyZWRzfVxuICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICB2YWx1ZT17YWRkcmVzc31cbiAgICAgICAgLz5cbiAgICAgICAgPEludmFsaWRGZWVkYmFjayBlcnJvcj17ZXJyb3J9IGxvYWRpbmc9e2xvYWRpbmd9IG5hbWU9XCJhZGRyZXNzXCIgLz5cbiAgICAgIDwvRm9ybUdyb3VwPlxuXG4gICAgPC9kaXY+XG4gIClcbn1cblxuY29uc3QgUGF5bWVudCA9ICh7XG4gIGFwaSxcbiAgY2FzaF9wYXltZW50X21ldGhvZF9pZCxcbiAgZXJyb3IsXG4gIGlzQ2FyZFBheW1lbnQsXG4gIGlzUGF5VVJlYWR5LFxuICBsb2FkaW5nLFxuICBvbkNhc2hQYXltZW50TWV0aG9kQ2hhbmdlLFxuICBvbkNoYW5nZSxcbiAgcGF5bWVudF9tZXRob2RfaWQsXG4gIFBPUyxcbiAgcmVxdWlyZWRzLFxuICB2YWxpZGF0aW9uRXJyb3Jcbn0pID0+IHtcblxuICAvLyBwYXltZW50IG1ldGhvZHNcbiAgY29uc3QgWyBwYXltZW50TWV0aG9kcywgc2V0UGF5bWVudE1ldGhvZHMgXSA9IHVzZVN0YXRlKClcblxuICAvLyBnZXQgcGF5bWVudCBtZXRob2RzXG4gIHVzZUVmZmVjdCggXyA9PiB7XG4gICAgY29uc3QgZ2V0UGF5bWVudE1ldGhvZHMgPSBhc3luYyBfID0+IHtcbiAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYXBpLmdldCgncGF5bWVudC1tZXRob2RzJylcbiAgICAgIHNldFBheW1lbnRNZXRob2RzKGRhdGEpXG4gICAgfVxuICAgIGdldFBheW1lbnRNZXRob2RzKClcbiAgfSwgW10pXG5cbiAgLy8gaW5pdCBjYXJkIHNlY3VyZSBmaWVsZHNcbiAgdXNlRWZmZWN0KF8gPT4ge1xuICAgIGlmIChpc1BheVVSZWFkeSAmJiBpc0NhcmRQYXltZW50KSB7XG4gICAgICBQT1MuaW5pdFNlY3VyZUZpZWxkcygnY2FyZC1zZWN1cmUtZmllbGRzJylcbiAgICB9XG4gIH0sIFtpc1BheVVSZWFkeSwgaXNDYXJkUGF5bWVudF0pXG5cbiAgLy8gY2FzaCBwYXltZW50IG1ldGhvZHNcbiAgY29uc3QgWyBjYXNoUGF5bWVudE1ldGhvZHMsIHNldENhc2hQYXltZW50TWV0aG9kcyBdID0gdXNlU3RhdGUoKVxuXG4gIC8vIGdldCBjYXNoIHBheW1lbnQgbWV0aG9kc1xuICB1c2VFZmZlY3QoIF8gPT4ge1xuICAgIGNvbnN0IGdldENhc2hQYXltZW50TWV0aG9kcyA9IGFzeW5jIF8gPT4ge1xuICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBhcGkuZ2V0KCdjYXNoLXBheW1lbnQtbWV0aG9kcycpXG4gICAgICBzZXRDYXNoUGF5bWVudE1ldGhvZHMoZGF0YSlcbiAgICB9XG4gICAgZ2V0Q2FzaFBheW1lbnRNZXRob2RzKClcbiAgfSwgW10pXG5cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm9mZnNldC1tZC0yIGNvbC1tZC04XCI+XG5cbiAgICAgICAgPGgzIGNsYXNzTmFtZT1cImgzXCI+UGFnbzwvaDM+XG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtbWQtNlwiPlxuICAgICAgICAgICAgICA8Rm9ybUdyb3VwPlxuICAgICAgICAgICAgICAgIHsgcGF5bWVudE1ldGhvZHMgJiYgcGF5bWVudE1ldGhvZHMubWFwKChwYXltZW50TWV0aG9kLCBrZXkpID0+IChcbiAgICAgICAgICAgICAgICAgIDxJbnB1dFJhZGlvXG4gICAgICAgICAgICAgICAgICAgIGtleT17a2V5fVxuICAgICAgICAgICAgICAgICAgICBsYWJlbD17cGF5bWVudE1ldGhvZC5uYW1lfVxuICAgICAgICAgICAgICAgICAgICBuYW1lPVwicGF5bWVudFwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgc3RhdGU9e3BheW1lbnRfbWV0aG9kX2lkfVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17cGF5bWVudE1ldGhvZC5pZH1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKSkgfVxuICAgICAgICAgICAgICAgIHsgdmFsaWRhdGlvbkVycm9yICYmIChcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW52YWxpZC1mZWVkYmFja1wiPnt2YWxpZGF0aW9uRXJyb3J9PC9kaXY+XG4gICAgICAgICAgICAgICAgKSB9XG4gICAgICAgICAgICAgIDwvRm9ybUdyb3VwPlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLW1kLTZcIj5cblxuICAgICAgICAgICAgICB7LyogY3JlZGl0IC8gZGViaXQgY2FyZCAqL31cbiAgICAgICAgICAgICAge2lzQ2FyZFBheW1lbnQgPyAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLWlucHV0c1wiPlxuXG4gICAgICAgICAgICAgICAgICB7LyogbWFuZGF0b3J5IGRhdGEgKi99XG4gICAgICAgICAgICAgICAgICA8Rm9ybUdyb3VwPlxuICAgICAgICAgICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj1cImNhcmRob2xkZXItbmFtZVwiPk5vbWJyZSBpbXByZXNvIGVuIHRhcmpldGE8L0xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8SW5wdXQgaWQ9XCJjYXJkaG9sZGVyLW5hbWVcIiBuYW1lPVwiY2FyZGhvbGRlci1uYW1lXCIgcmVxdWlyZWQ9e3JlcXVpcmVkc30gdHlwZT1cInRleHRcIiAvPlxuICAgICAgICAgICAgICAgICAgPC9Gb3JtR3JvdXA+XG5cbiAgICAgICAgICAgICAgICAgIHsvKiBjYXJkIGZpZWxkcyAqL31cbiAgICAgICAgICAgICAgICAgIDxGb3JtR3JvdXA+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJjYXJkLXNlY3VyZS1maWVsZHNcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8SW52YWxpZEZlZWRiYWNrIGVycm9yPXtlcnJvcn0gbG9hZGluZz17bG9hZGluZ30gbmFtZT1cInBheW1lbnRfb3NcIiAvPlxuICAgICAgICAgICAgICAgICAgPC9Gb3JtR3JvdXA+XG5cbiAgICAgICAgICAgICAgICAgIHsvKiA8Rm9ybUdyb3VwPlxuICAgICAgICAgICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj1cImNyZWRpdENhcmROYW1lXCI+Tm9tYnJlIGltcHJlc288L0xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8SW5wdXQgaWQ9XCJjcmVkaXRDYXJkTmFtZVwiIG5hbWU9XCJjcmVkaXRDYXJkTmFtZVwiIHJlcXVpcmVkPXtyZXF1aXJlZHN9IHR5cGU9XCJ0ZXh0XCIgLz5cbiAgICAgICAgICAgICAgICAgIDwvRm9ybUdyb3VwPlxuICAgICAgICAgICAgICAgICAgPEZvcm1Hcm91cD5cbiAgICAgICAgICAgICAgICAgICAgPExhYmVsIGh0bWxGb3I9XCJjcmVkaXRDYXJkTnVtYmVyXCI+TnVtZXJvPC9MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPElucHV0IGlkPVwiY3JlZGl0Q2FyZE51bWJlclwiIG5hbWU9XCJjcmVkaXRDYXJkTnVtYmVyXCIgcmVxdWlyZWQ9e3JlcXVpcmVkc30gdHlwZT1cInRleHRcIiAvPlxuICAgICAgICAgICAgICAgICAgPC9Gb3JtR3JvdXA+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC02XCI+XG4gICAgICAgICAgICAgICAgICAgICAgPEZvcm1Hcm91cD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPVwiY3JlZGl0Q2FyZERhdGVcIj5WYWxpZGV6PC9MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dCBpZD1cImNyZWRpdENhcmREYXRlXCIgbmFtZT1cImNyZWRpdENhcmREYXRlXCIgcmVxdWlyZWQ9e3JlcXVpcmVkc30gdHlwZT1cInRleHRcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybUdyb3VwPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtNlwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxGb3JtR3JvdXA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj1cImNyZWRpdENhcmRDb2RlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxhYmJyIHRpdGxlPVwiQ8OzZGlnbyBkZSBzZWd1cmlkYWRcIj5DVlY8L2FiYnI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IGlkPVwiY3JlZGl0Q2FyZENvZGVcIiBuYW1lPVwiY3JlZGl0Q2FyZENvZGVcIiByZXF1aXJlZD17cmVxdWlyZWRzfSB0eXBlPVwidGV4dFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtR3JvdXA+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+ICovfVxuXG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgLy8gY2FzaCBwYXltZW50IG1ldGhvZHNcbiAgICAgICAgICAgICAgKSA6IHBheW1lbnRfbWV0aG9kX2lkID09PSAzICYmIChcbiAgICAgICAgICAgICAgICA8Rm9ybUdyb3VwPlxuICAgICAgICAgICAgICAgICAge2Nhc2hQYXltZW50TWV0aG9kcyA9PSBudWxsID8gKFxuICAgICAgICAgICAgICAgICAgICA8cD5DYXJnYW5kby4uLjwvcD5cbiAgICAgICAgICAgICAgICAgICkgOiBjYXNoUGF5bWVudE1ldGhvZHMubGVuZ3RoID8gY2FzaFBheW1lbnRNZXRob2RzLm1hcCgoaXRlbSwga2V5KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgIDxJbnB1dFJhZGlvXG4gICAgICAgICAgICAgICAgICAgICAga2V5PXtrZXl9XG4gICAgICAgICAgICAgICAgICAgICAgbGFiZWw9e2l0ZW0ubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiY2FzaF9wYXltZW50X21ldGhvZF9pZFwiXG4gICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e29uQ2FzaFBheW1lbnRNZXRob2RDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgc3RhdGU9e2Nhc2hfcGF5bWVudF9tZXRob2RfaWR9XG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2l0ZW0uaWR9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICApKSA6IChcbiAgICAgICAgICAgICAgICAgICAgPHA+U2luIG3DqXRvZG8gZGUgcGFnbyBjb25maWd1cmFkby48L3A+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgPEludmFsaWRGZWVkYmFjayBlcnJvcj17ZXJyb3J9IGxvYWRpbmc9e2xvYWRpbmd9IG5hbWU9XCJjYXNoX3BheW1lbnRfbWV0aG9kX2lkXCIgLz5cbiAgICAgICAgICAgICAgICA8L0Zvcm1Hcm91cD5cbiAgICAgICAgICAgICAgKSB9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICA8L2Rpdj5cbiAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgQG1lZGlhIChtaW4td2lkdGg6IDc2OHB4KSB7XG4gICAgICAgICAgLmNhcmQtaW5wdXRzIHtcbiAgICAgICAgICAgIG1hcmdpbi10b3A6IC0yMXB4O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgYH08L3N0eWxlPlxuICAgIDwvZGl2PlxuICApXG59XG5cbi8vIFJhZGlvXG5jb25zdCBJbnB1dFJhZGlvID0gKHsgbGFiZWwsIG5hbWUsIG9uQ2hhbmdlLCBzdGF0ZSwgdmFsdWUgfSkgPT4ge1xuICBjb25zdCB0aGVtZSA9IHVzZUNvbnRleHQoVGhlbWVDb250ZXh0KVxuICBjb25zdCByYWRpb0NvbG9yID0gdGhlbWUuY29sb3JzLmJhY2tncm91bmRcbiAgcmV0dXJuIChcbiAgICA8bGFiZWw+XG4gICAgICA8aW5wdXQgY2hlY2tlZD17c3RhdGUgPT09IHZhbHVlfSB0eXBlPVwicmFkaW9cIiB7Li4ue25hbWUsIG9uQ2hhbmdlLCB2YWx1ZX19IC8+XG4gICAgICA8c3BhbiBjbGFzc05hbWU9XCJmYWtlLWlucHV0XCI+XG4gICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZha2UtcmFkaW9cIj48L3NwYW4+XG4gICAgICAgIDxzcGFuPntsYWJlbH08L3NwYW4+XG4gICAgICA8L3NwYW4+XG4gICAgICA8c3R5bGUganN4PntgXG4gICAgICAgIGxhYmVsIHtcbiAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiA1cHg7XG4gICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIH1cbiAgICAgICAgaW5wdXQge1xuICAgICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB9XG4gICAgICAgIC5mYWtlLWlucHV0IHtcbiAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1wcmltYXJ5KTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgZm9udC1zaXplOiAxcmVtO1xuICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjQ7XG4gICAgICAgICAgcGFkZGluZzogLjM3NXJlbSAuNzVyZW07XG4gICAgICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAuM3MsIGJvcmRlci1jb2xvciAuM3MsIGNvbG9yIC4zcztcbiAgICAgICAgfVxuICAgICAgICAuZmFrZS1yYWRpbyB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0td2hpdGUpO1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWdyYXkyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICAgIGhlaWdodDogMTVweDtcbiAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDcuNXB4O1xuICAgICAgICAgIHBhZGRpbmc6IDFweDtcbiAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogLTJweDtcbiAgICAgICAgICB3aWR0aDogMTVweDtcbiAgICAgICAgfVxuICAgICAgICAuZmFrZS1yYWRpbzo6YmVmb3JlIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3JhZGlvQ29sb3J9O1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgICAgICBjb250ZW50OiAnJztcbiAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICBvcGFjaXR5OiAwO1xuICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IC4zcztcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgfVxuICAgICAgICBpbnB1dDpjaGVja2VkICsgLmZha2UtaW5wdXQge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXByaW1hcnkpO1xuICAgICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgfVxuICAgICAgICBpbnB1dDpjaGVja2VkICsgLmZha2UtaW5wdXQgLmZha2UtcmFkaW86OmJlZm9yZSB7XG4gICAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgfVxuICAgICAgICB7LyogaW5wdXQ6Zm9jdXMgKyAuZmFrZS1pbnB1dCB7XG4gICAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS13aGl0ZSk7XG4gICAgICAgIH0gKi99XG4gICAgICBgfTwvc3R5bGU+XG4gICAgPC9sYWJlbD5cbiAgKVxufVxuXG4vLyBnZXRJbml0aWFsUHJvcHNcbkNvbXBsZXRlUmVnaXN0ZXJQYWdlLmdldEluaXRpYWxQcm9wcyA9IGFzeW5jIGN0eCA9PiB7XG5cbiAgY29uc3Qge2FwaSwgcmVzLCB1c2VyfSA9IGN0eFxuXG4gIC8vIGlmIHVzZXIgaGFzIGFscmVhZHkgY29tcGxldGVkIHJlZ2lzdHJ5LCByZWRpcmVjdCBpdFxuICBpZiAodXNlci5yZWdpc3Rlcl9jb21wbGV0ZWRfYXQpIHtcbiAgICBsZXQgbWVzc2FnZSA9IEpTT04uc3RyaW5naWZ5KHsgaW5mbzogXCJZYSBoYSBjb21wbGV0YWRvIHN1IHJlZ2lzdHJvLlwiIH0pXG4gICAgbm9va2llcy5zZXQoY3R4LCAnZmxhc2hfbWVzc2FnZScsIG1lc3NhZ2UsIHsgcGF0aDogJy8nIH0pXG4gICAgaWYgKHJlcykge1xuICAgICAgcmVzLnJlZGlyZWN0KCcvJylcbiAgICAgIHJlcy5lbmQoKVxuICAgICAgcmV0dXJuIHsgfVxuICAgIH0gZWxzZSB7XG4gICAgICBSb3V0ZXIuYmFjaygpXG4gICAgfVxuICB9XG5cbiAgLy8gZ2V0IHBhY2thZ2VzXG4gIGxldCBwYWNrYWdlc1xuICB0cnkge1xuICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYXBpLmdldCgncGFja2FnZXMnKVxuICAgIHBhY2thZ2VzID0geyBpdGVtczogZGF0YSB9XG4gIH0gY2F0Y2goZXJyb3IpIHtcbiAgICBwYWNrYWdlcyA9IHsgZXJyb3IgfVxuICB9XG5cbiAgLy8gcmV0dXJuXG4gIHJldHVybiB7IHBhY2thZ2VzLCB1c2VyIH1cbn1cblxuLy8gZXhwb3J0XG5leHBvcnQgZGVmYXVsdCB3aXRoQXV0aChDb21wbGV0ZVJlZ2lzdGVyUGFnZSlcbiJdfQ== */\\n/*@ sourceURL=/Users/rafael/Projects/somosgad/dale/pages/register/complete.js */\"));\n};\n\n_s2(CompleteRegisterForm, \"NmtE2CYGqsdO5Z4Mde59wiiiVSE=\");\n\n_c2 = CompleteRegisterForm;\n\nvar InvalidFeedback = function InvalidFeedback(_ref10) {\n  var error = _ref10.error,\n      loading = _ref10.loading,\n      name = _ref10.name;\n  return __jsx(React.Fragment, null, !loading && error && error.errors && error.errors[name] && __jsx(\"div\", {\n    className: \"invalid-feedback\"\n  }, error.errors[name]));\n};\n\n_c3 = InvalidFeedback;\n\nvar SelectFormGroup = function SelectFormGroup(_ref11) {\n  var error = _ref11.error,\n      label = _ref11.label,\n      list = _ref11.list,\n      _ref11$listMapValue = _ref11.listMapValue,\n      listMapValue = _ref11$listMapValue === void 0 ? null : _ref11$listMapValue,\n      loading = _ref11.loading,\n      name = _ref11.name,\n      onChange = _ref11.onChange,\n      pluralLabel = _ref11.pluralLabel,\n      requireds = _ref11.requireds,\n      value = _ref11.value;\n  return __jsx(FormGroup, null, __jsx(Label, {\n    htmlFor: name\n  }, label), __jsx(Select, {\n    id: name,\n    name: name,\n    onChange: onChange,\n    required: requireds,\n    value: value\n  }, !list ? __jsx(\"option\", {\n    disabled: true,\n    value: \"\"\n  }, \"Cargando...\") : list.length ? __jsx(React.Fragment, null, __jsx(\"option\", {\n    disabled: true,\n    value: \"\"\n  }, \"Selecciona tu \", label.toLowerCase()), list.map(function (item, key) {\n    var value = listMapValue ? item[listMapValue] : item;\n    var optionName = listMapValue ? item.name : item;\n    return __jsx(\"option\", {\n      key: key,\n      value: value\n    }, optionName);\n  })) : __jsx(\"option\", {\n    disabled: true,\n    value: \"\"\n  }, \"Incapaz de cargar \", pluralLabel)), __jsx(InvalidFeedback, {\n    error: error,\n    loading: loading,\n    name: name\n  }));\n};\n\n_c4 = SelectFormGroup;\n\nvar Address = function Address(_ref12) {\n  _s3();\n\n  var api = _ref12.api,\n      error = _ref12.error,\n      handleInputChange = _ref12.handleInputChange,\n      setValues = _ref12.setValues,\n      loading = _ref12.loading,\n      requireds = _ref12.requireds,\n      values = _ref12.values;\n  var argCountryId = 11;\n  var braCountryId = 32;\n  var chlCountryId = 48;\n  var countryId = values.country_id,\n      address_1st_level = values.address_1st_level,\n      city = values.city,\n      address_3rd_level = values.address_3rd_level,\n      address = values.address;\n\n  var _useState8 = useState(),\n      countries = _useState8[0],\n      setCountries = _useState8[1];\n\n  useEffect(function (_) {\n    (function () {\n      var _ref13 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(_) {\n        var _yield$api$get3, data;\n\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.next = 2;\n                return api.get('countries');\n\n              case 2:\n                _yield$api$get3 = _context7.sent;\n                data = _yield$api$get3.data;\n                setCountries(data);\n\n              case 5:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7);\n      }));\n\n      return function (_x6) {\n        return _ref13.apply(this, arguments);\n      };\n    })()();\n  }, []);\n\n  var handleCountryChange = function handleCountryChange(e) {\n    var _objectSpread4;\n\n    var _e$target2 = e.target,\n        name = _e$target2.name,\n        value = _e$target2.value;\n    setValues(_objectSpread(_objectSpread({}, values), {}, (_objectSpread4 = {}, _defineProperty(_objectSpread4, name, value), _defineProperty(_objectSpread4, \"address_1st_level\", ''), _objectSpread4)));\n  };\n\n  var firstLevelLabel = countryId == argCountryId ? 'Provincia' : countryId == braCountryId ? 'Estado' : countryId == chlCountryId ? 'RegiÃ³n' : 'State';\n  var firstLevelPluralLabel = countryId == argCountryId ? 'Provincias' : countryId == braCountryId ? 'Estados' : countryId == chlCountryId ? 'Regiones' : 'States';\n\n  var _useState9 = useState(),\n      firstLevelList = _useState9[0],\n      setFirstLevelList = _useState9[1];\n\n  useEffect(function (_) {\n    (function () {\n      var _ref14 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(_) {\n        var parsedCountryId, _ref15, addresses;\n\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                parsedCountryId = parseInt(countryId);\n\n                if (![argCountryId, braCountryId, chlCountryId].includes(parsedCountryId)) {\n                  _context8.next = 7;\n                  break;\n                }\n\n                _context8.next = 4;\n                return api.get('address-1st-levels', {\n                  params: {\n                    country_id: countryId\n                  }\n                });\n\n              case 4:\n                _context8.t0 = _context8.sent;\n                _context8.next = 8;\n                break;\n\n              case 7:\n                _context8.t0 = {\n                  data: null\n                };\n\n              case 8:\n                _ref15 = _context8.t0;\n                addresses = _ref15.data;\n                setFirstLevelList(addresses);\n\n              case 11:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8);\n      }));\n\n      return function (_x7) {\n        return _ref14.apply(this, arguments);\n      };\n    })()();\n  }, [countryId]);\n  var cityLabel = countryId == braCountryId ? 'Cidade' : countryId == chlCountryId ? 'Provincia' : 'Ciudad';\n  var thirdLevelLabel = countryId == chlCountryId ? 'Comuna' : 'District';\n  return __jsx(\"div\", {\n    className: \"address\"\n  }, __jsx(\"h3\", {\n    className: \"h3\"\n  }, \"Ubicaci\\xF3n\"), __jsx(SelectFormGroup, {\n    error: error,\n    label: \"Pa\\xEDs\",\n    loading: loading,\n    list: countries,\n    listMapValue: \"id\",\n    name: \"country_id\",\n    onChange: handleCountryChange,\n    pluralLabel: \"Pa\\xEDses\",\n    requireds: requireds,\n    value: countryId\n  }), [argCountryId, braCountryId, chlCountryId].map(function (id) {\n    return id + '';\n  }).includes(countryId) && __jsx(SelectFormGroup, {\n    error: error,\n    label: firstLevelLabel,\n    loading: loading,\n    list: firstLevelList,\n    listMapValue: \"id\",\n    name: \"address_1st_level\",\n    onChange: handleInputChange,\n    pluralLabel: firstLevelPluralLabel,\n    requireds: requireds,\n    value: address_1st_level\n  }), [braCountryId, chlCountryId].map(function (id) {\n    return id + '';\n  }).includes(countryId) && __jsx(FormGroup, null, __jsx(Label, {\n    htmlFor: \"city\"\n  }, cityLabel), __jsx(Input, {\n    id: \"city\",\n    name: \"city\",\n    onChange: handleInputChange,\n    required: requireds,\n    type: \"text\",\n    value: city\n  }), __jsx(InvalidFeedback, {\n    error: error,\n    loading: loading,\n    name: \"city\"\n  })), [chlCountryId].map(function (id) {\n    return id + '';\n  }).includes(countryId) && __jsx(FormGroup, null, __jsx(Label, {\n    htmlFor: \"address_3rd_level\"\n  }, thirdLevelLabel), __jsx(Input, {\n    id: \"address_3rd_level\",\n    name: \"address_3rd_level\",\n    onChange: handleInputChange,\n    required: requireds,\n    type: \"text\",\n    value: address_3rd_level\n  }), __jsx(InvalidFeedback, {\n    error: error,\n    loading: loading,\n    name: \"address_3rd_level\"\n  })), __jsx(FormGroup, null, __jsx(Label, {\n    htmlFor: \"address\"\n  }, \"Direcci\\xF3n\"), __jsx(Input, {\n    id: \"address\",\n    name: \"address\",\n    onChange: handleInputChange,\n    required: requireds,\n    type: \"text\",\n    value: address\n  }), __jsx(InvalidFeedback, {\n    error: error,\n    loading: loading,\n    name: \"address\"\n  })));\n};\n\n_s3(Address, \"cSsZ5S0IzjSw6pBDM5oB+1xY34c=\");\n\n_c5 = Address;\n\nvar Payment = function Payment(_ref16) {\n  _s4();\n\n  var api = _ref16.api,\n      cash_payment_method_id = _ref16.cash_payment_method_id,\n      error = _ref16.error,\n      isCardPayment = _ref16.isCardPayment,\n      isPayUReady = _ref16.isPayUReady,\n      loading = _ref16.loading,\n      onCashPaymentMethodChange = _ref16.onCashPaymentMethodChange,\n      onChange = _ref16.onChange,\n      payment_method_id = _ref16.payment_method_id,\n      POS = _ref16.POS,\n      requireds = _ref16.requireds,\n      validationError = _ref16.validationError;\n\n  // payment methods\n  var _useState10 = useState(),\n      paymentMethods = _useState10[0],\n      setPaymentMethods = _useState10[1]; // get payment methods\n\n\n  useEffect(function (_) {\n    var getPaymentMethods = /*#__PURE__*/function () {\n      var _ref17 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(_) {\n        var _yield$api$get4, data;\n\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.next = 2;\n                return api.get('payment-methods');\n\n              case 2:\n                _yield$api$get4 = _context9.sent;\n                data = _yield$api$get4.data;\n                setPaymentMethods(data);\n\n              case 5:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9);\n      }));\n\n      return function getPaymentMethods(_x8) {\n        return _ref17.apply(this, arguments);\n      };\n    }();\n\n    getPaymentMethods();\n  }, []); // init card secure fields\n\n  useEffect(function (_) {\n    if (isPayUReady && isCardPayment) {\n      POS.initSecureFields('card-secure-fields');\n    }\n  }, [isPayUReady, isCardPayment]); // cash payment methods\n\n  var _useState11 = useState(),\n      cashPaymentMethods = _useState11[0],\n      setCashPaymentMethods = _useState11[1]; // get cash payment methods\n\n\n  useEffect(function (_) {\n    var getCashPaymentMethods = /*#__PURE__*/function () {\n      var _ref18 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(_) {\n        var _yield$api$get5, data;\n\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                _context10.next = 2;\n                return api.get('cash-payment-methods');\n\n              case 2:\n                _yield$api$get5 = _context10.sent;\n                data = _yield$api$get5.data;\n                setCashPaymentMethods(data);\n\n              case 5:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10);\n      }));\n\n      return function getCashPaymentMethods(_x9) {\n        return _ref18.apply(this, arguments);\n      };\n    }();\n\n    getCashPaymentMethods();\n  }, []);\n  return __jsx(\"div\", {\n    className: \"jsx-2298570347\" + \" \" + \"row\"\n  }, __jsx(\"div\", {\n    className: \"jsx-2298570347\" + \" \" + \"offset-md-2 col-md-8\"\n  }, __jsx(\"h3\", {\n    className: \"jsx-2298570347\" + \" \" + \"h3\"\n  }, \"Pago\"), __jsx(\"div\", {\n    className: \"jsx-2298570347\" + \" \" + \"row\"\n  }, __jsx(\"div\", {\n    className: \"jsx-2298570347\" + \" \" + \"col-md-6\"\n  }, __jsx(FormGroup, null, paymentMethods && paymentMethods.map(function (paymentMethod, key) {\n    return __jsx(InputRadio, {\n      key: key,\n      label: paymentMethod.name,\n      name: \"payment\",\n      onChange: onChange,\n      state: payment_method_id,\n      value: paymentMethod.id\n    });\n  }), validationError && __jsx(\"div\", {\n    className: \"jsx-2298570347\" + \" \" + \"invalid-feedback\"\n  }, validationError))), __jsx(\"div\", {\n    className: \"jsx-2298570347\" + \" \" + \"col-md-6\"\n  }, isCardPayment ? __jsx(\"div\", {\n    className: \"jsx-2298570347\" + \" \" + \"card-inputs\"\n  }, __jsx(FormGroup, null, __jsx(Label, {\n    htmlFor: \"cardholder-name\"\n  }, \"Nombre impreso en tarjeta\"), __jsx(Input, {\n    id: \"cardholder-name\",\n    name: \"cardholder-name\",\n    required: requireds,\n    type: \"text\"\n  })), __jsx(FormGroup, null, __jsx(\"div\", {\n    id: \"card-secure-fields\",\n    className: \"jsx-2298570347\"\n  }), __jsx(InvalidFeedback, {\n    error: error,\n    loading: loading,\n    name: \"payment_os\"\n  }))) // cash payment methods\n  : payment_method_id === 3 && __jsx(FormGroup, null, cashPaymentMethods == null ? __jsx(\"p\", {\n    className: \"jsx-2298570347\"\n  }, \"Cargando...\") : cashPaymentMethods.length ? cashPaymentMethods.map(function (item, key) {\n    return __jsx(InputRadio, {\n      key: key,\n      label: item.name,\n      name: \"cash_payment_method_id\",\n      onChange: onCashPaymentMethodChange,\n      state: cash_payment_method_id,\n      value: item.id\n    });\n  }) : __jsx(\"p\", {\n    className: \"jsx-2298570347\"\n  }, \"Sin m\\xE9todo de pago configurado.\"), __jsx(InvalidFeedback, {\n    error: error,\n    loading: loading,\n    name: \"cash_payment_method_id\"\n  }))))), __jsx(_JSXStyle, {\n    id: \"2298570347\"\n  }, \"@media (min-width:768px){.card-inputs.jsx-2298570347{margin-top:-21px;}}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9yYWZhZWwvUHJvamVjdHMvc29tb3NnYWQvZGFsZS9wYWdlcy9yZWdpc3Rlci9jb21wbGV0ZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF1ekJrQixBQUk4QixpQkFDbkIiLCJmaWxlIjoiL1VzZXJzL3JhZmFlbC9Qcm9qZWN0cy9zb21vc2dhZC9kYWxlL3BhZ2VzL3JlZ2lzdGVyL2NvbXBsZXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHVzZVNjcmlwdCwgeyBTY3JpcHRTdGF0dXMgfSBmcm9tICdAY2hhcmxpZXRhbmdvL3VzZS1zY3JpcHQnXG5pbXBvcnQgSGVhZCBmcm9tICduZXh0L2hlYWQnXG5pbXBvcnQgTGluayBmcm9tICduZXh0L2xpbmsnXG5pbXBvcnQgUm91dGVyIGZyb20gJ25leHQvcm91dGVyJ1xuaW1wb3J0IG5vb2tpZXMgZnJvbSAnbm9va2llcydcbi8vIGltcG9ydCBzbGVlcCBmcm9tICdzbGVlcC1wcm9taXNlJ1xuaW1wb3J0IHsgVGhlbWVDb250ZXh0IH0gZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnXG5pbXBvcnQgTGF5b3V0IGZyb20gJ34vY29tcG9uZW50cy9sYXlvdXQvTGF5b3V0J1xuaW1wb3J0IHsgQ09ORklHIH0gZnJvbSAnfi9jb25maWcnXG5pbXBvcnQgRm9ybUdyb3VwIGZyb20gJ34vY29tcG9uZW50cy9sYXlvdXQvQXV0aE1vZGFsL0Zvcm1Hcm91cCdcbmltcG9ydCBMYWJlbCBmcm9tICd+L2NvbXBvbmVudHMvbGF5b3V0L0F1dGhNb2RhbC9MYWJlbCdcbmltcG9ydCBJbnB1dCBmcm9tICd+L2NvbXBvbmVudHMvbGF5b3V0L0F1dGhNb2RhbC9JbnB1dCdcbmltcG9ydCBCdXR0b24gZnJvbSAnfi9jb21wb25lbnRzL2J1dHRvbidcbmltcG9ydCB7IHVzZUNvbnRleHQsIHVzZUVmZmVjdCwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgVXNlckNvbnRleHQgZnJvbSAnfi9jb250ZXh0cy9Vc2VyQ29udGV4dCdcbmltcG9ydCBQYWNrYWdlcyBmcm9tICd+L2NvbXBvbmVudHMvUGFja2FnZXMnXG5pbXBvcnQgU2VsZWN0IGZyb20gJ34vY29tcG9uZW50cy9TZWxlY3QvU2VsZWN0J1xuaW1wb3J0IHsgSVNfUFJPRFVDVElPTiwgSEFTX1dJTkRPVyB9IGZyb20gJ34vY29uc3RhbnRzL2NvbnN0YW50cydcbmltcG9ydCB3aXRoQXV0aCBmcm9tICd+L2NvbXBvbmVudHMvd2l0aEF1dGgnXG5pbXBvcnQgTG9hZGluZyBmcm9tICd+L2NvbXBvbmVudHMvTG9hZGluZy9Mb2FkaW5nJ1xuXG4vLyBwYWdlXG5jb25zdCBDb21wbGV0ZVJlZ2lzdGVyUGFnZSA9ICh7IGFwaSwgbGF5b3V0UHJvcHMsIHBhY2thZ2VzLCB1c2VyIH0pID0+IHtcbiAgY29uc3QgWyByZWFkeSwgc3RhdHVzIF0gPSB1c2VTY3JpcHQoJ2h0dHBzOi8vanMucGF5bWVudHNvcy5jb20vdjIvbGF0ZXN0L3NlY3VyZS1maWVsZHMubWluLmpzJylcbiAgY29uc3QgUE9TID0gcmVhZHkgJiYgSEFTX1dJTkRPVyA/IHdpbmRvdy5QT1MgOiBudWxsXG4gIGNvbnN0IHBheVVFbnYgPSAndGVzdCdcbiAgY29uc3QgYnVzaW5lc3NVbml0UHVibGljS2V5ID0gJzg4OTg1MDM2LTY1MzAtNGI1YS1hN2VjLWM0ZTA3ZWMwN2Y2YydcbiAgY29uc3QgWyBpc1BheVVSZWFkeSwgc2V0SXNQYXlVUmVhZHkgXSA9IHVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBQT1NTdHlsZSA9IHtcbiAgICBiYXNlOiB7XG4gICAgICBib3JkZXJSYWRpdXM6ICcuMTVyZW0nLFxuICAgICAgYmFja2dyb3VuZENvbG9yOiAnd2hpdGUnLFxuICAgICAgaGVpZ2h0OiAnY2FsYygxLjVlbSArIC43NXJlbSArIDJweCknLFxuICAgICAgZm9udFNpemU6ICcxMnB4JyxcbiAgICAgIHBhZGRpbmc6JzBweCAzcHgnLFxuICAgICAgbWFyZ2luTGVmdDogJzVweCcsXG4gICAgICBjYXJkSW1hZ2U6IHtcbiAgICAgICAgYm9yZGVyVG9wUmlnaHRSYWRpdXM6IDAsXG4gICAgICAgIGJvcmRlckJvdHRvbVJpZ2h0UmFkaXVzOiAwLFxuICAgICAgICBtYXJnaW46IDAsXG4gICAgICB9LFxuICAgICAgcGFuOntcbiAgICAgICAgd2lkdGg6JzE2MHB4JyxcbiAgICAgICAgYm9yZGVyVG9wTGVmdFJhZGl1czogMCxcbiAgICAgICAgYm9yZGVyQm90dG9tTGVmdFJhZGl1czogMCxcbiAgICAgICAgbWFyZ2luTGVmdDogMCxcbiAgICAgIH0sXG4gICAgICBleHBpcmF0aW9uRGF0ZTogeyB3aWR0aDogJzQ3cHgnIH0sXG4gICAgICBzZWN1cmVGaWVsZHM6IHsgbGVmdDogJzQwcHgnIH0sXG4gICAgICBjdnY6IHsgd2lkdGg6ICczNXB4JyB9XG4gICAgfVxuICB9XG5cbiAgaWYgKHN0YXR1cyA9PT0gU2NyaXB0U3RhdHVzLkVSUk9SKSB7XG4gICAgY29uc29sZS5sb2coJ0ZhaWxlZCB0byBsb2FkIFBPUyBBUEknKVxuICB9XG5cbiAgdXNlRWZmZWN0KF8gPT4ge1xuICAgIGlmIChQT1MpIHtcbiAgICAgIFBPUy5zZXRQdWJsaWNLZXkoYnVzaW5lc3NVbml0UHVibGljS2V5KVxuICAgICAgUE9TLnNldEVudmlyb25tZW50KHBheVVFbnYpXG4gICAgICBQT1Muc2V0U3R5bGUoUE9TU3R5bGUpXG4gICAgICBQT1Muc2V0Q2FyZE51bWJlclBsYWNlaG9sZGVyKCdUYXJqZXRhIGRlIGNyw6lkaXRvJylcbiAgICAgIFBPUy5zZXRFeHBpcmF0aW9uRGF0ZVBsYWNlaG9sZGVyKCdNTS9BQScpO1xuICAgICAgc2V0SXNQYXlVUmVhZHkodHJ1ZSlcbiAgICB9XG4gIH0sIFtQT1NdKVxuXG4gIHJldHVybiAoXG4gICAgPExheW91dCB7Li4ubGF5b3V0UHJvcHN9PlxuICAgICAgPEhlYWQ+XG4gICAgICAgIDx0aXRsZT5Db25maXJtYWNpw7NuICZsdDsgUmVnaXN0cm8gJmx0OyB7Q09ORklHLmFwcE5hbWV9PC90aXRsZT5cbiAgICAgIDwvSGVhZD5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmdwYWdlIGNvbnRhaW5lci1mbHVpZFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXhsLTggb2Zmc2V0LXhsLTJcIj5cblxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImgyXCI+Q29tcGxldGEgdHUgcmVnaXN0cm88L2gxPlxuXG4gICAgICAgICAgICA8Q29tcGxldGVSZWdpc3RlckZvcm0gey4uLnthcGksIGlzUGF5VVJlYWR5LCBwYWNrYWdlcywgUE9TfX0gLz5cblxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAucmdwYWdlIHtcbiAgICAgICAgICBwYWRkaW5nLXRvcDogNDBweDtcbiAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLmgyIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgICAgICB9XG4gICAgICBgfTwvc3R5bGU+XG4gICAgPC9MYXlvdXQ+XG4gIClcbn1cblxuY29uc3QgQ29tcGxldGVSZWdpc3RlckZvcm0gPSAoeyBhcGksIGlzUGF5VVJlYWR5LCBwYWNrYWdlcywgUE9TIH0pID0+IHtcblxuICBjb25zdCB7IGlkOiBmcmVlX3BhY2thZ2VfaWQgfSA9IHBhY2thZ2VzLml0ZW1zLmZpbmQoaXRlbSA9PiBpdGVtLmFtb3VudCA9PSAwKSB8fCB7fVxuXG4gIGNvbnN0IGRlYnVnID0gZmFsc2UgJiYgISBJU19QUk9EVUNUSU9OXG4gIGNvbnN0IHJlcXVpcmVkcyA9IElTX1BST0RVQ1RJT05cblxuICBjb25zdCB7IHVzZXIsIHVwZGF0ZVVzZXIgfSA9IHVzZUNvbnRleHQoVXNlckNvbnRleHQpXG5cbiAgY29uc3QgWyBnZW5kZXJzLCBzZXRHZW5kZXJzIF0gPSB1c2VTdGF0ZSgpXG4gIGNvbnN0IFsgZGlzY291bnRzLCBzZXREaXNjb3VudHMgXSA9IHVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBbIGJsb2NrRGlzY291bnRGaWVsZHMsIHNldEJsb2NrRGlzY291bnRGaWVsZHMgXSA9IHVzZVN0YXRlKGZhbHNlKVxuXG4gIGNvbnN0IFsgdmFsdWVzLCBzZXRWYWx1ZXMgXSA9IHVzZVN0YXRlKHtcbiAgICBuYW1lOiAnJyxcbiAgICBnZW5kZXJfaWQ6ICcnLFxuICAgIGRvY3VtZW50OiAnJyxcbiAgICBjb3VudHJ5X2lkOiAnJyxcbiAgICBhZGRyZXNzXzFzdF9sZXZlbDogJycsXG4gICAgY2l0eTogJycsXG4gICAgYWRkcmVzc18zcmRfbGV2ZWw6ICcnLFxuICAgIGFkZHJlc3M6ICcnLFxuICAgIHBhY2thZ2VfaWQ6ICcnLFxuICAgIHBheW1lbnRfbWV0aG9kX2lkOiBudWxsLFxuICAgIHBheW1lbnRfb3M6IG51bGwsXG4gICAgY2FzaF9wYXltZW50X21ldGhvZF9pZDogbnVsbCxcbiAgICB0ZXJtczogbnVsbCxcbiAgICBkaXNjb3VudF9pZDogbnVsbCxcbiAgfSlcblxuICBjb25zdCBbIGxvYWRpbmcsIHNldExvYWRpbmcgXSA9IHVzZVN0YXRlKClcbiAgY29uc3QgWyBlcnJvciwgc2V0RXJyb3IgXSA9IHVzZVN0YXRlKClcblxuICAvKiBnZXQgZ2VuZGVycyAqL1xuICB1c2VFZmZlY3QoXyA9PiB7XG4gICAgKGFzeW5jIF8gPT4ge1xuICAgICAgY29uc3Qge2RhdGF9ID0gYXdhaXQgYXBpLmdldCgnZ2VuZGVycycpXG4gICAgICBzZXRHZW5kZXJzKGRhdGEpXG4gICAgfSkoKVxuICB9LCBbXSlcblxuICAgLyogZ2V0IGRpc2NvdW50cyAqL1xuICAgdXNlRWZmZWN0KF8gPT4ge1xuICAgIChhc3luYyBfID0+IHtcbiAgICAgIHZhciB7IGRhdGEgfSA9IGF3YWl0IGFwaS5nZXQoJ2Rpc2NvdW50cycpXG5cbiAgICAgIGRhdGEgPSBkYXRhLm1hcCggKGRpc2MsIGluZGV4KSA9PiB7XG4gICAgICAgIGRpc2MuZHNjX2lkID0gJ2RzY18nICsgaW5kZXhcbiAgICAgICAgcmV0dXJuIGRpc2NcbiAgICAgIH0pXG5cbiAgICAgIHNldERpc2NvdW50cyhkYXRhKVxuICAgIH0pKClcbiAgfSwgW10pXG5cbiAgLyogZmlsbCB1c2VyIGZvcm0gKi9cbiAgdXNlRWZmZWN0KF8gPT4ge1xuICAgIGlmICh1c2VyKSB7XG4gICAgICBzZXRWYWx1ZXMoe1xuICAgICAgICAuLi52YWx1ZXMsXG4gICAgICAgIG5hbWU6IHVzZXIubmFtZSxcbiAgICAgICAgZ2VuZGVyX2lkOiB1c2VyLmdlbmRlcl9pZCA/IHVzZXIuZ2VuZGVyX2lkIDogJycsXG4gICAgICAgIGRvY3VtZW50OiB1c2VyLmRvY3VtZW50ID8gdXNlci5kb2N1bWVudCA6ICcnLFxuICAgICAgICBhZGRyZXNzOiB1c2VyLmFkZHJlc3MgPyB1c2VyLmFkZHJlc3MgOiAnJyxcbiAgICAgICAgY2l0eTogdXNlci5jaXR5ID8gdXNlci5jaXR5IDogJycsXG4gICAgICAgIGNvdW50cnlfaWQ6IHVzZXIuY291bnRyeV9pZCA/IHVzZXIuY291bnRyeV9pZCA6ICcnLFxuICAgICAgICBwYWNrYWdlX2lkOiB1c2VyLnBhY2thZ2VfaWRfaW50ZW50aW9uID8gdXNlci5wYWNrYWdlX2lkX2ludGVudGlvbiA6ICcnLFxuICAgICAgfSlcbiAgICB9XG4gIH0sIFt1c2VyXSlcblxuICAvKiBoYW5kbGUgZ2VuZXJhbCBpbnB1dCBjaGFuZ2UgKi9cbiAgY29uc3QgaGFuZGxlSW5wdXRDaGFuZ2UgPSBlID0+IHtcbiAgICBjb25zdCB7IGNoZWNrZWQsIG5hbWUsIHZhbHVlLCB0eXBlIH0gPSBlLnRhcmdldFxuICAgIHNldFZhbHVlcyh7XG4gICAgICAuLi52YWx1ZXMsXG4gICAgICBbbmFtZV06IHR5cGUgPT09ICdjaGVja2JveCcgP1xuICAgICAgICAoY2hlY2tlZCA/ICh2YWx1ZSA9PT0gJ3RydWUnID8gdHJ1ZSA6IHZhbHVlKSA6IGZhbHNlKSA6XG4gICAgICAgIHZhbHVlLFxuICAgIH0pXG4gIH1cblxuICAvKiBoYW5kbGUgZGlzb2N1bnQgY2hhbmdlICovXG4gIGNvbnN0IGhhbmRsZURpc2NvdW50Q2hhbmdlID0gYXN5bmMgKHt0YXJnZXQ6eyBuYW1lLCB2YWx1ZSwgaWQgfX0pID0+IHtcblxuICAgIGxldCB2YWxpZCA9IGF3YWl0IGNoZWNrRGlzY291bnQodmFsdWUpXG4gICAgLy8gY29uc29sZS50YWJsZSh2YWxpZClcblxuICAgIHNldFZhbHVlcyh7XG4gICAgICAuLi52YWx1ZXMsXG4gICAgICBbbmFtZV06IHZhbHVlLFxuICAgICAgZGlzY291bnRfaWQ6IHZhbGlkID8gaWQgOiBudWxsXG4gICAgfSlcbiAgfVxuXG4gIC8qIGhhbmRsZSBkaXNjb3VudCBjaGFuZ2UgKi9cbiAgY29uc3QgY2hlY2tEaXNjb3VudCA9IGFzeW5jIHN1cHBvcnRlckNvZGUgPT4ge1xuXG4gICAgLy8gU2ltdWxhdGUgQVBJIENhbGxcbiAgICBjb25zdCBwcm9tID0gKGRlbGF5LCB2YWx1ZSkgPT4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGRlbGF5LCB2YWx1ZSkpXG5cbiAgICByZXR1cm4gYXdhaXQgcHJvbSg1MCwgc3VwcG9ydGVyQ29kZS5sZW5ndGggPT09IDUpXG5cbiAgfVxuXG4gIC8qIGhhbmRsZSBwYWNrYWdlIGNoYW5nZSAqL1xuICBjb25zdCBvblBhY2thZ2VDaGFuZ2UgPSB1c2VDYWxsYmFjayggZSA9PiB7XG4gICAgY29uc3QgcGFja2FnZV9pZCA9IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlLCAxMClcbiAgICBzZXRWYWx1ZXMoIG9sZFZhbHVlcyA9PiAoe1xuICAgICAgLi4ub2xkVmFsdWVzLFxuICAgICAgcGFja2FnZV9pZCxcbiAgICAgIHBheW1lbnRfbWV0aG9kX2lkOiBwYWNrYWdlX2lkID09PSBmcmVlX3BhY2thZ2VfaWQgPyBudWxsIDogdmFsdWVzLnBheW1lbnRfbWV0aG9kX2lkLFxuICAgIH0pKVxuICB9LFtdKVxuXG4gIC8qIGhhbmRsZSBwYXltZW50IG1ldGhvZCBjaGFuZ2UgKi9cbiAgZnVuY3Rpb24gb25QYXltZW50Q2hhbmdlKGUpIHtcbiAgICBzZXRWYWx1ZXMoe1xuICAgICAgLi4udmFsdWVzLFxuICAgICAgcGF5bWVudF9tZXRob2RfaWQ6IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlLCAxMCksXG4gICAgICBjYXNoX3BheW1lbnRfbWV0aG9kX2lkOiBudWxsLFxuICAgIH0pXG4gIH1cblxuICBmdW5jdGlvbiBvbkNhc2hQYXltZW50TWV0aG9kQ2hhbmdlKGUpIHtcbiAgICBzZXRWYWx1ZXMoe1xuICAgICAgLi4udmFsdWVzLFxuICAgICAgY2FzaF9wYXltZW50X21ldGhvZF9pZDogcGFyc2VJbnQoZS50YXJnZXQudmFsdWUsIDEwKSxcbiAgICB9KVxuICB9XG5cbiAgLyogdG9rZW4gKi9cbiAgYXN5bmMgZnVuY3Rpb24gY3JlYXRlVG9rZW4oKSB7XG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IGFkZGl0aW9uYWxEYXRhID0ge1xuICAgICAgICBob2xkZXJfbmFtZTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhcmRob2xkZXItbmFtZScpLnZhbHVlLFxuICAgICAgICAvLyBjdXN0b21fZGF0YTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1c3RvbScpLnZhbHVlLFxuICAgICAgfVxuICAgICAgUE9TLmNyZWF0ZVRva2VuKGFkZGl0aW9uYWxEYXRhLCAocmVzdWx0KSA9PiB7XG4gICAgICAgIGNvbnN0IGpzb24gPSBKU09OLnBhcnNlKHJlc3VsdClcbiAgICAgICAgY29uc29sZS5sb2coJ2pzb24nLCBqc29uKVxuICAgICAgICBqc29uLnRva2VuID8gcmVzb2x2ZShqc29uKSA6IHJlamVjdChqc29uKVxuICAgICAgfSlcbiAgICB9KVxuICAgIHJldHVybiBwcm9taXNlXG4gIH1cblxuICAvLyBpcyBjYXJkIHBheW1lbnRcbiAgY29uc3QgY3JlZGl0X2NhcmRfaWQgPSAxXG4gIGNvbnN0IGRlYml0X2NhcmRfaWQgPSAyXG4gIGNvbnN0IGlzQ2FyZFBheW1lbnQgPSBbY3JlZGl0X2NhcmRfaWQsIGRlYml0X2NhcmRfaWRdLmluY2x1ZGVzKHZhbHVlcy5wYXltZW50X21ldGhvZF9pZClcblxuICAvKiBzdWJtaXQgKi9cbiAgY29uc3QgaGFuZGxlU3VibWl0ID0gYXN5bmMgZSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgc2V0TG9hZGluZyh0cnVlKVxuICAgIHNldEVycm9yKGZhbHNlKVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXltZW50RGF0YSA9IHZhbHVlcy5wYWNrYWdlX2lkICYmIHZhbHVlcy5wYWNrYWdlX2lkICE9PSBmcmVlX3BhY2thZ2VfaWQgJiZcbiAgICAgICAgdmFsdWVzLnBheW1lbnRfbWV0aG9kX2lkICYmIGlzQ2FyZFBheW1lbnQgPyBhd2FpdCBjcmVhdGVUb2tlbigpIDogbnVsbFxuICAgICAgY29uc3QgZGF0YSA9IHsgLi4udmFsdWVzLCBwYXltZW50X29zOiBwYXltZW50RGF0YSB9XG4gICAgICBpZiAoZGF0YS5jb3VudHJ5X2lkID09PSAnJykge1xuICAgICAgICBkZWxldGUgZGF0YS5jb3VudHJ5X2lkXG4gICAgICB9XG4gICAgICBpZiAoZGF0YS5hZGRyZXNzXzFzdF9sZXZlbCA9PT0gJycpIHtcbiAgICAgICAgZGVsZXRlIGRhdGEuYWRkcmVzc18xc3RfbGV2ZWxcbiAgICAgIH1cbiAgICAgIGlmIChkYXRhLmFkZHJlc3NfM3JkX2xldmVsID09PSAnJykge1xuICAgICAgICBkZWxldGUgZGF0YS5hZGRyZXNzXzNyZF9sZXZlbFxuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBkYXRhOiB7IHVzZXIsIG9yZGVyIH0gfSA9IGF3YWl0IGFwaS5wb3N0KCdyZWdpc3Rlci9jb21wbGV0ZScsIGRhdGEpXG4gICAgICAgIHVwZGF0ZVVzZXIodXNlcilcbiAgICAgICAgaWYgKG9yZGVyKSB7XG4gICAgICAgICAgUm91dGVyLnB1c2goe1xuICAgICAgICAgICAgcGF0aG5hbWU6ICcvcmVnaXN0ZXIvY29uZmlybScsXG4gICAgICAgICAgICBxdWVyeToge1xuICAgICAgICAgICAgICBkb3dubG9hZF9saW5rOiBvcmRlci5kb3dubG9hZF9saW5rLFxuICAgICAgICAgICAgICBsaW5rOiBvcmRlci5saW5rLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LCAnL3JlZ2lzdGVyL2NvbmZpcm0nKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIFJvdXRlci5wdXNoKCcvJylcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7XG4gICAgICAgICAgY29uc3QgeyBkYXRhLCBzdGF0dXMgfSA9IGVycm9yLnJlc3BvbnNlXG4gICAgICAgICAgaWYgKHN0YXR1cyA9PT0gNDIyKSB7XG4gICAgICAgICAgICBzZXRFcnJvcihkYXRhKVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChlcnJvci5yZXF1ZXN0KSB7XG4gICAgICAgICAgc2V0RXJyb3IoZXJyb3IpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2V0RXJyb3IoZXJyb3IpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgc2V0RXJyb3IoZXJyb3IuZGVzY3JpcHRpb24gPyB7IGVycm9yczogeyBwYXltZW50X29zOiBlcnJvci5kZXNjcmlwdGlvbiB9IH0gOiBlcnJvcilcbiAgICB9XG4gICAgc2V0TG9hZGluZyhmYWxzZSlcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGZvcm0gbWV0aG9kPVwicG9zdFwiIG9uU3VibWl0PXtoYW5kbGVTdWJtaXR9PlxuXG4gICAgICB7LyogbWFpbiBlcnJvciBtc2cgKi99XG4gICAgICB7IGVycm9yICYmIGVycm9yLm1lc3NhZ2UgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImludmFsaWQtZmVlZGJhY2tcIj57ZXJyb3IubWVzc2FnZX08L2Rpdj5cbiAgICAgICkgfVxuXG4gICAgICB7LyogZm9ybSBkYXRhIGRlYnVnICovfVxuICAgICAgeyBkZWJ1ZyAmJiAoXG4gICAgICAgIDxwcmUgc3R5bGU9e3sgY29sb3I6ICcjZmZmJyB9fT5cbiAgICAgICAgICB7SlNPTi5zdHJpbmdpZnkodmFsdWVzLCBudWxsLCAyKX1cbiAgICAgICAgPC9wcmU+XG4gICAgICApfVxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLW1kLTZcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRhdGFcIj5cblxuICAgICAgICAgICAgey8qIGhlYWRpbmcgKi99XG4gICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwiaDNcIj5UdXMgZGF0b3M8L2gzPlxuXG4gICAgICAgICAgICB7LyogbmFtZSAqL31cbiAgICAgICAgICAgIDxGb3JtR3JvdXA+XG4gICAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPVwibmFtZVwiPk5vbWJyZSBjb21wbGV0bzwvTGFiZWw+XG4gICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgIGlkPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVJbnB1dENoYW5nZX1cbiAgICAgICAgICAgICAgICByZXF1aXJlZD17cmVxdWlyZWRzfVxuICAgICAgICAgICAgICAgIHZhbHVlPXt2YWx1ZXMubmFtZX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPEludmFsaWRGZWVkYmFjayBlcnJvcj17ZXJyb3J9IGxvYWRpbmc9e2xvYWRpbmd9IG5hbWU9XCJuYW1lXCIgLz5cbiAgICAgICAgICAgIDwvRm9ybUdyb3VwPlxuXG4gICAgICAgICAgICB7LyogZ2VucmUgKi99XG4gICAgICAgICAgICA8Rm9ybUdyb3VwPlxuICAgICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj1cImdlbmRlcl9pZFwiPkfDqW5lcm88L0xhYmVsPlxuICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgaWQ9XCJnZW5kZXJfaWRcIlxuICAgICAgICAgICAgICAgIG5hbWU9XCJnZW5kZXJfaWRcIlxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVJbnB1dENoYW5nZX1cbiAgICAgICAgICAgICAgICByZXF1aXJlZD17cmVxdWlyZWRzfVxuICAgICAgICAgICAgICAgIHZhbHVlPXt2YWx1ZXMuZ2VuZGVyX2lkfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgeyAhIGdlbmRlcnMgPyAoXG4gICAgICAgICAgICAgICAgICA8b3B0aW9uIGRpc2FibGVkIHZhbHVlPVwiXCI+Q2FyZ2FuZG8uLi48L29wdGlvbj5cbiAgICAgICAgICAgICAgICApIDogZ2VuZGVycy5sZW5ndGggPyA8PlxuICAgICAgICAgICAgICAgICAgPG9wdGlvbiBkaXNhYmxlZCB2YWx1ZT1cIlwiPlNlbGVjY2lvbmEgdHUgZ8OpbmVybzwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgeyBnZW5kZXJzLm1hcCgoZ2VucmUsIGtleSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHsuLi57a2V5fX0gdmFsdWU9e2dlbnJlLmlkfT57Z2VucmUubmFtZX08L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgIDwvPiA6IChcbiAgICAgICAgICAgICAgICAgIDxvcHRpb24gZGlzYWJsZWQgdmFsdWU9XCJcIj5JbmNhcGF6IGRlIGNhcmdhciBnw6luZXJvczwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICkgfVxuICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgPEludmFsaWRGZWVkYmFjayBlcnJvcj17ZXJyb3J9IGxvYWRpbmc9e2xvYWRpbmd9IG5hbWU9XCJnZW5kZXJfaWRcIiAvPlxuICAgICAgICAgICAgPC9Gb3JtR3JvdXA+XG5cbiAgICAgICAgICAgIHsvKiBkb2N1bWVudCAqL31cbiAgICAgICAgICAgIDxGb3JtR3JvdXA+XG4gICAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPVwiZG9jdW1lbnRcIj5Eb2N1bWVudG88L0xhYmVsPlxuICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICBpZD1cImRvY3VtZW50XCJcbiAgICAgICAgICAgICAgICBuYW1lPVwiZG9jdW1lbnRcIlxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVJbnB1dENoYW5nZX1cbiAgICAgICAgICAgICAgICByZXF1aXJlZD17cmVxdWlyZWRzfVxuICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICB2YWx1ZT17dmFsdWVzLmRvY3VtZW50fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8SW52YWxpZEZlZWRiYWNrIGVycm9yPXtlcnJvcn0gbG9hZGluZz17bG9hZGluZ30gbmFtZT1cImRvY3VtZW50XCIgLz5cbiAgICAgICAgICAgIDwvRm9ybUdyb3VwPlxuXG4gICAgICAgICAgICB7ZGlzY291bnRzICYmIGRpc2NvdW50cy5tYXAoIGQgPT4gKFxuICAgICAgICAgICAgICA8Rm9ybUdyb3VwIGtleT17ZC5pZH0+XG4gICAgICAgICAgICAgICAgPExhYmVsIGh0bWxGb3I9e2QuZHNjX2lkfT57ZC5uYW1lfTwvTGFiZWw+XG4gICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzY291bnRzLmZpbmQoXG4gICAgICAgICAgICAgICAgICAgIGRpc2MgPT4gKCFbJycsdW5kZWZpbmVkXS5pbmNsdWRlcyh2YWx1ZXNbZGlzYy5kc2NfaWRdKSAmJiBkaXNjLmlkICE9IGQuaWQpXG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgaWQ9e2QuaWR9XG4gICAgICAgICAgICAgICAgICBtYXhMZW5ndGg9ezV9XG4gICAgICAgICAgICAgICAgICBuYW1lPXtkLmRzY19pZH1cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVEaXNjb3VudENoYW5nZX1cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt2YWx1ZXMuZGlzY291bnRfaWQgPT0gZC5pZCA/IHtiYWNrZ3JvdW5kQ29sb3I6ICdyZ2IoMjA2LCAyNDksIDIwNiknfSA6IHt9fVxuICAgICAgICAgICAgICAgICAgdmFsdWU9e3ZhbHVlc1tkLmRzY19pZF0gfHwgJyd9XG4gICAgICAgICAgICAgICAgICByZWFkT25seT17YmxvY2tEaXNjb3VudEZpZWxkc31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tmbG9hdDogJ3JpZ2h0JywgcGFkZGluZ1RvcDonMTBweCd9fT5cbiAgICAgICAgICAgICAgICAgIDxMb2FkaW5nIHNpemU9XCIyMFwiIGNvbG9yPVwid2hpdGVcIiBsb2FkaW5nU3RhdGU9e3ZhbHVlcy5kaXNjb3VudF9pZCA9PSBkLmlkICAmJiBibG9ja0Rpc2NvdW50RmllbGRzfS8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvRm9ybUdyb3VwPlxuICAgICAgICAgICAgKSl9XG5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgey8qIGFkZHJlc3MgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLW1kLTZcIj5cbiAgICAgICAgICA8QWRkcmVzc1xuICAgICAgICAgICAgYXBpPXthcGl9XG4gICAgICAgICAgICBlcnJvcj17ZXJyb3J9XG4gICAgICAgICAgICBoYW5kbGVJbnB1dENoYW5nZT17aGFuZGxlSW5wdXRDaGFuZ2V9XG4gICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nfVxuICAgICAgICAgICAgcmVxdWlyZWRzPXtyZXF1aXJlZHN9XG4gICAgICAgICAgICBzZXRWYWx1ZXM9e3NldFZhbHVlc31cbiAgICAgICAgICAgIHZhbHVlcz17dmFsdWVzfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIHBhY2thZ2Ugc2VsZWN0aW9uICovfVxuICAgICAgPFBhY2thZ2VzIHsuLi57XG4gICAgICAgIGVycm9yOiBwYWNrYWdlcy5lcnJvciA/IHBhY2thZ2VzLmVycm9yIDogbnVsbCxcbiAgICAgICAgaXRlbXM6IHBhY2thZ2VzLml0ZW1zID8gcGFja2FnZXMuaXRlbXMgOiBudWxsLFxuICAgICAgICBvbkNoYW5nZTogb25QYWNrYWdlQ2hhbmdlLFxuICAgICAgICBwYWNrYWdlX2lkOiB2YWx1ZXMucGFja2FnZV9pZCxcbiAgICAgICAgdmFsaWRhdGlvbkVycm9yOiAhIGxvYWRpbmcgJiYgZXJyb3IgJiYgZXJyb3IuZXJyb3JzICYmIGVycm9yLmVycm9ycy5wYWNrYWdlX2lkLFxuICAgICAgICBkaXNjb3VudF9pZDogdmFsdWVzLmRpc2NvdW50X2lkLFxuICAgICAgICBzZXRCbG9ja0Rpc2NvdW50RmllbGRzLFxuICAgICAgfX0gLz5cblxuICAgICAgey8qIHBheW1lbnQgKi99XG4gICAgICB7IHZhbHVlcy5wYWNrYWdlX2lkICYmIHZhbHVlcy5wYWNrYWdlX2lkICE9PSBmcmVlX3BhY2thZ2VfaWQgJiYgKFxuICAgICAgICA8UGF5bWVudCB7Li4ue1xuICAgICAgICAgIGFwaSxcbiAgICAgICAgICBjYXNoX3BheW1lbnRfbWV0aG9kX2lkOiB2YWx1ZXMuY2FzaF9wYXltZW50X21ldGhvZF9pZCxcbiAgICAgICAgICBlcnJvcixcbiAgICAgICAgICBpc0NhcmRQYXltZW50LFxuICAgICAgICAgIGlzUGF5VVJlYWR5LFxuICAgICAgICAgIGxvYWRpbmcsXG4gICAgICAgICAgb25DYXNoUGF5bWVudE1ldGhvZENoYW5nZSxcbiAgICAgICAgICBvbkNoYW5nZTogb25QYXltZW50Q2hhbmdlLFxuICAgICAgICAgIHBheW1lbnRfbWV0aG9kX2lkOiB2YWx1ZXMucGF5bWVudF9tZXRob2RfaWQsXG4gICAgICAgICAgUE9TLFxuICAgICAgICAgIHJlcXVpcmVkcyxcbiAgICAgICAgICB2YWxpZGF0aW9uRXJyb3I6ICEgbG9hZGluZyAmJiBlcnJvciAmJiBlcnJvci5lcnJvcnMgJiYgZXJyb3IuZXJyb3JzLnBheW1lbnRfbWV0aG9kX2lkLFxuICAgICAgICB9fSAvPlxuICAgICAgKSB9XG5cbiAgICAgIHsvKiBmb290ZXIgKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdyBhbGlnbi1pdGVtcy1jZW50ZXJcIj5cblxuICAgICAgICB7LyogdGVybXMgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLW1kLTYgb2Zmc2V0LW1kLTRcIj5cbiAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwidGVybXNcIj5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICBjaGVja2VkPXt2YWx1ZXMudGVybXN9XG4gICAgICAgICAgICAgIG5hbWU9XCJ0ZXJtc1wiXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVJbnB1dENoYW5nZX1cbiAgICAgICAgICAgICAgcmVxdWlyZWQ9e3JlcXVpcmVkc31cbiAgICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgdmFsdWU9e2B0cnVlYH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8c3Bhbj5IZSBsZcOtZG8geSBhY2VwdG8gPExpbmsgaHJlZj1cIi90ZXJtaW5vcy15LXBvbGl0aWNhc1wiPlxuICAgICAgICAgICAgICAgIDxhIHRhcmdldD1cIl9ibGFua1wiPmVsIGNvbnRyYXRvPC9hPlxuICAgICAgICAgICAgICA8L0xpbms+IGRlIHtDT05GSUcuYXBwTmFtZX08L3NwYW4+XG4gICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICA8SW52YWxpZEZlZWRiYWNrIGVycm9yPXtlcnJvcn0gbG9hZGluZz17bG9hZGluZ30gbmFtZT1cInRlcm1zXCIgLz5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgey8qIHNlbmQgYnRuICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC0yIHRleHQtcmlnaHRcIj5cbiAgICAgICAgICA8QnV0dG9uIGJsb2NrIGNvbG9yPVwic2Vjb25kYXJ5XCIgZGlzYWJsZWQ9e2xvYWRpbmd9IHR5cGU9XCJzdWJtaXRcIj5FbnZpYXI8L0J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8c3R5bGUganN4PntgXG4gICAgICAgIDpnbG9iYWwoLmgzKSB7XG4gICAgICAgICAgZm9udC1zaXplOiAyMHB4O1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICAgIH1cbiAgICAgICAgaHIsXG4gICAgICAgIC5ociB7XG4gICAgICAgICAgbWFyZ2luLXRvcDogMDtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICB9XG4gICAgICAgIC50ZXJtcyB7XG4gICAgICAgICAgZm9udC1zaXplOiAxOHB4O1xuICAgICAgICB9XG4gICAgICAgIC50ZXJtcyBpbnB1dCB7XG4gICAgICAgICAgbWFyZ2luLXJpZ2h0OiA1cHg7XG4gICAgICAgIH1cbiAgICAgIGB9PC9zdHlsZT5cbiAgICA8L2Zvcm0+XG4gIClcbn1cblxuY29uc3QgSW52YWxpZEZlZWRiYWNrID0gKHtlcnJvciwgbG9hZGluZywgbmFtZX0pID0+IHtcbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgeyAhIGxvYWRpbmcgJiYgZXJyb3IgJiYgZXJyb3IuZXJyb3JzICYmIGVycm9yLmVycm9yc1tuYW1lXSAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW52YWxpZC1mZWVkYmFja1wiPntlcnJvci5lcnJvcnNbbmFtZV19PC9kaXY+XG4gICAgICApfVxuICAgIDwvPlxuICApXG59XG5cbmNvbnN0IFNlbGVjdEZvcm1Hcm91cCA9ICh7IGVycm9yLCBsYWJlbCwgbGlzdCwgbGlzdE1hcFZhbHVlID0gbnVsbCwgbG9hZGluZywgbmFtZSwgb25DaGFuZ2UsIHBsdXJhbExhYmVsLCByZXF1aXJlZHMsIHZhbHVlIH0pID0+IHtcbiAgcmV0dXJuIChcbiAgICA8Rm9ybUdyb3VwPlxuICAgICAgPExhYmVsIGh0bWxGb3I9e25hbWV9PntsYWJlbH08L0xhYmVsPlxuICAgICAgPFNlbGVjdFxuICAgICAgICBpZD17bmFtZX1cbiAgICAgICAgbmFtZT17bmFtZX1cbiAgICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlfVxuICAgICAgICByZXF1aXJlZD17cmVxdWlyZWRzfVxuICAgICAgICB2YWx1ZT17dmFsdWV9XG4gICAgICA+XG4gICAgICAgIHsgISBsaXN0ID8gKFxuICAgICAgICAgIDxvcHRpb24gZGlzYWJsZWQgdmFsdWU9XCJcIj5DYXJnYW5kby4uLjwvb3B0aW9uPlxuICAgICAgICApIDogbGlzdC5sZW5ndGggPyA8PlxuICAgICAgICAgIDxvcHRpb24gZGlzYWJsZWQgdmFsdWU9XCJcIj5TZWxlY2Npb25hIHR1IHtsYWJlbC50b0xvd2VyQ2FzZSgpfTwvb3B0aW9uPlxuICAgICAgICAgIHsgbGlzdC5tYXAoKGl0ZW0sIGtleSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBsaXN0TWFwVmFsdWUgPyBpdGVtW2xpc3RNYXBWYWx1ZV0gOiBpdGVtXG4gICAgICAgICAgICBjb25zdCBvcHRpb25OYW1lID0gbGlzdE1hcFZhbHVlID8gaXRlbS5uYW1lIDogaXRlbVxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPG9wdGlvbiBrZXk9e2tleX0gdmFsdWU9e3ZhbHVlfT57b3B0aW9uTmFtZX08L29wdGlvbj5cbiAgICAgICAgICAgIClcbiAgICAgICAgICB9KX1cbiAgICAgICAgPC8+IDogKFxuICAgICAgICAgIDxvcHRpb24gZGlzYWJsZWQgdmFsdWU9XCJcIj5JbmNhcGF6IGRlIGNhcmdhciB7cGx1cmFsTGFiZWx9PC9vcHRpb24+XG4gICAgICAgICkgfVxuICAgICAgPC9TZWxlY3Q+XG4gICAgICA8SW52YWxpZEZlZWRiYWNrIGVycm9yPXtlcnJvcn0gbG9hZGluZz17bG9hZGluZ30gbmFtZT17bmFtZX0gLz5cbiAgICA8L0Zvcm1Hcm91cD5cbiAgKVxufVxuXG5jb25zdCBBZGRyZXNzID0gKHtcbiAgYXBpLFxuICBlcnJvcixcbiAgaGFuZGxlSW5wdXRDaGFuZ2UsXG4gIHNldFZhbHVlcyxcbiAgbG9hZGluZyxcbiAgcmVxdWlyZWRzLFxuICB2YWx1ZXMsXG59KSA9PiB7XG5cbiAgY29uc3QgYXJnQ291bnRyeUlkID0gMTFcbiAgY29uc3QgYnJhQ291bnRyeUlkID0gMzJcbiAgY29uc3QgY2hsQ291bnRyeUlkID0gNDhcblxuICBjb25zdCB7IGNvdW50cnlfaWQ6IGNvdW50cnlJZCwgYWRkcmVzc18xc3RfbGV2ZWwsIGNpdHksIGFkZHJlc3NfM3JkX2xldmVsLCBhZGRyZXNzIH0gPSB2YWx1ZXNcblxuICBjb25zdCBbIGNvdW50cmllcywgc2V0Q291bnRyaWVzIF0gPSB1c2VTdGF0ZSgpXG5cbiAgdXNlRWZmZWN0KCBfID0+IHtcbiAgICAoYXN5bmMgXyA9PiB7XG4gICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGFwaS5nZXQoJ2NvdW50cmllcycpXG4gICAgICBzZXRDb3VudHJpZXMoZGF0YSlcbiAgICB9KSgpXG4gIH0sIFtdKVxuXG4gIGNvbnN0IGhhbmRsZUNvdW50cnlDaGFuZ2UgPSBlID0+IHtcbiAgICBjb25zdCB7IG5hbWUsIHZhbHVlIH0gPSBlLnRhcmdldFxuICAgIHNldFZhbHVlcyh7XG4gICAgICAuLi52YWx1ZXMsXG4gICAgICBbbmFtZV06IHZhbHVlLFxuICAgICAgYWRkcmVzc18xc3RfbGV2ZWw6ICcnLFxuICAgIH0pXG4gIH1cblxuICBjb25zdCBmaXJzdExldmVsTGFiZWwgPSBjb3VudHJ5SWQgPT0gYXJnQ291bnRyeUlkID8gJ1Byb3ZpbmNpYScgOlxuICBjb3VudHJ5SWQgPT0gYnJhQ291bnRyeUlkID8gJ0VzdGFkbycgOlxuICBjb3VudHJ5SWQgPT0gY2hsQ291bnRyeUlkID8gJ1JlZ2nDs24nIDpcbiAgJ1N0YXRlJ1xuXG4gIGNvbnN0IGZpcnN0TGV2ZWxQbHVyYWxMYWJlbCA9IGNvdW50cnlJZCA9PSBhcmdDb3VudHJ5SWQgPyAnUHJvdmluY2lhcycgOlxuICBjb3VudHJ5SWQgPT0gYnJhQ291bnRyeUlkID8gJ0VzdGFkb3MnIDpcbiAgY291bnRyeUlkID09IGNobENvdW50cnlJZCA/ICdSZWdpb25lcycgOlxuICAnU3RhdGVzJ1xuXG4gIGNvbnN0IFsgZmlyc3RMZXZlbExpc3QsIHNldEZpcnN0TGV2ZWxMaXN0IF0gPSB1c2VTdGF0ZSgpXG5cbiAgdXNlRWZmZWN0KF8gPT4ge1xuICAgIChhc3luYyBfID0+IHtcbiAgICAgIGNvbnN0IHBhcnNlZENvdW50cnlJZCA9IHBhcnNlSW50KGNvdW50cnlJZClcbiAgICAgIGNvbnN0IHsgZGF0YTogYWRkcmVzc2VzIH0gPSBbYXJnQ291bnRyeUlkLCBicmFDb3VudHJ5SWQsIGNobENvdW50cnlJZF0uaW5jbHVkZXMocGFyc2VkQ291bnRyeUlkKSA/XG4gICAgICAgIGF3YWl0IGFwaS5nZXQoJ2FkZHJlc3MtMXN0LWxldmVscycsIHtcbiAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgIGNvdW50cnlfaWQ6IGNvdW50cnlJZCxcbiAgICAgICAgICB9LFxuICAgICAgICB9KSA6IHsgZGF0YTogbnVsbCB9XG4gICAgICAgIHNldEZpcnN0TGV2ZWxMaXN0KGFkZHJlc3NlcylcbiAgICB9KSgpXG4gIH0sIFtjb3VudHJ5SWRdKVxuXG4gIGNvbnN0IGNpdHlMYWJlbCA9IGNvdW50cnlJZCA9PSBicmFDb3VudHJ5SWQgPyAnQ2lkYWRlJyA6XG4gIGNvdW50cnlJZCA9PSBjaGxDb3VudHJ5SWQgPyAnUHJvdmluY2lhJyA6XG4gICdDaXVkYWQnXG5cbiAgY29uc3QgdGhpcmRMZXZlbExhYmVsID0gY291bnRyeUlkID09IGNobENvdW50cnlJZCA/ICdDb211bmEnIDogJ0Rpc3RyaWN0J1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJhZGRyZXNzXCI+XG4gICAgICA8aDMgY2xhc3NOYW1lPVwiaDNcIj5VYmljYWNpw7NuPC9oMz5cblxuICAgICAgey8qIGNvdW50cnkgKi99XG4gICAgICA8U2VsZWN0Rm9ybUdyb3VwXG4gICAgICAgIGVycm9yPXtlcnJvcn1cbiAgICAgICAgbGFiZWw9XCJQYcOtc1wiXG4gICAgICAgIGxvYWRpbmc9e2xvYWRpbmd9XG4gICAgICAgIGxpc3Q9e2NvdW50cmllc31cbiAgICAgICAgbGlzdE1hcFZhbHVlPVwiaWRcIlxuICAgICAgICBuYW1lPVwiY291bnRyeV9pZFwiXG4gICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDb3VudHJ5Q2hhbmdlfVxuICAgICAgICBwbHVyYWxMYWJlbD1cIlBhw61zZXNcIlxuICAgICAgICByZXF1aXJlZHM9e3JlcXVpcmVkc31cbiAgICAgICAgdmFsdWU9e2NvdW50cnlJZH1cbiAgICAgIC8+XG5cbiAgICAgIHsvKiAxc3QgbGV2ZWwgKi99XG4gICAgICB7W2FyZ0NvdW50cnlJZCwgYnJhQ291bnRyeUlkLCBjaGxDb3VudHJ5SWRdLm1hcChpZCA9PiBpZCsnJykuaW5jbHVkZXMoY291bnRyeUlkKSAmJiAoXG4gICAgICAgIDxTZWxlY3RGb3JtR3JvdXBcbiAgICAgICAgICBlcnJvcj17ZXJyb3J9XG4gICAgICAgICAgbGFiZWw9e2ZpcnN0TGV2ZWxMYWJlbH1cbiAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nfVxuICAgICAgICAgIGxpc3Q9e2ZpcnN0TGV2ZWxMaXN0fVxuICAgICAgICAgIGxpc3RNYXBWYWx1ZT1cImlkXCJcbiAgICAgICAgICBuYW1lPVwiYWRkcmVzc18xc3RfbGV2ZWxcIlxuICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVJbnB1dENoYW5nZX1cbiAgICAgICAgICBwbHVyYWxMYWJlbD17Zmlyc3RMZXZlbFBsdXJhbExhYmVsfVxuICAgICAgICAgIHJlcXVpcmVkcz17cmVxdWlyZWRzfVxuICAgICAgICAgIHZhbHVlPXthZGRyZXNzXzFzdF9sZXZlbH1cbiAgICAgICAgLz5cbiAgICAgICl9XG5cbiAgICAgIHsvKiBjaXR5ICovfVxuICAgICAge1ticmFDb3VudHJ5SWQsIGNobENvdW50cnlJZF0ubWFwKGlkID0+IGlkKycnKS5pbmNsdWRlcyhjb3VudHJ5SWQpICYmIChcbiAgICAgICAgPEZvcm1Hcm91cD5cbiAgICAgICAgICA8TGFiZWwgaHRtbEZvcj1cImNpdHlcIj57Y2l0eUxhYmVsfTwvTGFiZWw+XG4gICAgICAgICAgPElucHV0XG4gICAgICAgICAgICBpZD1cImNpdHlcIlxuICAgICAgICAgICAgbmFtZT1cImNpdHlcIlxuICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUlucHV0Q2hhbmdlfVxuICAgICAgICAgICAgcmVxdWlyZWQ9e3JlcXVpcmVkc31cbiAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgIHZhbHVlPXtjaXR5fVxuICAgICAgICAgIC8+XG4gICAgICAgICAgPEludmFsaWRGZWVkYmFjayBlcnJvcj17ZXJyb3J9IGxvYWRpbmc9e2xvYWRpbmd9IG5hbWU9XCJjaXR5XCIgLz5cbiAgICAgICAgPC9Gb3JtR3JvdXA+XG4gICAgICApfVxuXG4gICAgICB7LyogM3JkIGxldmVsICovfVxuICAgICAge1tjaGxDb3VudHJ5SWRdLm1hcChpZCA9PiBpZCsnJykuaW5jbHVkZXMoY291bnRyeUlkKSAmJiAoXG4gICAgICAgIDxGb3JtR3JvdXA+XG4gICAgICAgICAgPExhYmVsIGh0bWxGb3I9XCJhZGRyZXNzXzNyZF9sZXZlbFwiPnt0aGlyZExldmVsTGFiZWx9PC9MYWJlbD5cbiAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgIGlkPVwiYWRkcmVzc18zcmRfbGV2ZWxcIlxuICAgICAgICAgICAgbmFtZT1cImFkZHJlc3NfM3JkX2xldmVsXCJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVJbnB1dENoYW5nZX1cbiAgICAgICAgICAgIHJlcXVpcmVkPXtyZXF1aXJlZHN9XG4gICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICB2YWx1ZT17YWRkcmVzc18zcmRfbGV2ZWx9XG4gICAgICAgICAgLz5cbiAgICAgICAgICA8SW52YWxpZEZlZWRiYWNrIGVycm9yPXtlcnJvcn0gbG9hZGluZz17bG9hZGluZ30gbmFtZT1cImFkZHJlc3NfM3JkX2xldmVsXCIgLz5cbiAgICAgICAgPC9Gb3JtR3JvdXA+XG4gICAgICApfVxuXG4gICAgICA8Rm9ybUdyb3VwPlxuICAgICAgICA8TGFiZWwgaHRtbEZvcj1cImFkZHJlc3NcIj5EaXJlY2Npw7NuPC9MYWJlbD5cbiAgICAgICAgPElucHV0XG4gICAgICAgICAgaWQ9XCJhZGRyZXNzXCJcbiAgICAgICAgICBuYW1lPVwiYWRkcmVzc1wiXG4gICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUlucHV0Q2hhbmdlfVxuICAgICAgICAgIHJlcXVpcmVkPXtyZXF1aXJlZHN9XG4gICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgIHZhbHVlPXthZGRyZXNzfVxuICAgICAgICAvPlxuICAgICAgICA8SW52YWxpZEZlZWRiYWNrIGVycm9yPXtlcnJvcn0gbG9hZGluZz17bG9hZGluZ30gbmFtZT1cImFkZHJlc3NcIiAvPlxuICAgICAgPC9Gb3JtR3JvdXA+XG5cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5jb25zdCBQYXltZW50ID0gKHtcbiAgYXBpLFxuICBjYXNoX3BheW1lbnRfbWV0aG9kX2lkLFxuICBlcnJvcixcbiAgaXNDYXJkUGF5bWVudCxcbiAgaXNQYXlVUmVhZHksXG4gIGxvYWRpbmcsXG4gIG9uQ2FzaFBheW1lbnRNZXRob2RDaGFuZ2UsXG4gIG9uQ2hhbmdlLFxuICBwYXltZW50X21ldGhvZF9pZCxcbiAgUE9TLFxuICByZXF1aXJlZHMsXG4gIHZhbGlkYXRpb25FcnJvclxufSkgPT4ge1xuXG4gIC8vIHBheW1lbnQgbWV0aG9kc1xuICBjb25zdCBbIHBheW1lbnRNZXRob2RzLCBzZXRQYXltZW50TWV0aG9kcyBdID0gdXNlU3RhdGUoKVxuXG4gIC8vIGdldCBwYXltZW50IG1ldGhvZHNcbiAgdXNlRWZmZWN0KCBfID0+IHtcbiAgICBjb25zdCBnZXRQYXltZW50TWV0aG9kcyA9IGFzeW5jIF8gPT4ge1xuICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBhcGkuZ2V0KCdwYXltZW50LW1ldGhvZHMnKVxuICAgICAgc2V0UGF5bWVudE1ldGhvZHMoZGF0YSlcbiAgICB9XG4gICAgZ2V0UGF5bWVudE1ldGhvZHMoKVxuICB9LCBbXSlcblxuICAvLyBpbml0IGNhcmQgc2VjdXJlIGZpZWxkc1xuICB1c2VFZmZlY3QoXyA9PiB7XG4gICAgaWYgKGlzUGF5VVJlYWR5ICYmIGlzQ2FyZFBheW1lbnQpIHtcbiAgICAgIFBPUy5pbml0U2VjdXJlRmllbGRzKCdjYXJkLXNlY3VyZS1maWVsZHMnKVxuICAgIH1cbiAgfSwgW2lzUGF5VVJlYWR5LCBpc0NhcmRQYXltZW50XSlcblxuICAvLyBjYXNoIHBheW1lbnQgbWV0aG9kc1xuICBjb25zdCBbIGNhc2hQYXltZW50TWV0aG9kcywgc2V0Q2FzaFBheW1lbnRNZXRob2RzIF0gPSB1c2VTdGF0ZSgpXG5cbiAgLy8gZ2V0IGNhc2ggcGF5bWVudCBtZXRob2RzXG4gIHVzZUVmZmVjdCggXyA9PiB7XG4gICAgY29uc3QgZ2V0Q2FzaFBheW1lbnRNZXRob2RzID0gYXN5bmMgXyA9PiB7XG4gICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGFwaS5nZXQoJ2Nhc2gtcGF5bWVudC1tZXRob2RzJylcbiAgICAgIHNldENhc2hQYXltZW50TWV0aG9kcyhkYXRhKVxuICAgIH1cbiAgICBnZXRDYXNoUGF5bWVudE1ldGhvZHMoKVxuICB9LCBbXSlcblxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwib2Zmc2V0LW1kLTIgY29sLW1kLThcIj5cblxuICAgICAgICA8aDMgY2xhc3NOYW1lPVwiaDNcIj5QYWdvPC9oMz5cblxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC02XCI+XG4gICAgICAgICAgICAgIDxGb3JtR3JvdXA+XG4gICAgICAgICAgICAgICAgeyBwYXltZW50TWV0aG9kcyAmJiBwYXltZW50TWV0aG9kcy5tYXAoKHBheW1lbnRNZXRob2QsIGtleSkgPT4gKFxuICAgICAgICAgICAgICAgICAgPElucHV0UmFkaW9cbiAgICAgICAgICAgICAgICAgICAga2V5PXtrZXl9XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsPXtwYXltZW50TWV0aG9kLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJwYXltZW50XCJcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICBzdGF0ZT17cGF5bWVudF9tZXRob2RfaWR9XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXtwYXltZW50TWV0aG9kLmlkfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApKSB9XG4gICAgICAgICAgICAgICAgeyB2YWxpZGF0aW9uRXJyb3IgJiYgKFxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbnZhbGlkLWZlZWRiYWNrXCI+e3ZhbGlkYXRpb25FcnJvcn08L2Rpdj5cbiAgICAgICAgICAgICAgICApIH1cbiAgICAgICAgICAgICAgPC9Gb3JtR3JvdXA+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtbWQtNlwiPlxuXG4gICAgICAgICAgICAgIHsvKiBjcmVkaXQgLyBkZWJpdCBjYXJkICovfVxuICAgICAgICAgICAgICB7aXNDYXJkUGF5bWVudCA/IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtaW5wdXRzXCI+XG5cbiAgICAgICAgICAgICAgICAgIHsvKiBtYW5kYXRvcnkgZGF0YSAqL31cbiAgICAgICAgICAgICAgICAgIDxGb3JtR3JvdXA+XG4gICAgICAgICAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPVwiY2FyZGhvbGRlci1uYW1lXCI+Tm9tYnJlIGltcHJlc28gZW4gdGFyamV0YTwvTGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxJbnB1dCBpZD1cImNhcmRob2xkZXItbmFtZVwiIG5hbWU9XCJjYXJkaG9sZGVyLW5hbWVcIiByZXF1aXJlZD17cmVxdWlyZWRzfSB0eXBlPVwidGV4dFwiIC8+XG4gICAgICAgICAgICAgICAgICA8L0Zvcm1Hcm91cD5cblxuICAgICAgICAgICAgICAgICAgey8qIGNhcmQgZmllbGRzICovfVxuICAgICAgICAgICAgICAgICAgPEZvcm1Hcm91cD5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD1cImNhcmQtc2VjdXJlLWZpZWxkc1wiIC8+XG4gICAgICAgICAgICAgICAgICAgIDxJbnZhbGlkRmVlZGJhY2sgZXJyb3I9e2Vycm9yfSBsb2FkaW5nPXtsb2FkaW5nfSBuYW1lPVwicGF5bWVudF9vc1wiIC8+XG4gICAgICAgICAgICAgICAgICA8L0Zvcm1Hcm91cD5cblxuICAgICAgICAgICAgICAgICAgey8qIDxGb3JtR3JvdXA+XG4gICAgICAgICAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPVwiY3JlZGl0Q2FyZE5hbWVcIj5Ob21icmUgaW1wcmVzbzwvTGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxJbnB1dCBpZD1cImNyZWRpdENhcmROYW1lXCIgbmFtZT1cImNyZWRpdENhcmROYW1lXCIgcmVxdWlyZWQ9e3JlcXVpcmVkc30gdHlwZT1cInRleHRcIiAvPlxuICAgICAgICAgICAgICAgICAgPC9Gb3JtR3JvdXA+XG4gICAgICAgICAgICAgICAgICA8Rm9ybUdyb3VwPlxuICAgICAgICAgICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj1cImNyZWRpdENhcmROdW1iZXJcIj5OdW1lcm88L0xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8SW5wdXQgaWQ9XCJjcmVkaXRDYXJkTnVtYmVyXCIgbmFtZT1cImNyZWRpdENhcmROdW1iZXJcIiByZXF1aXJlZD17cmVxdWlyZWRzfSB0eXBlPVwidGV4dFwiIC8+XG4gICAgICAgICAgICAgICAgICA8L0Zvcm1Hcm91cD5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLTZcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8Rm9ybUdyb3VwPlxuICAgICAgICAgICAgICAgICAgICAgICAgPExhYmVsIGh0bWxGb3I9XCJjcmVkaXRDYXJkRGF0ZVwiPlZhbGlkZXo8L0xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IGlkPVwiY3JlZGl0Q2FyZERhdGVcIiBuYW1lPVwiY3JlZGl0Q2FyZERhdGVcIiByZXF1aXJlZD17cmVxdWlyZWRzfSB0eXBlPVwidGV4dFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtR3JvdXA+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC02XCI+XG4gICAgICAgICAgICAgICAgICAgICAgPEZvcm1Hcm91cD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPVwiY3JlZGl0Q2FyZENvZGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGFiYnIgdGl0bGU9XCJDw7NkaWdvIGRlIHNlZ3VyaWRhZFwiPkNWVjwvYWJicj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvTGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQgaWQ9XCJjcmVkaXRDYXJkQ29kZVwiIG5hbWU9XCJjcmVkaXRDYXJkQ29kZVwiIHJlcXVpcmVkPXtyZXF1aXJlZHN9IHR5cGU9XCJ0ZXh0XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm1Hcm91cD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj4gKi99XG5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAvLyBjYXNoIHBheW1lbnQgbWV0aG9kc1xuICAgICAgICAgICAgICApIDogcGF5bWVudF9tZXRob2RfaWQgPT09IDMgJiYgKFxuICAgICAgICAgICAgICAgIDxGb3JtR3JvdXA+XG4gICAgICAgICAgICAgICAgICB7Y2FzaFBheW1lbnRNZXRob2RzID09IG51bGwgPyAoXG4gICAgICAgICAgICAgICAgICAgIDxwPkNhcmdhbmRvLi4uPC9wPlxuICAgICAgICAgICAgICAgICAgKSA6IGNhc2hQYXltZW50TWV0aG9kcy5sZW5ndGggPyBjYXNoUGF5bWVudE1ldGhvZHMubWFwKChpdGVtLCBrZXkpID0+IChcbiAgICAgICAgICAgICAgICAgICAgPElucHV0UmFkaW9cbiAgICAgICAgICAgICAgICAgICAgICBrZXk9e2tleX1cbiAgICAgICAgICAgICAgICAgICAgICBsYWJlbD17aXRlbS5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJjYXNoX3BheW1lbnRfbWV0aG9kX2lkXCJcbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17b25DYXNoUGF5bWVudE1ldGhvZENoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgICBzdGF0ZT17Y2FzaF9wYXltZW50X21ldGhvZF9pZH1cbiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17aXRlbS5pZH1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICkpIDogKFxuICAgICAgICAgICAgICAgICAgICA8cD5TaW4gbcOpdG9kbyBkZSBwYWdvIGNvbmZpZ3VyYWRvLjwvcD5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8SW52YWxpZEZlZWRiYWNrIGVycm9yPXtlcnJvcn0gbG9hZGluZz17bG9hZGluZ30gbmFtZT1cImNhc2hfcGF5bWVudF9tZXRob2RfaWRcIiAvPlxuICAgICAgICAgICAgICAgIDwvRm9ybUdyb3VwPlxuICAgICAgICAgICAgICApIH1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgIDwvZGl2PlxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICBAbWVkaWEgKG1pbi13aWR0aDogNzY4cHgpIHtcbiAgICAgICAgICAuY2FyZC1pbnB1dHMge1xuICAgICAgICAgICAgbWFyZ2luLXRvcDogLTIxcHg7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBgfTwvc3R5bGU+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuLy8gUmFkaW9cbmNvbnN0IElucHV0UmFkaW8gPSAoeyBsYWJlbCwgbmFtZSwgb25DaGFuZ2UsIHN0YXRlLCB2YWx1ZSB9KSA9PiB7XG4gIGNvbnN0IHRoZW1lID0gdXNlQ29udGV4dChUaGVtZUNvbnRleHQpXG4gIGNvbnN0IHJhZGlvQ29sb3IgPSB0aGVtZS5jb2xvcnMuYmFja2dyb3VuZFxuICByZXR1cm4gKFxuICAgIDxsYWJlbD5cbiAgICAgIDxpbnB1dCBjaGVja2VkPXtzdGF0ZSA9PT0gdmFsdWV9IHR5cGU9XCJyYWRpb1wiIHsuLi57bmFtZSwgb25DaGFuZ2UsIHZhbHVlfX0gLz5cbiAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZha2UtaW5wdXRcIj5cbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZmFrZS1yYWRpb1wiPjwvc3Bhbj5cbiAgICAgICAgPHNwYW4+e2xhYmVsfTwvc3Bhbj5cbiAgICAgIDwvc3Bhbj5cbiAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgbGFiZWwge1xuICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDVweDtcbiAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgfVxuICAgICAgICBpbnB1dCB7XG4gICAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIH1cbiAgICAgICAgLmZha2UtaW5wdXQge1xuICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLXByaW1hcnkpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICBmb250LXNpemU6IDFyZW07XG4gICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNDtcbiAgICAgICAgICBwYWRkaW5nOiAuMzc1cmVtIC43NXJlbTtcbiAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIC4zcywgYm9yZGVyLWNvbG9yIC4zcywgY29sb3IgLjNzO1xuICAgICAgICB9XG4gICAgICAgIC5mYWtlLXJhZGlvIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS13aGl0ZSk7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tZ3JheTIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgICAgaGVpZ2h0OiAxNXB4O1xuICAgICAgICAgIG1hcmdpbi1yaWdodDogNy41cHg7XG4gICAgICAgICAgcGFkZGluZzogMXB4O1xuICAgICAgICAgIHZlcnRpY2FsLWFsaWduOiAtMnB4O1xuICAgICAgICAgIHdpZHRoOiAxNXB4O1xuICAgICAgICB9XG4gICAgICAgIC5mYWtlLXJhZGlvOjpiZWZvcmUge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7cmFkaW9Db2xvcn07XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICAgIGNvbnRlbnQ6ICcnO1xuICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgLjNzO1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICB9XG4gICAgICAgIGlucHV0OmNoZWNrZWQgKyAuZmFrZS1pbnB1dCB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeSk7XG4gICAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICB9XG4gICAgICAgIGlucHV0OmNoZWNrZWQgKyAuZmFrZS1pbnB1dCAuZmFrZS1yYWRpbzo6YmVmb3JlIHtcbiAgICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICB9XG4gICAgICAgIHsvKiBpbnB1dDpmb2N1cyArIC5mYWtlLWlucHV0IHtcbiAgICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLXdoaXRlKTtcbiAgICAgICAgfSAqL31cbiAgICAgIGB9PC9zdHlsZT5cbiAgICA8L2xhYmVsPlxuICApXG59XG5cbi8vIGdldEluaXRpYWxQcm9wc1xuQ29tcGxldGVSZWdpc3RlclBhZ2UuZ2V0SW5pdGlhbFByb3BzID0gYXN5bmMgY3R4ID0+IHtcblxuICBjb25zdCB7YXBpLCByZXMsIHVzZXJ9ID0gY3R4XG5cbiAgLy8gaWYgdXNlciBoYXMgYWxyZWFkeSBjb21wbGV0ZWQgcmVnaXN0cnksIHJlZGlyZWN0IGl0XG4gIGlmICh1c2VyLnJlZ2lzdGVyX2NvbXBsZXRlZF9hdCkge1xuICAgIGxldCBtZXNzYWdlID0gSlNPTi5zdHJpbmdpZnkoeyBpbmZvOiBcIllhIGhhIGNvbXBsZXRhZG8gc3UgcmVnaXN0cm8uXCIgfSlcbiAgICBub29raWVzLnNldChjdHgsICdmbGFzaF9tZXNzYWdlJywgbWVzc2FnZSwgeyBwYXRoOiAnLycgfSlcbiAgICBpZiAocmVzKSB7XG4gICAgICByZXMucmVkaXJlY3QoJy8nKVxuICAgICAgcmVzLmVuZCgpXG4gICAgICByZXR1cm4geyB9XG4gICAgfSBlbHNlIHtcbiAgICAgIFJvdXRlci5iYWNrKClcbiAgICB9XG4gIH1cblxuICAvLyBnZXQgcGFja2FnZXNcbiAgbGV0IHBhY2thZ2VzXG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBhcGkuZ2V0KCdwYWNrYWdlcycpXG4gICAgcGFja2FnZXMgPSB7IGl0ZW1zOiBkYXRhIH1cbiAgfSBjYXRjaChlcnJvcikge1xuICAgIHBhY2thZ2VzID0geyBlcnJvciB9XG4gIH1cblxuICAvLyByZXR1cm5cbiAgcmV0dXJuIHsgcGFja2FnZXMsIHVzZXIgfVxufVxuXG4vLyBleHBvcnRcbmV4cG9ydCBkZWZhdWx0IHdpdGhBdXRoKENvbXBsZXRlUmVnaXN0ZXJQYWdlKVxuIl19 */\\n/*@ sourceURL=/Users/rafael/Projects/somosgad/dale/pages/register/complete.js */\"));\n}; // Radio\n\n\n_s4(Payment, \"0UWiyWck3C2xoYBULL5ka1IE0S8=\");\n\n_c6 = Payment;\n\nvar InputRadio = function InputRadio(_ref19) {\n  _s5();\n\n  var label = _ref19.label,\n      name = _ref19.name,\n      onChange = _ref19.onChange,\n      state = _ref19.state,\n      value = _ref19.value;\n  var theme = useContext(ThemeContext);\n  var radioColor = theme.colors.background;\n  return __jsx(\"label\", {\n    className: _JSXStyle.dynamic([[\"204478922\", [radioColor]]])\n  }, __jsx(\"input\", _extends({\n    checked: state === value,\n    type: \"radio\"\n  }, {\n    name: name,\n    onChange: onChange,\n    value: value\n  }, {\n    className: _JSXStyle.dynamic([[\"204478922\", [radioColor]]])\n  })), __jsx(\"span\", {\n    className: _JSXStyle.dynamic([[\"204478922\", [radioColor]]]) + \" \" + \"fake-input\"\n  }, __jsx(\"span\", {\n    className: _JSXStyle.dynamic([[\"204478922\", [radioColor]]]) + \" \" + \"fake-radio\"\n  }), __jsx(\"span\", {\n    className: _JSXStyle.dynamic([[\"204478922\", [radioColor]]])\n  }, label)), __jsx(_JSXStyle, {\n    id: \"204478922\",\n    dynamic: [radioColor]\n  }, \"label.__jsx-style-dynamic-selector{display:block;margin-bottom:5px;overflow:hidden;position:relative;}input.__jsx-style-dynamic-selector{opacity:0;position:absolute;}.fake-input.__jsx-style-dynamic-selector{border:2px solid var(--primary);border-radius:4px;display:block;font-size:1rem;line-height:1.4;padding:.375rem .75rem;-webkit-transition:background-color .3s,border-color .3s,color .3s;transition:background-color .3s,border-color .3s,color .3s;}.fake-radio.__jsx-style-dynamic-selector{background-color:var(--white);border:1px solid var(--gray2);border-radius:50%;display:inline-block;height:15px;margin-right:7.5px;padding:1px;vertical-align:-2px;width:15px;}.fake-radio.__jsx-style-dynamic-selector::before{background-color:\".concat(radioColor, \";border-radius:50%;content:'';display:block;opacity:0;height:100%;-webkit-transition:opacity .3s;transition:opacity .3s;width:100%;}input.__jsx-style-dynamic-selector:checked+.fake-input.__jsx-style-dynamic-selector{background-color:var(--primary);color:white;}input.__jsx-style-dynamic-selector:checked+.fake-input.__jsx-style-dynamic-selector .fake-radio.__jsx-style-dynamic-selector::before{opacity:1;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9yYWZhZWwvUHJvamVjdHMvc29tb3NnYWQvZGFsZS9wYWdlcy9yZWdpc3Rlci9jb21wbGV0ZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUE2MEJrQixBQUd5QixBQU1KLEFBSXNCLEFBU0YsQUFXZ0IsQUFVZCxBQUl0QixVQXJDUSxBQXNDcEIsSUE1Q29CLGNBT3BCLEVBWWdDLEVBbEJkLEFBU0UsQUE4Qk4sWUFDZCxFQVhvQixFQTVCQSxFQVNKLFVBU0ksSUFSSCxBQW1CSixFQTVCYixTQTZCZ0IsR0FYTyxDQVJMLFVBb0JOLE1BbkJhLElBUVgsQUFZQSxZQVhPLEFBWUksT0FwQnNDLFlBU2pELFlBQ1Esb0JBQ1QsR0FVQSxRQVRiLEdBVUEsb0VBckJBIiwiZmlsZSI6Ii9Vc2Vycy9yYWZhZWwvUHJvamVjdHMvc29tb3NnYWQvZGFsZS9wYWdlcy9yZWdpc3Rlci9jb21wbGV0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB1c2VTY3JpcHQsIHsgU2NyaXB0U3RhdHVzIH0gZnJvbSAnQGNoYXJsaWV0YW5nby91c2Utc2NyaXB0J1xuaW1wb3J0IEhlYWQgZnJvbSAnbmV4dC9oZWFkJ1xuaW1wb3J0IExpbmsgZnJvbSAnbmV4dC9saW5rJ1xuaW1wb3J0IFJvdXRlciBmcm9tICduZXh0L3JvdXRlcidcbmltcG9ydCBub29raWVzIGZyb20gJ25vb2tpZXMnXG4vLyBpbXBvcnQgc2xlZXAgZnJvbSAnc2xlZXAtcHJvbWlzZSdcbmltcG9ydCB7IFRoZW1lQ29udGV4dCB9IGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJ1xuaW1wb3J0IExheW91dCBmcm9tICd+L2NvbXBvbmVudHMvbGF5b3V0L0xheW91dCdcbmltcG9ydCB7IENPTkZJRyB9IGZyb20gJ34vY29uZmlnJ1xuaW1wb3J0IEZvcm1Hcm91cCBmcm9tICd+L2NvbXBvbmVudHMvbGF5b3V0L0F1dGhNb2RhbC9Gb3JtR3JvdXAnXG5pbXBvcnQgTGFiZWwgZnJvbSAnfi9jb21wb25lbnRzL2xheW91dC9BdXRoTW9kYWwvTGFiZWwnXG5pbXBvcnQgSW5wdXQgZnJvbSAnfi9jb21wb25lbnRzL2xheW91dC9BdXRoTW9kYWwvSW5wdXQnXG5pbXBvcnQgQnV0dG9uIGZyb20gJ34vY29tcG9uZW50cy9idXR0b24nXG5pbXBvcnQgeyB1c2VDb250ZXh0LCB1c2VFZmZlY3QsIHVzZVN0YXRlLCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IFVzZXJDb250ZXh0IGZyb20gJ34vY29udGV4dHMvVXNlckNvbnRleHQnXG5pbXBvcnQgUGFja2FnZXMgZnJvbSAnfi9jb21wb25lbnRzL1BhY2thZ2VzJ1xuaW1wb3J0IFNlbGVjdCBmcm9tICd+L2NvbXBvbmVudHMvU2VsZWN0L1NlbGVjdCdcbmltcG9ydCB7IElTX1BST0RVQ1RJT04sIEhBU19XSU5ET1cgfSBmcm9tICd+L2NvbnN0YW50cy9jb25zdGFudHMnXG5pbXBvcnQgd2l0aEF1dGggZnJvbSAnfi9jb21wb25lbnRzL3dpdGhBdXRoJ1xuaW1wb3J0IExvYWRpbmcgZnJvbSAnfi9jb21wb25lbnRzL0xvYWRpbmcvTG9hZGluZydcblxuLy8gcGFnZVxuY29uc3QgQ29tcGxldGVSZWdpc3RlclBhZ2UgPSAoeyBhcGksIGxheW91dFByb3BzLCBwYWNrYWdlcywgdXNlciB9KSA9PiB7XG4gIGNvbnN0IFsgcmVhZHksIHN0YXR1cyBdID0gdXNlU2NyaXB0KCdodHRwczovL2pzLnBheW1lbnRzb3MuY29tL3YyL2xhdGVzdC9zZWN1cmUtZmllbGRzLm1pbi5qcycpXG4gIGNvbnN0IFBPUyA9IHJlYWR5ICYmIEhBU19XSU5ET1cgPyB3aW5kb3cuUE9TIDogbnVsbFxuICBjb25zdCBwYXlVRW52ID0gJ3Rlc3QnXG4gIGNvbnN0IGJ1c2luZXNzVW5pdFB1YmxpY0tleSA9ICc4ODk4NTAzNi02NTMwLTRiNWEtYTdlYy1jNGUwN2VjMDdmNmMnXG4gIGNvbnN0IFsgaXNQYXlVUmVhZHksIHNldElzUGF5VVJlYWR5IF0gPSB1c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgUE9TU3R5bGUgPSB7XG4gICAgYmFzZToge1xuICAgICAgYm9yZGVyUmFkaXVzOiAnLjE1cmVtJyxcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJ3doaXRlJyxcbiAgICAgIGhlaWdodDogJ2NhbGMoMS41ZW0gKyAuNzVyZW0gKyAycHgpJyxcbiAgICAgIGZvbnRTaXplOiAnMTJweCcsXG4gICAgICBwYWRkaW5nOicwcHggM3B4JyxcbiAgICAgIG1hcmdpbkxlZnQ6ICc1cHgnLFxuICAgICAgY2FyZEltYWdlOiB7XG4gICAgICAgIGJvcmRlclRvcFJpZ2h0UmFkaXVzOiAwLFxuICAgICAgICBib3JkZXJCb3R0b21SaWdodFJhZGl1czogMCxcbiAgICAgICAgbWFyZ2luOiAwLFxuICAgICAgfSxcbiAgICAgIHBhbjp7XG4gICAgICAgIHdpZHRoOicxNjBweCcsXG4gICAgICAgIGJvcmRlclRvcExlZnRSYWRpdXM6IDAsXG4gICAgICAgIGJvcmRlckJvdHRvbUxlZnRSYWRpdXM6IDAsXG4gICAgICAgIG1hcmdpbkxlZnQ6IDAsXG4gICAgICB9LFxuICAgICAgZXhwaXJhdGlvbkRhdGU6IHsgd2lkdGg6ICc0N3B4JyB9LFxuICAgICAgc2VjdXJlRmllbGRzOiB7IGxlZnQ6ICc0MHB4JyB9LFxuICAgICAgY3Z2OiB7IHdpZHRoOiAnMzVweCcgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChzdGF0dXMgPT09IFNjcmlwdFN0YXR1cy5FUlJPUikge1xuICAgIGNvbnNvbGUubG9nKCdGYWlsZWQgdG8gbG9hZCBQT1MgQVBJJylcbiAgfVxuXG4gIHVzZUVmZmVjdChfID0+IHtcbiAgICBpZiAoUE9TKSB7XG4gICAgICBQT1Muc2V0UHVibGljS2V5KGJ1c2luZXNzVW5pdFB1YmxpY0tleSlcbiAgICAgIFBPUy5zZXRFbnZpcm9ubWVudChwYXlVRW52KVxuICAgICAgUE9TLnNldFN0eWxlKFBPU1N0eWxlKVxuICAgICAgUE9TLnNldENhcmROdW1iZXJQbGFjZWhvbGRlcignVGFyamV0YSBkZSBjcsOpZGl0bycpXG4gICAgICBQT1Muc2V0RXhwaXJhdGlvbkRhdGVQbGFjZWhvbGRlcignTU0vQUEnKTtcbiAgICAgIHNldElzUGF5VVJlYWR5KHRydWUpXG4gICAgfVxuICB9LCBbUE9TXSlcblxuICByZXR1cm4gKFxuICAgIDxMYXlvdXQgey4uLmxheW91dFByb3BzfT5cbiAgICAgIDxIZWFkPlxuICAgICAgICA8dGl0bGU+Q29uZmlybWFjacOzbiAmbHQ7IFJlZ2lzdHJvICZsdDsge0NPTkZJRy5hcHBOYW1lfTwvdGl0bGU+XG4gICAgICA8L0hlYWQ+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInJncGFnZSBjb250YWluZXItZmx1aWRcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC14bC04IG9mZnNldC14bC0yXCI+XG5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJoMlwiPkNvbXBsZXRhIHR1IHJlZ2lzdHJvPC9oMT5cblxuICAgICAgICAgICAgPENvbXBsZXRlUmVnaXN0ZXJGb3JtIHsuLi57YXBpLCBpc1BheVVSZWFkeSwgcGFja2FnZXMsIFBPU319IC8+XG5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgLnJncGFnZSB7XG4gICAgICAgICAgcGFkZGluZy10b3A6IDQwcHg7XG4gICAgICAgICAgcGFkZGluZy1ib3R0b206IDEyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC5oMiB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICAgICAgfVxuICAgICAgYH08L3N0eWxlPlxuICAgIDwvTGF5b3V0PlxuICApXG59XG5cbmNvbnN0IENvbXBsZXRlUmVnaXN0ZXJGb3JtID0gKHsgYXBpLCBpc1BheVVSZWFkeSwgcGFja2FnZXMsIFBPUyB9KSA9PiB7XG5cbiAgY29uc3QgeyBpZDogZnJlZV9wYWNrYWdlX2lkIH0gPSBwYWNrYWdlcy5pdGVtcy5maW5kKGl0ZW0gPT4gaXRlbS5hbW91bnQgPT0gMCkgfHwge31cblxuICBjb25zdCBkZWJ1ZyA9IGZhbHNlICYmICEgSVNfUFJPRFVDVElPTlxuICBjb25zdCByZXF1aXJlZHMgPSBJU19QUk9EVUNUSU9OXG5cbiAgY29uc3QgeyB1c2VyLCB1cGRhdGVVc2VyIH0gPSB1c2VDb250ZXh0KFVzZXJDb250ZXh0KVxuXG4gIGNvbnN0IFsgZ2VuZGVycywgc2V0R2VuZGVycyBdID0gdXNlU3RhdGUoKVxuICBjb25zdCBbIGRpc2NvdW50cywgc2V0RGlzY291bnRzIF0gPSB1c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgWyBibG9ja0Rpc2NvdW50RmllbGRzLCBzZXRCbG9ja0Rpc2NvdW50RmllbGRzIF0gPSB1c2VTdGF0ZShmYWxzZSlcblxuICBjb25zdCBbIHZhbHVlcywgc2V0VmFsdWVzIF0gPSB1c2VTdGF0ZSh7XG4gICAgbmFtZTogJycsXG4gICAgZ2VuZGVyX2lkOiAnJyxcbiAgICBkb2N1bWVudDogJycsXG4gICAgY291bnRyeV9pZDogJycsXG4gICAgYWRkcmVzc18xc3RfbGV2ZWw6ICcnLFxuICAgIGNpdHk6ICcnLFxuICAgIGFkZHJlc3NfM3JkX2xldmVsOiAnJyxcbiAgICBhZGRyZXNzOiAnJyxcbiAgICBwYWNrYWdlX2lkOiAnJyxcbiAgICBwYXltZW50X21ldGhvZF9pZDogbnVsbCxcbiAgICBwYXltZW50X29zOiBudWxsLFxuICAgIGNhc2hfcGF5bWVudF9tZXRob2RfaWQ6IG51bGwsXG4gICAgdGVybXM6IG51bGwsXG4gICAgZGlzY291bnRfaWQ6IG51bGwsXG4gIH0pXG5cbiAgY29uc3QgWyBsb2FkaW5nLCBzZXRMb2FkaW5nIF0gPSB1c2VTdGF0ZSgpXG4gIGNvbnN0IFsgZXJyb3IsIHNldEVycm9yIF0gPSB1c2VTdGF0ZSgpXG5cbiAgLyogZ2V0IGdlbmRlcnMgKi9cbiAgdXNlRWZmZWN0KF8gPT4ge1xuICAgIChhc3luYyBfID0+IHtcbiAgICAgIGNvbnN0IHtkYXRhfSA9IGF3YWl0IGFwaS5nZXQoJ2dlbmRlcnMnKVxuICAgICAgc2V0R2VuZGVycyhkYXRhKVxuICAgIH0pKClcbiAgfSwgW10pXG5cbiAgIC8qIGdldCBkaXNjb3VudHMgKi9cbiAgIHVzZUVmZmVjdChfID0+IHtcbiAgICAoYXN5bmMgXyA9PiB7XG4gICAgICB2YXIgeyBkYXRhIH0gPSBhd2FpdCBhcGkuZ2V0KCdkaXNjb3VudHMnKVxuXG4gICAgICBkYXRhID0gZGF0YS5tYXAoIChkaXNjLCBpbmRleCkgPT4ge1xuICAgICAgICBkaXNjLmRzY19pZCA9ICdkc2NfJyArIGluZGV4XG4gICAgICAgIHJldHVybiBkaXNjXG4gICAgICB9KVxuXG4gICAgICBzZXREaXNjb3VudHMoZGF0YSlcbiAgICB9KSgpXG4gIH0sIFtdKVxuXG4gIC8qIGZpbGwgdXNlciBmb3JtICovXG4gIHVzZUVmZmVjdChfID0+IHtcbiAgICBpZiAodXNlcikge1xuICAgICAgc2V0VmFsdWVzKHtcbiAgICAgICAgLi4udmFsdWVzLFxuICAgICAgICBuYW1lOiB1c2VyLm5hbWUsXG4gICAgICAgIGdlbmRlcl9pZDogdXNlci5nZW5kZXJfaWQgPyB1c2VyLmdlbmRlcl9pZCA6ICcnLFxuICAgICAgICBkb2N1bWVudDogdXNlci5kb2N1bWVudCA/IHVzZXIuZG9jdW1lbnQgOiAnJyxcbiAgICAgICAgYWRkcmVzczogdXNlci5hZGRyZXNzID8gdXNlci5hZGRyZXNzIDogJycsXG4gICAgICAgIGNpdHk6IHVzZXIuY2l0eSA/IHVzZXIuY2l0eSA6ICcnLFxuICAgICAgICBjb3VudHJ5X2lkOiB1c2VyLmNvdW50cnlfaWQgPyB1c2VyLmNvdW50cnlfaWQgOiAnJyxcbiAgICAgICAgcGFja2FnZV9pZDogdXNlci5wYWNrYWdlX2lkX2ludGVudGlvbiA/IHVzZXIucGFja2FnZV9pZF9pbnRlbnRpb24gOiAnJyxcbiAgICAgIH0pXG4gICAgfVxuICB9LCBbdXNlcl0pXG5cbiAgLyogaGFuZGxlIGdlbmVyYWwgaW5wdXQgY2hhbmdlICovXG4gIGNvbnN0IGhhbmRsZUlucHV0Q2hhbmdlID0gZSA9PiB7XG4gICAgY29uc3QgeyBjaGVja2VkLCBuYW1lLCB2YWx1ZSwgdHlwZSB9ID0gZS50YXJnZXRcbiAgICBzZXRWYWx1ZXMoe1xuICAgICAgLi4udmFsdWVzLFxuICAgICAgW25hbWVdOiB0eXBlID09PSAnY2hlY2tib3gnID9cbiAgICAgICAgKGNoZWNrZWQgPyAodmFsdWUgPT09ICd0cnVlJyA/IHRydWUgOiB2YWx1ZSkgOiBmYWxzZSkgOlxuICAgICAgICB2YWx1ZSxcbiAgICB9KVxuICB9XG5cbiAgLyogaGFuZGxlIGRpc29jdW50IGNoYW5nZSAqL1xuICBjb25zdCBoYW5kbGVEaXNjb3VudENoYW5nZSA9IGFzeW5jICh7dGFyZ2V0OnsgbmFtZSwgdmFsdWUsIGlkIH19KSA9PiB7XG5cbiAgICBsZXQgdmFsaWQgPSBhd2FpdCBjaGVja0Rpc2NvdW50KHZhbHVlKVxuICAgIC8vIGNvbnNvbGUudGFibGUodmFsaWQpXG5cbiAgICBzZXRWYWx1ZXMoe1xuICAgICAgLi4udmFsdWVzLFxuICAgICAgW25hbWVdOiB2YWx1ZSxcbiAgICAgIGRpc2NvdW50X2lkOiB2YWxpZCA/IGlkIDogbnVsbFxuICAgIH0pXG4gIH1cblxuICAvKiBoYW5kbGUgZGlzY291bnQgY2hhbmdlICovXG4gIGNvbnN0IGNoZWNrRGlzY291bnQgPSBhc3luYyBzdXBwb3J0ZXJDb2RlID0+IHtcblxuICAgIC8vIFNpbXVsYXRlIEFQSSBDYWxsXG4gICAgY29uc3QgcHJvbSA9IChkZWxheSwgdmFsdWUpID0+IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBkZWxheSwgdmFsdWUpKVxuXG4gICAgcmV0dXJuIGF3YWl0IHByb20oNTAsIHN1cHBvcnRlckNvZGUubGVuZ3RoID09PSA1KVxuXG4gIH1cblxuICAvKiBoYW5kbGUgcGFja2FnZSBjaGFuZ2UgKi9cbiAgY29uc3Qgb25QYWNrYWdlQ2hhbmdlID0gdXNlQ2FsbGJhY2soIGUgPT4ge1xuICAgIGNvbnN0IHBhY2thZ2VfaWQgPSBwYXJzZUludChlLnRhcmdldC52YWx1ZSwgMTApXG4gICAgc2V0VmFsdWVzKCBvbGRWYWx1ZXMgPT4gKHtcbiAgICAgIC4uLm9sZFZhbHVlcyxcbiAgICAgIHBhY2thZ2VfaWQsXG4gICAgICBwYXltZW50X21ldGhvZF9pZDogcGFja2FnZV9pZCA9PT0gZnJlZV9wYWNrYWdlX2lkID8gbnVsbCA6IHZhbHVlcy5wYXltZW50X21ldGhvZF9pZCxcbiAgICB9KSlcbiAgfSxbXSlcblxuICAvKiBoYW5kbGUgcGF5bWVudCBtZXRob2QgY2hhbmdlICovXG4gIGZ1bmN0aW9uIG9uUGF5bWVudENoYW5nZShlKSB7XG4gICAgc2V0VmFsdWVzKHtcbiAgICAgIC4uLnZhbHVlcyxcbiAgICAgIHBheW1lbnRfbWV0aG9kX2lkOiBwYXJzZUludChlLnRhcmdldC52YWx1ZSwgMTApLFxuICAgICAgY2FzaF9wYXltZW50X21ldGhvZF9pZDogbnVsbCxcbiAgICB9KVxuICB9XG5cbiAgZnVuY3Rpb24gb25DYXNoUGF5bWVudE1ldGhvZENoYW5nZShlKSB7XG4gICAgc2V0VmFsdWVzKHtcbiAgICAgIC4uLnZhbHVlcyxcbiAgICAgIGNhc2hfcGF5bWVudF9tZXRob2RfaWQ6IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlLCAxMCksXG4gICAgfSlcbiAgfVxuXG4gIC8qIHRva2VuICovXG4gIGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVRva2VuKCkge1xuICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBhZGRpdGlvbmFsRGF0YSA9IHtcbiAgICAgICAgaG9sZGVyX25hbWU6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXJkaG9sZGVyLW5hbWUnKS52YWx1ZSxcbiAgICAgICAgLy8gY3VzdG9tX2RhdGE6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0b20nKS52YWx1ZSxcbiAgICAgIH1cbiAgICAgIFBPUy5jcmVhdGVUb2tlbihhZGRpdGlvbmFsRGF0YSwgKHJlc3VsdCkgPT4ge1xuICAgICAgICBjb25zdCBqc29uID0gSlNPTi5wYXJzZShyZXN1bHQpXG4gICAgICAgIGNvbnNvbGUubG9nKCdqc29uJywganNvbilcbiAgICAgICAganNvbi50b2tlbiA/IHJlc29sdmUoanNvbikgOiByZWplY3QoanNvbilcbiAgICAgIH0pXG4gICAgfSlcbiAgICByZXR1cm4gcHJvbWlzZVxuICB9XG5cbiAgLy8gaXMgY2FyZCBwYXltZW50XG4gIGNvbnN0IGNyZWRpdF9jYXJkX2lkID0gMVxuICBjb25zdCBkZWJpdF9jYXJkX2lkID0gMlxuICBjb25zdCBpc0NhcmRQYXltZW50ID0gW2NyZWRpdF9jYXJkX2lkLCBkZWJpdF9jYXJkX2lkXS5pbmNsdWRlcyh2YWx1ZXMucGF5bWVudF9tZXRob2RfaWQpXG5cbiAgLyogc3VibWl0ICovXG4gIGNvbnN0IGhhbmRsZVN1Ym1pdCA9IGFzeW5jIGUgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIHNldExvYWRpbmcodHJ1ZSlcbiAgICBzZXRFcnJvcihmYWxzZSlcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGF5bWVudERhdGEgPSB2YWx1ZXMucGFja2FnZV9pZCAmJiB2YWx1ZXMucGFja2FnZV9pZCAhPT0gZnJlZV9wYWNrYWdlX2lkICYmXG4gICAgICAgIHZhbHVlcy5wYXltZW50X21ldGhvZF9pZCAmJiBpc0NhcmRQYXltZW50ID8gYXdhaXQgY3JlYXRlVG9rZW4oKSA6IG51bGxcbiAgICAgIGNvbnN0IGRhdGEgPSB7IC4uLnZhbHVlcywgcGF5bWVudF9vczogcGF5bWVudERhdGEgfVxuICAgICAgaWYgKGRhdGEuY291bnRyeV9pZCA9PT0gJycpIHtcbiAgICAgICAgZGVsZXRlIGRhdGEuY291bnRyeV9pZFxuICAgICAgfVxuICAgICAgaWYgKGRhdGEuYWRkcmVzc18xc3RfbGV2ZWwgPT09ICcnKSB7XG4gICAgICAgIGRlbGV0ZSBkYXRhLmFkZHJlc3NfMXN0X2xldmVsXG4gICAgICB9XG4gICAgICBpZiAoZGF0YS5hZGRyZXNzXzNyZF9sZXZlbCA9PT0gJycpIHtcbiAgICAgICAgZGVsZXRlIGRhdGEuYWRkcmVzc18zcmRfbGV2ZWxcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgZGF0YTogeyB1c2VyLCBvcmRlciB9IH0gPSBhd2FpdCBhcGkucG9zdCgncmVnaXN0ZXIvY29tcGxldGUnLCBkYXRhKVxuICAgICAgICB1cGRhdGVVc2VyKHVzZXIpXG4gICAgICAgIGlmIChvcmRlcikge1xuICAgICAgICAgIFJvdXRlci5wdXNoKHtcbiAgICAgICAgICAgIHBhdGhuYW1lOiAnL3JlZ2lzdGVyL2NvbmZpcm0nLFxuICAgICAgICAgICAgcXVlcnk6IHtcbiAgICAgICAgICAgICAgZG93bmxvYWRfbGluazogb3JkZXIuZG93bmxvYWRfbGluayxcbiAgICAgICAgICAgICAgbGluazogb3JkZXIubGluayxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSwgJy9yZWdpc3Rlci9jb25maXJtJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBSb3V0ZXIucHVzaCgnLycpXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkge1xuICAgICAgICAgIGNvbnN0IHsgZGF0YSwgc3RhdHVzIH0gPSBlcnJvci5yZXNwb25zZVxuICAgICAgICAgIGlmIChzdGF0dXMgPT09IDQyMikge1xuICAgICAgICAgICAgc2V0RXJyb3IoZGF0YSlcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZXJyb3IucmVxdWVzdCkge1xuICAgICAgICAgIHNldEVycm9yKGVycm9yKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldEVycm9yKGVycm9yKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHNldEVycm9yKGVycm9yLmRlc2NyaXB0aW9uID8geyBlcnJvcnM6IHsgcGF5bWVudF9vczogZXJyb3IuZGVzY3JpcHRpb24gfSB9IDogZXJyb3IpXG4gICAgfVxuICAgIHNldExvYWRpbmcoZmFsc2UpXG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxmb3JtIG1ldGhvZD1cInBvc3RcIiBvblN1Ym1pdD17aGFuZGxlU3VibWl0fT5cblxuICAgICAgey8qIG1haW4gZXJyb3IgbXNnICovfVxuICAgICAgeyBlcnJvciAmJiBlcnJvci5tZXNzYWdlICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbnZhbGlkLWZlZWRiYWNrXCI+e2Vycm9yLm1lc3NhZ2V9PC9kaXY+XG4gICAgICApIH1cblxuICAgICAgey8qIGZvcm0gZGF0YSBkZWJ1ZyAqL31cbiAgICAgIHsgZGVidWcgJiYgKFxuICAgICAgICA8cHJlIHN0eWxlPXt7IGNvbG9yOiAnI2ZmZicgfX0+XG4gICAgICAgICAge0pTT04uc3RyaW5naWZ5KHZhbHVlcywgbnVsbCwgMil9XG4gICAgICAgIDwvcHJlPlxuICAgICAgKX1cblxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cblxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC02XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkYXRhXCI+XG5cbiAgICAgICAgICAgIHsvKiBoZWFkaW5nICovfVxuICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cImgzXCI+VHVzIGRhdG9zPC9oMz5cblxuICAgICAgICAgICAgey8qIG5hbWUgKi99XG4gICAgICAgICAgICA8Rm9ybUdyb3VwPlxuICAgICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj1cIm5hbWVcIj5Ob21icmUgY29tcGxldG88L0xhYmVsPlxuICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICBpZD1cIm5hbWVcIlxuICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlSW5wdXRDaGFuZ2V9XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ9e3JlcXVpcmVkc31cbiAgICAgICAgICAgICAgICB2YWx1ZT17dmFsdWVzLm5hbWV9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxJbnZhbGlkRmVlZGJhY2sgZXJyb3I9e2Vycm9yfSBsb2FkaW5nPXtsb2FkaW5nfSBuYW1lPVwibmFtZVwiIC8+XG4gICAgICAgICAgICA8L0Zvcm1Hcm91cD5cblxuICAgICAgICAgICAgey8qIGdlbnJlICovfVxuICAgICAgICAgICAgPEZvcm1Hcm91cD5cbiAgICAgICAgICAgICAgPExhYmVsIGh0bWxGb3I9XCJnZW5kZXJfaWRcIj5Hw6luZXJvPC9MYWJlbD5cbiAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgIGlkPVwiZ2VuZGVyX2lkXCJcbiAgICAgICAgICAgICAgICBuYW1lPVwiZ2VuZGVyX2lkXCJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlSW5wdXRDaGFuZ2V9XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ9e3JlcXVpcmVkc31cbiAgICAgICAgICAgICAgICB2YWx1ZT17dmFsdWVzLmdlbmRlcl9pZH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHsgISBnZW5kZXJzID8gKFxuICAgICAgICAgICAgICAgICAgPG9wdGlvbiBkaXNhYmxlZCB2YWx1ZT1cIlwiPkNhcmdhbmRvLi4uPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgKSA6IGdlbmRlcnMubGVuZ3RoID8gPD5cbiAgICAgICAgICAgICAgICAgIDxvcHRpb24gZGlzYWJsZWQgdmFsdWU9XCJcIj5TZWxlY2Npb25hIHR1IGfDqW5lcm88L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgIHsgZ2VuZGVycy5tYXAoKGdlbnJlLCBrZXkpID0+IChcbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB7Li4ue2tleX19IHZhbHVlPXtnZW5yZS5pZH0+e2dlbnJlLm5hbWV9PC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICA8Lz4gOiAoXG4gICAgICAgICAgICAgICAgICA8b3B0aW9uIGRpc2FibGVkIHZhbHVlPVwiXCI+SW5jYXBheiBkZSBjYXJnYXIgZ8OpbmVyb3M8L29wdGlvbj5cbiAgICAgICAgICAgICAgICApIH1cbiAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgIDxJbnZhbGlkRmVlZGJhY2sgZXJyb3I9e2Vycm9yfSBsb2FkaW5nPXtsb2FkaW5nfSBuYW1lPVwiZ2VuZGVyX2lkXCIgLz5cbiAgICAgICAgICAgIDwvRm9ybUdyb3VwPlxuXG4gICAgICAgICAgICB7LyogZG9jdW1lbnQgKi99XG4gICAgICAgICAgICA8Rm9ybUdyb3VwPlxuICAgICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj1cImRvY3VtZW50XCI+RG9jdW1lbnRvPC9MYWJlbD5cbiAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgaWQ9XCJkb2N1bWVudFwiXG4gICAgICAgICAgICAgICAgbmFtZT1cImRvY3VtZW50XCJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlSW5wdXRDaGFuZ2V9XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ9e3JlcXVpcmVkc31cbiAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgdmFsdWU9e3ZhbHVlcy5kb2N1bWVudH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPEludmFsaWRGZWVkYmFjayBlcnJvcj17ZXJyb3J9IGxvYWRpbmc9e2xvYWRpbmd9IG5hbWU9XCJkb2N1bWVudFwiIC8+XG4gICAgICAgICAgICA8L0Zvcm1Hcm91cD5cblxuICAgICAgICAgICAge2Rpc2NvdW50cyAmJiBkaXNjb3VudHMubWFwKCBkID0+IChcbiAgICAgICAgICAgICAgPEZvcm1Hcm91cCBrZXk9e2QuaWR9PlxuICAgICAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPXtkLmRzY19pZH0+e2QubmFtZX08L0xhYmVsPlxuICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2NvdW50cy5maW5kKFxuICAgICAgICAgICAgICAgICAgICBkaXNjID0+ICghWycnLHVuZGVmaW5lZF0uaW5jbHVkZXModmFsdWVzW2Rpc2MuZHNjX2lkXSkgJiYgZGlzYy5pZCAhPSBkLmlkKVxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIGlkPXtkLmlkfVxuICAgICAgICAgICAgICAgICAgbWF4TGVuZ3RoPXs1fVxuICAgICAgICAgICAgICAgICAgbmFtZT17ZC5kc2NfaWR9XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlRGlzY291bnRDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgICBzdHlsZT17dmFsdWVzLmRpc2NvdW50X2lkID09IGQuaWQgPyB7YmFja2dyb3VuZENvbG9yOiAncmdiKDIwNiwgMjQ5LCAyMDYpJ30gOiB7fX1cbiAgICAgICAgICAgICAgICAgIHZhbHVlPXt2YWx1ZXNbZC5kc2NfaWRdIHx8ICcnfVxuICAgICAgICAgICAgICAgICAgcmVhZE9ubHk9e2Jsb2NrRGlzY291bnRGaWVsZHN9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7ZmxvYXQ6ICdyaWdodCcsIHBhZGRpbmdUb3A6JzEwcHgnfX0+XG4gICAgICAgICAgICAgICAgICA8TG9hZGluZyBzaXplPVwiMjBcIiBjb2xvcj1cIndoaXRlXCIgbG9hZGluZ1N0YXRlPXt2YWx1ZXMuZGlzY291bnRfaWQgPT0gZC5pZCAgJiYgYmxvY2tEaXNjb3VudEZpZWxkc30vPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L0Zvcm1Hcm91cD5cbiAgICAgICAgICAgICkpfVxuXG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHsvKiBhZGRyZXNzICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC02XCI+XG4gICAgICAgICAgPEFkZHJlc3NcbiAgICAgICAgICAgIGFwaT17YXBpfVxuICAgICAgICAgICAgZXJyb3I9e2Vycm9yfVxuICAgICAgICAgICAgaGFuZGxlSW5wdXRDaGFuZ2U9e2hhbmRsZUlucHV0Q2hhbmdlfVxuICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ31cbiAgICAgICAgICAgIHJlcXVpcmVkcz17cmVxdWlyZWRzfVxuICAgICAgICAgICAgc2V0VmFsdWVzPXtzZXRWYWx1ZXN9XG4gICAgICAgICAgICB2YWx1ZXM9e3ZhbHVlc31cbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgPC9kaXY+XG5cbiAgICAgIHsvKiBwYWNrYWdlIHNlbGVjdGlvbiAqL31cbiAgICAgIDxQYWNrYWdlcyB7Li4ue1xuICAgICAgICBlcnJvcjogcGFja2FnZXMuZXJyb3IgPyBwYWNrYWdlcy5lcnJvciA6IG51bGwsXG4gICAgICAgIGl0ZW1zOiBwYWNrYWdlcy5pdGVtcyA/IHBhY2thZ2VzLml0ZW1zIDogbnVsbCxcbiAgICAgICAgb25DaGFuZ2U6IG9uUGFja2FnZUNoYW5nZSxcbiAgICAgICAgcGFja2FnZV9pZDogdmFsdWVzLnBhY2thZ2VfaWQsXG4gICAgICAgIHZhbGlkYXRpb25FcnJvcjogISBsb2FkaW5nICYmIGVycm9yICYmIGVycm9yLmVycm9ycyAmJiBlcnJvci5lcnJvcnMucGFja2FnZV9pZCxcbiAgICAgICAgZGlzY291bnRfaWQ6IHZhbHVlcy5kaXNjb3VudF9pZCxcbiAgICAgICAgc2V0QmxvY2tEaXNjb3VudEZpZWxkcyxcbiAgICAgIH19IC8+XG5cbiAgICAgIHsvKiBwYXltZW50ICovfVxuICAgICAgeyB2YWx1ZXMucGFja2FnZV9pZCAmJiB2YWx1ZXMucGFja2FnZV9pZCAhPT0gZnJlZV9wYWNrYWdlX2lkICYmIChcbiAgICAgICAgPFBheW1lbnQgey4uLntcbiAgICAgICAgICBhcGksXG4gICAgICAgICAgY2FzaF9wYXltZW50X21ldGhvZF9pZDogdmFsdWVzLmNhc2hfcGF5bWVudF9tZXRob2RfaWQsXG4gICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgaXNDYXJkUGF5bWVudCxcbiAgICAgICAgICBpc1BheVVSZWFkeSxcbiAgICAgICAgICBsb2FkaW5nLFxuICAgICAgICAgIG9uQ2FzaFBheW1lbnRNZXRob2RDaGFuZ2UsXG4gICAgICAgICAgb25DaGFuZ2U6IG9uUGF5bWVudENoYW5nZSxcbiAgICAgICAgICBwYXltZW50X21ldGhvZF9pZDogdmFsdWVzLnBheW1lbnRfbWV0aG9kX2lkLFxuICAgICAgICAgIFBPUyxcbiAgICAgICAgICByZXF1aXJlZHMsXG4gICAgICAgICAgdmFsaWRhdGlvbkVycm9yOiAhIGxvYWRpbmcgJiYgZXJyb3IgJiYgZXJyb3IuZXJyb3JzICYmIGVycm9yLmVycm9ycy5wYXltZW50X21ldGhvZF9pZCxcbiAgICAgICAgfX0gLz5cbiAgICAgICkgfVxuXG4gICAgICB7LyogZm9vdGVyICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3cgYWxpZ24taXRlbXMtY2VudGVyXCI+XG5cbiAgICAgICAgey8qIHRlcm1zICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC02IG9mZnNldC1tZC00XCI+XG4gICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cInRlcm1zXCI+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgY2hlY2tlZD17dmFsdWVzLnRlcm1zfVxuICAgICAgICAgICAgICBuYW1lPVwidGVybXNcIlxuICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlSW5wdXRDaGFuZ2V9XG4gICAgICAgICAgICAgIHJlcXVpcmVkPXtyZXF1aXJlZHN9XG4gICAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXG4gICAgICAgICAgICAgIHZhbHVlPXtgdHJ1ZWB9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPHNwYW4+SGUgbGXDrWRvIHkgYWNlcHRvIDxMaW5rIGhyZWY9XCIvdGVybWlub3MteS1wb2xpdGljYXNcIj5cbiAgICAgICAgICAgICAgICA8YSB0YXJnZXQ9XCJfYmxhbmtcIj5lbCBjb250cmF0bzwvYT5cbiAgICAgICAgICAgICAgPC9MaW5rPiBkZSB7Q09ORklHLmFwcE5hbWV9PC9zcGFuPlxuICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgPEludmFsaWRGZWVkYmFjayBlcnJvcj17ZXJyb3J9IGxvYWRpbmc9e2xvYWRpbmd9IG5hbWU9XCJ0ZXJtc1wiIC8+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHsvKiBzZW5kIGJ0biAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtbWQtMiB0ZXh0LXJpZ2h0XCI+XG4gICAgICAgICAgPEJ1dHRvbiBibG9jayBjb2xvcj1cInNlY29uZGFyeVwiIGRpc2FibGVkPXtsb2FkaW5nfSB0eXBlPVwic3VibWl0XCI+RW52aWFyPC9CdXR0b24+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICA8L2Rpdj5cblxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICA6Z2xvYmFsKC5oMykge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMjBweDtcbiAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgICAgICB9XG4gICAgICAgIGhyLFxuICAgICAgICAuaHIge1xuICAgICAgICAgIG1hcmdpbi10b3A6IDA7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgfVxuICAgICAgICAudGVybXMge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMThweDtcbiAgICAgICAgfVxuICAgICAgICAudGVybXMgaW5wdXQge1xuICAgICAgICAgIG1hcmdpbi1yaWdodDogNXB4O1xuICAgICAgICB9XG4gICAgICBgfTwvc3R5bGU+XG4gICAgPC9mb3JtPlxuICApXG59XG5cbmNvbnN0IEludmFsaWRGZWVkYmFjayA9ICh7ZXJyb3IsIGxvYWRpbmcsIG5hbWV9KSA9PiB7XG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIHsgISBsb2FkaW5nICYmIGVycm9yICYmIGVycm9yLmVycm9ycyAmJiBlcnJvci5lcnJvcnNbbmFtZV0gJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImludmFsaWQtZmVlZGJhY2tcIj57ZXJyb3IuZXJyb3JzW25hbWVdfTwvZGl2PlxuICAgICAgKX1cbiAgICA8Lz5cbiAgKVxufVxuXG5jb25zdCBTZWxlY3RGb3JtR3JvdXAgPSAoeyBlcnJvciwgbGFiZWwsIGxpc3QsIGxpc3RNYXBWYWx1ZSA9IG51bGwsIGxvYWRpbmcsIG5hbWUsIG9uQ2hhbmdlLCBwbHVyYWxMYWJlbCwgcmVxdWlyZWRzLCB2YWx1ZSB9KSA9PiB7XG4gIHJldHVybiAoXG4gICAgPEZvcm1Hcm91cD5cbiAgICAgIDxMYWJlbCBodG1sRm9yPXtuYW1lfT57bGFiZWx9PC9MYWJlbD5cbiAgICAgIDxTZWxlY3RcbiAgICAgICAgaWQ9e25hbWV9XG4gICAgICAgIG5hbWU9e25hbWV9XG4gICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZX1cbiAgICAgICAgcmVxdWlyZWQ9e3JlcXVpcmVkc31cbiAgICAgICAgdmFsdWU9e3ZhbHVlfVxuICAgICAgPlxuICAgICAgICB7ICEgbGlzdCA/IChcbiAgICAgICAgICA8b3B0aW9uIGRpc2FibGVkIHZhbHVlPVwiXCI+Q2FyZ2FuZG8uLi48L29wdGlvbj5cbiAgICAgICAgKSA6IGxpc3QubGVuZ3RoID8gPD5cbiAgICAgICAgICA8b3B0aW9uIGRpc2FibGVkIHZhbHVlPVwiXCI+U2VsZWNjaW9uYSB0dSB7bGFiZWwudG9Mb3dlckNhc2UoKX08L29wdGlvbj5cbiAgICAgICAgICB7IGxpc3QubWFwKChpdGVtLCBrZXkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gbGlzdE1hcFZhbHVlID8gaXRlbVtsaXN0TWFwVmFsdWVdIDogaXRlbVxuICAgICAgICAgICAgY29uc3Qgb3B0aW9uTmFtZSA9IGxpc3RNYXBWYWx1ZSA/IGl0ZW0ubmFtZSA6IGl0ZW1cbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtrZXl9IHZhbHVlPXt2YWx1ZX0+e29wdGlvbk5hbWV9PC9vcHRpb24+XG4gICAgICAgICAgICApXG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvPiA6IChcbiAgICAgICAgICA8b3B0aW9uIGRpc2FibGVkIHZhbHVlPVwiXCI+SW5jYXBheiBkZSBjYXJnYXIge3BsdXJhbExhYmVsfTwvb3B0aW9uPlxuICAgICAgICApIH1cbiAgICAgIDwvU2VsZWN0PlxuICAgICAgPEludmFsaWRGZWVkYmFjayBlcnJvcj17ZXJyb3J9IGxvYWRpbmc9e2xvYWRpbmd9IG5hbWU9e25hbWV9IC8+XG4gICAgPC9Gb3JtR3JvdXA+XG4gIClcbn1cblxuY29uc3QgQWRkcmVzcyA9ICh7XG4gIGFwaSxcbiAgZXJyb3IsXG4gIGhhbmRsZUlucHV0Q2hhbmdlLFxuICBzZXRWYWx1ZXMsXG4gIGxvYWRpbmcsXG4gIHJlcXVpcmVkcyxcbiAgdmFsdWVzLFxufSkgPT4ge1xuXG4gIGNvbnN0IGFyZ0NvdW50cnlJZCA9IDExXG4gIGNvbnN0IGJyYUNvdW50cnlJZCA9IDMyXG4gIGNvbnN0IGNobENvdW50cnlJZCA9IDQ4XG5cbiAgY29uc3QgeyBjb3VudHJ5X2lkOiBjb3VudHJ5SWQsIGFkZHJlc3NfMXN0X2xldmVsLCBjaXR5LCBhZGRyZXNzXzNyZF9sZXZlbCwgYWRkcmVzcyB9ID0gdmFsdWVzXG5cbiAgY29uc3QgWyBjb3VudHJpZXMsIHNldENvdW50cmllcyBdID0gdXNlU3RhdGUoKVxuXG4gIHVzZUVmZmVjdCggXyA9PiB7XG4gICAgKGFzeW5jIF8gPT4ge1xuICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBhcGkuZ2V0KCdjb3VudHJpZXMnKVxuICAgICAgc2V0Q291bnRyaWVzKGRhdGEpXG4gICAgfSkoKVxuICB9LCBbXSlcblxuICBjb25zdCBoYW5kbGVDb3VudHJ5Q2hhbmdlID0gZSA9PiB7XG4gICAgY29uc3QgeyBuYW1lLCB2YWx1ZSB9ID0gZS50YXJnZXRcbiAgICBzZXRWYWx1ZXMoe1xuICAgICAgLi4udmFsdWVzLFxuICAgICAgW25hbWVdOiB2YWx1ZSxcbiAgICAgIGFkZHJlc3NfMXN0X2xldmVsOiAnJyxcbiAgICB9KVxuICB9XG5cbiAgY29uc3QgZmlyc3RMZXZlbExhYmVsID0gY291bnRyeUlkID09IGFyZ0NvdW50cnlJZCA/ICdQcm92aW5jaWEnIDpcbiAgY291bnRyeUlkID09IGJyYUNvdW50cnlJZCA/ICdFc3RhZG8nIDpcbiAgY291bnRyeUlkID09IGNobENvdW50cnlJZCA/ICdSZWdpw7NuJyA6XG4gICdTdGF0ZSdcblxuICBjb25zdCBmaXJzdExldmVsUGx1cmFsTGFiZWwgPSBjb3VudHJ5SWQgPT0gYXJnQ291bnRyeUlkID8gJ1Byb3ZpbmNpYXMnIDpcbiAgY291bnRyeUlkID09IGJyYUNvdW50cnlJZCA/ICdFc3RhZG9zJyA6XG4gIGNvdW50cnlJZCA9PSBjaGxDb3VudHJ5SWQgPyAnUmVnaW9uZXMnIDpcbiAgJ1N0YXRlcydcblxuICBjb25zdCBbIGZpcnN0TGV2ZWxMaXN0LCBzZXRGaXJzdExldmVsTGlzdCBdID0gdXNlU3RhdGUoKVxuXG4gIHVzZUVmZmVjdChfID0+IHtcbiAgICAoYXN5bmMgXyA9PiB7XG4gICAgICBjb25zdCBwYXJzZWRDb3VudHJ5SWQgPSBwYXJzZUludChjb3VudHJ5SWQpXG4gICAgICBjb25zdCB7IGRhdGE6IGFkZHJlc3NlcyB9ID0gW2FyZ0NvdW50cnlJZCwgYnJhQ291bnRyeUlkLCBjaGxDb3VudHJ5SWRdLmluY2x1ZGVzKHBhcnNlZENvdW50cnlJZCkgP1xuICAgICAgICBhd2FpdCBhcGkuZ2V0KCdhZGRyZXNzLTFzdC1sZXZlbHMnLCB7XG4gICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICBjb3VudHJ5X2lkOiBjb3VudHJ5SWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSkgOiB7IGRhdGE6IG51bGwgfVxuICAgICAgICBzZXRGaXJzdExldmVsTGlzdChhZGRyZXNzZXMpXG4gICAgfSkoKVxuICB9LCBbY291bnRyeUlkXSlcblxuICBjb25zdCBjaXR5TGFiZWwgPSBjb3VudHJ5SWQgPT0gYnJhQ291bnRyeUlkID8gJ0NpZGFkZScgOlxuICBjb3VudHJ5SWQgPT0gY2hsQ291bnRyeUlkID8gJ1Byb3ZpbmNpYScgOlxuICAnQ2l1ZGFkJ1xuXG4gIGNvbnN0IHRoaXJkTGV2ZWxMYWJlbCA9IGNvdW50cnlJZCA9PSBjaGxDb3VudHJ5SWQgPyAnQ29tdW5hJyA6ICdEaXN0cmljdCdcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiYWRkcmVzc1wiPlxuICAgICAgPGgzIGNsYXNzTmFtZT1cImgzXCI+VWJpY2FjacOzbjwvaDM+XG5cbiAgICAgIHsvKiBjb3VudHJ5ICovfVxuICAgICAgPFNlbGVjdEZvcm1Hcm91cFxuICAgICAgICBlcnJvcj17ZXJyb3J9XG4gICAgICAgIGxhYmVsPVwiUGHDrXNcIlxuICAgICAgICBsb2FkaW5nPXtsb2FkaW5nfVxuICAgICAgICBsaXN0PXtjb3VudHJpZXN9XG4gICAgICAgIGxpc3RNYXBWYWx1ZT1cImlkXCJcbiAgICAgICAgbmFtZT1cImNvdW50cnlfaWRcIlxuICAgICAgICBvbkNoYW5nZT17aGFuZGxlQ291bnRyeUNoYW5nZX1cbiAgICAgICAgcGx1cmFsTGFiZWw9XCJQYcOtc2VzXCJcbiAgICAgICAgcmVxdWlyZWRzPXtyZXF1aXJlZHN9XG4gICAgICAgIHZhbHVlPXtjb3VudHJ5SWR9XG4gICAgICAvPlxuXG4gICAgICB7LyogMXN0IGxldmVsICovfVxuICAgICAge1thcmdDb3VudHJ5SWQsIGJyYUNvdW50cnlJZCwgY2hsQ291bnRyeUlkXS5tYXAoaWQgPT4gaWQrJycpLmluY2x1ZGVzKGNvdW50cnlJZCkgJiYgKFxuICAgICAgICA8U2VsZWN0Rm9ybUdyb3VwXG4gICAgICAgICAgZXJyb3I9e2Vycm9yfVxuICAgICAgICAgIGxhYmVsPXtmaXJzdExldmVsTGFiZWx9XG4gICAgICAgICAgbG9hZGluZz17bG9hZGluZ31cbiAgICAgICAgICBsaXN0PXtmaXJzdExldmVsTGlzdH1cbiAgICAgICAgICBsaXN0TWFwVmFsdWU9XCJpZFwiXG4gICAgICAgICAgbmFtZT1cImFkZHJlc3NfMXN0X2xldmVsXCJcbiAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlSW5wdXRDaGFuZ2V9XG4gICAgICAgICAgcGx1cmFsTGFiZWw9e2ZpcnN0TGV2ZWxQbHVyYWxMYWJlbH1cbiAgICAgICAgICByZXF1aXJlZHM9e3JlcXVpcmVkc31cbiAgICAgICAgICB2YWx1ZT17YWRkcmVzc18xc3RfbGV2ZWx9XG4gICAgICAgIC8+XG4gICAgICApfVxuXG4gICAgICB7LyogY2l0eSAqL31cbiAgICAgIHtbYnJhQ291bnRyeUlkLCBjaGxDb3VudHJ5SWRdLm1hcChpZCA9PiBpZCsnJykuaW5jbHVkZXMoY291bnRyeUlkKSAmJiAoXG4gICAgICAgIDxGb3JtR3JvdXA+XG4gICAgICAgICAgPExhYmVsIGh0bWxGb3I9XCJjaXR5XCI+e2NpdHlMYWJlbH08L0xhYmVsPlxuICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgaWQ9XCJjaXR5XCJcbiAgICAgICAgICAgIG5hbWU9XCJjaXR5XCJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVJbnB1dENoYW5nZX1cbiAgICAgICAgICAgIHJlcXVpcmVkPXtyZXF1aXJlZHN9XG4gICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICB2YWx1ZT17Y2l0eX1cbiAgICAgICAgICAvPlxuICAgICAgICAgIDxJbnZhbGlkRmVlZGJhY2sgZXJyb3I9e2Vycm9yfSBsb2FkaW5nPXtsb2FkaW5nfSBuYW1lPVwiY2l0eVwiIC8+XG4gICAgICAgIDwvRm9ybUdyb3VwPlxuICAgICAgKX1cblxuICAgICAgey8qIDNyZCBsZXZlbCAqL31cbiAgICAgIHtbY2hsQ291bnRyeUlkXS5tYXAoaWQgPT4gaWQrJycpLmluY2x1ZGVzKGNvdW50cnlJZCkgJiYgKFxuICAgICAgICA8Rm9ybUdyb3VwPlxuICAgICAgICAgIDxMYWJlbCBodG1sRm9yPVwiYWRkcmVzc18zcmRfbGV2ZWxcIj57dGhpcmRMZXZlbExhYmVsfTwvTGFiZWw+XG4gICAgICAgICAgPElucHV0XG4gICAgICAgICAgICBpZD1cImFkZHJlc3NfM3JkX2xldmVsXCJcbiAgICAgICAgICAgIG5hbWU9XCJhZGRyZXNzXzNyZF9sZXZlbFwiXG4gICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlSW5wdXRDaGFuZ2V9XG4gICAgICAgICAgICByZXF1aXJlZD17cmVxdWlyZWRzfVxuICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgdmFsdWU9e2FkZHJlc3NfM3JkX2xldmVsfVxuICAgICAgICAgIC8+XG4gICAgICAgICAgPEludmFsaWRGZWVkYmFjayBlcnJvcj17ZXJyb3J9IGxvYWRpbmc9e2xvYWRpbmd9IG5hbWU9XCJhZGRyZXNzXzNyZF9sZXZlbFwiIC8+XG4gICAgICAgIDwvRm9ybUdyb3VwPlxuICAgICAgKX1cblxuICAgICAgPEZvcm1Hcm91cD5cbiAgICAgICAgPExhYmVsIGh0bWxGb3I9XCJhZGRyZXNzXCI+RGlyZWNjacOzbjwvTGFiZWw+XG4gICAgICAgIDxJbnB1dFxuICAgICAgICAgIGlkPVwiYWRkcmVzc1wiXG4gICAgICAgICAgbmFtZT1cImFkZHJlc3NcIlxuICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVJbnB1dENoYW5nZX1cbiAgICAgICAgICByZXF1aXJlZD17cmVxdWlyZWRzfVxuICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICB2YWx1ZT17YWRkcmVzc31cbiAgICAgICAgLz5cbiAgICAgICAgPEludmFsaWRGZWVkYmFjayBlcnJvcj17ZXJyb3J9IGxvYWRpbmc9e2xvYWRpbmd9IG5hbWU9XCJhZGRyZXNzXCIgLz5cbiAgICAgIDwvRm9ybUdyb3VwPlxuXG4gICAgPC9kaXY+XG4gIClcbn1cblxuY29uc3QgUGF5bWVudCA9ICh7XG4gIGFwaSxcbiAgY2FzaF9wYXltZW50X21ldGhvZF9pZCxcbiAgZXJyb3IsXG4gIGlzQ2FyZFBheW1lbnQsXG4gIGlzUGF5VVJlYWR5LFxuICBsb2FkaW5nLFxuICBvbkNhc2hQYXltZW50TWV0aG9kQ2hhbmdlLFxuICBvbkNoYW5nZSxcbiAgcGF5bWVudF9tZXRob2RfaWQsXG4gIFBPUyxcbiAgcmVxdWlyZWRzLFxuICB2YWxpZGF0aW9uRXJyb3Jcbn0pID0+IHtcblxuICAvLyBwYXltZW50IG1ldGhvZHNcbiAgY29uc3QgWyBwYXltZW50TWV0aG9kcywgc2V0UGF5bWVudE1ldGhvZHMgXSA9IHVzZVN0YXRlKClcblxuICAvLyBnZXQgcGF5bWVudCBtZXRob2RzXG4gIHVzZUVmZmVjdCggXyA9PiB7XG4gICAgY29uc3QgZ2V0UGF5bWVudE1ldGhvZHMgPSBhc3luYyBfID0+IHtcbiAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYXBpLmdldCgncGF5bWVudC1tZXRob2RzJylcbiAgICAgIHNldFBheW1lbnRNZXRob2RzKGRhdGEpXG4gICAgfVxuICAgIGdldFBheW1lbnRNZXRob2RzKClcbiAgfSwgW10pXG5cbiAgLy8gaW5pdCBjYXJkIHNlY3VyZSBmaWVsZHNcbiAgdXNlRWZmZWN0KF8gPT4ge1xuICAgIGlmIChpc1BheVVSZWFkeSAmJiBpc0NhcmRQYXltZW50KSB7XG4gICAgICBQT1MuaW5pdFNlY3VyZUZpZWxkcygnY2FyZC1zZWN1cmUtZmllbGRzJylcbiAgICB9XG4gIH0sIFtpc1BheVVSZWFkeSwgaXNDYXJkUGF5bWVudF0pXG5cbiAgLy8gY2FzaCBwYXltZW50IG1ldGhvZHNcbiAgY29uc3QgWyBjYXNoUGF5bWVudE1ldGhvZHMsIHNldENhc2hQYXltZW50TWV0aG9kcyBdID0gdXNlU3RhdGUoKVxuXG4gIC8vIGdldCBjYXNoIHBheW1lbnQgbWV0aG9kc1xuICB1c2VFZmZlY3QoIF8gPT4ge1xuICAgIGNvbnN0IGdldENhc2hQYXltZW50TWV0aG9kcyA9IGFzeW5jIF8gPT4ge1xuICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBhcGkuZ2V0KCdjYXNoLXBheW1lbnQtbWV0aG9kcycpXG4gICAgICBzZXRDYXNoUGF5bWVudE1ldGhvZHMoZGF0YSlcbiAgICB9XG4gICAgZ2V0Q2FzaFBheW1lbnRNZXRob2RzKClcbiAgfSwgW10pXG5cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm9mZnNldC1tZC0yIGNvbC1tZC04XCI+XG5cbiAgICAgICAgPGgzIGNsYXNzTmFtZT1cImgzXCI+UGFnbzwvaDM+XG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtbWQtNlwiPlxuICAgICAgICAgICAgICA8Rm9ybUdyb3VwPlxuICAgICAgICAgICAgICAgIHsgcGF5bWVudE1ldGhvZHMgJiYgcGF5bWVudE1ldGhvZHMubWFwKChwYXltZW50TWV0aG9kLCBrZXkpID0+IChcbiAgICAgICAgICAgICAgICAgIDxJbnB1dFJhZGlvXG4gICAgICAgICAgICAgICAgICAgIGtleT17a2V5fVxuICAgICAgICAgICAgICAgICAgICBsYWJlbD17cGF5bWVudE1ldGhvZC5uYW1lfVxuICAgICAgICAgICAgICAgICAgICBuYW1lPVwicGF5bWVudFwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgc3RhdGU9e3BheW1lbnRfbWV0aG9kX2lkfVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17cGF5bWVudE1ldGhvZC5pZH1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKSkgfVxuICAgICAgICAgICAgICAgIHsgdmFsaWRhdGlvbkVycm9yICYmIChcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW52YWxpZC1mZWVkYmFja1wiPnt2YWxpZGF0aW9uRXJyb3J9PC9kaXY+XG4gICAgICAgICAgICAgICAgKSB9XG4gICAgICAgICAgICAgIDwvRm9ybUdyb3VwPlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLW1kLTZcIj5cblxuICAgICAgICAgICAgICB7LyogY3JlZGl0IC8gZGViaXQgY2FyZCAqL31cbiAgICAgICAgICAgICAge2lzQ2FyZFBheW1lbnQgPyAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLWlucHV0c1wiPlxuXG4gICAgICAgICAgICAgICAgICB7LyogbWFuZGF0b3J5IGRhdGEgKi99XG4gICAgICAgICAgICAgICAgICA8Rm9ybUdyb3VwPlxuICAgICAgICAgICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj1cImNhcmRob2xkZXItbmFtZVwiPk5vbWJyZSBpbXByZXNvIGVuIHRhcmpldGE8L0xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8SW5wdXQgaWQ9XCJjYXJkaG9sZGVyLW5hbWVcIiBuYW1lPVwiY2FyZGhvbGRlci1uYW1lXCIgcmVxdWlyZWQ9e3JlcXVpcmVkc30gdHlwZT1cInRleHRcIiAvPlxuICAgICAgICAgICAgICAgICAgPC9Gb3JtR3JvdXA+XG5cbiAgICAgICAgICAgICAgICAgIHsvKiBjYXJkIGZpZWxkcyAqL31cbiAgICAgICAgICAgICAgICAgIDxGb3JtR3JvdXA+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJjYXJkLXNlY3VyZS1maWVsZHNcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8SW52YWxpZEZlZWRiYWNrIGVycm9yPXtlcnJvcn0gbG9hZGluZz17bG9hZGluZ30gbmFtZT1cInBheW1lbnRfb3NcIiAvPlxuICAgICAgICAgICAgICAgICAgPC9Gb3JtR3JvdXA+XG5cbiAgICAgICAgICAgICAgICAgIHsvKiA8Rm9ybUdyb3VwPlxuICAgICAgICAgICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj1cImNyZWRpdENhcmROYW1lXCI+Tm9tYnJlIGltcHJlc288L0xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8SW5wdXQgaWQ9XCJjcmVkaXRDYXJkTmFtZVwiIG5hbWU9XCJjcmVkaXRDYXJkTmFtZVwiIHJlcXVpcmVkPXtyZXF1aXJlZHN9IHR5cGU9XCJ0ZXh0XCIgLz5cbiAgICAgICAgICAgICAgICAgIDwvRm9ybUdyb3VwPlxuICAgICAgICAgICAgICAgICAgPEZvcm1Hcm91cD5cbiAgICAgICAgICAgICAgICAgICAgPExhYmVsIGh0bWxGb3I9XCJjcmVkaXRDYXJkTnVtYmVyXCI+TnVtZXJvPC9MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPElucHV0IGlkPVwiY3JlZGl0Q2FyZE51bWJlclwiIG5hbWU9XCJjcmVkaXRDYXJkTnVtYmVyXCIgcmVxdWlyZWQ9e3JlcXVpcmVkc30gdHlwZT1cInRleHRcIiAvPlxuICAgICAgICAgICAgICAgICAgPC9Gb3JtR3JvdXA+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC02XCI+XG4gICAgICAgICAgICAgICAgICAgICAgPEZvcm1Hcm91cD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPVwiY3JlZGl0Q2FyZERhdGVcIj5WYWxpZGV6PC9MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dCBpZD1cImNyZWRpdENhcmREYXRlXCIgbmFtZT1cImNyZWRpdENhcmREYXRlXCIgcmVxdWlyZWQ9e3JlcXVpcmVkc30gdHlwZT1cInRleHRcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybUdyb3VwPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtNlwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxGb3JtR3JvdXA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj1cImNyZWRpdENhcmRDb2RlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxhYmJyIHRpdGxlPVwiQ8OzZGlnbyBkZSBzZWd1cmlkYWRcIj5DVlY8L2FiYnI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IGlkPVwiY3JlZGl0Q2FyZENvZGVcIiBuYW1lPVwiY3JlZGl0Q2FyZENvZGVcIiByZXF1aXJlZD17cmVxdWlyZWRzfSB0eXBlPVwidGV4dFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtR3JvdXA+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+ICovfVxuXG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgLy8gY2FzaCBwYXltZW50IG1ldGhvZHNcbiAgICAgICAgICAgICAgKSA6IHBheW1lbnRfbWV0aG9kX2lkID09PSAzICYmIChcbiAgICAgICAgICAgICAgICA8Rm9ybUdyb3VwPlxuICAgICAgICAgICAgICAgICAge2Nhc2hQYXltZW50TWV0aG9kcyA9PSBudWxsID8gKFxuICAgICAgICAgICAgICAgICAgICA8cD5DYXJnYW5kby4uLjwvcD5cbiAgICAgICAgICAgICAgICAgICkgOiBjYXNoUGF5bWVudE1ldGhvZHMubGVuZ3RoID8gY2FzaFBheW1lbnRNZXRob2RzLm1hcCgoaXRlbSwga2V5KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgIDxJbnB1dFJhZGlvXG4gICAgICAgICAgICAgICAgICAgICAga2V5PXtrZXl9XG4gICAgICAgICAgICAgICAgICAgICAgbGFiZWw9e2l0ZW0ubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiY2FzaF9wYXltZW50X21ldGhvZF9pZFwiXG4gICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e29uQ2FzaFBheW1lbnRNZXRob2RDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgc3RhdGU9e2Nhc2hfcGF5bWVudF9tZXRob2RfaWR9XG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2l0ZW0uaWR9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICApKSA6IChcbiAgICAgICAgICAgICAgICAgICAgPHA+U2luIG3DqXRvZG8gZGUgcGFnbyBjb25maWd1cmFkby48L3A+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgPEludmFsaWRGZWVkYmFjayBlcnJvcj17ZXJyb3J9IGxvYWRpbmc9e2xvYWRpbmd9IG5hbWU9XCJjYXNoX3BheW1lbnRfbWV0aG9kX2lkXCIgLz5cbiAgICAgICAgICAgICAgICA8L0Zvcm1Hcm91cD5cbiAgICAgICAgICAgICAgKSB9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICA8L2Rpdj5cbiAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgQG1lZGlhIChtaW4td2lkdGg6IDc2OHB4KSB7XG4gICAgICAgICAgLmNhcmQtaW5wdXRzIHtcbiAgICAgICAgICAgIG1hcmdpbi10b3A6IC0yMXB4O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgYH08L3N0eWxlPlxuICAgIDwvZGl2PlxuICApXG59XG5cbi8vIFJhZGlvXG5jb25zdCBJbnB1dFJhZGlvID0gKHsgbGFiZWwsIG5hbWUsIG9uQ2hhbmdlLCBzdGF0ZSwgdmFsdWUgfSkgPT4ge1xuICBjb25zdCB0aGVtZSA9IHVzZUNvbnRleHQoVGhlbWVDb250ZXh0KVxuICBjb25zdCByYWRpb0NvbG9yID0gdGhlbWUuY29sb3JzLmJhY2tncm91bmRcbiAgcmV0dXJuIChcbiAgICA8bGFiZWw+XG4gICAgICA8aW5wdXQgY2hlY2tlZD17c3RhdGUgPT09IHZhbHVlfSB0eXBlPVwicmFkaW9cIiB7Li4ue25hbWUsIG9uQ2hhbmdlLCB2YWx1ZX19IC8+XG4gICAgICA8c3BhbiBjbGFzc05hbWU9XCJmYWtlLWlucHV0XCI+XG4gICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZha2UtcmFkaW9cIj48L3NwYW4+XG4gICAgICAgIDxzcGFuPntsYWJlbH08L3NwYW4+XG4gICAgICA8L3NwYW4+XG4gICAgICA8c3R5bGUganN4PntgXG4gICAgICAgIGxhYmVsIHtcbiAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiA1cHg7XG4gICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIH1cbiAgICAgICAgaW5wdXQge1xuICAgICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB9XG4gICAgICAgIC5mYWtlLWlucHV0IHtcbiAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1wcmltYXJ5KTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgZm9udC1zaXplOiAxcmVtO1xuICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjQ7XG4gICAgICAgICAgcGFkZGluZzogLjM3NXJlbSAuNzVyZW07XG4gICAgICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAuM3MsIGJvcmRlci1jb2xvciAuM3MsIGNvbG9yIC4zcztcbiAgICAgICAgfVxuICAgICAgICAuZmFrZS1yYWRpbyB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0td2hpdGUpO1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWdyYXkyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICAgIGhlaWdodDogMTVweDtcbiAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDcuNXB4O1xuICAgICAgICAgIHBhZGRpbmc6IDFweDtcbiAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogLTJweDtcbiAgICAgICAgICB3aWR0aDogMTVweDtcbiAgICAgICAgfVxuICAgICAgICAuZmFrZS1yYWRpbzo6YmVmb3JlIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3JhZGlvQ29sb3J9O1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgICAgICBjb250ZW50OiAnJztcbiAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICBvcGFjaXR5OiAwO1xuICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IC4zcztcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgfVxuICAgICAgICBpbnB1dDpjaGVja2VkICsgLmZha2UtaW5wdXQge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXByaW1hcnkpO1xuICAgICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgfVxuICAgICAgICBpbnB1dDpjaGVja2VkICsgLmZha2UtaW5wdXQgLmZha2UtcmFkaW86OmJlZm9yZSB7XG4gICAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgfVxuICAgICAgICB7LyogaW5wdXQ6Zm9jdXMgKyAuZmFrZS1pbnB1dCB7XG4gICAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS13aGl0ZSk7XG4gICAgICAgIH0gKi99XG4gICAgICBgfTwvc3R5bGU+XG4gICAgPC9sYWJlbD5cbiAgKVxufVxuXG4vLyBnZXRJbml0aWFsUHJvcHNcbkNvbXBsZXRlUmVnaXN0ZXJQYWdlLmdldEluaXRpYWxQcm9wcyA9IGFzeW5jIGN0eCA9PiB7XG5cbiAgY29uc3Qge2FwaSwgcmVzLCB1c2VyfSA9IGN0eFxuXG4gIC8vIGlmIHVzZXIgaGFzIGFscmVhZHkgY29tcGxldGVkIHJlZ2lzdHJ5LCByZWRpcmVjdCBpdFxuICBpZiAodXNlci5yZWdpc3Rlcl9jb21wbGV0ZWRfYXQpIHtcbiAgICBsZXQgbWVzc2FnZSA9IEpTT04uc3RyaW5naWZ5KHsgaW5mbzogXCJZYSBoYSBjb21wbGV0YWRvIHN1IHJlZ2lzdHJvLlwiIH0pXG4gICAgbm9va2llcy5zZXQoY3R4LCAnZmxhc2hfbWVzc2FnZScsIG1lc3NhZ2UsIHsgcGF0aDogJy8nIH0pXG4gICAgaWYgKHJlcykge1xuICAgICAgcmVzLnJlZGlyZWN0KCcvJylcbiAgICAgIHJlcy5lbmQoKVxuICAgICAgcmV0dXJuIHsgfVxuICAgIH0gZWxzZSB7XG4gICAgICBSb3V0ZXIuYmFjaygpXG4gICAgfVxuICB9XG5cbiAgLy8gZ2V0IHBhY2thZ2VzXG4gIGxldCBwYWNrYWdlc1xuICB0cnkge1xuICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYXBpLmdldCgncGFja2FnZXMnKVxuICAgIHBhY2thZ2VzID0geyBpdGVtczogZGF0YSB9XG4gIH0gY2F0Y2goZXJyb3IpIHtcbiAgICBwYWNrYWdlcyA9IHsgZXJyb3IgfVxuICB9XG5cbiAgLy8gcmV0dXJuXG4gIHJldHVybiB7IHBhY2thZ2VzLCB1c2VyIH1cbn1cblxuLy8gZXhwb3J0XG5leHBvcnQgZGVmYXVsdCB3aXRoQXV0aChDb21wbGV0ZVJlZ2lzdGVyUGFnZSlcbiJdfQ== */\\n/*@ sourceURL=/Users/rafael/Projects/somosgad/dale/pages/register/complete.js */\")));\n}; // getInitialProps\n\n\n_s5(InputRadio, \"+C1P7ukOg/azcV4AZ819oyezFOE=\");\n\n_c7 = InputRadio;\n\nCompleteRegisterPage.getInitialProps = /*#__PURE__*/function () {\n  var _ref20 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11(ctx) {\n    var api, res, user, message, packages, _yield$api$get6, data;\n\n    return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n      while (1) {\n        switch (_context11.prev = _context11.next) {\n          case 0:\n            api = ctx.api, res = ctx.res, user = ctx.user; // if user has already completed registry, redirect it\n\n            if (!user.register_completed_at) {\n              _context11.next = 11;\n              break;\n            }\n\n            message = JSON.stringify({\n              info: \"Ya ha completado su registro.\"\n            });\n            nookies.set(ctx, 'flash_message', message, {\n              path: '/'\n            });\n\n            if (!res) {\n              _context11.next = 10;\n              break;\n            }\n\n            res.redirect('/');\n            res.end();\n            return _context11.abrupt(\"return\", {});\n\n          case 10:\n            Router.back();\n\n          case 11:\n            _context11.prev = 11;\n            _context11.next = 14;\n            return api.get('packages');\n\n          case 14:\n            _yield$api$get6 = _context11.sent;\n            data = _yield$api$get6.data;\n            packages = {\n              items: data\n            };\n            _context11.next = 22;\n            break;\n\n          case 19:\n            _context11.prev = 19;\n            _context11.t0 = _context11[\"catch\"](11);\n            packages = {\n              error: _context11.t0\n            };\n\n          case 22:\n            return _context11.abrupt(\"return\", {\n              packages: packages,\n              user: user\n            });\n\n          case 23:\n          case \"end\":\n            return _context11.stop();\n        }\n      }\n    }, _callee11, null, [[11, 19]]);\n  }));\n\n  return function (_x10) {\n    return _ref20.apply(this, arguments);\n  };\n}(); // export\n\n\nexport default _c8 = withAuth(CompleteRegisterPage);\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8;\n\n$RefreshReg$(_c, \"CompleteRegisterPage\");\n$RefreshReg$(_c2, \"CompleteRegisterForm\");\n$RefreshReg$(_c3, \"InvalidFeedback\");\n$RefreshReg$(_c4, \"SelectFormGroup\");\n$RefreshReg$(_c5, \"Address\");\n$RefreshReg$(_c6, \"Payment\");\n$RefreshReg$(_c7, \"InputRadio\");\n$RefreshReg$(_c8, \"%default%\");","map":{"version":3,"sources":["/Users/rafael/Projects/somosgad/dale/pages/register/complete.js"],"names":["useScript","ScriptStatus","Head","Link","Router","nookies","ThemeContext","Layout","CONFIG","FormGroup","Label","Input","Button","useContext","useEffect","useState","useCallback","UserContext","Packages","Select","IS_PRODUCTION","HAS_WINDOW","withAuth","Loading","CompleteRegisterPage","api","layoutProps","packages","user","ready","status","POS","window","payUEnv","businessUnitPublicKey","isPayUReady","setIsPayUReady","POSStyle","base","borderRadius","backgroundColor","height","fontSize","padding","marginLeft","cardImage","borderTopRightRadius","borderBottomRightRadius","margin","pan","width","borderTopLeftRadius","borderBottomLeftRadius","expirationDate","secureFields","left","cvv","ERROR","console","log","_","setPublicKey","setEnvironment","setStyle","setCardNumberPlaceholder","setExpirationDatePlaceholder","appName","CompleteRegisterForm","items","find","item","amount","free_package_id","id","debug","requireds","updateUser","genders","setGenders","discounts","setDiscounts","blockDiscountFields","setBlockDiscountFields","name","gender_id","document","country_id","address_1st_level","city","address_3rd_level","address","package_id","payment_method_id","payment_os","cash_payment_method_id","terms","discount_id","values","setValues","loading","setLoading","error","setError","get","data","map","disc","index","dsc_id","package_id_intention","handleInputChange","e","target","checked","value","type","handleDiscountChange","checkDiscount","valid","supporterCode","prom","delay","Promise","resolve","setTimeout","length","onPackageChange","parseInt","oldValues","onPaymentChange","onCashPaymentMethodChange","createToken","promise","reject","additionalData","holder_name","getElementById","result","json","JSON","parse","token","credit_card_id","debit_card_id","isCardPayment","includes","handleSubmit","preventDefault","paymentData","post","order","push","pathname","query","download_link","link","response","request","description","errors","message","color","stringify","genre","key","d","undefined","paddingTop","onChange","validationError","InvalidFeedback","SelectFormGroup","label","list","listMapValue","pluralLabel","toLowerCase","optionName","Address","argCountryId","braCountryId","chlCountryId","countryId","countries","setCountries","handleCountryChange","firstLevelLabel","firstLevelPluralLabel","firstLevelList","setFirstLevelList","parsedCountryId","params","addresses","cityLabel","thirdLevelLabel","Payment","paymentMethods","setPaymentMethods","getPaymentMethods","initSecureFields","cashPaymentMethods","setCashPaymentMethods","getCashPaymentMethods","paymentMethod","InputRadio","state","theme","radioColor","colors","background","getInitialProps","ctx","res","register_completed_at","info","set","path","redirect","end","back"],"mappings":"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","sourcesContent":["import useScript, { ScriptStatus } from '@charlietango/use-script'\nimport Head from 'next/head'\nimport Link from 'next/link'\nimport Router from 'next/router'\nimport nookies from 'nookies'\n// import sleep from 'sleep-promise'\nimport { ThemeContext } from 'styled-components'\nimport Layout from '~/components/layout/Layout'\nimport { CONFIG } from '~/config'\nimport FormGroup from '~/components/layout/AuthModal/FormGroup'\nimport Label from '~/components/layout/AuthModal/Label'\nimport Input from '~/components/layout/AuthModal/Input'\nimport Button from '~/components/button'\nimport { useContext, useEffect, useState, useCallback } from 'react'\nimport UserContext from '~/contexts/UserContext'\nimport Packages from '~/components/Packages'\nimport Select from '~/components/Select/Select'\nimport { IS_PRODUCTION, HAS_WINDOW } from '~/constants/constants'\nimport withAuth from '~/components/withAuth'\nimport Loading from '~/components/Loading/Loading'\n\n// page\nconst CompleteRegisterPage = ({ api, layoutProps, packages, user }) => {\n  const [ ready, status ] = useScript('https://js.paymentsos.com/v2/latest/secure-fields.min.js')\n  const POS = ready && HAS_WINDOW ? window.POS : null\n  const payUEnv = 'test'\n  const businessUnitPublicKey = '88985036-6530-4b5a-a7ec-c4e07ec07f6c'\n  const [ isPayUReady, setIsPayUReady ] = useState(false)\n  const POSStyle = {\n    base: {\n      borderRadius: '.15rem',\n      backgroundColor: 'white',\n      height: 'calc(1.5em + .75rem + 2px)',\n      fontSize: '12px',\n      padding:'0px 3px',\n      marginLeft: '5px',\n      cardImage: {\n        borderTopRightRadius: 0,\n        borderBottomRightRadius: 0,\n        margin: 0,\n      },\n      pan:{\n        width:'160px',\n        borderTopLeftRadius: 0,\n        borderBottomLeftRadius: 0,\n        marginLeft: 0,\n      },\n      expirationDate: { width: '47px' },\n      secureFields: { left: '40px' },\n      cvv: { width: '35px' }\n    }\n  }\n\n  if (status === ScriptStatus.ERROR) {\n    console.log('Failed to load POS API')\n  }\n\n  useEffect(_ => {\n    if (POS) {\n      POS.setPublicKey(businessUnitPublicKey)\n      POS.setEnvironment(payUEnv)\n      POS.setStyle(POSStyle)\n      POS.setCardNumberPlaceholder('Tarjeta de crÃ©dito')\n      POS.setExpirationDatePlaceholder('MM/AA');\n      setIsPayUReady(true)\n    }\n  }, [POS])\n\n  return (\n    <Layout {...layoutProps}>\n      <Head>\n        <title>ConfirmaciÃ³n &lt; Registro &lt; {CONFIG.appName}</title>\n      </Head>\n      <div className=\"rgpage container-fluid\">\n        <div className=\"row\">\n          <div className=\"col-xl-8 offset-xl-2\">\n\n            <h1 className=\"h2\">Completa tu registro</h1>\n\n            <CompleteRegisterForm {...{api, isPayUReady, packages, POS}} />\n\n          </div>\n        </div>\n      </div>\n      <style jsx>{`\n        .rgpage {\n          padding-top: 40px;\n          padding-bottom: 120px;\n        }\n        .h2 {\n          margin-bottom: 10px;\n        }\n      `}</style>\n    </Layout>\n  )\n}\n\nconst CompleteRegisterForm = ({ api, isPayUReady, packages, POS }) => {\n\n  const { id: free_package_id } = packages.items.find(item => item.amount == 0) || {}\n\n  const debug = false && ! IS_PRODUCTION\n  const requireds = IS_PRODUCTION\n\n  const { user, updateUser } = useContext(UserContext)\n\n  const [ genders, setGenders ] = useState()\n  const [ discounts, setDiscounts ] = useState(false)\n  const [ blockDiscountFields, setBlockDiscountFields ] = useState(false)\n\n  const [ values, setValues ] = useState({\n    name: '',\n    gender_id: '',\n    document: '',\n    country_id: '',\n    address_1st_level: '',\n    city: '',\n    address_3rd_level: '',\n    address: '',\n    package_id: '',\n    payment_method_id: null,\n    payment_os: null,\n    cash_payment_method_id: null,\n    terms: null,\n    discount_id: null,\n  })\n\n  const [ loading, setLoading ] = useState()\n  const [ error, setError ] = useState()\n\n  /* get genders */\n  useEffect(_ => {\n    (async _ => {\n      const {data} = await api.get('genders')\n      setGenders(data)\n    })()\n  }, [])\n\n   /* get discounts */\n   useEffect(_ => {\n    (async _ => {\n      var { data } = await api.get('discounts')\n\n      data = data.map( (disc, index) => {\n        disc.dsc_id = 'dsc_' + index\n        return disc\n      })\n\n      setDiscounts(data)\n    })()\n  }, [])\n\n  /* fill user form */\n  useEffect(_ => {\n    if (user) {\n      setValues({\n        ...values,\n        name: user.name,\n        gender_id: user.gender_id ? user.gender_id : '',\n        document: user.document ? user.document : '',\n        address: user.address ? user.address : '',\n        city: user.city ? user.city : '',\n        country_id: user.country_id ? user.country_id : '',\n        package_id: user.package_id_intention ? user.package_id_intention : '',\n      })\n    }\n  }, [user])\n\n  /* handle general input change */\n  const handleInputChange = e => {\n    const { checked, name, value, type } = e.target\n    setValues({\n      ...values,\n      [name]: type === 'checkbox' ?\n        (checked ? (value === 'true' ? true : value) : false) :\n        value,\n    })\n  }\n\n  /* handle disocunt change */\n  const handleDiscountChange = async ({target:{ name, value, id }}) => {\n\n    let valid = await checkDiscount(value)\n    // console.table(valid)\n\n    setValues({\n      ...values,\n      [name]: value,\n      discount_id: valid ? id : null\n    })\n  }\n\n  /* handle discount change */\n  const checkDiscount = async supporterCode => {\n\n    // Simulate API Call\n    const prom = (delay, value) => new Promise(resolve => setTimeout(resolve, delay, value))\n\n    return await prom(50, supporterCode.length === 5)\n\n  }\n\n  /* handle package change */\n  const onPackageChange = useCallback( e => {\n    const package_id = parseInt(e.target.value, 10)\n    setValues( oldValues => ({\n      ...oldValues,\n      package_id,\n      payment_method_id: package_id === free_package_id ? null : values.payment_method_id,\n    }))\n  },[])\n\n  /* handle payment method change */\n  function onPaymentChange(e) {\n    setValues({\n      ...values,\n      payment_method_id: parseInt(e.target.value, 10),\n      cash_payment_method_id: null,\n    })\n  }\n\n  function onCashPaymentMethodChange(e) {\n    setValues({\n      ...values,\n      cash_payment_method_id: parseInt(e.target.value, 10),\n    })\n  }\n\n  /* token */\n  async function createToken() {\n    const promise = new Promise((resolve, reject) => {\n      const additionalData = {\n        holder_name: document.getElementById('cardholder-name').value,\n        // custom_data: document.getElementById('custom').value,\n      }\n      POS.createToken(additionalData, (result) => {\n        const json = JSON.parse(result)\n        console.log('json', json)\n        json.token ? resolve(json) : reject(json)\n      })\n    })\n    return promise\n  }\n\n  // is card payment\n  const credit_card_id = 1\n  const debit_card_id = 2\n  const isCardPayment = [credit_card_id, debit_card_id].includes(values.payment_method_id)\n\n  /* submit */\n  const handleSubmit = async e => {\n    e.preventDefault()\n    setLoading(true)\n    setError(false)\n    try {\n      const paymentData = values.package_id && values.package_id !== free_package_id &&\n        values.payment_method_id && isCardPayment ? await createToken() : null\n      const data = { ...values, payment_os: paymentData }\n      if (data.country_id === '') {\n        delete data.country_id\n      }\n      if (data.address_1st_level === '') {\n        delete data.address_1st_level\n      }\n      if (data.address_3rd_level === '') {\n        delete data.address_3rd_level\n      }\n      try {\n        const { data: { user, order } } = await api.post('register/complete', data)\n        updateUser(user)\n        if (order) {\n          Router.push({\n            pathname: '/register/confirm',\n            query: {\n              download_link: order.download_link,\n              link: order.link,\n            },\n          }, '/register/confirm')\n        } else {\n          Router.push('/')\n        }\n      } catch (error) {\n        if (error.response) {\n          const { data, status } = error.response\n          if (status === 422) {\n            setError(data)\n          }\n        } else if (error.request) {\n          setError(error)\n        } else {\n          setError(error)\n        }\n      }\n    } catch (error) {\n      setError(error.description ? { errors: { payment_os: error.description } } : error)\n    }\n    setLoading(false)\n  }\n\n  return (\n    <form method=\"post\" onSubmit={handleSubmit}>\n\n      {/* main error msg */}\n      { error && error.message && (\n        <div className=\"invalid-feedback\">{error.message}</div>\n      ) }\n\n      {/* form data debug */}\n      { debug && (\n        <pre style={{ color: '#fff' }}>\n          {JSON.stringify(values, null, 2)}\n        </pre>\n      )}\n\n      <div className=\"row\">\n\n        <div className=\"col-md-6\">\n          <div className=\"data\">\n\n            {/* heading */}\n            <h3 className=\"h3\">Tus datos</h3>\n\n            {/* name */}\n            <FormGroup>\n              <Label htmlFor=\"name\">Nombre completo</Label>\n              <Input\n                id=\"name\"\n                name=\"name\"\n                onChange={handleInputChange}\n                required={requireds}\n                value={values.name}\n              />\n              <InvalidFeedback error={error} loading={loading} name=\"name\" />\n            </FormGroup>\n\n            {/* genre */}\n            <FormGroup>\n              <Label htmlFor=\"gender_id\">GÃ©nero</Label>\n              <Select\n                id=\"gender_id\"\n                name=\"gender_id\"\n                onChange={handleInputChange}\n                required={requireds}\n                value={values.gender_id}\n              >\n                { ! genders ? (\n                  <option disabled value=\"\">Cargando...</option>\n                ) : genders.length ? <>\n                  <option disabled value=\"\">Selecciona tu gÃ©nero</option>\n                  { genders.map((genre, key) => (\n                    <option {...{key}} value={genre.id}>{genre.name}</option>\n                  ))}\n                </> : (\n                  <option disabled value=\"\">Incapaz de cargar gÃ©neros</option>\n                ) }\n              </Select>\n              <InvalidFeedback error={error} loading={loading} name=\"gender_id\" />\n            </FormGroup>\n\n            {/* document */}\n            <FormGroup>\n              <Label htmlFor=\"document\">Documento</Label>\n              <Input\n                id=\"document\"\n                name=\"document\"\n                onChange={handleInputChange}\n                required={requireds}\n                type=\"text\"\n                value={values.document}\n              />\n              <InvalidFeedback error={error} loading={loading} name=\"document\" />\n            </FormGroup>\n\n            {discounts && discounts.map( d => (\n              <FormGroup key={d.id}>\n                <Label htmlFor={d.dsc_id}>{d.name}</Label>\n                <Input\n                  disabled={discounts.find(\n                    disc => (!['',undefined].includes(values[disc.dsc_id]) && disc.id != d.id)\n                  )}\n                  id={d.id}\n                  maxLength={5}\n                  name={d.dsc_id}\n                  onChange={handleDiscountChange}\n                  type=\"text\"\n                  style={values.discount_id == d.id ? {backgroundColor: 'rgb(206, 249, 206)'} : {}}\n                  value={values[d.dsc_id] || ''}\n                  readOnly={blockDiscountFields}\n                />\n                <div style={{float: 'right', paddingTop:'10px'}}>\n                  <Loading size=\"20\" color=\"white\" loadingState={values.discount_id == d.id  && blockDiscountFields}/>\n                </div>\n              </FormGroup>\n            ))}\n\n          </div>\n        </div>\n\n        {/* address */}\n        <div className=\"col-md-6\">\n          <Address\n            api={api}\n            error={error}\n            handleInputChange={handleInputChange}\n            loading={loading}\n            requireds={requireds}\n            setValues={setValues}\n            values={values}\n          />\n        </div>\n\n      </div>\n\n      {/* package selection */}\n      <Packages {...{\n        error: packages.error ? packages.error : null,\n        items: packages.items ? packages.items : null,\n        onChange: onPackageChange,\n        package_id: values.package_id,\n        validationError: ! loading && error && error.errors && error.errors.package_id,\n        discount_id: values.discount_id,\n        setBlockDiscountFields,\n      }} />\n\n      {/* payment */}\n      { values.package_id && values.package_id !== free_package_id && (\n        <Payment {...{\n          api,\n          cash_payment_method_id: values.cash_payment_method_id,\n          error,\n          isCardPayment,\n          isPayUReady,\n          loading,\n          onCashPaymentMethodChange,\n          onChange: onPaymentChange,\n          payment_method_id: values.payment_method_id,\n          POS,\n          requireds,\n          validationError: ! loading && error && error.errors && error.errors.payment_method_id,\n        }} />\n      ) }\n\n      {/* footer */}\n      <div className=\"row align-items-center\">\n\n        {/* terms */}\n        <div className=\"col-md-6 offset-md-4\">\n          <label className=\"terms\">\n            <input\n              checked={values.terms}\n              name=\"terms\"\n              onChange={handleInputChange}\n              required={requireds}\n              type=\"checkbox\"\n              value={`true`}\n            />\n            <span>He leÃ­do y acepto <Link href=\"/terminos-y-politicas\">\n                <a target=\"_blank\">el contrato</a>\n              </Link> de {CONFIG.appName}</span>\n          </label>\n          <InvalidFeedback error={error} loading={loading} name=\"terms\" />\n        </div>\n\n        {/* send btn */}\n        <div className=\"col-md-2 text-right\">\n          <Button block color=\"secondary\" disabled={loading} type=\"submit\">Enviar</Button>\n        </div>\n\n      </div>\n\n      <style jsx>{`\n        :global(.h3) {\n          font-size: 20px;\n          font-weight: bold;\n          margin-bottom: 10px;\n        }\n        hr,\n        .hr {\n          margin-top: 0;\n          margin-bottom: 15px;\n        }\n        .terms {\n          font-size: 18px;\n        }\n        .terms input {\n          margin-right: 5px;\n        }\n      `}</style>\n    </form>\n  )\n}\n\nconst InvalidFeedback = ({error, loading, name}) => {\n  return (\n    <>\n      { ! loading && error && error.errors && error.errors[name] && (\n        <div className=\"invalid-feedback\">{error.errors[name]}</div>\n      )}\n    </>\n  )\n}\n\nconst SelectFormGroup = ({ error, label, list, listMapValue = null, loading, name, onChange, pluralLabel, requireds, value }) => {\n  return (\n    <FormGroup>\n      <Label htmlFor={name}>{label}</Label>\n      <Select\n        id={name}\n        name={name}\n        onChange={onChange}\n        required={requireds}\n        value={value}\n      >\n        { ! list ? (\n          <option disabled value=\"\">Cargando...</option>\n        ) : list.length ? <>\n          <option disabled value=\"\">Selecciona tu {label.toLowerCase()}</option>\n          { list.map((item, key) => {\n            const value = listMapValue ? item[listMapValue] : item\n            const optionName = listMapValue ? item.name : item\n            return (\n              <option key={key} value={value}>{optionName}</option>\n            )\n          })}\n        </> : (\n          <option disabled value=\"\">Incapaz de cargar {pluralLabel}</option>\n        ) }\n      </Select>\n      <InvalidFeedback error={error} loading={loading} name={name} />\n    </FormGroup>\n  )\n}\n\nconst Address = ({\n  api,\n  error,\n  handleInputChange,\n  setValues,\n  loading,\n  requireds,\n  values,\n}) => {\n\n  const argCountryId = 11\n  const braCountryId = 32\n  const chlCountryId = 48\n\n  const { country_id: countryId, address_1st_level, city, address_3rd_level, address } = values\n\n  const [ countries, setCountries ] = useState()\n\n  useEffect( _ => {\n    (async _ => {\n      const { data } = await api.get('countries')\n      setCountries(data)\n    })()\n  }, [])\n\n  const handleCountryChange = e => {\n    const { name, value } = e.target\n    setValues({\n      ...values,\n      [name]: value,\n      address_1st_level: '',\n    })\n  }\n\n  const firstLevelLabel = countryId == argCountryId ? 'Provincia' :\n  countryId == braCountryId ? 'Estado' :\n  countryId == chlCountryId ? 'RegiÃ³n' :\n  'State'\n\n  const firstLevelPluralLabel = countryId == argCountryId ? 'Provincias' :\n  countryId == braCountryId ? 'Estados' :\n  countryId == chlCountryId ? 'Regiones' :\n  'States'\n\n  const [ firstLevelList, setFirstLevelList ] = useState()\n\n  useEffect(_ => {\n    (async _ => {\n      const parsedCountryId = parseInt(countryId)\n      const { data: addresses } = [argCountryId, braCountryId, chlCountryId].includes(parsedCountryId) ?\n        await api.get('address-1st-levels', {\n          params: {\n            country_id: countryId,\n          },\n        }) : { data: null }\n        setFirstLevelList(addresses)\n    })()\n  }, [countryId])\n\n  const cityLabel = countryId == braCountryId ? 'Cidade' :\n  countryId == chlCountryId ? 'Provincia' :\n  'Ciudad'\n\n  const thirdLevelLabel = countryId == chlCountryId ? 'Comuna' : 'District'\n\n  return (\n    <div className=\"address\">\n      <h3 className=\"h3\">UbicaciÃ³n</h3>\n\n      {/* country */}\n      <SelectFormGroup\n        error={error}\n        label=\"PaÃ­s\"\n        loading={loading}\n        list={countries}\n        listMapValue=\"id\"\n        name=\"country_id\"\n        onChange={handleCountryChange}\n        pluralLabel=\"PaÃ­ses\"\n        requireds={requireds}\n        value={countryId}\n      />\n\n      {/* 1st level */}\n      {[argCountryId, braCountryId, chlCountryId].map(id => id+'').includes(countryId) && (\n        <SelectFormGroup\n          error={error}\n          label={firstLevelLabel}\n          loading={loading}\n          list={firstLevelList}\n          listMapValue=\"id\"\n          name=\"address_1st_level\"\n          onChange={handleInputChange}\n          pluralLabel={firstLevelPluralLabel}\n          requireds={requireds}\n          value={address_1st_level}\n        />\n      )}\n\n      {/* city */}\n      {[braCountryId, chlCountryId].map(id => id+'').includes(countryId) && (\n        <FormGroup>\n          <Label htmlFor=\"city\">{cityLabel}</Label>\n          <Input\n            id=\"city\"\n            name=\"city\"\n            onChange={handleInputChange}\n            required={requireds}\n            type=\"text\"\n            value={city}\n          />\n          <InvalidFeedback error={error} loading={loading} name=\"city\" />\n        </FormGroup>\n      )}\n\n      {/* 3rd level */}\n      {[chlCountryId].map(id => id+'').includes(countryId) && (\n        <FormGroup>\n          <Label htmlFor=\"address_3rd_level\">{thirdLevelLabel}</Label>\n          <Input\n            id=\"address_3rd_level\"\n            name=\"address_3rd_level\"\n            onChange={handleInputChange}\n            required={requireds}\n            type=\"text\"\n            value={address_3rd_level}\n          />\n          <InvalidFeedback error={error} loading={loading} name=\"address_3rd_level\" />\n        </FormGroup>\n      )}\n\n      <FormGroup>\n        <Label htmlFor=\"address\">DirecciÃ³n</Label>\n        <Input\n          id=\"address\"\n          name=\"address\"\n          onChange={handleInputChange}\n          required={requireds}\n          type=\"text\"\n          value={address}\n        />\n        <InvalidFeedback error={error} loading={loading} name=\"address\" />\n      </FormGroup>\n\n    </div>\n  )\n}\n\nconst Payment = ({\n  api,\n  cash_payment_method_id,\n  error,\n  isCardPayment,\n  isPayUReady,\n  loading,\n  onCashPaymentMethodChange,\n  onChange,\n  payment_method_id,\n  POS,\n  requireds,\n  validationError\n}) => {\n\n  // payment methods\n  const [ paymentMethods, setPaymentMethods ] = useState()\n\n  // get payment methods\n  useEffect( _ => {\n    const getPaymentMethods = async _ => {\n      const { data } = await api.get('payment-methods')\n      setPaymentMethods(data)\n    }\n    getPaymentMethods()\n  }, [])\n\n  // init card secure fields\n  useEffect(_ => {\n    if (isPayUReady && isCardPayment) {\n      POS.initSecureFields('card-secure-fields')\n    }\n  }, [isPayUReady, isCardPayment])\n\n  // cash payment methods\n  const [ cashPaymentMethods, setCashPaymentMethods ] = useState()\n\n  // get cash payment methods\n  useEffect( _ => {\n    const getCashPaymentMethods = async _ => {\n      const { data } = await api.get('cash-payment-methods')\n      setCashPaymentMethods(data)\n    }\n    getCashPaymentMethods()\n  }, [])\n\n\n  return (\n    <div className=\"row\">\n      <div className=\"offset-md-2 col-md-8\">\n\n        <h3 className=\"h3\">Pago</h3>\n\n        <div className=\"row\">\n\n            <div className=\"col-md-6\">\n              <FormGroup>\n                { paymentMethods && paymentMethods.map((paymentMethod, key) => (\n                  <InputRadio\n                    key={key}\n                    label={paymentMethod.name}\n                    name=\"payment\"\n                    onChange={onChange}\n                    state={payment_method_id}\n                    value={paymentMethod.id}\n                  />\n                )) }\n                { validationError && (\n                  <div className=\"invalid-feedback\">{validationError}</div>\n                ) }\n              </FormGroup>\n            </div>\n\n            <div className=\"col-md-6\">\n\n              {/* credit / debit card */}\n              {isCardPayment ? (\n                <div className=\"card-inputs\">\n\n                  {/* mandatory data */}\n                  <FormGroup>\n                    <Label htmlFor=\"cardholder-name\">Nombre impreso en tarjeta</Label>\n                    <Input id=\"cardholder-name\" name=\"cardholder-name\" required={requireds} type=\"text\" />\n                  </FormGroup>\n\n                  {/* card fields */}\n                  <FormGroup>\n                    <div id=\"card-secure-fields\" />\n                    <InvalidFeedback error={error} loading={loading} name=\"payment_os\" />\n                  </FormGroup>\n\n                  {/* <FormGroup>\n                    <Label htmlFor=\"creditCardName\">Nombre impreso</Label>\n                    <Input id=\"creditCardName\" name=\"creditCardName\" required={requireds} type=\"text\" />\n                  </FormGroup>\n                  <FormGroup>\n                    <Label htmlFor=\"creditCardNumber\">Numero</Label>\n                    <Input id=\"creditCardNumber\" name=\"creditCardNumber\" required={requireds} type=\"text\" />\n                  </FormGroup>\n                  <div className=\"row\">\n                    <div className=\"col-6\">\n                      <FormGroup>\n                        <Label htmlFor=\"creditCardDate\">Validez</Label>\n                        <Input id=\"creditCardDate\" name=\"creditCardDate\" required={requireds} type=\"text\" />\n                      </FormGroup>\n                    </div>\n                    <div className=\"col-6\">\n                      <FormGroup>\n                        <Label htmlFor=\"creditCardCode\">\n                          <abbr title=\"CÃ³digo de seguridad\">CVV</abbr>\n                        </Label>\n                        <Input id=\"creditCardCode\" name=\"creditCardCode\" required={requireds} type=\"text\" />\n                      </FormGroup>\n                    </div>\n                  </div> */}\n\n                </div>\n\n              // cash payment methods\n              ) : payment_method_id === 3 && (\n                <FormGroup>\n                  {cashPaymentMethods == null ? (\n                    <p>Cargando...</p>\n                  ) : cashPaymentMethods.length ? cashPaymentMethods.map((item, key) => (\n                    <InputRadio\n                      key={key}\n                      label={item.name}\n                      name=\"cash_payment_method_id\"\n                      onChange={onCashPaymentMethodChange}\n                      state={cash_payment_method_id}\n                      value={item.id}\n                    />\n                  )) : (\n                    <p>Sin mÃ©todo de pago configurado.</p>\n                  )}\n                  <InvalidFeedback error={error} loading={loading} name=\"cash_payment_method_id\" />\n                </FormGroup>\n              ) }\n              </div>\n          </div>\n\n      </div>\n      <style jsx>{`\n        @media (min-width: 768px) {\n          .card-inputs {\n            margin-top: -21px;\n          }\n        }\n      `}</style>\n    </div>\n  )\n}\n\n// Radio\nconst InputRadio = ({ label, name, onChange, state, value }) => {\n  const theme = useContext(ThemeContext)\n  const radioColor = theme.colors.background\n  return (\n    <label>\n      <input checked={state === value} type=\"radio\" {...{name, onChange, value}} />\n      <span className=\"fake-input\">\n        <span className=\"fake-radio\"></span>\n        <span>{label}</span>\n      </span>\n      <style jsx>{`\n        label {\n          display: block;\n          margin-bottom: 5px;\n          overflow: hidden;\n          position: relative;\n        }\n        input {\n          opacity: 0;\n          position: absolute;\n        }\n        .fake-input {\n          border: 2px solid var(--primary);\n          border-radius: 4px;\n          display: block;\n          font-size: 1rem;\n          line-height: 1.4;\n          padding: .375rem .75rem;\n          transition: background-color .3s, border-color .3s, color .3s;\n        }\n        .fake-radio {\n          background-color: var(--white);\n          border: 1px solid var(--gray2);\n          border-radius: 50%;\n          display: inline-block;\n          height: 15px;\n          margin-right: 7.5px;\n          padding: 1px;\n          vertical-align: -2px;\n          width: 15px;\n        }\n        .fake-radio::before {\n          background-color: ${radioColor};\n          border-radius: 50%;\n          content: '';\n          display: block;\n          opacity: 0;\n          height: 100%;\n          transition: opacity .3s;\n          width: 100%;\n        }\n        input:checked + .fake-input {\n          background-color: var(--primary);\n          color: white;\n        }\n        input:checked + .fake-input .fake-radio::before {\n          opacity: 1;\n        }\n        {/* input:focus + .fake-input {\n          border-color: var(--white);\n        } */}\n      `}</style>\n    </label>\n  )\n}\n\n// getInitialProps\nCompleteRegisterPage.getInitialProps = async ctx => {\n\n  const {api, res, user} = ctx\n\n  // if user has already completed registry, redirect it\n  if (user.register_completed_at) {\n    let message = JSON.stringify({ info: \"Ya ha completado su registro.\" })\n    nookies.set(ctx, 'flash_message', message, { path: '/' })\n    if (res) {\n      res.redirect('/')\n      res.end()\n      return { }\n    } else {\n      Router.back()\n    }\n  }\n\n  // get packages\n  let packages\n  try {\n    const { data } = await api.get('packages')\n    packages = { items: data }\n  } catch(error) {\n    packages = { error }\n  }\n\n  // return\n  return { packages, user }\n}\n\n// export\nexport default withAuth(CompleteRegisterPage)\n"]},"metadata":{},"sourceType":"module"}