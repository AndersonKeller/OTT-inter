{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _s = $RefreshSig$();\n\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useEffect, useState } from \"react\";\nimport FormGroup from \"~/components/layout/AuthModal/FormGroup\";\nimport Label from \"~/components/layout/AuthModal/Label\";\nimport Input from \"~/components/layout/AuthModal/Input\";\nimport InputRadio from \"~/components/Form/InputRadio\";\nimport withAuth from \"~/components/withAuth\";\nimport InvalidFeedback from \"~/components/Form/InvalidFeedback\";\nimport { HAS_WINDOW } from \"~/constants/constants\";\nimport useScript from \"@charlietango/use-script\";\nimport Select from \"~/components/Select/Select\";\nimport Button from \"~/components/button\";\n\nvar Payment = function Payment(_ref) {\n  _s();\n\n  var layoutProps = _ref.layoutProps,\n      package_id = _ref.package_id,\n      packages = _ref.packages,\n      api = _ref.api,\n      error = _ref.error,\n      requireds = _ref.requireds;\n\n  var _useScript = useScript('https://js.paymentsos.com/v2/latest/secure-fields.min.js'),\n      _useScript2 = _slicedToArray(_useScript, 2),\n      ready = _useScript2[0],\n      status = _useScript2[1];\n\n  var _useState = useState({\n    package_id: '',\n    payment_method_id: null,\n    payment_os: null,\n    cash_payment_method_id: null,\n    terms: null,\n    discount_id: null\n  }),\n      values = _useState[0],\n      setValues = _useState[1];\n\n  var _useState2 = useState(),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var payUEnv = 'test';\n  var businessUnitPublicKey = '88985036-6530-4b5a-a7ec-c4e07ec07f6c';\n\n  var _useState3 = useState(false),\n      isPayUReady = _useState3[0],\n      setIsPayUReady = _useState3[1];\n\n  var POS = ready && HAS_WINDOW ? window.POS : null;\n  var credit_card_id = 1;\n  var debit_card_id = 2;\n  var isCardPayment = [credit_card_id, debit_card_id].includes(values.payment_method_id);\n  var POSStyle = {\n    base: {\n      borderRadius: '.15rem',\n      backgroundColor: 'white',\n      height: 'calc(1.5em + .75rem + 2px)',\n      fontSize: '12px',\n      padding: '0px 3px',\n      marginLeft: '5px',\n      cardImage: {\n        borderTopRightRadius: 0,\n        borderBottomRightRadius: 0,\n        margin: 0\n      },\n      pan: {\n        width: '160px',\n        borderTopLeftRadius: 0,\n        borderBottomLeftRadius: 0,\n        marginLeft: 0\n      },\n      expirationDate: {\n        width: '47px'\n      },\n      secureFields: {\n        left: '40px'\n      },\n      cvv: {\n        width: '35px'\n      }\n    }\n  };\n  useEffect(function (_) {\n    if (POS) {\n      POS.setPublicKey(businessUnitPublicKey);\n      POS.setEnvironment(payUEnv);\n      POS.setStyle(POSStyle);\n      POS.setCardNumberPlaceholder('Tarjeta de crÃ©dito');\n      POS.setExpirationDatePlaceholder('MM/AA');\n      setIsPayUReady(true);\n    }\n  }, [POS]);\n  /* handle payment method change */\n\n  function onPaymentChange(e) {\n    setValues(_objectSpread(_objectSpread({}, values), {}, {\n      payment_method_id: parseInt(e.target.value, 10),\n      cash_payment_method_id: null\n    }));\n  }\n\n  function onCashPaymentMethodChange(e) {\n    setValues(_objectSpread(_objectSpread({}, values), {}, {\n      cash_payment_method_id: parseInt(e.target.value, 10)\n    }));\n  }\n\n  var handleInputChange = function handleInputChange(e) {\n    var _e$target = e.target,\n        checked = _e$target.checked,\n        name = _e$target.name,\n        value = _e$target.value,\n        type = _e$target.type;\n    setValues(_objectSpread(_objectSpread({}, values), {}, _defineProperty({}, name, type === 'checkbox' ? checked ? value === 'true' ? true : value : false : value)));\n  }; // payment methods\n\n\n  var _useState4 = useState(),\n      paymentMethods = _useState4[0],\n      setPaymentMethods = _useState4[1]; // get payment methods\n\n\n  useEffect(function (_) {\n    var getPaymentMethods = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_) {\n        var _yield$api$get, data;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return api.get('payment-methods');\n\n              case 2:\n                _yield$api$get = _context.sent;\n                data = _yield$api$get.data;\n                setPaymentMethods(data);\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function getPaymentMethods(_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    getPaymentMethods();\n  }, []); // init card secure fields\n\n  useEffect(function (_) {\n    if (isPayUReady && isCardPayment) {\n      POS.initSecureFields('card-secure-fields');\n    }\n  }, [isPayUReady, isCardPayment]); // cash payment methods\n\n  var _useState5 = useState(),\n      cashPaymentMethods = _useState5[0],\n      setCashPaymentMethods = _useState5[1]; // get cash payment methods\n\n\n  useEffect(function (_) {\n    var getCashPaymentMethods = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_) {\n        var _yield$api$get2, data;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return api.get('cash-payment-methods');\n\n              case 2:\n                _yield$api$get2 = _context2.sent;\n                data = _yield$api$get2.data;\n                setCashPaymentMethods(data);\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function getCashPaymentMethods(_x2) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    getCashPaymentMethods();\n  }, []);\n  return __jsx(\"div\", {\n    className: \"jsx-150711247\" + \" \" + \"row\"\n  }, __jsx(\"div\", {\n    className: \"jsx-150711247\" + \" \" + \"offset-md-2 col-md-8\"\n  }, __jsx(\"h3\", {\n    className: \"jsx-150711247\" + \" \" + \"h3\"\n  }, \"Pago \", package_id, \" \"), __jsx(\"div\", {\n    className: \"jsx-150711247\" + \" \" + \"row\"\n  }, __jsx(\"div\", {\n    className: \"jsx-150711247\" + \" \" + \"col-md-6\"\n  }, __jsx(\"div\", {\n    \"class\": \"mb-5\",\n    className: \"jsx-150711247\"\n  }, __jsx(FormGroup, null, __jsx(Select, {\n    id: \"payment_method_id\",\n    name: \"payment_method_id\",\n    required: requireds,\n    onChange: onPaymentChange,\n    value: values.payment_method_id\n  }, __jsx(\"option\", {\n    value: \"0\",\n    className: \"jsx-150711247\"\n  }, \"Selecione\"), paymentMethods && paymentMethods.map(function (paymentMethod, key) {\n    return __jsx(\"option\", {\n      state: values.payment_method_id,\n      value: paymentMethod.id,\n      className: \"jsx-150711247\"\n    }, paymentMethod.name);\n  })), __jsx(InvalidFeedback, {\n    error: error,\n    loading: loading,\n    name: \"gender_id\"\n  }))), __jsx(\"div\", {\n    className: \"jsx-150711247\"\n  }, isCardPayment ? __jsx(\"div\", {\n    className: \"jsx-150711247\" + \" \" + \"card-inputs\"\n  }, __jsx(FormGroup, null, __jsx(Label, {\n    htmlFor: \"cardholder-name\"\n  }, \"Nombre impreso en tarjeta\"), __jsx(Input, {\n    id: \"cardholder-name\",\n    name: \"cardholder-name\",\n    required: requireds,\n    type: \"text\"\n  })), __jsx(FormGroup, null, __jsx(\"div\", {\n    id: \"card-secure-fields\",\n    className: \"jsx-150711247\"\n  }), __jsx(InvalidFeedback, {\n    error: error,\n    loading: loading,\n    name: \"payment_os\"\n  })), __jsx(Button, {\n    block: true,\n    color: \"secondary\",\n    type: \"submit\",\n    disabled: loading,\n    loading: loading\n  }, \"Pagar\")) // cash payment methods\n  : values.payment_method_id === 3 && __jsx(FormGroup, null, cashPaymentMethods == null ? __jsx(\"p\", {\n    className: \"jsx-150711247\"\n  }, \"Cargando...\") : cashPaymentMethods.length ? cashPaymentMethods.map(function (item, key) {\n    return __jsx(InputRadio, {\n      key: key,\n      label: item.name,\n      name: \"cash_payment_method_id\",\n      onChange: onCashPaymentMethodChange,\n      state: values.cash_payment_method_id,\n      value: item.id\n    });\n  }) : __jsx(\"p\", {\n    className: \"jsx-150711247\"\n  }, \"Sin m\\xE9todo de pago configurado.\"), __jsx(InvalidFeedback, {\n    error: error,\n    loading: loading,\n    name: \"cash_payment_method_id\"\n  }), __jsx(Button, {\n    block: true,\n    color: \"secondary\",\n    type: \"submit\",\n    disabled: loading,\n    loading: loading\n  }, \"Pagar\")))), __jsx(\"div\", {\n    className: \"jsx-150711247\" + \" \" + \"col-md-6\"\n  }))), __jsx(_JSXStyle, {\n    id: \"150711247\"\n  }, \"@media (min-width:768px){}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9yYWZhZWwvUHJvamVjdHMvc29tb3NnYWQvZGFsZS9wYWdlcy9yZWdpc3Rlci93aXphcmQvcGF5bWVudC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUErTm1CIiwiZmlsZSI6Ii9Vc2Vycy9yYWZhZWwvUHJvamVjdHMvc29tb3NnYWQvZGFsZS9wYWdlcy9yZWdpc3Rlci93aXphcmQvcGF5bWVudC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBGb3JtR3JvdXAgZnJvbSBcIn4vY29tcG9uZW50cy9sYXlvdXQvQXV0aE1vZGFsL0Zvcm1Hcm91cFwiO1xuaW1wb3J0IExhYmVsIGZyb20gXCJ+L2NvbXBvbmVudHMvbGF5b3V0L0F1dGhNb2RhbC9MYWJlbFwiO1xuaW1wb3J0IElucHV0IGZyb20gXCJ+L2NvbXBvbmVudHMvbGF5b3V0L0F1dGhNb2RhbC9JbnB1dFwiO1xuaW1wb3J0IElucHV0UmFkaW8gZnJvbSBcIn4vY29tcG9uZW50cy9Gb3JtL0lucHV0UmFkaW9cIjtcbmltcG9ydCB3aXRoQXV0aCBmcm9tIFwifi9jb21wb25lbnRzL3dpdGhBdXRoXCI7XG5pbXBvcnQgSW52YWxpZEZlZWRiYWNrIGZyb20gXCJ+L2NvbXBvbmVudHMvRm9ybS9JbnZhbGlkRmVlZGJhY2tcIlxuaW1wb3J0IHsgSEFTX1dJTkRPVyB9IGZyb20gXCJ+L2NvbnN0YW50cy9jb25zdGFudHNcIjtcbmltcG9ydCB1c2VTY3JpcHQgZnJvbSBcIkBjaGFybGlldGFuZ28vdXNlLXNjcmlwdFwiO1xuaW1wb3J0IFNlbGVjdCBmcm9tIFwifi9jb21wb25lbnRzL1NlbGVjdC9TZWxlY3RcIjtcbmltcG9ydCBCdXR0b24gZnJvbSBcIn4vY29tcG9uZW50cy9idXR0b25cIjtcblxuY29uc3QgUGF5bWVudCA9ICh7XG4gICAgICAgICAgICAgICAgICAgbGF5b3V0UHJvcHMsXG4gICAgICAgICAgICAgICAgICAgcGFja2FnZV9pZCxcbiAgICAgICAgICAgICAgICAgICBwYWNrYWdlcyxcbiAgICAgICAgICAgICAgICAgICBhcGksXG4gICAgICAgICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICAgICAgICAgcmVxdWlyZWRzXG4gICAgICAgICAgICAgICAgIH0pID0+IHtcblxuICBjb25zdCBbcmVhZHksIHN0YXR1c10gPSB1c2VTY3JpcHQoJ2h0dHBzOi8vanMucGF5bWVudHNvcy5jb20vdjIvbGF0ZXN0L3NlY3VyZS1maWVsZHMubWluLmpzJylcblxuICBjb25zdCBbdmFsdWVzLCBzZXRWYWx1ZXNdID0gdXNlU3RhdGUoe1xuICAgIHBhY2thZ2VfaWQ6ICcnLFxuICAgIHBheW1lbnRfbWV0aG9kX2lkOiBudWxsLFxuICAgIHBheW1lbnRfb3M6IG51bGwsXG4gICAgY2FzaF9wYXltZW50X21ldGhvZF9pZDogbnVsbCxcbiAgICB0ZXJtczogbnVsbCxcbiAgICBkaXNjb3VudF9pZDogbnVsbCxcbiAgfSlcblxuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZSgpO1xuXG4gIGNvbnN0IHBheVVFbnYgPSAndGVzdCdcbiAgY29uc3QgYnVzaW5lc3NVbml0UHVibGljS2V5ID0gJzg4OTg1MDM2LTY1MzAtNGI1YS1hN2VjLWM0ZTA3ZWMwN2Y2YydcbiAgY29uc3QgW2lzUGF5VVJlYWR5LCBzZXRJc1BheVVSZWFkeV0gPSB1c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgUE9TID0gcmVhZHkgJiYgSEFTX1dJTkRPVyA/IHdpbmRvdy5QT1MgOiBudWxsXG4gIGNvbnN0IGNyZWRpdF9jYXJkX2lkID0gMVxuICBjb25zdCBkZWJpdF9jYXJkX2lkID0gMlxuICBjb25zdCBpc0NhcmRQYXltZW50ID0gW2NyZWRpdF9jYXJkX2lkLCBkZWJpdF9jYXJkX2lkXS5pbmNsdWRlcyh2YWx1ZXMucGF5bWVudF9tZXRob2RfaWQpXG5cblxuICBjb25zdCBQT1NTdHlsZSA9IHtcbiAgICBiYXNlOiB7XG4gICAgICBib3JkZXJSYWRpdXM6ICcuMTVyZW0nLFxuICAgICAgYmFja2dyb3VuZENvbG9yOiAnd2hpdGUnLFxuICAgICAgaGVpZ2h0OiAnY2FsYygxLjVlbSArIC43NXJlbSArIDJweCknLFxuICAgICAgZm9udFNpemU6ICcxMnB4JyxcbiAgICAgIHBhZGRpbmc6ICcwcHggM3B4JyxcbiAgICAgIG1hcmdpbkxlZnQ6ICc1cHgnLFxuICAgICAgY2FyZEltYWdlOiB7XG4gICAgICAgIGJvcmRlclRvcFJpZ2h0UmFkaXVzOiAwLFxuICAgICAgICBib3JkZXJCb3R0b21SaWdodFJhZGl1czogMCxcbiAgICAgICAgbWFyZ2luOiAwLFxuICAgICAgfSxcbiAgICAgIHBhbjoge1xuICAgICAgICB3aWR0aDogJzE2MHB4JyxcbiAgICAgICAgYm9yZGVyVG9wTGVmdFJhZGl1czogMCxcbiAgICAgICAgYm9yZGVyQm90dG9tTGVmdFJhZGl1czogMCxcbiAgICAgICAgbWFyZ2luTGVmdDogMCxcbiAgICAgIH0sXG4gICAgICBleHBpcmF0aW9uRGF0ZTogeyB3aWR0aDogJzQ3cHgnIH0sXG4gICAgICBzZWN1cmVGaWVsZHM6IHsgbGVmdDogJzQwcHgnIH0sXG4gICAgICBjdnY6IHsgd2lkdGg6ICczNXB4JyB9XG4gICAgfVxuICB9XG5cblxuICB1c2VFZmZlY3QoXyA9PiB7XG4gICAgaWYgKFBPUykge1xuICAgICAgUE9TLnNldFB1YmxpY0tleShidXNpbmVzc1VuaXRQdWJsaWNLZXkpXG4gICAgICBQT1Muc2V0RW52aXJvbm1lbnQocGF5VUVudilcbiAgICAgIFBPUy5zZXRTdHlsZShQT1NTdHlsZSlcbiAgICAgIFBPUy5zZXRDYXJkTnVtYmVyUGxhY2Vob2xkZXIoJ1RhcmpldGEgZGUgY3LDqWRpdG8nKVxuICAgICAgUE9TLnNldEV4cGlyYXRpb25EYXRlUGxhY2Vob2xkZXIoJ01NL0FBJyk7XG4gICAgICBzZXRJc1BheVVSZWFkeSh0cnVlKVxuICAgIH1cbiAgfSwgW1BPU10pXG5cblxuICAvKiBoYW5kbGUgcGF5bWVudCBtZXRob2QgY2hhbmdlICovXG4gIGZ1bmN0aW9uIG9uUGF5bWVudENoYW5nZShlKSB7XG4gICAgc2V0VmFsdWVzKHtcbiAgICAgIC4uLnZhbHVlcyxcbiAgICAgIHBheW1lbnRfbWV0aG9kX2lkOiBwYXJzZUludChlLnRhcmdldC52YWx1ZSwgMTApLFxuICAgICAgY2FzaF9wYXltZW50X21ldGhvZF9pZDogbnVsbCxcbiAgICB9KVxuICB9XG5cbiAgZnVuY3Rpb24gb25DYXNoUGF5bWVudE1ldGhvZENoYW5nZShlKSB7XG4gICAgc2V0VmFsdWVzKHtcbiAgICAgIC4uLnZhbHVlcyxcbiAgICAgIGNhc2hfcGF5bWVudF9tZXRob2RfaWQ6IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlLCAxMCksXG4gICAgfSlcbiAgfVxuXG4gIGNvbnN0IGhhbmRsZUlucHV0Q2hhbmdlID0gZSA9PiB7XG4gICAgY29uc3QgeyBjaGVja2VkLCBuYW1lLCB2YWx1ZSwgdHlwZSB9ID0gZS50YXJnZXRcbiAgICBzZXRWYWx1ZXMoe1xuICAgICAgLi4udmFsdWVzLFxuICAgICAgW25hbWVdOiB0eXBlID09PSAnY2hlY2tib3gnID9cbiAgICAgICAgKGNoZWNrZWQgPyAodmFsdWUgPT09ICd0cnVlJyA/IHRydWUgOiB2YWx1ZSkgOiBmYWxzZSkgOlxuICAgICAgICB2YWx1ZSxcbiAgICB9KVxuICB9XG5cbiAgLy8gcGF5bWVudCBtZXRob2RzXG4gIGNvbnN0IFtwYXltZW50TWV0aG9kcywgc2V0UGF5bWVudE1ldGhvZHNdID0gdXNlU3RhdGUoKVxuXG4gIC8vIGdldCBwYXltZW50IG1ldGhvZHNcbiAgdXNlRWZmZWN0KF8gPT4ge1xuICAgIGNvbnN0IGdldFBheW1lbnRNZXRob2RzID0gYXN5bmMgXyA9PiB7XG4gICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGFwaS5nZXQoJ3BheW1lbnQtbWV0aG9kcycpXG4gICAgICBzZXRQYXltZW50TWV0aG9kcyhkYXRhKVxuICAgIH1cbiAgICBnZXRQYXltZW50TWV0aG9kcygpXG4gIH0sIFtdKVxuXG4gIC8vIGluaXQgY2FyZCBzZWN1cmUgZmllbGRzXG4gIHVzZUVmZmVjdChfID0+IHtcbiAgICBpZiAoaXNQYXlVUmVhZHkgJiYgaXNDYXJkUGF5bWVudCkge1xuICAgICAgUE9TLmluaXRTZWN1cmVGaWVsZHMoJ2NhcmQtc2VjdXJlLWZpZWxkcycpXG4gICAgfVxuICB9LCBbaXNQYXlVUmVhZHksIGlzQ2FyZFBheW1lbnRdKVxuXG4gIC8vIGNhc2ggcGF5bWVudCBtZXRob2RzXG4gIGNvbnN0IFtjYXNoUGF5bWVudE1ldGhvZHMsIHNldENhc2hQYXltZW50TWV0aG9kc10gPSB1c2VTdGF0ZSgpXG5cbiAgLy8gZ2V0IGNhc2ggcGF5bWVudCBtZXRob2RzXG4gIHVzZUVmZmVjdChfID0+IHtcbiAgICBjb25zdCBnZXRDYXNoUGF5bWVudE1ldGhvZHMgPSBhc3luYyBfID0+IHtcbiAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYXBpLmdldCgnY2FzaC1wYXltZW50LW1ldGhvZHMnKVxuICAgICAgc2V0Q2FzaFBheW1lbnRNZXRob2RzKGRhdGEpXG4gICAgfVxuICAgIGdldENhc2hQYXltZW50TWV0aG9kcygpXG4gIH0sIFtdKVxuXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJvZmZzZXQtbWQtMiBjb2wtbWQtOFwiPlxuXG4gICAgICAgIDxoMyBjbGFzc05hbWU9XCJoM1wiPlBhZ28geyBwYWNrYWdlX2lkIH0gPC9oMz5cblxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtbWQtNlwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1iLTVcIj5cbiAgICAgICAgICAgICAgPEZvcm1Hcm91cD5cbiAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICBpZD1cInBheW1lbnRfbWV0aG9kX2lkXCJcbiAgICAgICAgICAgICAgICAgIG5hbWU9XCJwYXltZW50X21ldGhvZF9pZFwiXG4gICAgICAgICAgICAgICAgICByZXF1aXJlZD17IHJlcXVpcmVkcyB9XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17IG9uUGF5bWVudENoYW5nZSB9XG4gICAgICAgICAgICAgICAgICB2YWx1ZT17IHZhbHVlcy5wYXltZW50X21ldGhvZF9pZCB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjBcIj5TZWxlY2lvbmU8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgIHsgcGF5bWVudE1ldGhvZHMgJiYgcGF5bWVudE1ldGhvZHMubWFwKChwYXltZW50TWV0aG9kLCBrZXkpID0+IChcbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvblxuICAgICAgICAgICAgICAgICAgICAgIHN0YXRlPXsgdmFsdWVzLnBheW1lbnRfbWV0aG9kX2lkIH1cbiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17IHBheW1lbnRNZXRob2QuaWQgfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgeyBwYXltZW50TWV0aG9kLm5hbWUgfVxuICAgICAgICAgICAgICAgICAgICA8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICkpIH1cbiAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICA8SW52YWxpZEZlZWRiYWNrIGVycm9yPXsgZXJyb3IgfSBsb2FkaW5nPXsgbG9hZGluZyB9IG5hbWU9XCJnZW5kZXJfaWRcIi8+XG4gICAgICAgICAgICAgIDwvRm9ybUdyb3VwPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICB7LyogY3JlZGl0IC8gZGViaXQgY2FyZCAqLyB9XG4gICAgICAgICAgICAgIHsgaXNDYXJkUGF5bWVudCA/IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtaW5wdXRzXCI+XG5cbiAgICAgICAgICAgICAgICAgIHsvKiBtYW5kYXRvcnkgZGF0YSAqLyB9XG4gICAgICAgICAgICAgICAgICA8Rm9ybUdyb3VwPlxuICAgICAgICAgICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj1cImNhcmRob2xkZXItbmFtZVwiPk5vbWJyZSBpbXByZXNvIGVuIHRhcmpldGE8L0xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8SW5wdXQgaWQ9XCJjYXJkaG9sZGVyLW5hbWVcIiBuYW1lPVwiY2FyZGhvbGRlci1uYW1lXCIgcmVxdWlyZWQ9eyByZXF1aXJlZHMgfSB0eXBlPVwidGV4dFwiLz5cbiAgICAgICAgICAgICAgICAgIDwvRm9ybUdyb3VwPlxuXG4gICAgICAgICAgICAgICAgICB7LyogY2FyZCBmaWVsZHMgKi8gfVxuICAgICAgICAgICAgICAgICAgPEZvcm1Hcm91cD5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD1cImNhcmQtc2VjdXJlLWZpZWxkc1wiLz5cbiAgICAgICAgICAgICAgICAgICAgPEludmFsaWRGZWVkYmFjayBlcnJvcj17IGVycm9yIH0gbG9hZGluZz17IGxvYWRpbmcgfSBuYW1lPVwicGF5bWVudF9vc1wiLz5cbiAgICAgICAgICAgICAgICAgIDwvRm9ybUdyb3VwPlxuXG5cbiAgICAgICAgICAgICAgICAgIDxCdXR0b24gYmxvY2sgY29sb3I9XCJzZWNvbmRhcnlcIiB0eXBlPVwic3VibWl0XCIgZGlzYWJsZWQ9eyBsb2FkaW5nIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZz17IGxvYWRpbmcgfT5QYWdhcjwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgLy8gY2FzaCBwYXltZW50IG1ldGhvZHNcbiAgICAgICAgICAgICAgKSA6IHZhbHVlcy5wYXltZW50X21ldGhvZF9pZCA9PT0gMyAmJiAoXG4gICAgICAgICAgICAgICAgPEZvcm1Hcm91cD5cbiAgICAgICAgICAgICAgICAgIHsgY2FzaFBheW1lbnRNZXRob2RzID09IG51bGwgPyAoXG4gICAgICAgICAgICAgICAgICAgIDxwPkNhcmdhbmRvLi4uPC9wPlxuICAgICAgICAgICAgICAgICAgKSA6IGNhc2hQYXltZW50TWV0aG9kcy5sZW5ndGggPyBjYXNoUGF5bWVudE1ldGhvZHMubWFwKChpdGVtLCBrZXkpID0+IChcbiAgICAgICAgICAgICAgICAgICAgPElucHV0UmFkaW9cbiAgICAgICAgICAgICAgICAgICAgICBrZXk9eyBrZXkgfVxuICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXsgaXRlbS5uYW1lIH1cbiAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiY2FzaF9wYXltZW50X21ldGhvZF9pZFwiXG4gICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyBvbkNhc2hQYXltZW50TWV0aG9kQ2hhbmdlIH1cbiAgICAgICAgICAgICAgICAgICAgICBzdGF0ZT17IHZhbHVlcy5jYXNoX3BheW1lbnRfbWV0aG9kX2lkIH1cbiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17IGl0ZW0uaWQgfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgKSkgOiAoXG4gICAgICAgICAgICAgICAgICAgIDxwPlNpbiBtw6l0b2RvIGRlIHBhZ28gY29uZmlndXJhZG8uPC9wPlxuICAgICAgICAgICAgICAgICAgKSB9XG4gICAgICAgICAgICAgICAgICA8SW52YWxpZEZlZWRiYWNrIGVycm9yPXsgZXJyb3IgfSBsb2FkaW5nPXsgbG9hZGluZyB9IG5hbWU9XCJjYXNoX3BheW1lbnRfbWV0aG9kX2lkXCIvPlxuICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBibG9jayBjb2xvcj1cInNlY29uZGFyeVwiIHR5cGU9XCJzdWJtaXRcIiBkaXNhYmxlZD17IGxvYWRpbmcgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nPXsgbG9hZGluZyB9PlBhZ2FyPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPC9Gb3JtR3JvdXA+XG4gICAgICAgICAgICAgICkgfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC02XCI+XG5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgIDwvZGl2PlxuICAgICAgPHN0eWxlIGpzeD57IGBcbiAgICAgICAgQG1lZGlhIChtaW4td2lkdGg6IDc2OHB4KSB7XG4gICAgICAgICAgLmNhcmQtaW5wdXRzIHtcbiAgICAgICAgICAgIC8vIG1hcmdpbi10b3A6IC0yMXB4O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgYCB9PC9zdHlsZT5cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCB3aXRoQXV0aChQYXltZW50LCB0cnVlKTtcbiJdfQ== */\\n/*@ sourceURL=/Users/rafael/Projects/somosgad/dale/pages/register/wizard/payment.js */\"));\n};\n\n_s(Payment, \"Lw4BR06s2q16/qgUM9frV5hObGE=\", false, function () {\n  return [useScript];\n});\n\n_c = Payment;\nexport default _c2 = withAuth(Payment, true);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Payment\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/rafael/Projects/somosgad/dale/pages/register/wizard/payment.js"],"names":["useEffect","useState","FormGroup","Label","Input","InputRadio","withAuth","InvalidFeedback","HAS_WINDOW","useScript","Select","Button","Payment","layoutProps","package_id","packages","api","error","requireds","ready","status","payment_method_id","payment_os","cash_payment_method_id","terms","discount_id","values","setValues","loading","setLoading","payUEnv","businessUnitPublicKey","isPayUReady","setIsPayUReady","POS","window","credit_card_id","debit_card_id","isCardPayment","includes","POSStyle","base","borderRadius","backgroundColor","height","fontSize","padding","marginLeft","cardImage","borderTopRightRadius","borderBottomRightRadius","margin","pan","width","borderTopLeftRadius","borderBottomLeftRadius","expirationDate","secureFields","left","cvv","_","setPublicKey","setEnvironment","setStyle","setCardNumberPlaceholder","setExpirationDatePlaceholder","onPaymentChange","e","parseInt","target","value","onCashPaymentMethodChange","handleInputChange","checked","name","type","paymentMethods","setPaymentMethods","getPaymentMethods","get","data","initSecureFields","cashPaymentMethods","setCashPaymentMethods","getCashPaymentMethods","map","paymentMethod","key","id","length","item"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport FormGroup from \"~/components/layout/AuthModal/FormGroup\";\nimport Label from \"~/components/layout/AuthModal/Label\";\nimport Input from \"~/components/layout/AuthModal/Input\";\nimport InputRadio from \"~/components/Form/InputRadio\";\nimport withAuth from \"~/components/withAuth\";\nimport InvalidFeedback from \"~/components/Form/InvalidFeedback\"\nimport { HAS_WINDOW } from \"~/constants/constants\";\nimport useScript from \"@charlietango/use-script\";\nimport Select from \"~/components/Select/Select\";\nimport Button from \"~/components/button\";\n\nconst Payment = ({\n                   layoutProps,\n                   package_id,\n                   packages,\n                   api,\n                   error,\n                   requireds\n                 }) => {\n\n  const [ready, status] = useScript('https://js.paymentsos.com/v2/latest/secure-fields.min.js')\n\n  const [values, setValues] = useState({\n    package_id: '',\n    payment_method_id: null,\n    payment_os: null,\n    cash_payment_method_id: null,\n    terms: null,\n    discount_id: null,\n  })\n\n  const [loading, setLoading] = useState();\n\n  const payUEnv = 'test'\n  const businessUnitPublicKey = '88985036-6530-4b5a-a7ec-c4e07ec07f6c'\n  const [isPayUReady, setIsPayUReady] = useState(false)\n  const POS = ready && HAS_WINDOW ? window.POS : null\n  const credit_card_id = 1\n  const debit_card_id = 2\n  const isCardPayment = [credit_card_id, debit_card_id].includes(values.payment_method_id)\n\n\n  const POSStyle = {\n    base: {\n      borderRadius: '.15rem',\n      backgroundColor: 'white',\n      height: 'calc(1.5em + .75rem + 2px)',\n      fontSize: '12px',\n      padding: '0px 3px',\n      marginLeft: '5px',\n      cardImage: {\n        borderTopRightRadius: 0,\n        borderBottomRightRadius: 0,\n        margin: 0,\n      },\n      pan: {\n        width: '160px',\n        borderTopLeftRadius: 0,\n        borderBottomLeftRadius: 0,\n        marginLeft: 0,\n      },\n      expirationDate: { width: '47px' },\n      secureFields: { left: '40px' },\n      cvv: { width: '35px' }\n    }\n  }\n\n\n  useEffect(_ => {\n    if (POS) {\n      POS.setPublicKey(businessUnitPublicKey)\n      POS.setEnvironment(payUEnv)\n      POS.setStyle(POSStyle)\n      POS.setCardNumberPlaceholder('Tarjeta de crÃ©dito')\n      POS.setExpirationDatePlaceholder('MM/AA');\n      setIsPayUReady(true)\n    }\n  }, [POS])\n\n\n  /* handle payment method change */\n  function onPaymentChange(e) {\n    setValues({\n      ...values,\n      payment_method_id: parseInt(e.target.value, 10),\n      cash_payment_method_id: null,\n    })\n  }\n\n  function onCashPaymentMethodChange(e) {\n    setValues({\n      ...values,\n      cash_payment_method_id: parseInt(e.target.value, 10),\n    })\n  }\n\n  const handleInputChange = e => {\n    const { checked, name, value, type } = e.target\n    setValues({\n      ...values,\n      [name]: type === 'checkbox' ?\n        (checked ? (value === 'true' ? true : value) : false) :\n        value,\n    })\n  }\n\n  // payment methods\n  const [paymentMethods, setPaymentMethods] = useState()\n\n  // get payment methods\n  useEffect(_ => {\n    const getPaymentMethods = async _ => {\n      const { data } = await api.get('payment-methods')\n      setPaymentMethods(data)\n    }\n    getPaymentMethods()\n  }, [])\n\n  // init card secure fields\n  useEffect(_ => {\n    if (isPayUReady && isCardPayment) {\n      POS.initSecureFields('card-secure-fields')\n    }\n  }, [isPayUReady, isCardPayment])\n\n  // cash payment methods\n  const [cashPaymentMethods, setCashPaymentMethods] = useState()\n\n  // get cash payment methods\n  useEffect(_ => {\n    const getCashPaymentMethods = async _ => {\n      const { data } = await api.get('cash-payment-methods')\n      setCashPaymentMethods(data)\n    }\n    getCashPaymentMethods()\n  }, [])\n\n\n  return (\n    <div className=\"row\">\n      <div className=\"offset-md-2 col-md-8\">\n\n        <h3 className=\"h3\">Pago { package_id } </h3>\n\n        <div className=\"row\">\n\n          <div className=\"col-md-6\">\n            <div class=\"mb-5\">\n              <FormGroup>\n                <Select\n                  id=\"payment_method_id\"\n                  name=\"payment_method_id\"\n                  required={ requireds }\n                  onChange={ onPaymentChange }\n                  value={ values.payment_method_id }\n                >\n                  <option value=\"0\">Selecione</option>\n                  { paymentMethods && paymentMethods.map((paymentMethod, key) => (\n                    <option\n                      state={ values.payment_method_id }\n                      value={ paymentMethod.id }\n                    >\n                      { paymentMethod.name }\n                    </option>\n                  )) }\n                </Select>\n                <InvalidFeedback error={ error } loading={ loading } name=\"gender_id\"/>\n              </FormGroup>\n            </div>\n            <div>\n              {/* credit / debit card */ }\n              { isCardPayment ? (\n                <div className=\"card-inputs\">\n\n                  {/* mandatory data */ }\n                  <FormGroup>\n                    <Label htmlFor=\"cardholder-name\">Nombre impreso en tarjeta</Label>\n                    <Input id=\"cardholder-name\" name=\"cardholder-name\" required={ requireds } type=\"text\"/>\n                  </FormGroup>\n\n                  {/* card fields */ }\n                  <FormGroup>\n                    <div id=\"card-secure-fields\"/>\n                    <InvalidFeedback error={ error } loading={ loading } name=\"payment_os\"/>\n                  </FormGroup>\n\n\n                  <Button block color=\"secondary\" type=\"submit\" disabled={ loading }\n                          loading={ loading }>Pagar</Button>\n                </div>\n\n                // cash payment methods\n              ) : values.payment_method_id === 3 && (\n                <FormGroup>\n                  { cashPaymentMethods == null ? (\n                    <p>Cargando...</p>\n                  ) : cashPaymentMethods.length ? cashPaymentMethods.map((item, key) => (\n                    <InputRadio\n                      key={ key }\n                      label={ item.name }\n                      name=\"cash_payment_method_id\"\n                      onChange={ onCashPaymentMethodChange }\n                      state={ values.cash_payment_method_id }\n                      value={ item.id }\n                    />\n                  )) : (\n                    <p>Sin mÃ©todo de pago configurado.</p>\n                  ) }\n                  <InvalidFeedback error={ error } loading={ loading } name=\"cash_payment_method_id\"/>\n                  <Button block color=\"secondary\" type=\"submit\" disabled={ loading }\n                          loading={ loading }>Pagar</Button>\n                </FormGroup>\n              ) }\n            </div>\n          </div>\n\n          <div className=\"col-md-6\">\n\n          </div>\n        </div>\n\n      </div>\n      <style jsx>{ `\n        @media (min-width: 768px) {\n          .card-inputs {\n            // margin-top: -21px;\n          }\n        }\n      ` }</style>\n    </div>\n  )\n}\n\nexport default withAuth(Payment, true);\n"]},"metadata":{},"sourceType":"module"}