{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n// next\nimport Head from 'next/head'; // env\n\nimport { CONFIG } from '~/config';\nimport { HAS_WINDOW } from '~/constants/constants'; // react\n\nimport { useEffect, useState } from 'react';\nimport useScript, { ScriptStatus } from '@charlietango/use-script';\nimport nookies from 'nookies'; // components\n\nimport Layout from '~/components/layout/Layout';\nimport { PackageRadio } from '~/components/Packages';\nimport ChangePlanForm from './form';\nimport withAuth from '~/components/withAuth'; // page\n\nconst ChangePlanPage = ({\n  api,\n  layoutProps,\n  packages\n}) => {\n  const [ready, status] = useScript('https://js.paymentsos.com/v2/latest/secure-fields.min.js');\n  const {\n    0: isPayUReady,\n    1: setIsPayUReady\n  } = useState(false);\n  const businessUnitPublicKey = '88985036-6530-4b5a-a7ec-c4e07ec07f6c';\n  const POS = ready && HAS_WINDOW ? window.POS : null;\n  const payUEnv = 'test';\n  const POSStyle = {\n    base: {\n      borderRadius: '.15rem',\n      backgroundColor: 'white',\n      height: 'calc(1.5em + .75rem + 2px)',\n      fontSize: '12px',\n      padding: '0px 3px',\n      marginLeft: '5px',\n      cardImage: {\n        borderTopRightRadius: 0,\n        borderBottomRightRadius: 0,\n        margin: 0\n      },\n      pan: {\n        width: '160px',\n        borderTopLeftRadius: 0,\n        borderBottomLeftRadius: 0,\n        marginLeft: 0\n      },\n      expirationDate: {\n        width: '47px'\n      },\n      secureFields: {\n        left: '40px'\n      },\n      cvv: {\n        width: '35px'\n      }\n    }\n  };\n\n  if (status === ScriptStatus.ERROR) {\n    console.log('Failed to load POS API');\n  }\n\n  useEffect(_ => {\n    if (POS) {\n      POS.setPublicKey(businessUnitPublicKey);\n      POS.setEnvironment(payUEnv);\n      POS.setStyle(POSStyle);\n      POS.setCardNumberPlaceholder('Tarjeta de crédito');\n      POS.setExpirationDatePlaceholder('MM/AA');\n      setIsPayUReady(true);\n    }\n  }, [POS]);\n  return __jsx(Layout, layoutProps, __jsx(Head, null, __jsx(\"title\", {\n    className: \"jsx-674601483\"\n  }, \"Cambiar < Plan < \", CONFIG.appName)), __jsx(\"div\", {\n    className: \"jsx-674601483\" + \" \" + \"rgpage container-fluid\"\n  }, __jsx(\"div\", {\n    className: \"jsx-674601483\" + \" \" + \"row\"\n  }, __jsx(\"div\", {\n    className: \"jsx-674601483\" + \" \" + \"col-xl-8 offset-xl-2\"\n  }, __jsx(\"h1\", {\n    className: \"jsx-674601483\" + \" \" + \"h2\"\n  }, \"T\\xFA Plan Actual\"), __jsx(\"div\", {\n    style: {\n      fontSize: '16px',\n      lineHeight: 1\n    },\n    className: \"jsx-674601483\" + \" \" + \"col col-md-4 text-left vertical-align\"\n  }, __jsx(PackageRadio, {\n    readOnly: true,\n    package_id: \"1\",\n    plan: {\n      id: '1',\n      name: '6 meses',\n      currency: 'ars',\n      amount: '594'\n    }\n  })), __jsx(\"h1\", {\n    className: \"jsx-674601483\" + \" \" + \"h2\"\n  }, \"Nuevo Plan\"), __jsx(ChangePlanForm, {\n    api,\n    isPayUReady,\n    packages,\n    POS\n  })))), __jsx(_JSXStyle, {\n    id: \"674601483\"\n  }, [\".rgpage.jsx-674601483{padding-top:40px;padding-bottom:120px;}\", \".h2.jsx-674601483{margin-bottom:10px;}\"]));\n}; // getInitialProps\n\n\nChangePlanPage.getInitialProps = async ctx => {\n  const {\n    api\n  } = ctx; // get packages\n\n  let packages;\n\n  try {\n    const {\n      data\n    } = await api.get('packages');\n    packages = {\n      items: data\n    };\n  } catch (error) {\n    packages = {\n      error\n    };\n  }\n\n  return {\n    packages\n  };\n};\n\nexport default withAuth(ChangePlanPage);","map":{"version":3,"sources":["/Users/rafael/Projects/somosgad/dale/pages/user/changePlan/index.js"],"names":["Head","CONFIG","HAS_WINDOW","useEffect","useState","useScript","ScriptStatus","nookies","Layout","PackageRadio","ChangePlanForm","withAuth","ChangePlanPage","api","layoutProps","packages","ready","status","isPayUReady","setIsPayUReady","businessUnitPublicKey","POS","window","payUEnv","POSStyle","base","borderRadius","backgroundColor","height","fontSize","padding","marginLeft","cardImage","borderTopRightRadius","borderBottomRightRadius","margin","pan","width","borderTopLeftRadius","borderBottomLeftRadius","expirationDate","secureFields","left","cvv","ERROR","console","log","_","setPublicKey","setEnvironment","setStyle","setCardNumberPlaceholder","setExpirationDatePlaceholder","appName","lineHeight","id","name","currency","amount","getInitialProps","ctx","data","get","items","error"],"mappings":"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","sourcesContent":["// next\nimport Head from 'next/head'\n\n// env\nimport { CONFIG }     from '~/config'\nimport { HAS_WINDOW } from '~/constants/constants'\n\n// react\nimport { useEffect, useState } from 'react'\n\nimport useScript, { ScriptStatus }  from '@charlietango/use-script'\nimport nookies                      from 'nookies'\n\n// components\nimport Layout           from '~/components/layout/Layout'\nimport { PackageRadio } from '~/components/Packages'\nimport ChangePlanForm   from './form'\nimport withAuth         from '~/components/withAuth'\n\n// page\nconst ChangePlanPage = ({ api, layoutProps, packages }) => {\n  const [ ready, status ] = useScript('https://js.paymentsos.com/v2/latest/secure-fields.min.js')\n  const [ isPayUReady, setIsPayUReady ] = useState(false)\n\n  const businessUnitPublicKey = '88985036-6530-4b5a-a7ec-c4e07ec07f6c'\n  const POS = ready && HAS_WINDOW ? window.POS : null\n  const payUEnv = 'test'\n\n  const POSStyle = {\n    base: {\n      borderRadius: '.15rem',\n      backgroundColor: 'white',\n      height: 'calc(1.5em + .75rem + 2px)',\n      fontSize: '12px',\n      padding:'0px 3px',\n      marginLeft: '5px',\n      cardImage: {\n        borderTopRightRadius: 0,\n        borderBottomRightRadius: 0,\n        margin: 0,\n      },\n      pan:{\n        width:'160px',\n        borderTopLeftRadius: 0,\n        borderBottomLeftRadius: 0,\n        marginLeft: 0,\n      },\n      expirationDate: { width: '47px' },\n      secureFields: { left: '40px' },\n      cvv: { width: '35px' }\n    }\n  }\n\n  if (status === ScriptStatus.ERROR) {\n    console.log('Failed to load POS API')\n  }\n\n  useEffect(_ => {\n    if (POS) {\n      POS.setPublicKey(businessUnitPublicKey)\n      POS.setEnvironment(payUEnv)\n      POS.setStyle(POSStyle)\n      POS.setCardNumberPlaceholder('Tarjeta de crédito')\n      POS.setExpirationDatePlaceholder('MM/AA')\n      setIsPayUReady(true)\n    }\n  }, [POS])\n\n  return (\n    <Layout {...layoutProps}>\n      <Head>\n        <title>Cambiar &lt; Plan &lt; {CONFIG.appName}</title>\n      </Head>\n      <div className=\"rgpage container-fluid\">\n        <div className=\"row\">\n          <div className=\"col-xl-8 offset-xl-2\">\n\n            <h1 className=\"h2\">Tú Plan Actual</h1>\n            {/* <PackageRadio readOnly package_id=\"1\"\n              plan={{ id: '1', name:'6 meses', currency: 'ars', amount: '594'}}\n            /> */}\n\n            <div className=\"col col-md-4 text-left vertical-align\" style={{fontSize: '16px', lineHeight: 1}}>\n              <PackageRadio\n                readOnly\n                package_id=\"1\"\n                plan={{\n                  id: '1',\n                  name:'6 meses',\n                  currency: 'ars',\n                  amount: '594'\n                }}\n              />\n            </div>\n\n            <h1 className=\"h2\">Nuevo Plan</h1>\n            <ChangePlanForm {...{api, isPayUReady, packages, POS}} />\n\n          </div>\n        </div>\n      </div>\n      <style jsx>{`\n        .rgpage {\n          padding-top: 40px;\n          padding-bottom: 120px;\n        }\n        .h2 {\n          margin-bottom: 10px;\n        }\n      `}</style>\n    </Layout>\n  )\n}\n\n// getInitialProps\nChangePlanPage.getInitialProps = async ctx => {\n\n  const { api } = ctx\n\n  // get packages\n  let packages\n  try {\n    const { data } = await api.get('packages')\n    packages = { items: data }\n  } catch(error) {\n    packages = { error }\n  }\n\n  return { packages }\n}\n\nexport default withAuth(ChangePlanPage)\n"]},"metadata":{},"sourceType":"module"}