{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n// next imports\nimport Head from 'next/head';\nimport Router, { useRouter } from 'next/router'; // react imports\n\nimport { useState } from 'react';\nimport { Form } from 'react-bootstrap'; // app imports\n\nimport Layout from '../../components/layout/Layout';\nimport { CONFIG } from '../../config';\nimport api from '../../services/api';\nimport Button from '../../components/button';\n\nvar ResetPassword = function ResetPassword(_ref) {\n  var layoutProps = _ref.layoutProps;\n\n  var _useState = useState(false),\n      notice = _useState[0],\n      setNotice = _useState[1];\n\n  var _useState2 = useState(false),\n      error = _useState2[0],\n      setError = _useState2[1];\n\n  var _useState3 = useState(''),\n      password = _useState3[0],\n      setPassword = _useState3[1];\n\n  var _useState4 = useState(''),\n      passwordConfirmation = _useState4[0],\n      setPasswordConfirmation = _useState4[1];\n\n  var _useState5 = useState(false),\n      isLoading = _useState5[0],\n      setLoading = _useState5[1];\n\n  var router = useRouter();\n  var apiurl = decodeURI(router.query.apiurl);\n  var resetURL = new URL(apiurl);\n\n  var _useState6 = useState(resetURL.searchParams.get('email')),\n      email = _useState6[0],\n      setEmail = _useState6[1];\n\n  var _useState7 = useState(resetURL.searchParams.get('token')),\n      token = _useState7[0],\n      setToken = _useState7[1];\n\n  var success = function success(res) {\n    setError(false);\n    setNotice(res.data);\n    setTimeout(function () {\n      return Router.push('/login');\n    }, 3000);\n  };\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              setLoading(true);\n              _context.prev = 2;\n              _context.next = 5;\n              return api().post('/reset', {\n                token: token,\n                password: password,\n                password_confirmation: passwordConfirmation,\n                email: email\n              });\n\n            case 5:\n              response = _context.sent;\n              console.table(response);\n              success(response);\n              setLoading(false);\n              _context.next = 16;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](2);\n              if (_context.t0.response) setError(_context.t0.response.data);\n              console.table(_context.t0);\n              setLoading(false);\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 11]]);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(Layout, layoutProps, __jsx(Head, null, __jsx(\"title\", {\n    className: \"jsx-1977283210\"\n  }, \"Restabelecer la contrase\\xF1a < \", CONFIG.appName)), __jsx(\"div\", {\n    className: \"jsx-1977283210\" + \" \" + \"container-fluid\"\n  }, __jsx(\"div\", {\n    className: \"jsx-1977283210\" + \" \" + \"row\"\n  }, __jsx(\"div\", {\n    className: \"jsx-1977283210\" + \" \" + \"col-md-10 offset-md-1\"\n  }, __jsx(\"h1\", {\n    className: \"jsx-1977283210\" + \" \" + \"h4\"\n  }, \"Restabelecer la contrase\\xF1a\"), __jsx(\"form\", {\n    method: \"post\",\n    onSubmit: handleSubmit,\n    className: \"jsx-1977283210\"\n  }, __jsx(Form.Group, null, notice && __jsx(\"div\", {\n    className: \"jsx-1977283210\" + \" \" + \"valid-feedback\"\n  }, notice.message), error && __jsx(\"div\", {\n    className: \"jsx-1977283210\" + \" \" + \"invalid-feedback\"\n  }, error.message), __jsx(Form.Control, {\n    id: \"email\",\n    type: \"email\",\n    placeholder: \"Correo electronico\",\n    onChange: function onChange(e) {\n      return setEmail(e.target.value);\n    },\n    value: email\n  }), error && error.errors && __jsx(\"div\", {\n    className: \"jsx-1977283210\" + \" \" + \"invalid-feedback\"\n  }, error.errors.email)), __jsx(Form.Group, null, __jsx(Form.Control, {\n    id: \"password_reset\",\n    type: \"password\",\n    placeholder: \"Nueva contrase\\xF1a\",\n    onChange: function onChange(e) {\n      return setPassword(e.target.value);\n    },\n    value: password\n  }), error && error.errors && __jsx(\"div\", {\n    className: \"jsx-1977283210\" + \" \" + \"invalid-feedback\"\n  }, error.errors.password[0])), __jsx(Form.Group, null, __jsx(Form.Control, {\n    id: \"password_confirmation\",\n    type: \"password\",\n    placeholder: \"Confirmar nueva contrase\\xF1a\",\n    onChange: function onChange(e) {\n      return setPasswordConfirmation(e.target.value);\n    },\n    value: passwordConfirmation\n  }), error && error.errors && __jsx(\"div\", {\n    className: \"jsx-1977283210\" + \" \" + \"invalid-feedback\"\n  }, error.errors.password[1])), __jsx(Form.Group, {\n    style: {\n      textAlign: '-webkit-center'\n    }\n  }, __jsx(Button, {\n    block: true,\n    style: {\n      minWidth: '145px',\n      maxWidth: '50%',\n      boxShadow: 'none'\n    },\n    className: \"enter-btn\",\n    size: \"sm\",\n    type: \"submit\",\n    disabled: isLoading\n  }, isLoading ? 'Loading…' : 'Restabelecer')))))), __jsx(_JSXStyle, {\n    id: \"1977283210\"\n  }, [\"header.jsx-1977283210{padding-top:15px;}\", \".h2.jsx-1977283210{margin-bottom:30px;}\", \"@media (min-width:768px){header.jsx-1977283210{padding-top:30px;}}\", \".row.jsx-1977283210{padding:0 25%;}\"]));\n};\n\nexport default ResetPassword;","map":{"version":3,"sources":["/Users/rafael/Projects/somosgad/dale/pages/user/resetPassword.js"],"names":["Head","Router","useRouter","useState","Form","Layout","CONFIG","api","Button","ResetPassword","layoutProps","notice","setNotice","error","setError","password","setPassword","passwordConfirmation","setPasswordConfirmation","isLoading","setLoading","router","apiurl","decodeURI","query","resetURL","URL","searchParams","get","email","setEmail","token","setToken","success","res","data","setTimeout","push","handleSubmit","e","preventDefault","post","password_confirmation","response","console","table","appName","message","target","value","errors","textAlign","minWidth","maxWidth","boxShadow"],"mappings":"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","sourcesContent":["// next imports\nimport Head from 'next/head'\nimport Router, { useRouter } from 'next/router'\n\n// react imports\nimport { useState } from 'react'\nimport { Form } from 'react-bootstrap'\n\n// app imports\nimport Layout from '../../components/layout/Layout'\nimport { CONFIG } from '../../config'\nimport api from '../../services/api'\nimport Button from '../../components/button'\n\nconst ResetPassword = ({layoutProps}) => {\n\n  const [notice, setNotice] = useState(false)\n  const [error, setError] = useState(false)\n  const [password, setPassword] = useState('')\n  const [passwordConfirmation, setPasswordConfirmation] = useState('')\n  const [isLoading, setLoading] = useState(false)\n\n  const router = useRouter()\n  const apiurl = decodeURI(router.query.apiurl)\n  const resetURL = new URL(apiurl)\n  const [ email, setEmail ] = useState(resetURL.searchParams.get('email'))\n  const [ token, setToken ] = useState(resetURL.searchParams.get('token'))\n\n  const success = res => {\n    setError(false)\n    setNotice(res.data)\n    setTimeout(() => Router.push('/login'), 3000)\n  }\n\n  const handleSubmit = async e => {\n    e.preventDefault()\n    setLoading(true)\n\n    try {\n      const response = await api().post('/reset',{\n        token: token,\n        password: password,\n        password_confirmation: passwordConfirmation,\n        email: email\n      })\n\n      console.table(response)\n      success(response)\n      setLoading(false)\n    } catch (error) {\n      if(error.response)\n        setError(error.response.data)\n\n      console.table(error)\n      setLoading(false)\n    }\n  }\n\n  return (\n    <Layout {...layoutProps}>\n      <Head>\n        <title>Restabelecer la contraseña &lt; {CONFIG.appName}</title>\n      </Head>\n      <div className=\"container-fluid\">\n        <div className=\"row\">\n          <div className=\"col-md-10 offset-md-1\">\n            <h1 className=\"h4\">Restabelecer la contraseña</h1>\n            <form method=\"post\" onSubmit={handleSubmit}>\n\n                {/* <Toast\n                  show={successMsg}\n                  onClose={toggleSuccessMsg}\n                  style={{position: 'absolute', top: '50%', right: '50%', backgroundColor: 'light-green' }}\n                >\n                  <Toast.Header></Toast.Header>\n                  <Toast.Body>\n                    {notice.message}\n                  </Toast.Body>\n                </Toast> */}\n\n              <Form.Group>\n                {notice && <div className=\"valid-feedback\">{notice.message}</div>}\n                {error && <div className=\"invalid-feedback\">{error.message}</div>}\n                <Form.Control id=\"email\" type=\"email\" placeholder=\"Correo electronico\"  onChange={e => setEmail(e.target.value)} value={email} />\n                {error && error.errors &&  (<div className=\"invalid-feedback\">{error.errors.email}</div>)}\n              </Form.Group>\n              <Form.Group>\n                <Form.Control id=\"password_reset\" type=\"password\" placeholder=\"Nueva contraseña\"  onChange={e => setPassword(e.target.value)} value={password} />\n                {error && error.errors &&  (<div className=\"invalid-feedback\">{error.errors.password[0]}</div>)}\n              </Form.Group>\n              <Form.Group>\n                <Form.Control id=\"password_confirmation\" type=\"password\" placeholder=\"Confirmar nueva contraseña\"  onChange={e => setPasswordConfirmation(e.target.value)} value={passwordConfirmation} />\n                {error && error.errors &&  (<div className=\"invalid-feedback\">{error.errors.password[1]}</div>)}\n              </Form.Group>\n              {/* <Form.Group style={{textAlign: 'center'}}>\n                <Button variant='danger' style={{backgroundColor:'#ff0000'}} size=\"lg\" type=\"submit\" disabled={isLoading}>{isLoading ? 'Loading…' : 'Restabelecer'}</Button>\n              </Form.Group> */}\n              <Form.Group style={{textAlign: '-webkit-center'}}>\n                <Button block style={{minWidth: '145px', maxWidth: '50%', boxShadow: 'none'}} className=\"enter-btn\" size=\"sm\" type=\"submit\" disabled={isLoading}>{isLoading ? 'Loading…' : 'Restabelecer'}</Button>\n              </Form.Group>\n            </form>\n          </div>\n        </div>\n      </div>\n      <style jsx>{`\n        header {\n          padding-top: 15px;\n        }\n        .h2 {\n          margin-bottom: 30px;\n        }\n        @media (min-width: 768px) {\n          header {\n            padding-top: 30px;\n          }\n        }\n        .row {\n          padding: 0 25%;\n        }\n      `}</style>\n    </Layout>\n  );\n}\n\nexport default ResetPassword\n"]},"metadata":{},"sourceType":"module"}