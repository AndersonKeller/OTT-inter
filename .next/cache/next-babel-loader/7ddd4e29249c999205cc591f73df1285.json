{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n/*\n * Loading example found at:\n * https://github.com/zeit/next.js/blob/canary/examples/with-loading/\n */\nimport 'nprogress/nprogress.css';\nimport 'react-toastify/dist/ReactToastify.min.css';\nimport 'shaka-player/dist/controls.css';\nimport React from 'react';\nimport NProgress from 'nprogress';\nimport * as Sentry from '@sentry/node';\nimport App from 'next/app';\nimport Router from 'next/router';\nimport Layout from '../components/layout/Layout';\nimport GlobalStyle from '~/styles';\nimport { AuthModalProvider } from '../contexts/AuthModalContext';\nimport { SearchProvider } from '../contexts/SearchContext';\nimport { ThemeProvider } from 'styled-components';\nimport { UserProvider } from '../contexts/UserContext';\nimport * as gtag from '~/lib/gtag'; // import CssBaseline from '@material-ui/core/CssBaseline'\n\nimport theme from '~/theme'; // import withBasicAuth from '~/basic-auth'\n\nimport \"~/styles/main.scss\";\nimport 'netslider/dist/styles.min.css';\nimport Loading from \"~/components/Loading/Loading\";\nNProgress.configure({\n  showSpinner: false\n});\nvar isPoppingState = false;\nSentry.init({\n  dsn: process.env.SENTRY_DSN,\n  environment: process.env.TENANT + '_' + (\"development\" || 'testing')\n});\n\nvar MyApp = /*#__PURE__*/function (_App) {\n  _inherits(MyApp, _App);\n\n  var _super = _createSuper(MyApp);\n\n  function MyApp(props) {\n    var _this;\n\n    _classCallCheck(this, MyApp);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      loading: true\n    };\n    return _this;\n  }\n\n  _createClass(MyApp, [{\n    key: \"routeChangeStart\",\n    value: function routeChangeStart(url) {\n      console.log(\"Loading \".concat(url, \"...\")); // NProgress.start()\n\n      this.setState({\n        loading: true\n      });\n    }\n  }, {\n    key: \"routeChangeComplete\",\n    value: function routeChangeComplete(url) {\n      console.log(\"Loaded \".concat(url, \"!\")); // NProgress.done()\n\n      this.setState({\n        loading: false\n      });\n\n      if (isPoppingState) {\n        isPoppingState = false;\n      } else {\n        window.scrollTo(0, 0);\n      }\n\n      gtag.pageview(url);\n    }\n  }, {\n    key: \"routeChangeError\",\n    value: function routeChangeError() {\n      NProgress.done();\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      // Remove the server-side injected CSS.\n      var jssStyles = document.querySelector('#jss-server-side');\n\n      if (jssStyles) {\n        jssStyles.parentElement.removeChild(jssStyles);\n      }\n\n      Router.events.on('routeChangeStart', this.routeChangeStart);\n      Router.beforePopState(function (_ref) {\n        var url = _ref.url,\n            as = _ref.as,\n            options = _ref.options;\n        isPoppingState = true;\n        return true;\n      });\n      Router.events.on('routeChangeComplete', this.routeChangeComplete);\n      Router.events.on('routeChangeError', this.routeChangeError);\n      setTimeout(function () {\n        _this2.setState({\n          loading: false\n        });\n      }, 1000);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      Router.events.off('routeChangeStart', this.routeChangeStart);\n      Router.events.off('routeChangeComplete', this.routeChangeComplete);\n      Router.events.off('routeChangeError', this.routeChangeError);\n    }\n  }, {\n    key: \"componentDidCatch\",\n    value: function componentDidCatch(error, errorInfo) {\n      Sentry.withScope(function (scope) {\n        Object.keys(errorInfo).forEach(function (key) {\n          scope.setExtra(key, errorInfo[key]);\n        });\n        Sentry.captureException(error);\n      });\n\n      _get(_getPrototypeOf(MyApp.prototype), \"componentDidCatch\", this).call(this, error, errorInfo);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          Component = _this$props.Component,\n          layoutProps = _this$props.layoutProps,\n          pageProps = _this$props.pageProps;\n      return __jsx(ThemeProvider, {\n        theme: theme\n      }, this.state.loading && __jsx(\"div\", {\n        className: \"super-loading\"\n      }, __jsx(Loading, {\n        loadingState: this.state.loading\n      })), __jsx(GlobalStyle, null), __jsx(UserProvider, null, __jsx(AuthModalProvider, null, __jsx(SearchProvider, null, __jsx(Component, _extends({\n        layoutProps: layoutProps\n      }, pageProps))))));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref2) {\n        var Component, router, ctx, layoutPropsTasks, pagePropsTasks, _yield$Promise$all, _yield$Promise$all2, layoutProps, pageProps;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                Component = _ref2.Component, router = _ref2.router, ctx = _ref2.ctx;\n                layoutPropsTasks = {}, pagePropsTasks = {};\n\n                if (Layout.getInitialProps) {\n                  layoutPropsTasks = Layout.getInitialProps(ctx);\n                }\n\n                if (Component.getInitialProps) {\n                  pagePropsTasks = Component.getInitialProps(ctx);\n                }\n\n                _context.next = 6;\n                return Promise.all([layoutPropsTasks, pagePropsTasks]);\n\n              case 6:\n                _yield$Promise$all = _context.sent;\n                _yield$Promise$all2 = _slicedToArray(_yield$Promise$all, 2);\n                layoutProps = _yield$Promise$all2[0];\n                pageProps = _yield$Promise$all2[1];\n                return _context.abrupt(\"return\", {\n                  layoutProps: layoutProps,\n                  pageProps: pageProps\n                });\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return MyApp;\n}(App);\n/* Enable pwd page protection while in development */\n// export default withBasicAuth(MyApp)\n\n\nexport default MyApp;","map":{"version":3,"sources":["/Users/rafael/Projects/somosgad/dale/pages/_app.js"],"names":["React","NProgress","Sentry","App","Router","Layout","GlobalStyle","AuthModalProvider","SearchProvider","ThemeProvider","UserProvider","gtag","theme","Loading","configure","showSpinner","isPoppingState","init","dsn","process","env","SENTRY_DSN","environment","TENANT","MyApp","props","state","loading","url","console","log","setState","window","scrollTo","pageview","done","jssStyles","document","querySelector","parentElement","removeChild","events","on","routeChangeStart","beforePopState","as","options","routeChangeComplete","routeChangeError","setTimeout","off","error","errorInfo","withScope","scope","Object","keys","forEach","key","setExtra","captureException","Component","layoutProps","pageProps","router","ctx","layoutPropsTasks","pagePropsTasks","getInitialProps","Promise","all"],"mappings":"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","sourcesContent":["/*\n * Loading example found at:\n * https://github.com/zeit/next.js/blob/canary/examples/with-loading/\n */\n\nimport 'nprogress/nprogress.css'\nimport 'react-toastify/dist/ReactToastify.min.css'\nimport 'shaka-player/dist/controls.css'\nimport React from 'react'\nimport NProgress from 'nprogress'\nimport * as Sentry from '@sentry/node'\nimport App from 'next/app'\nimport Router from 'next/router'\nimport Layout from '../components/layout/Layout'\nimport GlobalStyle from '~/styles'\nimport { AuthModalProvider } from '../contexts/AuthModalContext'\nimport { SearchProvider } from '../contexts/SearchContext'\nimport { ThemeProvider } from 'styled-components'\nimport { UserProvider } from '../contexts/UserContext'\nimport * as gtag from '~/lib/gtag'\n\n\n// import CssBaseline from '@material-ui/core/CssBaseline'\nimport theme from '~/theme'\n// import withBasicAuth from '~/basic-auth'\nimport \"~/styles/main.scss\"\nimport 'netslider/dist/styles.min.css';\nimport Loading from \"~/components/Loading/Loading\";\n\nNProgress.configure({ showSpinner: false })\n\nlet isPoppingState = false\n\nSentry.init({\n  dsn: process.env.SENTRY_DSN,\n  environment: process.env.TENANT + '_' + (process.env.NODE_ENV || 'testing'),\n})\n\nclass MyApp extends App {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true\n    };\n  }\n\n\n  static async getInitialProps({ Component, router, ctx }) {\n    let layoutPropsTasks = { }, pagePropsTasks = { }\n\n    if (Layout.getInitialProps) {\n      layoutPropsTasks = Layout.getInitialProps(ctx)\n    }\n\n    if (Component.getInitialProps) {\n      pagePropsTasks = Component.getInitialProps(ctx)\n    }\n\n    const [ layoutProps, pageProps ] = await Promise.all([\n      layoutPropsTasks,\n      pagePropsTasks,\n    ])\n\n    return { layoutProps, pageProps }\n  }\n\n  routeChangeStart(url) {\n    console.log(`Loading ${url}...`)\n    // NProgress.start()\n    this.setState({ loading: true });\n  }\n\n  routeChangeComplete(url) {\n    console.log(`Loaded ${url}!`)\n    // NProgress.done()\n    this.setState({ loading: false });\n    if (isPoppingState) {\n      isPoppingState = false\n    } else {\n      window.scrollTo(0, 0)\n    }\n    gtag.pageview(url)\n  }\n\n  routeChangeError() {\n    NProgress.done()\n  }\n\n  componentDidMount() {\n    // Remove the server-side injected CSS.\n    const jssStyles = document.querySelector('#jss-server-side')\n    if (jssStyles) {\n      jssStyles.parentElement.removeChild(jssStyles)\n    }\n    Router.events.on('routeChangeStart', this.routeChangeStart)\n    Router.beforePopState(({ url, as, options }) => {\n      isPoppingState = true\n      return true\n    })\n    Router.events.on('routeChangeComplete', this.routeChangeComplete)\n    Router.events.on('routeChangeError', this.routeChangeError)\n\n    setTimeout(() => {\n      this.setState({ loading: false });\n    }, 1000)\n  }\n\n  componentWillUnmount() {\n    Router.events.off('routeChangeStart', this.routeChangeStart)\n    Router.events.off('routeChangeComplete', this.routeChangeComplete)\n    Router.events.off('routeChangeError', this.routeChangeError)\n  }\n\n  componentDidCatch(error, errorInfo) {\n    Sentry.withScope((scope) => {\n      Object.keys(errorInfo).forEach((key) => {\n        scope.setExtra(key, errorInfo[key])\n      })\n\n      Sentry.captureException(error)\n    })\n\n    super.componentDidCatch(error, errorInfo)\n  }\n\n  render() {\n    const { Component, layoutProps, pageProps } = this.props\n    return (\n      <ThemeProvider theme={theme}>\n        {this.state.loading && <div className={\"super-loading\"}><Loading loadingState={this.state.loading} /></div>}\n        {/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\n        {/* <CssBaseline /> */}\n        <GlobalStyle />\n        <UserProvider>\n          <AuthModalProvider>\n            <SearchProvider>\n              <Component layoutProps={layoutProps} {...pageProps} />\n            </SearchProvider>\n          </AuthModalProvider>\n        </UserProvider>\n      </ThemeProvider>\n    )\n  }\n}\n\n/* Enable pwd page protection while in development */\n// export default withBasicAuth(MyApp)\n\nexport default MyApp\n"]},"metadata":{},"sourceType":"module"}