{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport withApi from \"~/components/withApi\";\nimport Packages from \"~/components/Packages\";\nimport React, { useCallback, useContext, useState, useEffect } from \"react\";\nimport Button from \"~/components/button\";\nimport { ThemeContext } from \"styled-components\";\nimport Color from \"color\";\nimport NameProject from \"~/components/NameProject/index\";\n\nconst PackagesDetails = ({\n  packages,\n  layoutProps,\n  selectPackage,\n  handleSubmit,\n  handleFormState,\n  formData,\n  setFormData\n}) => {\n  useEffect(_ => {\n    console.log(`\\n\\n packages.js first useEffect (componentDidMount)`);\n    console.log(`\\n\\n formData ${JSON.stringify(formData)} \\n\\n`);\n  }); // const [values, setValues] = useState({\n  //   package_id: \"\"\n  // });\n\n  const theme = useContext(ThemeContext);\n  const primaryColor = Color(theme.colors.primary).hsl().string();\n  const {\n    0: blockDiscountFields,\n    1: setBlockDiscountFields\n  } = useState(false);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState();\n  const {\n    0: error,\n    1: setError\n  } = useState();\n  const {\n    id: free_package_id\n  } = packages.items.find(item => item.amount == 0) || {};\n\n  const submit = async e => {\n    e.preventDefault();\n\n    try {\n      setLoading(true);\n      selectPackage(formData.package_id);\n\n      if (formData.package_id === free_package_id) {\n        handleSubmit(4, null);\n      } else {\n        handleSubmit(3);\n      }\n\n      setLoading(false);\n    } catch (e) {\n      console.error(e);\n    } // handleSubmit(2);\n\n  };\n\n  const onPackageChange = useCallback(e => {\n    const package_id = parseInt(e.target.value, 10);\n    setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n      package_id,\n      payment_method_id: package_id === free_package_id ? null : formData.payment_method_id\n    })); // setValues(oldValues => ({\n    //   ...oldValues,\n    //   package_id,\n    //   payment_method_id:\n    //     package_id === free_package_id ? null : values.payment_method_id\n    // }));\n  }, []);\n  return __jsx(\"div\", {\n    className: \"col-md-12\"\n  }, __jsx(\"form\", {\n    method: \"post\",\n    onSubmit: submit,\n    className: _JSXStyle.dynamic([[\"3337338\", [primaryColor, primaryColor, primaryColor]]])\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"3337338\", [primaryColor, primaryColor, primaryColor]]]) + \" \" + \"register-confirm container text-center\"\n  }, __jsx(\"h2\", {\n    className: _JSXStyle.dynamic([[\"3337338\", [primaryColor, primaryColor, primaryColor]]]) + \" \" + \"card-title text-center\"\n  }, __jsx(\"span\", {\n    className: _JSXStyle.dynamic([[\"3337338\", [primaryColor, primaryColor, primaryColor]]]) + \" \" + \"text-primary\"\n  }, \"\\xA1\"), \"S\\xE9 parte de\", \" \", __jsx(NameProject, null), __jsx(\"span\", {\n    className: _JSXStyle.dynamic([[\"3337338\", [primaryColor, primaryColor, primaryColor]]]) + \" \" + \"text-primary\"\n  }, \"!\")), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"3337338\", [primaryColor, primaryColor, primaryColor]]]) + \" \" + \"card-subtitle d-inline-block\"\n  }, \"Elige tu plan\"), __jsx(\"br\", {\n    className: _JSXStyle.dynamic([[\"3337338\", [primaryColor, primaryColor, primaryColor]]])\n  }), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"3337338\", [primaryColor, primaryColor, primaryColor]]]) + \" \" + \"card-subtitle d-inline-block\"\n  }, formData.is_miembro ? 'Es miembro del club' : ''), __jsx(Packages, {\n    error: packages.error ? packages.error : null,\n    items: packages.items ? packages.items : null,\n    onChange: onPackageChange,\n    package_id: formData.package_id,\n    validationError: !loading && error && error.errors && error.errors.package_id,\n    discount_id: formData.discount_id,\n    setBlockDiscountFields\n  }), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"3337338\", [primaryColor, primaryColor, primaryColor]]]) + \" \" + \"row mt-3\"\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"3337338\", [primaryColor, primaryColor, primaryColor]]]) + \" \" + \"col-md-12\"\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"3337338\", [primaryColor, primaryColor, primaryColor]]]) + \" \" + \"text-center\"\n  }, __jsx(Button, {\n    onClick: () => handleFormState(2),\n    color: \"primary\"\n  }, \"Volver\"), __jsx(Button, {\n    color: \"secondary\",\n    disabled: loading,\n    loading: loading,\n    type: \"submit\",\n    style: {\n      marginLeft: \"20px\"\n    }\n  }, \"Siguiente\"))))), __jsx(_JSXStyle, {\n    id: \"3337338\",\n    dynamic: [primaryColor, primaryColor, primaryColor]\n  }, [`.text-primary{color:${primaryColor} !important;}`, `strong.text-primary{color:${primaryColor} !important;}`, \"h2.card-title{font-weight:normal;color:#000;margin-bottom:1em;font-size:1.7em;}\", \"div.card-subtitle{font-size:1.1em;font-weight:500;margin-bottom:2.5em;max-width:380px;}\", `.text-primary{color:${primaryColor} !important;}`, \".register-confirm{padding-top:50px;padding-bottom:50px;color:#666666;}\"])));\n};\n\nPackagesDetails.getInitialProps = async ctx => {\n  const {\n    api,\n    res,\n    user\n  } = ctx; // get packages\n\n  let packages;\n\n  try {\n    const {\n      data\n    } = await api.get(\"packages\");\n    packages = {\n      items: data\n    };\n  } catch (error) {\n    packages = {\n      error\n    };\n  } // return\n\n\n  return {\n    packages,\n    user\n  };\n};\n\nexport default withApi(PackagesDetails, true);","map":{"version":3,"sources":["/Users/rafael/Projects/somosgad/dale/pages/register/wizard/packages.js"],"names":["withApi","Packages","React","useCallback","useContext","useState","useEffect","Button","ThemeContext","Color","NameProject","PackagesDetails","packages","layoutProps","selectPackage","handleSubmit","handleFormState","formData","setFormData","_","console","log","JSON","stringify","theme","primaryColor","colors","primary","hsl","string","blockDiscountFields","setBlockDiscountFields","loading","setLoading","error","setError","id","free_package_id","items","find","item","amount","submit","e","preventDefault","package_id","onPackageChange","parseInt","target","value","payment_method_id","is_miembro","onChange","validationError","errors","discount_id","marginLeft","getInitialProps","ctx","api","res","user","data","get"],"mappings":"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","sourcesContent":["import withApi from \"~/components/withApi\";\nimport Packages from \"~/components/Packages\";\nimport React, { useCallback, useContext, useState, useEffect } from \"react\";\nimport Button from \"~/components/button\";\nimport { ThemeContext } from \"styled-components\";\nimport Color from \"color\";\nimport NameProject from \"~/components/NameProject/index\";\n\nconst PackagesDetails = ({\n  packages,\n  layoutProps,\n  selectPackage,\n  handleSubmit,\n  handleFormState,\n  formData,\n  setFormData\n}) => {\n\n  useEffect(\n    _ => {\n      console.log(`\\n\\n packages.js first useEffect (componentDidMount)`)\n      console.log(`\\n\\n formData ${JSON.stringify(formData)} \\n\\n`)\n    }\n  );\n\n  // const [values, setValues] = useState({\n  //   package_id: \"\"\n  // });\n\n  const theme = useContext(ThemeContext);\n  const primaryColor = Color(theme.colors.primary)\n    .hsl()\n    .string();\n\n  const [blockDiscountFields, setBlockDiscountFields] = useState(false);\n  const [loading, setLoading] = useState();\n  const [error, setError] = useState();\n\n  const { id: free_package_id } =\n    packages.items.find(item => item.amount == 0) || {};\n\n  const submit = async e => {\n    e.preventDefault();\n\n    try {\n      setLoading(true);\n      selectPackage(formData.package_id);\n\n      if (formData.package_id === free_package_id) {\n        handleSubmit(4, null);\n      } else {\n        handleSubmit(3);\n      }\n\n      setLoading(false);\n    } catch (e) {\n      console.error(e);\n    }\n\n    // handleSubmit(2);\n  };\n\n  const onPackageChange = useCallback(e => {\n    const package_id = parseInt(e.target.value, 10);\n    setFormData({\n      ...formData,\n      package_id,\n      payment_method_id: package_id === free_package_id\n        ? null\n        : formData.payment_method_id\n    });\n    // setValues(oldValues => ({\n    //   ...oldValues,\n    //   package_id,\n    //   payment_method_id:\n    //     package_id === free_package_id ? null : values.payment_method_id\n    // }));\n  }, []);\n\n  return (\n    <div className=\"col-md-12\">\n      <form method=\"post\" onSubmit={submit}>\n        <div className=\"register-confirm container text-center\">\n          <h2 className=\"card-title text-center\">\n            <span className={\"text-primary\"}>¡</span>Sé parte de{\" \"}\n            {<NameProject />}\n            <span className={\"text-primary\"}>!</span>\n          </h2>\n          <div className=\"card-subtitle d-inline-block\">Elige tu plan</div><br></br>\n          <div className=\"card-subtitle d-inline-block\">{formData.is_miembro ? 'Es miembro del club' : ''}</div>\n\n\n          <Packages\n            {...{\n              error: packages.error ? packages.error : null,\n              items: packages.items ? packages.items : null,\n              onChange: onPackageChange,\n              package_id: formData.package_id,\n              validationError: !loading\n                && error\n                && error.errors\n                && error.errors.package_id,\n              discount_id: formData.discount_id,\n              setBlockDiscountFields\n            }}\n          />\n\n          <div className=\"row mt-3\">\n            <div className=\"col-md-12\">\n              <div className=\"text-center\">\n                <Button onClick={() => handleFormState(2)} color=\"primary\">\n                  Volver\n                </Button>\n\n                <Button\n                  color=\"secondary\"\n                  disabled={loading}\n                  loading={loading}\n                  type=\"submit\"\n                  style={{ marginLeft: \"20px\" }}\n                >\n                  Siguiente\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <style jsx global={true}>{`\n          .text-primary {\n            color: ${primaryColor} !important;\n          }\n\n          strong.text-primary {\n            color: ${primaryColor} !important;\n          }\n\n          h2.card-title {\n            font-weight: normal;\n            color: #000;\n            margin-bottom: 1em;\n            font-size: 1.7em;\n          }\n\n          div.card-subtitle {\n            font-size: 1.1em;\n            font-weight: 500;\n            margin-bottom: 2.5em;\n            max-width: 380px;\n          }\n\n          .text-primary {\n            color: ${primaryColor} !important;\n          }\n\n          .register-confirm {\n            padding-top: 50px;\n            padding-bottom: 50px;\n            color: #666666;\n          }\n        `}</style>\n      </form>\n    </div>\n  );\n};\n\nPackagesDetails.getInitialProps = async ctx => {\n  const { api, res, user } = ctx;\n\n  // get packages\n  let packages;\n  try {\n    const { data } = await api.get(\"packages\");\n    packages = { items: data };\n  } catch (error) {\n    packages = { error };\n  }\n\n  // return\n  return { packages, user };\n};\n\nexport default withApi(PackagesDetails, true);\n"]},"metadata":{},"sourceType":"module"}