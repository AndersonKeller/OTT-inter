{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n// next imports\nimport Head from 'next/head'; // react imports\n\nimport { useEffect, useState, useContext } from 'react'; // app imports\n\nimport Layout from '../components/layout/Layout';\nimport { CONFIG } from '../config';\nimport api from '../services/api';\nimport Loading from '../components/Loading/Loading';\nimport MediaList from '../components/MediaList/MediaList';\nimport SearchContext from '../contexts/SearchContext'; // movies page\n\nvar MoviesPage = function MoviesPage(_ref) {\n  var layoutProps = _ref.layoutProps;\n\n  var _useState = useState(),\n      medias = _useState[0],\n      setMedias = _useState[1];\n\n  var _useState2 = useState(true),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState(false),\n      error = _useState3[0],\n      setError = _useState3[1];\n\n  var _useContext = useContext(SearchContext),\n      search = _useContext.search,\n      setSearch = _useContext.setSearch;\n\n  var handleSearch = function handleSearch(e) {// Implementar Dwebounce to SearchField\n    // Instalar pacote Lodash _\n  };\n\n  useEffect(function (_) {\n    var fetchData = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_) {\n        var _yield$api$get, _medias;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                setLoading(true);\n                _context.next = 4;\n                return api().get(search ? \"/search/\".concat(search) : '/movies');\n\n              case 4:\n                _yield$api$get = _context.sent;\n                _medias = _yield$api$get.data;\n                setMedias(_medias);\n                setLoading(false);\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](0);\n                setError(500);\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 10]]);\n      }));\n\n      return function fetchData(_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    fetchData();\n  }, [search]);\n  var title = search ? \"B\\xFAsqueda para \\\"\".concat(search, \"\\\"\") : 'Búsqueda';\n  return __jsx(Layout, layoutProps, __jsx(Head, null, __jsx(\"title\", {\n    className: \"jsx-4144089027\"\n  }, title, \" < \", CONFIG.appName)), __jsx(\"div\", {\n    className: \"jsx-4144089027\" + \" \" + \"container-fluid\"\n  }, __jsx(\"div\", {\n    className: \"jsx-4144089027\" + \" \" + \"row\"\n  }, __jsx(\"div\", {\n    className: \"jsx-4144089027\" + \" \" + \"col-md-10 offset-md-1\"\n  }, __jsx(\"header\", {\n    className: \"jsx-4144089027\"\n  }, __jsx(\"h1\", {\n    className: \"jsx-4144089027\" + \" \" + \"h2\"\n  }, \"Videos\", __jsx(\"input\", {\n    type: \"search\",\n    placeholder: \"Buscar\",\n    onChange: function onChange(e) {\n      return setSearch(e.target.value);\n    },\n    value: search,\n    className: \"jsx-4144089027\" + \" \" + \"form-control\"\n  })), error ? __jsx(\"h1\", {\n    className: \"jsx-4144089027\" + \" \" + \"h6\"\n  }, error, \" | Incapaz de buscar\") : search && !loading && __jsx(\"h1\", {\n    className: \"jsx-4144089027\" + \" \" + \"h4\"\n  }, medias.length, \" resultados para \\\"\", search, \"\\\"\")), __jsx(Loading, {\n    loadingState: loading\n  }), !loading && __jsx(MediaList, {\n    medias: medias\n  })))), __jsx(_JSXStyle, {\n    id: \"4144089027\"\n  }, [\"header.jsx-4144089027{padding-top:15px;}\", \".h2.jsx-4144089027{margin-bottom:30px;}\", \"@media (min-width:768px){header.jsx-4144089027{padding-top:30px;}}\", \"input[type=search].jsx-4144089027{padding:0px 10px;margin-left:30px;width:40vw;font-size:12px;-webkit-transition:ease-in-out 0.7s;transition:ease-in-out 0.7s;box-shadow:0 0 0 0.1rem var(--primary);}\", \".form-control.jsx-4144089027{background-color:transparent;border:0;display:inline-block;color:#fff;font-family:inherit;font-size:inherit;font-weight:inherit;outline:0;padding:0;vertical-align:middle;width:95px;}\", \".form-control.jsx-4144089027::-webkit-input-placeholder{color:var(--light-gray);}\", \".form-control.jsx-4144089027::-moz-placeholder{color:var(--light-gray);}\", \".form-control.jsx-4144089027:-ms-input-placeholder{color:var(--light-gray);}\", \".form-control.jsx-4144089027::placeholder{color:var(--light-gray);}\"]));\n};\n\nexport default MoviesPage;","map":{"version":3,"sources":["/Users/rafael/Projects/somosgad/dale/pages/movies.js"],"names":["Head","useEffect","useState","useContext","Layout","CONFIG","api","Loading","MediaList","SearchContext","MoviesPage","layoutProps","medias","setMedias","loading","setLoading","error","setError","search","setSearch","handleSearch","e","_","fetchData","get","data","title","appName","target","value","length"],"mappings":"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","sourcesContent":["// next imports\nimport Head from 'next/head'\n\n// react imports\nimport { useEffect, useState, useContext } from 'react'\n\n// app imports\nimport Layout from '../components/layout/Layout'\nimport { CONFIG } from '../config'\nimport api from '../services/api'\nimport Loading from '../components/Loading/Loading'\nimport MediaList from '../components/MediaList/MediaList'\nimport SearchContext from '../contexts/SearchContext'\n// movies page\nconst MoviesPage = ({ layoutProps }) => {\n\n  const [medias, setMedias] = useState();\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(false)\n  const { search, setSearch } = useContext(SearchContext)\n\n  const handleSearch = e => {\n    // Implementar Dwebounce to SearchField\n    // Instalar pacote Lodash _\n  }\n\n  useEffect(_ => {\n    const fetchData = async _ => {\n      try {\n        setLoading(true)\n        const { data: medias } = await api().get(search ? `/search/${search}` : '/movies')\n        setMedias(medias)\n        setLoading(false)\n      } catch (e) {\n        setError(500)\n      }\n    }\n    fetchData()\n  }, [search])\n\n  const title = search ? `Búsqueda para \"${search}\"` : 'Búsqueda'\n\n  return (\n    <Layout {...layoutProps}>\n      <Head>\n        <title>{title} &lt; {CONFIG.appName}</title>\n      </Head>\n      <div className=\"container-fluid\">\n        <div className=\"row\">\n          <div className=\"col-md-10 offset-md-1\">\n            <header>\n              <h1 className=\"h2\">Videos\n                <input\n                  className=\"form-control\" type=\"search\" placeholder=\"Buscar\"\n                  onChange={e => setSearch(e.target.value)} value={search}\n                />\n              </h1>\n              {error ? (\n                <h1 className=\"h6\">{error} | Incapaz de buscar</h1>\n              ) : search && !loading && (\n                <h1 className=\"h4\">{medias.length} resultados para \"{search}\"</h1>\n              )}\n            </header>\n            <Loading loadingState={loading} />\n            {!loading && (\n              <MediaList {...{ medias }} />\n\n            )}\n\n          </div>\n        </div>\n      </div>\n      <style jsx>{`\n        header {\n          padding-top: 15px;\n        }\n        .h2 {\n          margin-bottom: 30px;\n        }\n        @media (min-width: 768px) {\n          header {\n            padding-top: 30px;\n          }\n        }\n        input[type=search] {\n          padding: 0px 10px;\n          margin-left: 30px;\n          width: 40vw;\n          font-size: 12px;\n          transition: ease-in-out 0.7s;\n          box-shadow: 0 0 0 0.1rem var(--primary);\n        }\n        .form-control {\n          background-color: transparent;\n          border: 0;\n          display: inline-block;\n          color: #fff;\n          font-family: inherit;\n          font-size: inherit;\n          font-weight: inherit;\n          outline: 0;\n          padding: 0;\n          vertical-align: middle;\n          width: 95px;\n        }\n        .form-control::placeholder {\n          color: var(--light-gray);\n        }\n      `}</style>\n    </Layout>\n  );\n}\n\nexport default MoviesPage\n\n"]},"metadata":{},"sourceType":"module"}