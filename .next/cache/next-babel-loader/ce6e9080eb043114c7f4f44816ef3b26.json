{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n// import { useContext } from 'react'\nimport React, { Component } from 'react';\nimport Head from 'next/head';\nimport BlockedPlayer from '~/components/Player/BlockedPlayer'; // import CommentSection from '~/components/comment-section'\n\nimport Layout from '~/components/layout/Layout'; // import LikeNCommentsBtns from '~/components/like-n-comments-btns'\n\nimport MediaDescription from '~/components/media-description';\nimport MoreContentCarousel from '~/components/more-content-carousel'; // import SocialShareBtns from '~/components/social-share-btns'\n// import UserContext from '~/contexts/UserContext'\n\nimport { CONFIG } from '~/config';\nimport { STATIC_PATH, TENANT } from '~/constants/constants';\nimport api from '~/services/api';\nimport MediaLink from '~/components/MediaLink/MediaLink';\nimport Router from 'next/router';\n\nfunction Related({\n  category,\n  medias\n}) {\n  return __jsx(\"div\", null, medias.map((media, key) => __jsx(RelatedVideo, {\n    category,\n    media,\n    key\n  })));\n}\n\nfunction RelatedVideo({\n  category = null,\n  media\n}) {\n  return __jsx(\"div\", {\n    className: \"jsx-48361767\" + \" \" + \"more-card\"\n  }, __jsx(MediaLink, _extends({\n    category,\n    media\n  }, {\n    watch: true\n  }), __jsx(\"a\", {\n    className: \"jsx-48361767\"\n  }, __jsx(\"div\", {\n    className: \"jsx-48361767\" + \" \" + \"row align-items-center gutter-15\"\n  }, __jsx(\"div\", {\n    className: \"jsx-48361767\" + \" \" + \"col-7\"\n  }, __jsx(\"img\", {\n    height: \"123\",\n    src: media.thumbnail2_url ? media.thumbnail2_url : '//placehold.jp/220x123.png',\n    width: \"220\",\n    className: \"jsx-48361767\" + \" \" + \"img-fluid\"\n  })), __jsx(\"div\", {\n    className: \"jsx-48361767\" + \" \" + \"col-4\"\n  }, __jsx(\"p\", {\n    className: \"jsx-48361767\"\n  }, __jsx(\"strong\", {\n    className: \"jsx-48361767\"\n  }, media.title)))))), __jsx(_JSXStyle, {\n    id: \"48361767\"\n  }, [\".more-card.jsx-48361767{font-size:11px;line-height:1.5;margin-bottom:15px;}\", \".more-card.jsx-48361767 a.jsx-48361767{display:block;-webkit-text-decoration:none;text-decoration:none;}\", \".more-card.jsx-48361767 a.jsx-48361767:focus,.more-card.jsx-48361767 a.jsx-48361767:hover{color:var(--white);}\", \".more-card.jsx-48361767 p.jsx-48361767{margin-bottom:0;}\", \"@media (min-width:768px){.more-card.jsx-48361767{line-height:1.75;margin-bottom:0;padding-top:15px;padding-bottom:15px;}}\"]));\n}\n\nexport default class WatchPage extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"state\", {\n      player: __jsx(BlockedPlayer, {\n        image: this.props.media.thumbnail2_url,\n        media: this.props.media\n      })\n    });\n\n    Router.events.on('routeChangeComplete', _ => {\n      this.setState({\n        player: null\n      });\n      this.setState({\n        player: __jsx(BlockedPlayer, {\n          image: this.props.media.thumbnail2_url,\n          media: this.props.media\n        })\n      });\n    });\n  }\n\n  static async getInitialProps(ctx) {\n    const {\n      slug,\n      category: categorySlug\n    } = ctx.query;\n\n    try {\n      const response = await api(ctx).get(`/movie/${slug}/category/${categorySlug}`);\n      const {\n        category,\n        movie,\n        related\n      } = response.data;\n      return {\n        category,\n        media: movie,\n        related\n      };\n    } catch (error) {\n      const errorCode = 404;\n      return {\n        errorCode\n      };\n    }\n  }\n\n  render() {\n    let {\n      appName\n    } = CONFIG;\n    let {\n      title: mediaTitle\n    } = this.props.media;\n    let pageTitle = `${mediaTitle} < ${appName}`;\n    return __jsx(Layout, _extends({\n      errorCode: this.props.errorCode\n    }, this.props.layoutProps), __jsx(Head, null, __jsx(\"title\", {\n      className: \"jsx-4228821930\"\n    }, pageTitle)), __jsx(\"div\", {\n      className: \"jsx-4228821930\" + \" \" + \"container-fluid\"\n    }, __jsx(\"div\", {\n      className: \"jsx-4228821930\" + \" \" + \"row align-items-center\"\n    }, __jsx(\"div\", {\n      className: \"jsx-4228821930\" + \" \" + \"col-12 col-lg-9\"\n    }, this.state.player), this.props.related && __jsx(\"div\", {\n      className: \"jsx-4228821930\" + \" \" + \"col-12 col-lg-3 d-none d-md-block\"\n    }, __jsx(Related, {\n      category: this.props.category,\n      medias: this.props.related\n    }))), __jsx(\"div\", {\n      className: \"jsx-4228821930\" + \" \" + \"row\"\n    }, __jsx(\"div\", {\n      className: \"jsx-4228821930\" + \" \" + \"col-lg-8\"\n    }, __jsx(MediaDescription, {\n      media: this.props.media\n    }))), this.props.related && __jsx(\"div\", {\n      className: \"jsx-4228821930\" + \" \" + \"d-md-none\"\n    }, __jsx(Related, {\n      category: this.props.category,\n      medias: this.props.related\n    }))), this.props.category && __jsx(MoreContentCarousel, {\n      category: this.props.category\n    }), __jsx(_JSXStyle, {\n      id: \"4228821930\"\n    }, [\".row.jsx-4228821930:first-child{margin-bottom:15px;}\", \".icons-row.jsx-4228821930{margin-bottom:25px;}\", \"@media (min-width:1200px){.container-fluid.jsx-4228821930{padding-right:4%;padding-left:4%;}.row.jsx-4228821930:first-child{margin-bottom:30px;}}\"]));\n  }\n\n}","map":{"version":3,"sources":["/Users/rafael/Projects/somosgad/dale/pages/media/[slug]/watch.js"],"names":["React","Component","Head","BlockedPlayer","Layout","MediaDescription","MoreContentCarousel","CONFIG","STATIC_PATH","TENANT","api","MediaLink","Router","Related","category","medias","map","media","key","RelatedVideo","thumbnail2_url","title","WatchPage","constructor","props","player","events","on","_","setState","getInitialProps","ctx","slug","categorySlug","query","response","get","movie","related","data","error","errorCode","render","appName","mediaTitle","pageTitle","layoutProps","state"],"mappings":"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","sourcesContent":["// import { useContext } from 'react'\nimport React, { Component } from 'react';\nimport Head from 'next/head'\nimport BlockedPlayer from '~/components/Player/BlockedPlayer'\n// import CommentSection from '~/components/comment-section'\nimport Layout from '~/components/layout/Layout'\n// import LikeNCommentsBtns from '~/components/like-n-comments-btns'\nimport MediaDescription from '~/components/media-description'\nimport MoreContentCarousel from '~/components/more-content-carousel'\n// import SocialShareBtns from '~/components/social-share-btns'\n// import UserContext from '~/contexts/UserContext'\nimport { CONFIG } from '~/config'\nimport { STATIC_PATH, TENANT } from '~/constants/constants'\nimport api from '~/services/api'\nimport MediaLink from '~/components/MediaLink/MediaLink'\nimport Router from 'next/router'\n\nfunction Related({category, medias}) {\n  return (\n    <div>\n      { medias.map((media, key) => (\n        <RelatedVideo {...{category, media, key}} />\n      )) }\n    </div>\n  )\n}\n\nfunction RelatedVideo({category = null, media}) {\n  return (\n    <div className=\"more-card\">\n      <MediaLink {...{category, media}} watch>\n        <a>\n          <div className=\"row align-items-center gutter-15\">\n            <div className=\"col-7\">\n              <img\n                className=\"img-fluid\"\n                height=\"123\"\n                src={media.thumbnail2_url ? media.thumbnail2_url : '//placehold.jp/220x123.png'} width=\"220\"\n              />\n            </div>\n            <div className=\"col-4\">\n              <p><strong>{media.title}</strong></p>\n            </div>\n          </div>\n        </a>\n      </MediaLink>\n      <style jsx>{`\n        .more-card {\n          font-size: 11px;\n          line-height: 1.5;\n          margin-bottom: 15px;\n        }\n        .more-card a {\n          display: block;\n          text-decoration: none;\n        }\n        .more-card a:focus,\n        .more-card a:hover {\n          color: var(--white);\n        }\n        .more-card p {\n          margin-bottom: 0;\n        }\n        @media (min-width: 768px) {\n          .more-card {\n            line-height: 1.75;\n            margin-bottom: 0;\n            padding-top: 15px;\n            padding-bottom: 15px;\n          }\n        }\n      `}</style>\n    </div>\n  )\n}\n\nexport default class WatchPage extends Component {\n  constructor(props) {\n    super(props);\n    Router.events.on('routeChangeComplete', (_) => {\n      this.setState({player: null});\n      this.setState({\n        player: (\n          <BlockedPlayer \n            image={this.props.media.thumbnail2_url} \n            media={this.props.media}\n          />\n        )\n      });\n    });\n  }\n\n  state = {\n    player: (\n      <BlockedPlayer \n        image={this.props.media.thumbnail2_url} \n        media={this.props.media}\n      />\n    ),\n  }\n\n  static async getInitialProps(ctx) {\n    const {slug, category: categorySlug} = ctx.query;\n    try {\n      const response = await api(ctx).get(`/movie/${slug}/category/${categorySlug}`)\n      const { category, movie, related } = response.data\n      return { category, media: movie, related }\n    } catch (error) {\n      const errorCode = 404\n      return { errorCode }\n    }\n  }\n\n  render() {\n    let { appName } = CONFIG\n    let { title: mediaTitle } = this.props.media\n    let pageTitle = `${mediaTitle} < ${appName}`\n    \n    return (\n       <Layout errorCode={this.props.errorCode} {...this.props.layoutProps}>\n          <Head>\n            <title>{pageTitle}</title>\n          </Head>\n          <div className=\"container-fluid\">\n            <div className=\"row align-items-center\">\n              <div className=\"col-12 col-lg-9\">\n                {this.state.player}\n              </div>\n              { this.props.related && (\n                <div className=\"col-12 col-lg-3 d-none d-md-block\">\n                  <Related {...{category: this.props.category, medias: this.props.related}} />\n                </div>\n              )}\n            </div>\n            <div className=\"row\">\n              <div className=\"col-lg-8\">\n                <MediaDescription {...{media: this.props.media }} />\n              </div>\n            </div>\n            {/* <div className=\"icons-row row\">\n              <div className=\"col\">\n                <LikeNCommentsBtns />\n              </div>\n              <div className=\"col text-right\">\n                <SocialShareBtns />\n              </div>\n            </div> */}\n            { this.props.related && (\n              <div className=\"d-md-none\">\n                <Related {...{category: this.props.category, medias: this.props.related}} />\n                {/* <Related {...{category, medias: related}} /> */}\n              </div>\n            )}\n          </div>\n\n          {this.props.category && (\n            <MoreContentCarousel category={this.props.category} />\n          )}\n\n          {/* <CommentSection /> */}\n\n          <style jsx>{`\n            .row:first-child {\n              margin-bottom: 15px;\n            }\n            .icons-row {\n              margin-bottom: 25px;\n            }\n            @media (min-width: 1200px) {\n              .container-fluid {\n                padding-right: 4%;\n                padding-left: 4%;\n              }\n              .row:first-child {\n                margin-bottom: 30px;\n              }\n            }\n          `}</style>\n       </Layout>\n    );\n  }\n}"]},"metadata":{},"sourceType":"module"}