{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n// next\nimport Head from 'next/head'; // env\n\nimport { CONFIG } from '~/config';\nimport { HAS_WINDOW } from '~/constants/constants'; // react\n\nimport { useEffect, useState } from 'react';\nimport useScript, { ScriptStatus } from '@charlietango/use-script';\nimport nookies from 'nookies'; // components\n\nimport Layout from '~/components/layout/Layout';\nimport { PackageRadio } from '~/components/Packages';\nimport ChangePlanForm from './form';\nimport withAuth from '~/components/withAuth'; // page\n\nvar ChangePlanPage = function ChangePlanPage(_ref) {\n  var api = _ref.api,\n      layoutProps = _ref.layoutProps,\n      packages = _ref.packages;\n\n  var _useScript = useScript('https://js.paymentsos.com/v2/latest/secure-fields.min.js'),\n      _useScript2 = _slicedToArray(_useScript, 2),\n      ready = _useScript2[0],\n      status = _useScript2[1];\n\n  var _useState = useState(false),\n      isPayUReady = _useState[0],\n      setIsPayUReady = _useState[1];\n\n  var businessUnitPublicKey = '88985036-6530-4b5a-a7ec-c4e07ec07f6c';\n  var POS = ready && HAS_WINDOW ? window.POS : null;\n  var payUEnv = 'test';\n  var POSStyle = {\n    base: {\n      borderRadius: '.15rem',\n      backgroundColor: 'white',\n      height: 'calc(1.5em + .75rem + 2px)',\n      fontSize: '12px',\n      padding: '0px 3px',\n      marginLeft: '5px',\n      cardImage: {\n        borderTopRightRadius: 0,\n        borderBottomRightRadius: 0,\n        margin: 0\n      },\n      pan: {\n        width: '160px',\n        borderTopLeftRadius: 0,\n        borderBottomLeftRadius: 0,\n        marginLeft: 0\n      },\n      expirationDate: {\n        width: '47px'\n      },\n      secureFields: {\n        left: '40px'\n      },\n      cvv: {\n        width: '35px'\n      }\n    }\n  };\n\n  if (status === ScriptStatus.ERROR) {\n    console.log('Failed to load POS API');\n  }\n\n  useEffect(function (_) {\n    if (POS) {\n      POS.setPublicKey(businessUnitPublicKey);\n      POS.setEnvironment(payUEnv);\n      POS.setStyle(POSStyle);\n      POS.setCardNumberPlaceholder('Tarjeta de crédito');\n      POS.setExpirationDatePlaceholder('MM/AA');\n      setIsPayUReady(true);\n    }\n  }, [POS]);\n  return __jsx(Layout, layoutProps, __jsx(Head, null, __jsx(\"title\", {\n    className: \"jsx-674601483\"\n  }, \"Cambiar < Plan < \", CONFIG.appName)), __jsx(\"div\", {\n    className: \"jsx-674601483\" + \" \" + \"rgpage container-fluid\"\n  }, __jsx(\"div\", {\n    className: \"jsx-674601483\" + \" \" + \"row\"\n  }, __jsx(\"div\", {\n    className: \"jsx-674601483\" + \" \" + \"col-xl-8 offset-xl-2\"\n  }, __jsx(\"h1\", {\n    className: \"jsx-674601483\" + \" \" + \"h2\"\n  }, \"T\\xFA Plan Actual\"), __jsx(\"div\", {\n    style: {\n      fontSize: '16px',\n      lineHeight: 1\n    },\n    className: \"jsx-674601483\" + \" \" + \"col col-md-4 text-left vertical-align\"\n  }, __jsx(PackageRadio, {\n    readOnly: true,\n    package_id: \"1\",\n    plan: {\n      id: '1',\n      name: '6 meses',\n      currency: 'ars',\n      amount: '594'\n    }\n  })), __jsx(\"h1\", {\n    className: \"jsx-674601483\" + \" \" + \"h2\"\n  }, \"Nuevo Plan\"), __jsx(ChangePlanForm, {\n    api: api,\n    isPayUReady: isPayUReady,\n    packages: packages,\n    POS: POS\n  })))), __jsx(_JSXStyle, {\n    id: \"674601483\"\n  }, [\".rgpage.jsx-674601483{padding-top:40px;padding-bottom:120px;}\", \".h2.jsx-674601483{margin-bottom:10px;}\"]));\n}; // getInitialProps\n\n\nChangePlanPage.getInitialProps = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(ctx) {\n    var api, packages, _yield$api$get, data;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            api = ctx.api; // get packages\n\n            _context.prev = 1;\n            _context.next = 4;\n            return api.get('packages');\n\n          case 4:\n            _yield$api$get = _context.sent;\n            data = _yield$api$get.data;\n            packages = {\n              items: data\n            };\n            _context.next = 12;\n            break;\n\n          case 9:\n            _context.prev = 9;\n            _context.t0 = _context[\"catch\"](1);\n            packages = {\n              error: _context.t0\n            };\n\n          case 12:\n            return _context.abrupt(\"return\", {\n              packages: packages\n            });\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[1, 9]]);\n  }));\n\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nexport default withAuth(ChangePlanPage);","map":{"version":3,"sources":["/Users/rafael/Projects/somosgad/dale/pages/user/changePlan/index.js"],"names":["Head","CONFIG","HAS_WINDOW","useEffect","useState","useScript","ScriptStatus","nookies","Layout","PackageRadio","ChangePlanForm","withAuth","ChangePlanPage","api","layoutProps","packages","ready","status","isPayUReady","setIsPayUReady","businessUnitPublicKey","POS","window","payUEnv","POSStyle","base","borderRadius","backgroundColor","height","fontSize","padding","marginLeft","cardImage","borderTopRightRadius","borderBottomRightRadius","margin","pan","width","borderTopLeftRadius","borderBottomLeftRadius","expirationDate","secureFields","left","cvv","ERROR","console","log","_","setPublicKey","setEnvironment","setStyle","setCardNumberPlaceholder","setExpirationDatePlaceholder","appName","lineHeight","id","name","currency","amount","getInitialProps","ctx","get","data","items","error"],"mappings":"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","sourcesContent":["// next\nimport Head from 'next/head'\n\n// env\nimport { CONFIG }     from '~/config'\nimport { HAS_WINDOW } from '~/constants/constants'\n\n// react\nimport { useEffect, useState } from 'react'\n\nimport useScript, { ScriptStatus }  from '@charlietango/use-script'\nimport nookies                      from 'nookies'\n\n// components\nimport Layout           from '~/components/layout/Layout'\nimport { PackageRadio } from '~/components/Packages'\nimport ChangePlanForm   from './form'\nimport withAuth         from '~/components/withAuth'\n\n// page\nconst ChangePlanPage = ({ api, layoutProps, packages }) => {\n  const [ ready, status ] = useScript('https://js.paymentsos.com/v2/latest/secure-fields.min.js')\n  const [ isPayUReady, setIsPayUReady ] = useState(false)\n\n  const businessUnitPublicKey = '88985036-6530-4b5a-a7ec-c4e07ec07f6c'\n  const POS = ready && HAS_WINDOW ? window.POS : null\n  const payUEnv = 'test'\n\n  const POSStyle = {\n    base: {\n      borderRadius: '.15rem',\n      backgroundColor: 'white',\n      height: 'calc(1.5em + .75rem + 2px)',\n      fontSize: '12px',\n      padding:'0px 3px',\n      marginLeft: '5px',\n      cardImage: {\n        borderTopRightRadius: 0,\n        borderBottomRightRadius: 0,\n        margin: 0,\n      },\n      pan:{\n        width:'160px',\n        borderTopLeftRadius: 0,\n        borderBottomLeftRadius: 0,\n        marginLeft: 0,\n      },\n      expirationDate: { width: '47px' },\n      secureFields: { left: '40px' },\n      cvv: { width: '35px' }\n    }\n  }\n\n  if (status === ScriptStatus.ERROR) {\n    console.log('Failed to load POS API')\n  }\n\n  useEffect(_ => {\n    if (POS) {\n      POS.setPublicKey(businessUnitPublicKey)\n      POS.setEnvironment(payUEnv)\n      POS.setStyle(POSStyle)\n      POS.setCardNumberPlaceholder('Tarjeta de crédito')\n      POS.setExpirationDatePlaceholder('MM/AA')\n      setIsPayUReady(true)\n    }\n  }, [POS])\n\n  return (\n    <Layout {...layoutProps}>\n      <Head>\n        <title>Cambiar &lt; Plan &lt; {CONFIG.appName}</title>\n      </Head>\n      <div className=\"rgpage container-fluid\">\n        <div className=\"row\">\n          <div className=\"col-xl-8 offset-xl-2\">\n\n            <h1 className=\"h2\">Tú Plan Actual</h1>\n            {/* <PackageRadio readOnly package_id=\"1\"\n              plan={{ id: '1', name:'6 meses', currency: 'ars', amount: '594'}}\n            /> */}\n\n            <div className=\"col col-md-4 text-left vertical-align\" style={{fontSize: '16px', lineHeight: 1}}>\n              <PackageRadio\n                readOnly\n                package_id=\"1\"\n                plan={{\n                  id: '1',\n                  name:'6 meses',\n                  currency: 'ars',\n                  amount: '594'\n                }}\n              />\n            </div>\n\n            <h1 className=\"h2\">Nuevo Plan</h1>\n            <ChangePlanForm {...{api, isPayUReady, packages, POS}} />\n\n          </div>\n        </div>\n      </div>\n      <style jsx>{`\n        .rgpage {\n          padding-top: 40px;\n          padding-bottom: 120px;\n        }\n        .h2 {\n          margin-bottom: 10px;\n        }\n      `}</style>\n    </Layout>\n  )\n}\n\n// getInitialProps\nChangePlanPage.getInitialProps = async ctx => {\n\n  const { api } = ctx\n\n  // get packages\n  let packages\n  try {\n    const { data } = await api.get('packages')\n    packages = { items: data }\n  } catch(error) {\n    packages = { error }\n  }\n\n  return { packages }\n}\n\nexport default withAuth(ChangePlanPage)\n"]},"metadata":{},"sourceType":"module"}