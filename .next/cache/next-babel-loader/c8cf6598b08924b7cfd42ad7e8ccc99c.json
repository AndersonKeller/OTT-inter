{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useEffect, useState } from \"react\";\nimport FormGroup from \"~/components/layout/AuthModal/FormGroup\";\nimport Label from \"~/components/layout/AuthModal/Label\";\nimport Input from \"~/components/layout/AuthModal/Input\";\nimport InputRadio from \"~/components/Form/InputRadio\";\nimport withAuth from \"~/components/withAuth\";\nimport InvalidFeedback from \"~/components/Form/InvalidFeedback\";\nimport { HAS_WINDOW } from \"~/constants/constants\";\nimport useScript from \"@charlietango/use-script\";\nimport Select from \"~/components/Select/Select\";\nimport Button from \"~/components/button\";\n\nconst Payment = ({\n  layoutProps,\n  package_id,\n  packages,\n  api,\n  error,\n  requireds\n}) => {\n  const [ready, status] = useScript('https://js.paymentsos.com/v2/latest/secure-fields.min.js');\n  const {\n    0: values,\n    1: setValues\n  } = useState({\n    package_id: '',\n    payment_method_id: null,\n    payment_os: null,\n    cash_payment_method_id: null,\n    terms: null,\n    discount_id: null\n  });\n  const {\n    0: loading,\n    1: setLoading\n  } = useState();\n  const payUEnv = 'test';\n  const businessUnitPublicKey = '88985036-6530-4b5a-a7ec-c4e07ec07f6c';\n  const {\n    0: isPayUReady,\n    1: setIsPayUReady\n  } = useState(false);\n  const POS = ready && HAS_WINDOW ? window.POS : null;\n  const credit_card_id = 1;\n  const debit_card_id = 2;\n  const isCardPayment = [credit_card_id, debit_card_id].includes(values.payment_method_id);\n  const POSStyle = {\n    base: {\n      borderRadius: '.15rem',\n      backgroundColor: 'white',\n      height: 'calc(1.5em + .75rem + 2px)',\n      fontSize: '12px',\n      padding: '0px 3px',\n      marginLeft: '5px',\n      cardImage: {\n        borderTopRightRadius: 0,\n        borderBottomRightRadius: 0,\n        margin: 0\n      },\n      pan: {\n        width: '160px',\n        borderTopLeftRadius: 0,\n        borderBottomLeftRadius: 0,\n        marginLeft: 0\n      },\n      expirationDate: {\n        width: '47px'\n      },\n      secureFields: {\n        left: '40px'\n      },\n      cvv: {\n        width: '35px'\n      }\n    }\n  };\n  useEffect(_ => {\n    if (POS) {\n      POS.setPublicKey(businessUnitPublicKey);\n      POS.setEnvironment(payUEnv);\n      POS.setStyle(POSStyle);\n      POS.setCardNumberPlaceholder('Tarjeta de crédito');\n      POS.setExpirationDatePlaceholder('MM/AA');\n      setIsPayUReady(true);\n    }\n  }, [POS]);\n  /* handle payment method change */\n\n  function onPaymentChange(e) {\n    setValues(_objectSpread(_objectSpread({}, values), {}, {\n      payment_method_id: parseInt(e.target.value, 10),\n      cash_payment_method_id: null\n    }));\n  }\n\n  function onCashPaymentMethodChange(e) {\n    setValues(_objectSpread(_objectSpread({}, values), {}, {\n      cash_payment_method_id: parseInt(e.target.value, 10)\n    }));\n  }\n\n  const handleInputChange = e => {\n    const {\n      checked,\n      name,\n      value,\n      type\n    } = e.target;\n    setValues(_objectSpread(_objectSpread({}, values), {}, {\n      [name]: type === 'checkbox' ? checked ? value === 'true' ? true : value : false : value\n    }));\n  }; // payment methods\n\n\n  const {\n    0: paymentMethods,\n    1: setPaymentMethods\n  } = useState(); // get payment methods\n\n  useEffect(_ => {\n    const getPaymentMethods = async _ => {\n      const {\n        data\n      } = await api.get('payment-methods');\n      setPaymentMethods(data);\n    };\n\n    getPaymentMethods();\n  }, []); // init card secure fields\n\n  useEffect(_ => {\n    if (isPayUReady && isCardPayment) {\n      POS.initSecureFields('card-secure-fields');\n    }\n  }, [isPayUReady, isCardPayment]); // cash payment methods\n\n  const {\n    0: cashPaymentMethods,\n    1: setCashPaymentMethods\n  } = useState(); // get cash payment methods\n\n  useEffect(_ => {\n    const getCashPaymentMethods = async _ => {\n      const {\n        data\n      } = await api.get('cash-payment-methods');\n      setCashPaymentMethods(data);\n    };\n\n    getCashPaymentMethods();\n  }, []);\n  return __jsx(\"div\", {\n    className: \"jsx-2298570347\" + \" \" + \"row\"\n  }, __jsx(\"div\", {\n    className: \"jsx-2298570347\" + \" \" + \"offset-md-2 col-md-8\"\n  }, __jsx(\"h3\", {\n    className: \"jsx-2298570347\" + \" \" + \"h3\"\n  }, \"Pago \", package_id, \" \"), __jsx(\"div\", {\n    className: \"jsx-2298570347\" + \" \" + \"row\"\n  }, __jsx(\"div\", {\n    className: \"jsx-2298570347\" + \" \" + \"col-md-6\"\n  }, __jsx(FormGroup, null, __jsx(Select, {\n    id: \"payment_method_id\",\n    name: \"payment_method_id\",\n    required: requireds,\n    onChange: onPaymentChange,\n    value: values.payment_method_id\n  }, __jsx(\"option\", {\n    value: \"0\",\n    className: \"jsx-2298570347\"\n  }, \"Selecione\"), paymentMethods && paymentMethods.map((paymentMethod, key) => __jsx(\"option\", {\n    state: values.payment_method_id,\n    value: paymentMethod.id,\n    className: \"jsx-2298570347\"\n  }, paymentMethod.name))), __jsx(InvalidFeedback, {\n    error: error,\n    loading: loading,\n    name: \"gender_id\"\n  }))), __jsx(\"div\", {\n    className: \"jsx-2298570347\" + \" \" + \"col-md-6\"\n  }, isCardPayment ? __jsx(\"div\", {\n    className: \"jsx-2298570347\" + \" \" + \"card-inputs\"\n  }, __jsx(FormGroup, null, __jsx(Label, {\n    htmlFor: \"cardholder-name\"\n  }, \"Nombre impreso en tarjeta\"), __jsx(Input, {\n    id: \"cardholder-name\",\n    name: \"cardholder-name\",\n    required: requireds,\n    type: \"text\"\n  })), __jsx(FormGroup, null, __jsx(\"div\", {\n    id: \"card-secure-fields\",\n    className: \"jsx-2298570347\"\n  }), __jsx(InvalidFeedback, {\n    error: error,\n    loading: loading,\n    name: \"payment_os\"\n  })), __jsx(Button, {\n    block: true,\n    color: \"secondary\",\n    type: \"submit\",\n    disabled: loading,\n    loading: loading\n  }, \"Pagar\")) // cash payment methods\n  : values.payment_method_id === 3 && __jsx(FormGroup, null, cashPaymentMethods == null ? __jsx(\"p\", {\n    className: \"jsx-2298570347\"\n  }, \"Cargando...\") : cashPaymentMethods.length ? cashPaymentMethods.map((item, key) => __jsx(InputRadio, {\n    key: key,\n    label: item.name,\n    name: \"cash_payment_method_id\",\n    onChange: onCashPaymentMethodChange,\n    state: values.cash_payment_method_id,\n    value: item.id\n  })) : __jsx(\"p\", {\n    className: \"jsx-2298570347\"\n  }, \"Sin m\\xE9todo de pago configurado.\"), __jsx(InvalidFeedback, {\n    error: error,\n    loading: loading,\n    name: \"cash_payment_method_id\"\n  }), __jsx(Button, {\n    block: true,\n    color: \"secondary\",\n    type: \"submit\",\n    disabled: loading,\n    loading: loading\n  }, \"Pr\\xF3ximo\"))))), __jsx(_JSXStyle, {\n    id: \"2298570347\"\n  }, \"@media (min-width:768px){.card-inputs.jsx-2298570347{margin-top:-21px;}}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9yYWZhZWwvUHJvamVjdHMvc29tb3NnYWQvZGFsZS9wYWdlcy9yZWdpc3Rlci93aXphcmQvcGF5bWVudC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUEwTm1CLEFBSThCLGlCQUNuQiIsImZpbGUiOiIvVXNlcnMvcmFmYWVsL1Byb2plY3RzL3NvbW9zZ2FkL2RhbGUvcGFnZXMvcmVnaXN0ZXIvd2l6YXJkL3BheW1lbnQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgRm9ybUdyb3VwIGZyb20gXCJ+L2NvbXBvbmVudHMvbGF5b3V0L0F1dGhNb2RhbC9Gb3JtR3JvdXBcIjtcbmltcG9ydCBMYWJlbCBmcm9tIFwifi9jb21wb25lbnRzL2xheW91dC9BdXRoTW9kYWwvTGFiZWxcIjtcbmltcG9ydCBJbnB1dCBmcm9tIFwifi9jb21wb25lbnRzL2xheW91dC9BdXRoTW9kYWwvSW5wdXRcIjtcbmltcG9ydCBJbnB1dFJhZGlvIGZyb20gXCJ+L2NvbXBvbmVudHMvRm9ybS9JbnB1dFJhZGlvXCI7XG5pbXBvcnQgd2l0aEF1dGggZnJvbSBcIn4vY29tcG9uZW50cy93aXRoQXV0aFwiO1xuaW1wb3J0IEludmFsaWRGZWVkYmFjayBmcm9tIFwifi9jb21wb25lbnRzL0Zvcm0vSW52YWxpZEZlZWRiYWNrXCJcbmltcG9ydCB7IEhBU19XSU5ET1cgfSBmcm9tIFwifi9jb25zdGFudHMvY29uc3RhbnRzXCI7XG5pbXBvcnQgdXNlU2NyaXB0IGZyb20gXCJAY2hhcmxpZXRhbmdvL3VzZS1zY3JpcHRcIjtcbmltcG9ydCBTZWxlY3QgZnJvbSBcIn4vY29tcG9uZW50cy9TZWxlY3QvU2VsZWN0XCI7XG5pbXBvcnQgQnV0dG9uIGZyb20gXCJ+L2NvbXBvbmVudHMvYnV0dG9uXCI7XG5cbmNvbnN0IFBheW1lbnQgPSAoe1xuICAgICAgICAgICAgICAgICAgIGxheW91dFByb3BzLFxuICAgICAgICAgICAgICAgICAgIHBhY2thZ2VfaWQsXG4gICAgICAgICAgICAgICAgICAgcGFja2FnZXMsXG4gICAgICAgICAgICAgICAgICAgYXBpLFxuICAgICAgICAgICAgICAgICAgIGVycm9yLFxuICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkc1xuICAgICAgICAgICAgICAgICB9KSA9PiB7XG5cbiAgY29uc3QgW3JlYWR5LCBzdGF0dXNdID0gdXNlU2NyaXB0KCdodHRwczovL2pzLnBheW1lbnRzb3MuY29tL3YyL2xhdGVzdC9zZWN1cmUtZmllbGRzLm1pbi5qcycpXG5cbiAgY29uc3QgW3ZhbHVlcywgc2V0VmFsdWVzXSA9IHVzZVN0YXRlKHtcbiAgICBwYWNrYWdlX2lkOiAnJyxcbiAgICBwYXltZW50X21ldGhvZF9pZDogbnVsbCxcbiAgICBwYXltZW50X29zOiBudWxsLFxuICAgIGNhc2hfcGF5bWVudF9tZXRob2RfaWQ6IG51bGwsXG4gICAgdGVybXM6IG51bGwsXG4gICAgZGlzY291bnRfaWQ6IG51bGwsXG4gIH0pXG5cbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUoKTtcblxuICBjb25zdCBwYXlVRW52ID0gJ3Rlc3QnXG4gIGNvbnN0IGJ1c2luZXNzVW5pdFB1YmxpY0tleSA9ICc4ODk4NTAzNi02NTMwLTRiNWEtYTdlYy1jNGUwN2VjMDdmNmMnXG4gIGNvbnN0IFtpc1BheVVSZWFkeSwgc2V0SXNQYXlVUmVhZHldID0gdXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IFBPUyA9IHJlYWR5ICYmIEhBU19XSU5ET1cgPyB3aW5kb3cuUE9TIDogbnVsbFxuICBjb25zdCBjcmVkaXRfY2FyZF9pZCA9IDFcbiAgY29uc3QgZGViaXRfY2FyZF9pZCA9IDJcbiAgY29uc3QgaXNDYXJkUGF5bWVudCA9IFtjcmVkaXRfY2FyZF9pZCwgZGViaXRfY2FyZF9pZF0uaW5jbHVkZXModmFsdWVzLnBheW1lbnRfbWV0aG9kX2lkKVxuXG5cbiAgY29uc3QgUE9TU3R5bGUgPSB7XG4gICAgYmFzZToge1xuICAgICAgYm9yZGVyUmFkaXVzOiAnLjE1cmVtJyxcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJ3doaXRlJyxcbiAgICAgIGhlaWdodDogJ2NhbGMoMS41ZW0gKyAuNzVyZW0gKyAycHgpJyxcbiAgICAgIGZvbnRTaXplOiAnMTJweCcsXG4gICAgICBwYWRkaW5nOiAnMHB4IDNweCcsXG4gICAgICBtYXJnaW5MZWZ0OiAnNXB4JyxcbiAgICAgIGNhcmRJbWFnZToge1xuICAgICAgICBib3JkZXJUb3BSaWdodFJhZGl1czogMCxcbiAgICAgICAgYm9yZGVyQm90dG9tUmlnaHRSYWRpdXM6IDAsXG4gICAgICAgIG1hcmdpbjogMCxcbiAgICAgIH0sXG4gICAgICBwYW46IHtcbiAgICAgICAgd2lkdGg6ICcxNjBweCcsXG4gICAgICAgIGJvcmRlclRvcExlZnRSYWRpdXM6IDAsXG4gICAgICAgIGJvcmRlckJvdHRvbUxlZnRSYWRpdXM6IDAsXG4gICAgICAgIG1hcmdpbkxlZnQ6IDAsXG4gICAgICB9LFxuICAgICAgZXhwaXJhdGlvbkRhdGU6IHsgd2lkdGg6ICc0N3B4JyB9LFxuICAgICAgc2VjdXJlRmllbGRzOiB7IGxlZnQ6ICc0MHB4JyB9LFxuICAgICAgY3Z2OiB7IHdpZHRoOiAnMzVweCcgfVxuICAgIH1cbiAgfVxuXG5cbiAgdXNlRWZmZWN0KF8gPT4ge1xuICAgIGlmIChQT1MpIHtcbiAgICAgIFBPUy5zZXRQdWJsaWNLZXkoYnVzaW5lc3NVbml0UHVibGljS2V5KVxuICAgICAgUE9TLnNldEVudmlyb25tZW50KHBheVVFbnYpXG4gICAgICBQT1Muc2V0U3R5bGUoUE9TU3R5bGUpXG4gICAgICBQT1Muc2V0Q2FyZE51bWJlclBsYWNlaG9sZGVyKCdUYXJqZXRhIGRlIGNyw6lkaXRvJylcbiAgICAgIFBPUy5zZXRFeHBpcmF0aW9uRGF0ZVBsYWNlaG9sZGVyKCdNTS9BQScpO1xuICAgICAgc2V0SXNQYXlVUmVhZHkodHJ1ZSlcbiAgICB9XG4gIH0sIFtQT1NdKVxuXG5cbiAgLyogaGFuZGxlIHBheW1lbnQgbWV0aG9kIGNoYW5nZSAqL1xuICBmdW5jdGlvbiBvblBheW1lbnRDaGFuZ2UoZSkge1xuICAgIHNldFZhbHVlcyh7XG4gICAgICAuLi52YWx1ZXMsXG4gICAgICBwYXltZW50X21ldGhvZF9pZDogcGFyc2VJbnQoZS50YXJnZXQudmFsdWUsIDEwKSxcbiAgICAgIGNhc2hfcGF5bWVudF9tZXRob2RfaWQ6IG51bGwsXG4gICAgfSlcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uQ2FzaFBheW1lbnRNZXRob2RDaGFuZ2UoZSkge1xuICAgIHNldFZhbHVlcyh7XG4gICAgICAuLi52YWx1ZXMsXG4gICAgICBjYXNoX3BheW1lbnRfbWV0aG9kX2lkOiBwYXJzZUludChlLnRhcmdldC52YWx1ZSwgMTApLFxuICAgIH0pXG4gIH1cblxuICBjb25zdCBoYW5kbGVJbnB1dENoYW5nZSA9IGUgPT4ge1xuICAgIGNvbnN0IHsgY2hlY2tlZCwgbmFtZSwgdmFsdWUsIHR5cGUgfSA9IGUudGFyZ2V0XG4gICAgc2V0VmFsdWVzKHtcbiAgICAgIC4uLnZhbHVlcyxcbiAgICAgIFtuYW1lXTogdHlwZSA9PT0gJ2NoZWNrYm94JyA/XG4gICAgICAgIChjaGVja2VkID8gKHZhbHVlID09PSAndHJ1ZScgPyB0cnVlIDogdmFsdWUpIDogZmFsc2UpIDpcbiAgICAgICAgdmFsdWUsXG4gICAgfSlcbiAgfVxuXG4gIC8vIHBheW1lbnQgbWV0aG9kc1xuICBjb25zdCBbcGF5bWVudE1ldGhvZHMsIHNldFBheW1lbnRNZXRob2RzXSA9IHVzZVN0YXRlKClcblxuICAvLyBnZXQgcGF5bWVudCBtZXRob2RzXG4gIHVzZUVmZmVjdChfID0+IHtcbiAgICBjb25zdCBnZXRQYXltZW50TWV0aG9kcyA9IGFzeW5jIF8gPT4ge1xuICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBhcGkuZ2V0KCdwYXltZW50LW1ldGhvZHMnKVxuICAgICAgc2V0UGF5bWVudE1ldGhvZHMoZGF0YSlcbiAgICB9XG4gICAgZ2V0UGF5bWVudE1ldGhvZHMoKVxuICB9LCBbXSlcblxuICAvLyBpbml0IGNhcmQgc2VjdXJlIGZpZWxkc1xuICB1c2VFZmZlY3QoXyA9PiB7XG4gICAgaWYgKGlzUGF5VVJlYWR5ICYmIGlzQ2FyZFBheW1lbnQpIHtcbiAgICAgIFBPUy5pbml0U2VjdXJlRmllbGRzKCdjYXJkLXNlY3VyZS1maWVsZHMnKVxuICAgIH1cbiAgfSwgW2lzUGF5VVJlYWR5LCBpc0NhcmRQYXltZW50XSlcblxuICAvLyBjYXNoIHBheW1lbnQgbWV0aG9kc1xuICBjb25zdCBbY2FzaFBheW1lbnRNZXRob2RzLCBzZXRDYXNoUGF5bWVudE1ldGhvZHNdID0gdXNlU3RhdGUoKVxuXG4gIC8vIGdldCBjYXNoIHBheW1lbnQgbWV0aG9kc1xuICB1c2VFZmZlY3QoXyA9PiB7XG4gICAgY29uc3QgZ2V0Q2FzaFBheW1lbnRNZXRob2RzID0gYXN5bmMgXyA9PiB7XG4gICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGFwaS5nZXQoJ2Nhc2gtcGF5bWVudC1tZXRob2RzJylcbiAgICAgIHNldENhc2hQYXltZW50TWV0aG9kcyhkYXRhKVxuICAgIH1cbiAgICBnZXRDYXNoUGF5bWVudE1ldGhvZHMoKVxuICB9LCBbXSlcblxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwib2Zmc2V0LW1kLTIgY29sLW1kLThcIj5cblxuICAgICAgICA8aDMgY2xhc3NOYW1lPVwiaDNcIj5QYWdvIHsgcGFja2FnZV9pZCB9IDwvaDM+XG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cblxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLW1kLTZcIj5cbiAgICAgICAgICAgIDxGb3JtR3JvdXA+XG4gICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICBpZD1cInBheW1lbnRfbWV0aG9kX2lkXCJcbiAgICAgICAgICAgICAgICBuYW1lPVwicGF5bWVudF9tZXRob2RfaWRcIlxuICAgICAgICAgICAgICAgIHJlcXVpcmVkPXsgcmVxdWlyZWRzIH1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17IG9uUGF5bWVudENoYW5nZSB9XG4gICAgICAgICAgICAgICAgdmFsdWU9eyB2YWx1ZXMucGF5bWVudF9tZXRob2RfaWQgfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjBcIj5TZWxlY2lvbmU8L29wdGlvbj5cbiAgICAgICAgICAgICAgICB7IHBheW1lbnRNZXRob2RzICYmIHBheW1lbnRNZXRob2RzLm1hcCgocGF5bWVudE1ldGhvZCwga2V5KSA9PiAoXG4gICAgICAgICAgICAgICAgICA8b3B0aW9uXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlPXsgdmFsdWVzLnBheW1lbnRfbWV0aG9kX2lkIH1cbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9eyBwYXltZW50TWV0aG9kLmlkIH1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgeyBwYXltZW50TWV0aG9kLm5hbWUgfVxuICAgICAgICAgICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgKSkgfVxuICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgPEludmFsaWRGZWVkYmFjayBlcnJvcj17IGVycm9yIH0gbG9hZGluZz17IGxvYWRpbmcgfSBuYW1lPVwiZ2VuZGVyX2lkXCIvPlxuICAgICAgICAgICAgPC9Gb3JtR3JvdXA+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC02XCI+XG4gICAgICAgICAgICB7LyogY3JlZGl0IC8gZGViaXQgY2FyZCAqLyB9XG4gICAgICAgICAgICB7IGlzQ2FyZFBheW1lbnQgPyAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1pbnB1dHNcIj5cblxuICAgICAgICAgICAgICAgIHsvKiBtYW5kYXRvcnkgZGF0YSAqLyB9XG4gICAgICAgICAgICAgICAgPEZvcm1Hcm91cD5cbiAgICAgICAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPVwiY2FyZGhvbGRlci1uYW1lXCI+Tm9tYnJlIGltcHJlc28gZW4gdGFyamV0YTwvTGFiZWw+XG4gICAgICAgICAgICAgICAgICA8SW5wdXQgaWQ9XCJjYXJkaG9sZGVyLW5hbWVcIiBuYW1lPVwiY2FyZGhvbGRlci1uYW1lXCIgcmVxdWlyZWQ9eyByZXF1aXJlZHMgfSB0eXBlPVwidGV4dFwiLz5cbiAgICAgICAgICAgICAgICA8L0Zvcm1Hcm91cD5cblxuICAgICAgICAgICAgICAgIHsvKiBjYXJkIGZpZWxkcyAqLyB9XG4gICAgICAgICAgICAgICAgPEZvcm1Hcm91cD5cbiAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJjYXJkLXNlY3VyZS1maWVsZHNcIi8+XG4gICAgICAgICAgICAgICAgICA8SW52YWxpZEZlZWRiYWNrIGVycm9yPXsgZXJyb3IgfSBsb2FkaW5nPXsgbG9hZGluZyB9IG5hbWU9XCJwYXltZW50X29zXCIvPlxuICAgICAgICAgICAgICAgIDwvRm9ybUdyb3VwPlxuXG5cbiAgICAgICAgICAgICAgICA8QnV0dG9uIGJsb2NrIGNvbG9yPVwic2Vjb25kYXJ5XCIgdHlwZT1cInN1Ym1pdFwiIGRpc2FibGVkPXsgbG9hZGluZyB9XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nPXsgbG9hZGluZyB9PlBhZ2FyPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgIC8vIGNhc2ggcGF5bWVudCBtZXRob2RzXG4gICAgICAgICAgICApIDogdmFsdWVzLnBheW1lbnRfbWV0aG9kX2lkID09PSAzICYmIChcbiAgICAgICAgICAgICAgPEZvcm1Hcm91cD5cbiAgICAgICAgICAgICAgICB7IGNhc2hQYXltZW50TWV0aG9kcyA9PSBudWxsID8gKFxuICAgICAgICAgICAgICAgICAgPHA+Q2FyZ2FuZG8uLi48L3A+XG4gICAgICAgICAgICAgICAgKSA6IGNhc2hQYXltZW50TWV0aG9kcy5sZW5ndGggPyBjYXNoUGF5bWVudE1ldGhvZHMubWFwKChpdGVtLCBrZXkpID0+IChcbiAgICAgICAgICAgICAgICAgIDxJbnB1dFJhZGlvXG4gICAgICAgICAgICAgICAgICAgIGtleT17IGtleSB9XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsPXsgaXRlbS5uYW1lIH1cbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cImNhc2hfcGF5bWVudF9tZXRob2RfaWRcIlxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17IG9uQ2FzaFBheW1lbnRNZXRob2RDaGFuZ2UgfVxuICAgICAgICAgICAgICAgICAgICBzdGF0ZT17IHZhbHVlcy5jYXNoX3BheW1lbnRfbWV0aG9kX2lkIH1cbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9eyBpdGVtLmlkIH1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKSkgOiAoXG4gICAgICAgICAgICAgICAgICA8cD5TaW4gbcOpdG9kbyBkZSBwYWdvIGNvbmZpZ3VyYWRvLjwvcD5cbiAgICAgICAgICAgICAgICApIH1cbiAgICAgICAgICAgICAgICA8SW52YWxpZEZlZWRiYWNrIGVycm9yPXsgZXJyb3IgfSBsb2FkaW5nPXsgbG9hZGluZyB9IG5hbWU9XCJjYXNoX3BheW1lbnRfbWV0aG9kX2lkXCIvPlxuICAgICAgICAgICAgICAgIDxCdXR0b24gYmxvY2sgY29sb3I9XCJzZWNvbmRhcnlcIiB0eXBlPVwic3VibWl0XCIgZGlzYWJsZWQ9eyBsb2FkaW5nIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmc9eyBsb2FkaW5nIH0+UHLDs3hpbW88L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC9Gb3JtR3JvdXA+XG4gICAgICAgICAgICApIH1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgIDwvZGl2PlxuICAgICAgPHN0eWxlIGpzeD57IGBcbiAgICAgICAgQG1lZGlhIChtaW4td2lkdGg6IDc2OHB4KSB7XG4gICAgICAgICAgLmNhcmQtaW5wdXRzIHtcbiAgICAgICAgICAgIG1hcmdpbi10b3A6IC0yMXB4O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgYCB9PC9zdHlsZT5cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCB3aXRoQXV0aChQYXltZW50LCB0cnVlKTtcbiJdfQ== */\\n/*@ sourceURL=/Users/rafael/Projects/somosgad/dale/pages/register/wizard/payment.js */\"));\n};\n\nexport default withAuth(Payment, true);","map":{"version":3,"sources":["/Users/rafael/Projects/somosgad/dale/pages/register/wizard/payment.js"],"names":["useEffect","useState","FormGroup","Label","Input","InputRadio","withAuth","InvalidFeedback","HAS_WINDOW","useScript","Select","Button","Payment","layoutProps","package_id","packages","api","error","requireds","ready","status","values","setValues","payment_method_id","payment_os","cash_payment_method_id","terms","discount_id","loading","setLoading","payUEnv","businessUnitPublicKey","isPayUReady","setIsPayUReady","POS","window","credit_card_id","debit_card_id","isCardPayment","includes","POSStyle","base","borderRadius","backgroundColor","height","fontSize","padding","marginLeft","cardImage","borderTopRightRadius","borderBottomRightRadius","margin","pan","width","borderTopLeftRadius","borderBottomLeftRadius","expirationDate","secureFields","left","cvv","_","setPublicKey","setEnvironment","setStyle","setCardNumberPlaceholder","setExpirationDatePlaceholder","onPaymentChange","e","parseInt","target","value","onCashPaymentMethodChange","handleInputChange","checked","name","type","paymentMethods","setPaymentMethods","getPaymentMethods","data","get","initSecureFields","cashPaymentMethods","setCashPaymentMethods","getCashPaymentMethods","map","paymentMethod","key","id","length","item"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport FormGroup from \"~/components/layout/AuthModal/FormGroup\";\nimport Label from \"~/components/layout/AuthModal/Label\";\nimport Input from \"~/components/layout/AuthModal/Input\";\nimport InputRadio from \"~/components/Form/InputRadio\";\nimport withAuth from \"~/components/withAuth\";\nimport InvalidFeedback from \"~/components/Form/InvalidFeedback\"\nimport { HAS_WINDOW } from \"~/constants/constants\";\nimport useScript from \"@charlietango/use-script\";\nimport Select from \"~/components/Select/Select\";\nimport Button from \"~/components/button\";\n\nconst Payment = ({\n                   layoutProps,\n                   package_id,\n                   packages,\n                   api,\n                   error,\n                   requireds\n                 }) => {\n\n  const [ready, status] = useScript('https://js.paymentsos.com/v2/latest/secure-fields.min.js')\n\n  const [values, setValues] = useState({\n    package_id: '',\n    payment_method_id: null,\n    payment_os: null,\n    cash_payment_method_id: null,\n    terms: null,\n    discount_id: null,\n  })\n\n  const [loading, setLoading] = useState();\n\n  const payUEnv = 'test'\n  const businessUnitPublicKey = '88985036-6530-4b5a-a7ec-c4e07ec07f6c'\n  const [isPayUReady, setIsPayUReady] = useState(false)\n  const POS = ready && HAS_WINDOW ? window.POS : null\n  const credit_card_id = 1\n  const debit_card_id = 2\n  const isCardPayment = [credit_card_id, debit_card_id].includes(values.payment_method_id)\n\n\n  const POSStyle = {\n    base: {\n      borderRadius: '.15rem',\n      backgroundColor: 'white',\n      height: 'calc(1.5em + .75rem + 2px)',\n      fontSize: '12px',\n      padding: '0px 3px',\n      marginLeft: '5px',\n      cardImage: {\n        borderTopRightRadius: 0,\n        borderBottomRightRadius: 0,\n        margin: 0,\n      },\n      pan: {\n        width: '160px',\n        borderTopLeftRadius: 0,\n        borderBottomLeftRadius: 0,\n        marginLeft: 0,\n      },\n      expirationDate: { width: '47px' },\n      secureFields: { left: '40px' },\n      cvv: { width: '35px' }\n    }\n  }\n\n\n  useEffect(_ => {\n    if (POS) {\n      POS.setPublicKey(businessUnitPublicKey)\n      POS.setEnvironment(payUEnv)\n      POS.setStyle(POSStyle)\n      POS.setCardNumberPlaceholder('Tarjeta de crédito')\n      POS.setExpirationDatePlaceholder('MM/AA');\n      setIsPayUReady(true)\n    }\n  }, [POS])\n\n\n  /* handle payment method change */\n  function onPaymentChange(e) {\n    setValues({\n      ...values,\n      payment_method_id: parseInt(e.target.value, 10),\n      cash_payment_method_id: null,\n    })\n  }\n\n  function onCashPaymentMethodChange(e) {\n    setValues({\n      ...values,\n      cash_payment_method_id: parseInt(e.target.value, 10),\n    })\n  }\n\n  const handleInputChange = e => {\n    const { checked, name, value, type } = e.target\n    setValues({\n      ...values,\n      [name]: type === 'checkbox' ?\n        (checked ? (value === 'true' ? true : value) : false) :\n        value,\n    })\n  }\n\n  // payment methods\n  const [paymentMethods, setPaymentMethods] = useState()\n\n  // get payment methods\n  useEffect(_ => {\n    const getPaymentMethods = async _ => {\n      const { data } = await api.get('payment-methods')\n      setPaymentMethods(data)\n    }\n    getPaymentMethods()\n  }, [])\n\n  // init card secure fields\n  useEffect(_ => {\n    if (isPayUReady && isCardPayment) {\n      POS.initSecureFields('card-secure-fields')\n    }\n  }, [isPayUReady, isCardPayment])\n\n  // cash payment methods\n  const [cashPaymentMethods, setCashPaymentMethods] = useState()\n\n  // get cash payment methods\n  useEffect(_ => {\n    const getCashPaymentMethods = async _ => {\n      const { data } = await api.get('cash-payment-methods')\n      setCashPaymentMethods(data)\n    }\n    getCashPaymentMethods()\n  }, [])\n\n\n  return (\n    <div className=\"row\">\n      <div className=\"offset-md-2 col-md-8\">\n\n        <h3 className=\"h3\">Pago { package_id } </h3>\n\n        <div className=\"row\">\n\n          <div className=\"col-md-6\">\n            <FormGroup>\n              <Select\n                id=\"payment_method_id\"\n                name=\"payment_method_id\"\n                required={ requireds }\n                onChange={ onPaymentChange }\n                value={ values.payment_method_id }\n              >\n                <option value=\"0\">Selecione</option>\n                { paymentMethods && paymentMethods.map((paymentMethod, key) => (\n                  <option\n                    state={ values.payment_method_id }\n                    value={ paymentMethod.id }\n                  >\n                    { paymentMethod.name }\n                  </option>\n                )) }\n              </Select>\n              <InvalidFeedback error={ error } loading={ loading } name=\"gender_id\"/>\n            </FormGroup>\n          </div>\n\n          <div className=\"col-md-6\">\n            {/* credit / debit card */ }\n            { isCardPayment ? (\n              <div className=\"card-inputs\">\n\n                {/* mandatory data */ }\n                <FormGroup>\n                  <Label htmlFor=\"cardholder-name\">Nombre impreso en tarjeta</Label>\n                  <Input id=\"cardholder-name\" name=\"cardholder-name\" required={ requireds } type=\"text\"/>\n                </FormGroup>\n\n                {/* card fields */ }\n                <FormGroup>\n                  <div id=\"card-secure-fields\"/>\n                  <InvalidFeedback error={ error } loading={ loading } name=\"payment_os\"/>\n                </FormGroup>\n\n\n                <Button block color=\"secondary\" type=\"submit\" disabled={ loading }\n                        loading={ loading }>Pagar</Button>\n              </div>\n\n              // cash payment methods\n            ) : values.payment_method_id === 3 && (\n              <FormGroup>\n                { cashPaymentMethods == null ? (\n                  <p>Cargando...</p>\n                ) : cashPaymentMethods.length ? cashPaymentMethods.map((item, key) => (\n                  <InputRadio\n                    key={ key }\n                    label={ item.name }\n                    name=\"cash_payment_method_id\"\n                    onChange={ onCashPaymentMethodChange }\n                    state={ values.cash_payment_method_id }\n                    value={ item.id }\n                  />\n                )) : (\n                  <p>Sin método de pago configurado.</p>\n                ) }\n                <InvalidFeedback error={ error } loading={ loading } name=\"cash_payment_method_id\"/>\n                <Button block color=\"secondary\" type=\"submit\" disabled={ loading }\n                        loading={ loading }>Próximo</Button>\n              </FormGroup>\n            ) }\n          </div>\n        </div>\n\n      </div>\n      <style jsx>{ `\n        @media (min-width: 768px) {\n          .card-inputs {\n            margin-top: -21px;\n          }\n        }\n      ` }</style>\n    </div>\n  )\n}\n\nexport default withAuth(Payment, true);\n"]},"metadata":{},"sourceType":"module"}