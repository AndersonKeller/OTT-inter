{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _s = $RefreshSig$();\n\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport withApi from \"~/components/withApi\";\nimport Packages from \"~/components/Packages\";\nimport React, { useCallback, useContext, useState, useEffect } from \"react\";\nimport Button from \"~/components/button\";\nimport { ThemeContext } from \"styled-components\";\nimport Color from \"color\";\nimport NameProject from \"~/components/NameProject/index\";\n\nvar PackagesDetails = function PackagesDetails(_ref) {\n  _s();\n\n  var packages = _ref.packages,\n      layoutProps = _ref.layoutProps,\n      selectPackage = _ref.selectPackage,\n      handleSubmit = _ref.handleSubmit,\n      handleFormState = _ref.handleFormState,\n      formData = _ref.formData,\n      setFormData = _ref.setFormData;\n  useEffect(function (_) {\n    console.log(\"\\n\\n packages.js first useEffect (componentDidMount)\");\n    console.log(\"\\n\\n formData \".concat(JSON.stringify(formData), \" \\n\\n\"));\n  }); // const [values, setValues] = useState({\n  //   package_id: \"\"\n  // });\n\n  var theme = useContext(ThemeContext);\n  var primaryColor = Color(theme.colors.primary).hsl().string();\n\n  var _useState = useState(false),\n      blockDiscountFields = _useState[0],\n      setBlockDiscountFields = _useState[1];\n\n  var _useState2 = useState(),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState(),\n      error = _useState3[0],\n      setError = _useState3[1];\n\n  var _ref2 = packages.items.find(function (item) {\n    return item.amount == 0;\n  }) || {},\n      free_package_id = _ref2.id;\n\n  var submit = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n\n              try {\n                setLoading(true);\n                selectPackage(formData.package_id);\n\n                if (formData.package_id === free_package_id) {\n                  handleSubmit(4, null);\n                } else {\n                  handleSubmit(3);\n                }\n\n                setLoading(false);\n              } catch (e) {\n                console.error(e);\n              } // handleSubmit(2);\n\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function submit(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var onPackageChange = useCallback(function (e) {\n    var package_id = parseInt(e.target.value, 10);\n    setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n      package_id: package_id,\n      payment_method_id: package_id === free_package_id ? null : formData.payment_method_id\n    })); // setValues(oldValues => ({\n    //   ...oldValues,\n    //   package_id,\n    //   payment_method_id:\n    //     package_id === free_package_id ? null : values.payment_method_id\n    // }));\n  }, []);\n  return __jsx(\"div\", {\n    className: \"col-md-12\"\n  }, __jsx(\"form\", {\n    method: \"post\",\n    onSubmit: submit,\n    className: _JSXStyle.dynamic([[\"3337338\", [primaryColor, primaryColor, primaryColor]]])\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"3337338\", [primaryColor, primaryColor, primaryColor]]]) + \" \" + \"register-confirm container text-center\"\n  }, __jsx(\"h2\", {\n    className: _JSXStyle.dynamic([[\"3337338\", [primaryColor, primaryColor, primaryColor]]]) + \" \" + \"card-title text-center\"\n  }, __jsx(\"span\", {\n    className: _JSXStyle.dynamic([[\"3337338\", [primaryColor, primaryColor, primaryColor]]]) + \" \" + \"text-primary\"\n  }, \"\\xA1\"), \"S\\xE9 parte de\", \" \", __jsx(NameProject, null), __jsx(\"span\", {\n    className: _JSXStyle.dynamic([[\"3337338\", [primaryColor, primaryColor, primaryColor]]]) + \" \" + \"text-primary\"\n  }, \"!\")), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"3337338\", [primaryColor, primaryColor, primaryColor]]]) + \" \" + \"card-subtitle d-inline-block\"\n  }, \"\\xA1Elige tu plan!\"), __jsx(Packages, {\n    error: packages.error ? packages.error : null,\n    items: packages.items ? packages.items : null,\n    onChange: onPackageChange,\n    package_id: formData.package_id,\n    validationError: !loading && error && error.errors && error.errors.package_id,\n    discount_id: formData.discount_id,\n    setBlockDiscountFields: setBlockDiscountFields\n  }), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"3337338\", [primaryColor, primaryColor, primaryColor]]]) + \" \" + \"row mt-3\"\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"3337338\", [primaryColor, primaryColor, primaryColor]]]) + \" \" + \"col-md-12\"\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"3337338\", [primaryColor, primaryColor, primaryColor]]]) + \" \" + \"text-center\"\n  }, __jsx(Button, {\n    onClick: function onClick() {\n      return handleFormState(2);\n    },\n    color: \"primary\"\n  }, \"Volver\"), __jsx(Button, {\n    color: \"secondary\",\n    disabled: loading,\n    loading: loading,\n    type: \"submit\"\n  }, \"Siguiente\"))))), __jsx(_JSXStyle, {\n    id: \"3337338\",\n    dynamic: [primaryColor, primaryColor, primaryColor]\n  }, \".text-primary{color:\".concat(primaryColor, \" !important;}strong.text-primary{color:\").concat(primaryColor, \" !important;}h2.card-title{font-weight:normal;color:#000;margin-bottom:1em;font-size:1.7em;}div.card-subtitle{font-size:1.1em;font-weight:500;margin-bottom:2.5em;max-width:380px;}.text-primary{color:\").concat(primaryColor, \" !important;}.register-confirm{padding-top:50px;padding-bottom:50px;color:#666666;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9yYWZhZWwvUHJvamVjdHMvc29tb3NnYWQvZGFsZS9wYWdlcy9yZWdpc3Rlci93aXphcmQvcGFja2FnZXMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBNkhrQyxBQUcyRCxBQUlBLEFBSTNCLEFBT0gsQUFPOEIsQUFJN0IsZ0JBVkQsQ0FXSSxFQWxCVCxXQUNPLEVBT0UsS0FXTixTQTNCaEIsQUFJQSxBQWtCQSxFQVprQixHQWtCbEIsQ0FYa0IsWUFObEIsSUFPQSIsImZpbGUiOiIvVXNlcnMvcmFmYWVsL1Byb2plY3RzL3NvbW9zZ2FkL2RhbGUvcGFnZXMvcmVnaXN0ZXIvd2l6YXJkL3BhY2thZ2VzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHdpdGhBcGkgZnJvbSBcIn4vY29tcG9uZW50cy93aXRoQXBpXCI7XG5pbXBvcnQgUGFja2FnZXMgZnJvbSBcIn4vY29tcG9uZW50cy9QYWNrYWdlc1wiO1xuaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrLCB1c2VDb250ZXh0LCB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgQnV0dG9uIGZyb20gXCJ+L2NvbXBvbmVudHMvYnV0dG9uXCI7XG5pbXBvcnQgeyBUaGVtZUNvbnRleHQgfSBmcm9tIFwic3R5bGVkLWNvbXBvbmVudHNcIjtcbmltcG9ydCBDb2xvciBmcm9tIFwiY29sb3JcIjtcbmltcG9ydCBOYW1lUHJvamVjdCBmcm9tIFwifi9jb21wb25lbnRzL05hbWVQcm9qZWN0L2luZGV4XCI7XG5cbmNvbnN0IFBhY2thZ2VzRGV0YWlscyA9ICh7XG4gIHBhY2thZ2VzLFxuICBsYXlvdXRQcm9wcyxcbiAgc2VsZWN0UGFja2FnZSxcbiAgaGFuZGxlU3VibWl0LFxuICBoYW5kbGVGb3JtU3RhdGUsXG4gIGZvcm1EYXRhLFxuICBzZXRGb3JtRGF0YVxufSkgPT4ge1xuXG4gIHVzZUVmZmVjdChcbiAgICBfID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGBcXG5cXG4gcGFja2FnZXMuanMgZmlyc3QgdXNlRWZmZWN0IChjb21wb25lbnREaWRNb3VudClgKVxuICAgICAgY29uc29sZS5sb2coYFxcblxcbiBmb3JtRGF0YSAke0pTT04uc3RyaW5naWZ5KGZvcm1EYXRhKX0gXFxuXFxuYClcbiAgICB9XG4gICk7XG5cbiAgLy8gY29uc3QgW3ZhbHVlcywgc2V0VmFsdWVzXSA9IHVzZVN0YXRlKHtcbiAgLy8gICBwYWNrYWdlX2lkOiBcIlwiXG4gIC8vIH0pO1xuXG4gIGNvbnN0IHRoZW1lID0gdXNlQ29udGV4dChUaGVtZUNvbnRleHQpO1xuICBjb25zdCBwcmltYXJ5Q29sb3IgPSBDb2xvcih0aGVtZS5jb2xvcnMucHJpbWFyeSlcbiAgICAuaHNsKClcbiAgICAuc3RyaW5nKCk7XG5cbiAgY29uc3QgW2Jsb2NrRGlzY291bnRGaWVsZHMsIHNldEJsb2NrRGlzY291bnRGaWVsZHNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZSgpO1xuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlKCk7XG5cbiAgY29uc3QgeyBpZDogZnJlZV9wYWNrYWdlX2lkIH0gPVxuICAgIHBhY2thZ2VzLml0ZW1zLmZpbmQoaXRlbSA9PiBpdGVtLmFtb3VudCA9PSAwKSB8fCB7fTtcblxuICBjb25zdCBzdWJtaXQgPSBhc3luYyBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB0cnkge1xuICAgICAgc2V0TG9hZGluZyh0cnVlKTtcbiAgICAgIHNlbGVjdFBhY2thZ2UoZm9ybURhdGEucGFja2FnZV9pZCk7XG5cbiAgICAgIGlmIChmb3JtRGF0YS5wYWNrYWdlX2lkID09PSBmcmVlX3BhY2thZ2VfaWQpIHtcbiAgICAgICAgaGFuZGxlU3VibWl0KDQsIG51bGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaGFuZGxlU3VibWl0KDMpO1xuICAgICAgfVxuXG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgIH1cblxuICAgIC8vIGhhbmRsZVN1Ym1pdCgyKTtcbiAgfTtcblxuICBjb25zdCBvblBhY2thZ2VDaGFuZ2UgPSB1c2VDYWxsYmFjayhlID0+IHtcbiAgICBjb25zdCBwYWNrYWdlX2lkID0gcGFyc2VJbnQoZS50YXJnZXQudmFsdWUsIDEwKTtcbiAgICBzZXRGb3JtRGF0YSh7XG4gICAgICAuLi5mb3JtRGF0YSxcbiAgICAgIHBhY2thZ2VfaWQsXG4gICAgICBwYXltZW50X21ldGhvZF9pZDogcGFja2FnZV9pZCA9PT0gZnJlZV9wYWNrYWdlX2lkXG4gICAgICAgID8gbnVsbFxuICAgICAgICA6IGZvcm1EYXRhLnBheW1lbnRfbWV0aG9kX2lkXG4gICAgfSk7XG4gICAgLy8gc2V0VmFsdWVzKG9sZFZhbHVlcyA9PiAoe1xuICAgIC8vICAgLi4ub2xkVmFsdWVzLFxuICAgIC8vICAgcGFja2FnZV9pZCxcbiAgICAvLyAgIHBheW1lbnRfbWV0aG9kX2lkOlxuICAgIC8vICAgICBwYWNrYWdlX2lkID09PSBmcmVlX3BhY2thZ2VfaWQgPyBudWxsIDogdmFsdWVzLnBheW1lbnRfbWV0aG9kX2lkXG4gICAgLy8gfSkpO1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC0xMlwiPlxuICAgICAgPGZvcm0gbWV0aG9kPVwicG9zdFwiIG9uU3VibWl0PXtzdWJtaXR9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlZ2lzdGVyLWNvbmZpcm0gY29udGFpbmVyIHRleHQtY2VudGVyXCI+XG4gICAgICAgICAgPGgyIGNsYXNzTmFtZT1cImNhcmQtdGl0bGUgdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17XCJ0ZXh0LXByaW1hcnlcIn0+wqE8L3NwYW4+U8OpIHBhcnRlIGRle1wiIFwifVxuICAgICAgICAgICAgezxOYW1lUHJvamVjdCAvPn1cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17XCJ0ZXh0LXByaW1hcnlcIn0+ITwvc3Bhbj5cbiAgICAgICAgICA8L2gyPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1zdWJ0aXRsZSBkLWlubGluZS1ibG9ja1wiPsKhRWxpZ2UgdHUgcGxhbiE8L2Rpdj5cblxuICAgICAgICAgIDxQYWNrYWdlc1xuICAgICAgICAgICAgey4uLntcbiAgICAgICAgICAgICAgZXJyb3I6IHBhY2thZ2VzLmVycm9yID8gcGFja2FnZXMuZXJyb3IgOiBudWxsLFxuICAgICAgICAgICAgICBpdGVtczogcGFja2FnZXMuaXRlbXMgPyBwYWNrYWdlcy5pdGVtcyA6IG51bGwsXG4gICAgICAgICAgICAgIG9uQ2hhbmdlOiBvblBhY2thZ2VDaGFuZ2UsXG4gICAgICAgICAgICAgIHBhY2thZ2VfaWQ6IGZvcm1EYXRhLnBhY2thZ2VfaWQsXG4gICAgICAgICAgICAgIHZhbGlkYXRpb25FcnJvcjogICFsb2FkaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIGVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIGVycm9yLmVycm9yc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBlcnJvci5lcnJvcnMucGFja2FnZV9pZCxcbiAgICAgICAgICAgICAgZGlzY291bnRfaWQ6IGZvcm1EYXRhLmRpc2NvdW50X2lkLFxuICAgICAgICAgICAgICBzZXRCbG9ja0Rpc2NvdW50RmllbGRzXG4gICAgICAgICAgICB9fVxuICAgICAgICAgIC8+XG5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdyBtdC0zXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC0xMlwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgPEJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBoYW5kbGVGb3JtU3RhdGUoMil9IGNvbG9yPVwicHJpbWFyeVwiPlxuICAgICAgICAgICAgICAgICAgVm9sdmVyXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICBjb2xvcj1cInNlY29uZGFyeVwiXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17bG9hZGluZ31cbiAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmd9XG4gICAgICAgICAgICAgICAgICB0eXBlPVwic3VibWl0XCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBTaWd1aWVudGVcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPHN0eWxlIGpzeCBnbG9iYWw9e3RydWV9PntgXG4gICAgICAgICAgLnRleHQtcHJpbWFyeSB7XG4gICAgICAgICAgICBjb2xvcjogJHtwcmltYXJ5Q29sb3J9ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc3Ryb25nLnRleHQtcHJpbWFyeSB7XG4gICAgICAgICAgICBjb2xvcjogJHtwcmltYXJ5Q29sb3J9ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaDIuY2FyZC10aXRsZSB7XG4gICAgICAgICAgICBmb250LXdlaWdodDogbm9ybWFsO1xuICAgICAgICAgICAgY29sb3I6ICMwMDA7XG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxZW07XG4gICAgICAgICAgICBmb250LXNpemU6IDEuN2VtO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGRpdi5jYXJkLXN1YnRpdGxlIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMS4xZW07XG4gICAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMi41ZW07XG4gICAgICAgICAgICBtYXgtd2lkdGg6IDM4MHB4O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC50ZXh0LXByaW1hcnkge1xuICAgICAgICAgICAgY29sb3I6ICR7cHJpbWFyeUNvbG9yfSAhaW1wb3J0YW50O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC5yZWdpc3Rlci1jb25maXJtIHtcbiAgICAgICAgICAgIHBhZGRpbmctdG9wOiA1MHB4O1xuICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDUwcHg7XG4gICAgICAgICAgICBjb2xvcjogIzY2NjY2NjtcbiAgICAgICAgICB9XG4gICAgICAgIGB9PC9zdHlsZT5cbiAgICAgIDwvZm9ybT5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cblBhY2thZ2VzRGV0YWlscy5nZXRJbml0aWFsUHJvcHMgPSBhc3luYyBjdHggPT4ge1xuICBjb25zdCB7IGFwaSwgcmVzLCB1c2VyIH0gPSBjdHg7XG5cbiAgLy8gZ2V0IHBhY2thZ2VzXG4gIGxldCBwYWNrYWdlcztcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGFwaS5nZXQoXCJwYWNrYWdlc1wiKTtcbiAgICBwYWNrYWdlcyA9IHsgaXRlbXM6IGRhdGEgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBwYWNrYWdlcyA9IHsgZXJyb3IgfTtcbiAgfVxuXG4gIC8vIHJldHVyblxuICByZXR1cm4geyBwYWNrYWdlcywgdXNlciB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgd2l0aEFwaShQYWNrYWdlc0RldGFpbHMsIHRydWUpO1xuIl19 */\\n/*@ sourceURL=/Users/rafael/Projects/somosgad/dale/pages/register/wizard/packages.js */\"))));\n};\n\n_s(PackagesDetails, \"7nju4ND5fkDa9lHXlY+D1x/yuNs=\");\n\n_c = PackagesDetails;\n\nPackagesDetails.getInitialProps = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(ctx) {\n    var api, res, user, packages, _yield$api$get, data;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            api = ctx.api, res = ctx.res, user = ctx.user; // get packages\n\n            _context2.prev = 1;\n            _context2.next = 4;\n            return api.get(\"packages\");\n\n          case 4:\n            _yield$api$get = _context2.sent;\n            data = _yield$api$get.data;\n            packages = {\n              items: data\n            };\n            _context2.next = 12;\n            break;\n\n          case 9:\n            _context2.prev = 9;\n            _context2.t0 = _context2[\"catch\"](1);\n            packages = {\n              error: _context2.t0\n            };\n\n          case 12:\n            return _context2.abrupt(\"return\", {\n              packages: packages,\n              user: user\n            });\n\n          case 13:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[1, 9]]);\n  }));\n\n  return function (_x2) {\n    return _ref4.apply(this, arguments);\n  };\n}();\n\nexport default _c2 = withApi(PackagesDetails, true);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"PackagesDetails\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/rafael/Projects/somosgad/dale/pages/register/wizard/packages.js"],"names":["withApi","Packages","React","useCallback","useContext","useState","useEffect","Button","ThemeContext","Color","NameProject","PackagesDetails","packages","layoutProps","selectPackage","handleSubmit","handleFormState","formData","setFormData","_","console","log","JSON","stringify","theme","primaryColor","colors","primary","hsl","string","blockDiscountFields","setBlockDiscountFields","loading","setLoading","error","setError","items","find","item","amount","free_package_id","id","submit","e","preventDefault","package_id","onPackageChange","parseInt","target","value","payment_method_id","onChange","validationError","errors","discount_id","getInitialProps","ctx","api","res","user","get","data"],"mappings":"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","sourcesContent":["import withApi from \"~/components/withApi\";\nimport Packages from \"~/components/Packages\";\nimport React, { useCallback, useContext, useState, useEffect } from \"react\";\nimport Button from \"~/components/button\";\nimport { ThemeContext } from \"styled-components\";\nimport Color from \"color\";\nimport NameProject from \"~/components/NameProject/index\";\n\nconst PackagesDetails = ({\n  packages,\n  layoutProps,\n  selectPackage,\n  handleSubmit,\n  handleFormState,\n  formData,\n  setFormData\n}) => {\n\n  useEffect(\n    _ => {\n      console.log(`\\n\\n packages.js first useEffect (componentDidMount)`)\n      console.log(`\\n\\n formData ${JSON.stringify(formData)} \\n\\n`)\n    }\n  );\n\n  // const [values, setValues] = useState({\n  //   package_id: \"\"\n  // });\n\n  const theme = useContext(ThemeContext);\n  const primaryColor = Color(theme.colors.primary)\n    .hsl()\n    .string();\n\n  const [blockDiscountFields, setBlockDiscountFields] = useState(false);\n  const [loading, setLoading] = useState();\n  const [error, setError] = useState();\n\n  const { id: free_package_id } =\n    packages.items.find(item => item.amount == 0) || {};\n\n  const submit = async e => {\n    e.preventDefault();\n\n    try {\n      setLoading(true);\n      selectPackage(formData.package_id);\n\n      if (formData.package_id === free_package_id) {\n        handleSubmit(4, null);\n      } else {\n        handleSubmit(3);\n      }\n\n      setLoading(false);\n    } catch (e) {\n      console.error(e);\n    }\n\n    // handleSubmit(2);\n  };\n\n  const onPackageChange = useCallback(e => {\n    const package_id = parseInt(e.target.value, 10);\n    setFormData({\n      ...formData,\n      package_id,\n      payment_method_id: package_id === free_package_id\n        ? null\n        : formData.payment_method_id\n    });\n    // setValues(oldValues => ({\n    //   ...oldValues,\n    //   package_id,\n    //   payment_method_id:\n    //     package_id === free_package_id ? null : values.payment_method_id\n    // }));\n  }, []);\n\n  return (\n    <div className=\"col-md-12\">\n      <form method=\"post\" onSubmit={submit}>\n        <div className=\"register-confirm container text-center\">\n          <h2 className=\"card-title text-center\">\n            <span className={\"text-primary\"}>¡</span>Sé parte de{\" \"}\n            {<NameProject />}\n            <span className={\"text-primary\"}>!</span>\n          </h2>\n          <div className=\"card-subtitle d-inline-block\">¡Elige tu plan!</div>\n\n          <Packages\n            {...{\n              error: packages.error ? packages.error : null,\n              items: packages.items ? packages.items : null,\n              onChange: onPackageChange,\n              package_id: formData.package_id,\n              validationError:  !loading\n                                && error\n                                && error.errors\n                                && error.errors.package_id,\n              discount_id: formData.discount_id,\n              setBlockDiscountFields\n            }}\n          />\n\n          <div className=\"row mt-3\">\n            <div className=\"col-md-12\">\n              <div className=\"text-center\">\n                <Button onClick={() => handleFormState(2)} color=\"primary\">\n                  Volver\n                </Button>\n\n                <Button\n                  color=\"secondary\"\n                  disabled={loading}\n                  loading={loading}\n                  type=\"submit\"\n                >\n                  Siguiente\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <style jsx global={true}>{`\n          .text-primary {\n            color: ${primaryColor} !important;\n          }\n\n          strong.text-primary {\n            color: ${primaryColor} !important;\n          }\n\n          h2.card-title {\n            font-weight: normal;\n            color: #000;\n            margin-bottom: 1em;\n            font-size: 1.7em;\n          }\n\n          div.card-subtitle {\n            font-size: 1.1em;\n            font-weight: 500;\n            margin-bottom: 2.5em;\n            max-width: 380px;\n          }\n\n          .text-primary {\n            color: ${primaryColor} !important;\n          }\n\n          .register-confirm {\n            padding-top: 50px;\n            padding-bottom: 50px;\n            color: #666666;\n          }\n        `}</style>\n      </form>\n    </div>\n  );\n};\n\nPackagesDetails.getInitialProps = async ctx => {\n  const { api, res, user } = ctx;\n\n  // get packages\n  let packages;\n  try {\n    const { data } = await api.get(\"packages\");\n    packages = { items: data };\n  } catch (error) {\n    packages = { error };\n  }\n\n  // return\n  return { packages, user };\n};\n\nexport default withApi(PackagesDetails, true);\n"]},"metadata":{},"sourceType":"module"}