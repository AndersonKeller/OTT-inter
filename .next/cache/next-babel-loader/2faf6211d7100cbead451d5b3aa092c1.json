{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n// next\nimport Router from 'next/router';\nimport Head from 'next/head'; // react\n\nimport nookies from 'nookies'; //components\n\nimport Layout from '~/components/layout/Layout';\nimport UserForm from '~/components/form-user';\nimport withAuth from '~/components/withAuth';\nimport api from '~/services/api';\nimport { CONFIG } from '~/config';\nimport CardLogoHeader from '~/components/CardLogoHeader/index';\n\nconst userDataPage = ({\n  layoutProps,\n  user,\n  updateUser\n}) => {\n  const initialValues = ((_ref) => {\n    let {\n      gender_id: gender,\n      country_id: country\n    } = _ref,\n        data = _objectWithoutProperties(_ref, [\"gender_id\", \"country_id\"]);\n\n    return _objectSpread({\n      gender,\n      country\n    }, data);\n  })(user);\n\n  const handleSubmit = async (fields, actions) => {\n    var msg = '';\n\n    try {\n      const res = await api().post(`user/${user.id}`, fields);\n      updateUser(res.data);\n      msg = JSON.stringify({\n        success: \"Cambio de datos completo.\"\n      });\n    } catch (error) {\n      var {\n        message\n      } = error.message ? error : error.response ? error.response.data : '';\n      msg = JSON.stringify({\n        error: \"An Error Occured while updating: \" + message\n      });\n    } finally {\n      nookies.set({}, 'flash_message', msg, {\n        path: '/'\n      });\n      Router.push('/user/account');\n    }\n  };\n\n  return __jsx(Layout, layoutProps, __jsx(Head, null, __jsx(\"title\", {\n    className: \"jsx-2618477860\"\n  }, \"Mi Cuenta < \", CONFIG.appName)), __jsx(CardLogoHeader, null, user && __jsx(UserForm, _extends({\n    handleSubmit,\n    initialValues\n  }, {\n    button: true\n  }))), __jsx(_JSXStyle, {\n    id: \"2618477860\"\n  }, \".rgpage.jsx-2618477860{padding-top:40px;padding-bottom:120px;}.h2.jsx-2618477860{margin-bottom:10px;}.h3{font-size:20px;font-weight:bold;margin-bottom:10px;}hr.jsx-2618477860{margin-top:25px;margin-bottom:15px;background-color:white;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9yYWZhZWwvUHJvamVjdHMvc29tb3NnYWQvZGFsZS9wYWdlcy91c2VyL2RhdGEuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBc0RrQixBQUc0QixBQUlFLEFBR0osQUFLQyxlQUpDLENBS0UsQ0FaRSxFQUl2QixhQUlxQixHQUtJLEdBWnpCLGFBUUEsT0FLQSIsImZpbGUiOiIvVXNlcnMvcmFmYWVsL1Byb2plY3RzL3NvbW9zZ2FkL2RhbGUvcGFnZXMvdXNlci9kYXRhLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gbmV4dFxuaW1wb3J0IFJvdXRlciBmcm9tICduZXh0L3JvdXRlcidcbmltcG9ydCBIZWFkIGZyb20gJ25leHQvaGVhZCdcblxuLy8gcmVhY3RcbmltcG9ydCBub29raWVzIGZyb20gJ25vb2tpZXMnXG5cbi8vY29tcG9uZW50c1xuaW1wb3J0IExheW91dCBmcm9tICd+L2NvbXBvbmVudHMvbGF5b3V0L0xheW91dCdcbmltcG9ydCBVc2VyRm9ybSBmcm9tICd+L2NvbXBvbmVudHMvZm9ybS11c2VyJ1xuaW1wb3J0IHdpdGhBdXRoIGZyb20gJ34vY29tcG9uZW50cy93aXRoQXV0aCdcbmltcG9ydCBhcGkgZnJvbSAnfi9zZXJ2aWNlcy9hcGknXG5pbXBvcnQgeyBDT05GSUcgfSBmcm9tICd+L2NvbmZpZydcbmltcG9ydCBDYXJkTG9nb0hlYWRlciBmcm9tICd+L2NvbXBvbmVudHMvQ2FyZExvZ29IZWFkZXIvaW5kZXgnXG5cbmNvbnN0IHVzZXJEYXRhUGFnZSA9ICh7IGxheW91dFByb3BzLCB1c2VyLCB1cGRhdGVVc2VyIH0pID0+IHtcblxuICBjb25zdCBpbml0aWFsVmFsdWVzID0gKCh7IGdlbmRlcl9pZDogZ2VuZGVyLCBjb3VudHJ5X2lkOiBjb3VudHJ5LCAuLi5kYXRhIH0pID0+IHtcbiAgICByZXR1cm4geyBnZW5kZXIsIGNvdW50cnksIC4uLmRhdGEgfVxuICB9KSh1c2VyKVxuXG4gIGNvbnN0IGhhbmRsZVN1Ym1pdCA9IGFzeW5jIChmaWVsZHMsIGFjdGlvbnMpID0+IHtcbiAgICB2YXIgbXNnID0gJydcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkoKS5wb3N0KGB1c2VyLyR7dXNlci5pZH1gLCBmaWVsZHMpXG4gICAgICB1cGRhdGVVc2VyKHJlcy5kYXRhKVxuICAgICAgbXNnID0gSlNPTi5zdHJpbmdpZnkoeyBzdWNjZXNzOiBcIkNhbWJpbyBkZSBkYXRvcyBjb21wbGV0by5cIiB9KVxuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHZhciB7IG1lc3NhZ2UgfSA9IGVycm9yLm1lc3NhZ2UgPyBlcnJvciA6IGVycm9yLnJlc3BvbnNlID8gZXJyb3IucmVzcG9uc2UuZGF0YSA6ICcnXG4gICAgICBtc2cgPSBKU09OLnN0cmluZ2lmeSh7IGVycm9yOiBcIkFuIEVycm9yIE9jY3VyZWQgd2hpbGUgdXBkYXRpbmc6IFwiICsgbWVzc2FnZSB9KVxuXG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIG5vb2tpZXMuc2V0KHt9LCAnZmxhc2hfbWVzc2FnZScsIG1zZywgeyBwYXRoOiAnLycgfSlcbiAgICAgIFJvdXRlci5wdXNoKCcvdXNlci9hY2NvdW50JylcbiAgICB9XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxMYXlvdXQgey4uLmxheW91dFByb3BzfT5cbiAgICAgIDxIZWFkPlxuICAgICAgICA8dGl0bGU+TWkgQ3VlbnRhICZsdDsge0NPTkZJRy5hcHBOYW1lfTwvdGl0bGU+XG4gICAgICA8L0hlYWQ+XG4gICAgICA8Q2FyZExvZ29IZWFkZXI+XG4gICAgICAgIHsvKiA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXhsLTggb2Zmc2V0LXhsLTJcIj4gKi99XG5cbiAgICAgICAge3VzZXIgJiZcbiAgICAgICAgICA8VXNlckZvcm0gey4uLnsgaGFuZGxlU3VibWl0LCBpbml0aWFsVmFsdWVzIH19IGJ1dHRvbiAvPlxuICAgICAgICB9XG4gICAgICAgIHsvKiA8L2Rpdj5cbiAgICAgICAgPC9kaXY+ICovfVxuICAgICAgPC9DYXJkTG9nb0hlYWRlcj5cbiAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgLnJncGFnZSB7XG4gICAgICAgICAgcGFkZGluZy10b3A6IDQwcHg7XG4gICAgICAgICAgcGFkZGluZy1ib3R0b206IDEyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC5oMiB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICAgICAgfVxuICAgICAgICA6Z2xvYmFsKC5oMykge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMjBweDtcbiAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgICAgICB9XG4gICAgICAgIGhyIHtcbiAgICAgICAgICBtYXJnaW4tdG9wOiAyNXB4O1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gICAgICAgIH1cbiAgICAgIGB9PC9zdHlsZT5cbiAgICA8L0xheW91dD5cbiAgKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgd2l0aEF1dGgodXNlckRhdGFQYWdlKVxuIl19 */\\n/*@ sourceURL=/Users/rafael/Projects/somosgad/dale/pages/user/data.js */\"));\n};\n\nexport default withAuth(userDataPage);","map":{"version":3,"sources":["/Users/rafael/Projects/somosgad/dale/pages/user/data.js"],"names":["Router","Head","nookies","Layout","UserForm","withAuth","api","CONFIG","CardLogoHeader","userDataPage","layoutProps","user","updateUser","initialValues","gender_id","gender","country_id","country","data","handleSubmit","fields","actions","msg","res","post","id","JSON","stringify","success","error","message","response","set","path","push","appName"],"mappings":";;;;;;;;;;;;;;;;AAAA;AACA,OAAOA,MAAP,MAAmB,aAAnB;AACA,OAAOC,IAAP,MAAiB,WAAjB,C,CAEA;;AACA,OAAOC,OAAP,MAAoB,SAApB,C,CAEA;;AACA,OAAOC,MAAP,MAAmB,4BAAnB;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,OAAOC,GAAP,MAAgB,gBAAhB;AACA,SAASC,MAAT,QAAuB,UAAvB;AACA,OAAOC,cAAP,MAA2B,mCAA3B;;AAEA,MAAMC,YAAY,GAAG,CAAC;AAAEC,EAAAA,WAAF;AAAeC,EAAAA,IAAf;AAAqBC,EAAAA;AAArB,CAAD,KAAuC;AAE1D,QAAMC,aAAa,GAAG,CAAC,UAAyD;AAAA,QAAxD;AAAEC,MAAAA,SAAS,EAAEC,MAAb;AAAqBC,MAAAA,UAAU,EAAEC;AAAjC,KAAwD;AAAA,QAAXC,IAAW;;AAC9E;AAASH,MAAAA,MAAT;AAAiBE,MAAAA;AAAjB,OAA6BC,IAA7B;AACD,GAFqB,EAEnBP,IAFmB,CAAtB;;AAIA,QAAMQ,YAAY,GAAG,OAAOC,MAAP,EAAeC,OAAf,KAA2B;AAC9C,QAAIC,GAAG,GAAG,EAAV;;AAEA,QAAI;AACF,YAAMC,GAAG,GAAG,MAAMjB,GAAG,GAAGkB,IAAN,CAAY,QAAOb,IAAI,CAACc,EAAG,EAA3B,EAA8BL,MAA9B,CAAlB;AACAR,MAAAA,UAAU,CAACW,GAAG,CAACL,IAAL,CAAV;AACAI,MAAAA,GAAG,GAAGI,IAAI,CAACC,SAAL,CAAe;AAAEC,QAAAA,OAAO,EAAE;AAAX,OAAf,CAAN;AAED,KALD,CAKE,OAAOC,KAAP,EAAc;AACd,UAAI;AAAEC,QAAAA;AAAF,UAAcD,KAAK,CAACC,OAAN,GAAgBD,KAAhB,GAAwBA,KAAK,CAACE,QAAN,GAAiBF,KAAK,CAACE,QAAN,CAAeb,IAAhC,GAAuC,EAAjF;AACAI,MAAAA,GAAG,GAAGI,IAAI,CAACC,SAAL,CAAe;AAAEE,QAAAA,KAAK,EAAE,sCAAsCC;AAA/C,OAAf,CAAN;AAED,KATD,SASU;AACR5B,MAAAA,OAAO,CAAC8B,GAAR,CAAY,EAAZ,EAAgB,eAAhB,EAAiCV,GAAjC,EAAsC;AAAEW,QAAAA,IAAI,EAAE;AAAR,OAAtC;AACAjC,MAAAA,MAAM,CAACkC,IAAP,CAAY,eAAZ;AACD;AACF,GAhBD;;AAkBA,SACE,MAAC,MAAD,EAAYxB,WAAZ,EACE,MAAC,IAAD,QACE;AAAA;AAAA,qBAAuBH,MAAM,CAAC4B,OAA9B,CADF,CADF,EAIE,MAAC,cAAD,QAIGxB,IAAI,IACH,MAAC,QAAD,WAAc;AAAEQ,IAAAA,YAAF;AAAgBN,IAAAA;AAAhB,GAAd;AAA+C,IAAA,MAAM;AAArD,KALJ,CAJF;AAAA;AAAA,k+GADF;AAoCD,CA5DD;;AA8DA,eAAeR,QAAQ,CAACI,YAAD,CAAvB","sourcesContent":["// next\nimport Router from 'next/router'\nimport Head from 'next/head'\n\n// react\nimport nookies from 'nookies'\n\n//components\nimport Layout from '~/components/layout/Layout'\nimport UserForm from '~/components/form-user'\nimport withAuth from '~/components/withAuth'\nimport api from '~/services/api'\nimport { CONFIG } from '~/config'\nimport CardLogoHeader from '~/components/CardLogoHeader/index'\n\nconst userDataPage = ({ layoutProps, user, updateUser }) => {\n\n  const initialValues = (({ gender_id: gender, country_id: country, ...data }) => {\n    return { gender, country, ...data }\n  })(user)\n\n  const handleSubmit = async (fields, actions) => {\n    var msg = ''\n\n    try {\n      const res = await api().post(`user/${user.id}`, fields)\n      updateUser(res.data)\n      msg = JSON.stringify({ success: \"Cambio de datos completo.\" })\n\n    } catch (error) {\n      var { message } = error.message ? error : error.response ? error.response.data : ''\n      msg = JSON.stringify({ error: \"An Error Occured while updating: \" + message })\n\n    } finally {\n      nookies.set({}, 'flash_message', msg, { path: '/' })\n      Router.push('/user/account')\n    }\n  }\n\n  return (\n    <Layout {...layoutProps}>\n      <Head>\n        <title>Mi Cuenta &lt; {CONFIG.appName}</title>\n      </Head>\n      <CardLogoHeader>\n        {/* <div className=\"row\">\n          <div className=\"col-xl-8 offset-xl-2\"> */}\n\n        {user &&\n          <UserForm {...{ handleSubmit, initialValues }} button />\n        }\n        {/* </div>\n        </div> */}\n      </CardLogoHeader>\n      <style jsx>{`\n        .rgpage {\n          padding-top: 40px;\n          padding-bottom: 120px;\n        }\n        .h2 {\n          margin-bottom: 10px;\n        }\n        :global(.h3) {\n          font-size: 20px;\n          font-weight: bold;\n          margin-bottom: 10px;\n        }\n        hr {\n          margin-top: 25px;\n          margin-bottom: 15px;\n          background-color: white;\n        }\n      `}</style>\n    </Layout>\n  );\n}\n\nexport default withAuth(userDataPage)\n"]},"metadata":{},"sourceType":"module"}