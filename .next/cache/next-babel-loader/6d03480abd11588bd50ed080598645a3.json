{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Head from 'next/head';\nimport Layout from '../../../components/layout/Layout';\nimport { CONFIG } from '../../../config';\nimport { useEffect } from 'react';\nimport { IS_PRODUCTION } from '../../../constants/constants';\n\nvar Page = function Page(_ref) {\n  var errorCode = _ref.errorCode,\n      layoutProps = _ref.layoutProps;\n  var POS;\n\n  function onSubmit(event) {\n    event.preventDefault();\n    var data = {\n      token_type: document.getElementById('token_type').value,\n      holder_name: document.getElementById('holder_name').value,\n      expiration_date: document.getElementById('expiration_date').value,\n      card_number: document.getElementById('card_number').value,\n      credit_card_cvv: document.getElementById('credit_card_cvv').value,\n      custom_data: document.getElementById('custom').value\n    };\n    POS.tokenize(data, onToken);\n  }\n\n  function onToken(result) {\n    var json = JSON.parse(result);\n    console.log(json);\n\n    if (json.token) {// sample response:\n\n      /* {\n        \"token\":\"3c82255a-7986-405b-9721-11be1d3ab6ed\",\n        \"created\":\"1575914964507\",\n        \"pass_luhn_validation\":true,\n        \"encrypted_cvv\":\"NjI0MzdmN2UtOGUwYS00MWVmLWFkZTItOGYyMDRhNjQ4YWRiY3Z2X2RlbGltaXRlcnZhdWx0OnYxOnIzd1g0aGowbXZ5NS9nQ2lPb2ZlR29tR2FDcnZHYVJEalUrTzJreTVxQ2VaSVNLSVpxNnRCSlNJQi9mVmV6am5zdzI1a3lLbFpwR2hSQjRLRExOZzVqWFBZYWtmdC9iVTE5MVZvU01y\",\n        \"token_type\":\"credit_card\",\n        \"type\":\"tokenized\",\n        \"state\":\"created\",\n        \"bin_number\":\"550209\",\n        \"vendor\":\"MASTERCARD\",\n        \"card_type\":\"CREDIT\",\n        \"issuer\":\"NU PAGAMENTOS SA\",\n        \"level\":\"GOLD\",\n        \"country_code\":\"BRA\",\n        \"holder_name\":\"Giovanni\",\n        \"expiration_date\":\"08/2027\",\n        \"last_4_digits\":\"3362\"\n      } */\n    } else {\n      var possibleErrors = [{\n        category: \"client_validation_error\",\n        description: \"Invalid PAN\",\n        more_info: \"Card number did not pass luhn validation\"\n      }, {\n        category: \"client_validation_error\",\n        description: \"Invalid expiration date\",\n        more_info: \"expiration date have passed\"\n      }, {\n        category: \"client_validation_error\",\n        description: \"Missing required parameters\",\n        more_info: \"holder_name field is mandatory\"\n      }];\n    }\n  }\n\n  function scriptLoaded() {\n    var payUEnv = 'test';\n    var businessUnitPublicKey = '88985036-6530-4b5a-a7ec-c4e07ec07f6c';\n    POS = window.POS;\n\n    if (!POS) {\n      return console.log('POS not defined');\n    }\n\n    POS.setPublicKey(businessUnitPublicKey);\n    POS.setEnvironment(payUEnv);\n  }\n\n  var latestJSApi = 'https://js.paymentsos.com/v2/latest/token.min.js';\n  var specifiedJSApi = 'https://js.paymentsos.com/v2/0.0.1/token.min.js';\n  var jsApi = latestJSApi || specifiedJSApi;\n  useEffect(function () {\n    var script = document.createElement(\"script\");\n    script.src = jsApi;\n    script.async = true;\n\n    script.onload = function () {\n      return scriptLoaded();\n    };\n\n    document.body.appendChild(script);\n  });\n  return __jsx(Layout, _extends({\n    color: \"white\",\n    errorCode: errorCode\n  }, layoutProps), __jsx(Head, null, __jsx(\"title\", null, \"Payments Sample < \", CONFIG.appName)), \"Payments\", __jsx(\"form\", {\n    id: \"payment-form\",\n    method: \"post\",\n    onSubmit: onSubmit\n  }, __jsx(\"input\", {\n    type: \"text\",\n    id: \"custom\",\n    placeholder: \"Custom Additional Data\"\n  }), __jsx(\"div\", null, __jsx(\"input\", {\n    id: \"holder_name\",\n    placeholder: \"John Doe\",\n    required: true,\n    type: \"text\",\n    defaultValue: \"John Doe\"\n  })), __jsx(\"div\", null, __jsx(\"input\", {\n    id: \"token_type\",\n    placeholder: \"Holder Type\",\n    required: true,\n    type: \"text\",\n    defaultValue: \"credit_card\"\n  })), __jsx(\"div\", null, __jsx(\"input\", {\n    id: \"expiration_date\",\n    placeholder: \"Exp. Date\",\n    required: true,\n    type: \"text\",\n    defaultValue: \"09-2019\"\n  })), __jsx(\"div\", null, __jsx(\"input\", {\n    id: \"card_number\",\n    placeholder: \"Card Number\",\n    required: true,\n    type: \"text\",\n    defaultValue: \"4111111111111111\"\n  })), __jsx(\"div\", null, __jsx(\"input\", {\n    id: \"credit_card_cvv\",\n    placeholder: \"CVV\",\n    type: \"text\",\n    defaultValue: \"123\"\n  })), __jsx(\"button\", {\n    type: \"submit\"\n  }, \"Pay\")));\n};\n\nPage.getInitialProps = function (_) {\n  if (IS_PRODUCTION) {\n    var errorCode = 404;\n    return {\n      errorCode: errorCode\n    };\n  }\n};\n\nexport default Page;","map":{"version":3,"sources":["/Users/rafael/Projects/somosgad/dale/pages/samples/payments/js-api.js"],"names":["Head","Layout","CONFIG","useEffect","IS_PRODUCTION","Page","errorCode","layoutProps","POS","onSubmit","event","preventDefault","data","token_type","document","getElementById","value","holder_name","expiration_date","card_number","credit_card_cvv","custom_data","tokenize","onToken","result","json","JSON","parse","console","log","token","possibleErrors","category","description","more_info","scriptLoaded","payUEnv","businessUnitPublicKey","window","setPublicKey","setEnvironment","latestJSApi","specifiedJSApi","jsApi","script","createElement","src","async","onload","body","appendChild","appName","getInitialProps","_"],"mappings":"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","sourcesContent":["\nimport Head from 'next/head'\nimport Layout from '../../../components/layout/Layout'\nimport { CONFIG } from '../../../config'\nimport { useEffect } from 'react'\nimport { IS_PRODUCTION } from '../../../constants/constants'\n\nconst Page = ({ errorCode, layoutProps }) => {\n\n  let POS\n\n  function onSubmit(event) {\n    event.preventDefault();\n    const data = {\n      token_type: document.getElementById('token_type').value,\n      holder_name: document.getElementById('holder_name').value,\n      expiration_date: document.getElementById('expiration_date').value,\n      card_number: document.getElementById('card_number').value,\n      credit_card_cvv: document.getElementById('credit_card_cvv').value,\n      custom_data: document.getElementById('custom').value,\n    }\n    POS.tokenize(data, onToken)\n  }\n\n  function onToken(result) {\n    const json = JSON.parse(result)\n    console.log (json);\n    if (json.token) {\n      // sample response:\n      /* {\n        \"token\":\"3c82255a-7986-405b-9721-11be1d3ab6ed\",\n        \"created\":\"1575914964507\",\n        \"pass_luhn_validation\":true,\n        \"encrypted_cvv\":\"NjI0MzdmN2UtOGUwYS00MWVmLWFkZTItOGYyMDRhNjQ4YWRiY3Z2X2RlbGltaXRlcnZhdWx0OnYxOnIzd1g0aGowbXZ5NS9nQ2lPb2ZlR29tR2FDcnZHYVJEalUrTzJreTVxQ2VaSVNLSVpxNnRCSlNJQi9mVmV6am5zdzI1a3lLbFpwR2hSQjRLRExOZzVqWFBZYWtmdC9iVTE5MVZvU01y\",\n        \"token_type\":\"credit_card\",\n        \"type\":\"tokenized\",\n        \"state\":\"created\",\n        \"bin_number\":\"550209\",\n        \"vendor\":\"MASTERCARD\",\n        \"card_type\":\"CREDIT\",\n        \"issuer\":\"NU PAGAMENTOS SA\",\n        \"level\":\"GOLD\",\n        \"country_code\":\"BRA\",\n        \"holder_name\":\"Giovanni\",\n        \"expiration_date\":\"08/2027\",\n        \"last_4_digits\":\"3362\"\n      } */\n    } else {\n      const possibleErrors = [\n        {\n          category: \"client_validation_error\",\n          description: \"Invalid PAN\",\n          more_info: \"Card number did not pass luhn validation\"\n        },\n        {\n          category: \"client_validation_error\",\n          description: \"Invalid expiration date\",\n          more_info: \"expiration date have passed\"\n        },\n        {\n          category: \"client_validation_error\",\n          description: \"Missing required parameters\",\n          more_info: \"holder_name field is mandatory\"\n        },\n      ]\n    }\n  }\n\n  function scriptLoaded() {\n    const payUEnv = 'test'\n    const businessUnitPublicKey = '88985036-6530-4b5a-a7ec-c4e07ec07f6c'\n    POS = window.POS\n    if ( ! POS) {\n      return console.log('POS not defined')\n    }\n    POS.setPublicKey(businessUnitPublicKey)\n    POS.setEnvironment(payUEnv)\n  }\n\n  const latestJSApi = 'https://js.paymentsos.com/v2/latest/token.min.js'\n  const specifiedJSApi = 'https://js.paymentsos.com/v2/0.0.1/token.min.js'\n  const jsApi = latestJSApi || specifiedJSApi\n\n  useEffect(() => {\n    const script = document.createElement(\"script\")\n    script.src = jsApi\n    script.async = true\n    script.onload = () => scriptLoaded()\n    document.body.appendChild(script)\n  })\n\n  return (\n    <Layout color=\"white\" errorCode={errorCode} {...layoutProps}>\n      <Head>\n        <title>Payments Sample &lt; {CONFIG.appName}</title>\n      </Head>\n        Payments\n        <form id=\"payment-form\" method=\"post\" onSubmit={onSubmit}>\n\n          {/* custom additional data */}\n          <input type=\"text\" id=\"custom\" placeholder=\"Custom Additional Data\" />\n\n          {/* mandatory data */}\n          <div>\n            <input\n              id=\"holder_name\"\n              placeholder=\"John Doe\"\n              required\n              type=\"text\"\n              defaultValue=\"John Doe\"\n            />\n          </div>\n          <div>\n            <input\n              id=\"token_type\"\n              placeholder=\"Holder Type\"\n              required\n              type=\"text\"\n              defaultValue=\"credit_card\"\n            />\n          </div>\n          <div>\n            <input\n              id=\"expiration_date\"\n              placeholder=\"Exp. Date\"\n              required\n              type=\"text\"\n              defaultValue=\"09-2019\"\n            />\n          </div>\n          <div>\n            <input\n              id=\"card_number\"\n              placeholder=\"Card Number\"\n              required\n              type=\"text\"\n              defaultValue=\"4111111111111111\"\n            />\n          </div>\n          <div>\n            <input\n              id=\"credit_card_cvv\"\n              placeholder=\"CVV\"\n              type=\"text\"\n              defaultValue=\"123\"\n            />\n          </div>\n\n          <button type=\"submit\">Pay</button>\n        </form>\n    </Layout>\n  )\n}\n\nPage.getInitialProps = _ => {\n  if (IS_PRODUCTION) {\n    const errorCode = 404\n    return { errorCode }\n  }\n}\n\nexport default Page\n"]},"metadata":{},"sourceType":"module"}