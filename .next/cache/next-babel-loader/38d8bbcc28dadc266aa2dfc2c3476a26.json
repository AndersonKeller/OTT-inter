{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useContext, useEffect } from 'react';\nimport nookies from 'nookies';\nimport { toast, ToastContainer } from 'react-toastify';\nimport Header from './Header';\nimport Footer from './Footer';\nimport loadMenus from '~/lib/load-menus';\nimport AuthModal from './AuthModal/AuthModal';\nimport CustomError from '~/pages/_error';\nimport withApi from '../withApi';\nimport Color from \"color\";\nimport { ThemeContext } from \"styled-components\";\n\nconst Layout = ({\n  media,\n  apiVersion,\n  children,\n  color: layoutColor = 'black',\n  errorCode,\n  header,\n  menus,\n  menusError,\n  paddingTop = true,\n  footer = '',\n  customClass = ''\n}) => {\n  const theme = useContext(ThemeContext);\n  const primaryColor = Color(theme.colors.primary).hsl().string();\n\n  if (errorCode) {\n    return __jsx(CustomError, {\n      statusCode: errorCode\n    });\n  }\n\n  if (header === 'closed') {\n    paddingTop = false;\n  }\n\n  const {\n    flash_message\n  } = nookies.get({}, 'flash_message');\n  useEffect(_ => {\n    if (flash_message) {\n      let messages = JSON.parse(flash_message);\n      console.log(messages);\n      if (messages.error) toast.error(messages.error, {\n        delay: 500,\n        autoClose: 5000\n      });\n      if (messages.success) toast.success(messages.success, {\n        delay: 500,\n        autoClose: 4000\n      });\n      if (messages.info) toast.info(messages.info, {\n        delay: 500,\n        autoClose: 4000\n      });\n      nookies.destroy({}, 'flash_message', {\n        path: '/'\n      });\n    }\n  }, [flash_message]);\n\n  function renderHeader(media) {\n    if (header !== 'hidden') {\n      return __jsx(Header, {\n        closed: header === 'closed',\n        layoutColor,\n        menus: menusError ? null : menus,\n        media\n      });\n    }\n\n    paddingTop = false;\n    return null;\n  }\n\n  function renderFooter() {\n    if (footer !== 'hidden') {\n      return __jsx(Footer, {\n        apiVersion: apiVersion,\n        layoutColor: layoutColor\n      });\n    }\n\n    return null;\n  }\n\n  return __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"2705163232\", [layoutColor === 'white' ? 'black' : 'white', layoutColor === 'white' ? 'background-color: var(--white) !important;' : '']]]) + \" \" + (customClass || \"\")\n  }, __jsx(ToastContainer, {\n    newestOnTop: true\n  }), renderHeader(media), __jsx(\"main\", {\n    className: _JSXStyle.dynamic([[\"2705163232\", [layoutColor === 'white' ? 'black' : 'white', layoutColor === 'white' ? 'background-color: var(--white) !important;' : '']]]) + \" \" + ((!paddingTop ? 'no-padding' : '') || \"\")\n  }, children), renderFooter(), __jsx(AuthModal, null), __jsx(_JSXStyle, {\n    id: \"2705163232\",\n    dynamic: [layoutColor === 'white' ? 'black' : 'white', layoutColor === 'white' ? 'background-color: var(--white) !important;' : '']\n  }, `:root{--color:var(--${layoutColor === 'white' ? 'black' : 'white'});}body{${layoutColor === 'white' ? 'background-color: var(--white) !important;' : ''});;}main{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;padding-top:var(--padding-top);}main.no-padding{padding-top:0;}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9yYWZhZWwvUHJvamVjdHMvc29tb3NnYWQvZGFsZS9jb21wb25lbnRzL2xheW91dC9MYXlvdXQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBMEZ5QixBQUl1RCxBQUk5QyxBQUVjLEFBSUUsY0FDaEIsaUJBUEMsYUFIRCwyQkFNaUMsK0JBQ2pDIiwiZmlsZSI6Ii9Vc2Vycy9yYWZhZWwvUHJvamVjdHMvc29tb3NnYWQvZGFsZS9jb21wb25lbnRzL2xheW91dC9MYXlvdXQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VDb250ZXh0LCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCdcbmltcG9ydCBub29raWVzIGZyb20gJ25vb2tpZXMnXG5pbXBvcnQgeyB0b2FzdCwgVG9hc3RDb250YWluZXIgfSBmcm9tICdyZWFjdC10b2FzdGlmeSdcbmltcG9ydCBIZWFkZXIgZnJvbSAnLi9IZWFkZXInXG5pbXBvcnQgRm9vdGVyIGZyb20gJy4vRm9vdGVyJ1xuaW1wb3J0IGxvYWRNZW51cyBmcm9tICd+L2xpYi9sb2FkLW1lbnVzJ1xuaW1wb3J0IEF1dGhNb2RhbCBmcm9tICcuL0F1dGhNb2RhbC9BdXRoTW9kYWwnXG5pbXBvcnQgQ3VzdG9tRXJyb3IgZnJvbSAnfi9wYWdlcy9fZXJyb3InXG5pbXBvcnQgd2l0aEFwaSBmcm9tICcuLi93aXRoQXBpJ1xuaW1wb3J0IENvbG9yIGZyb20gXCJjb2xvclwiO1xuaW1wb3J0IHsgVGhlbWVDb250ZXh0IH0gZnJvbSBcInN0eWxlZC1jb21wb25lbnRzXCI7XG5cbmNvbnN0IExheW91dCA9ICh7XG4gIG1lZGlhLFxuICBhcGlWZXJzaW9uLFxuICBjaGlsZHJlbixcbiAgY29sb3I6IGxheW91dENvbG9yID0gJ2JsYWNrJyxcbiAgZXJyb3JDb2RlLFxuICBoZWFkZXIsXG4gIG1lbnVzLFxuICBtZW51c0Vycm9yLFxuICBwYWRkaW5nVG9wID0gdHJ1ZSxcbiAgZm9vdGVyID0gJycsXG4gIGN1c3RvbUNsYXNzID0gJydcbn0sICkgPT4ge1xuICBjb25zdCB0aGVtZSA9IHVzZUNvbnRleHQoVGhlbWVDb250ZXh0KVxuICBjb25zdCBwcmltYXJ5Q29sb3JcbiAgICA9IENvbG9yKHRoZW1lLmNvbG9ycy5wcmltYXJ5KS5oc2woKS5zdHJpbmcoKVxuXG4gIGlmIChlcnJvckNvZGUpIHtcbiAgICByZXR1cm4gPEN1c3RvbUVycm9yIHN0YXR1c0NvZGU9e2Vycm9yQ29kZX0gLz5cbiAgfVxuICBpZiAoaGVhZGVyID09PSAnY2xvc2VkJykge1xuICAgIHBhZGRpbmdUb3AgPSBmYWxzZVxuICB9XG5cbiAgY29uc3QgeyBmbGFzaF9tZXNzYWdlIH0gPSBub29raWVzLmdldCh7fSwgJ2ZsYXNoX21lc3NhZ2UnKVxuXG4gIHVzZUVmZmVjdChfID0+IHtcbiAgICBpZiAoZmxhc2hfbWVzc2FnZSkge1xuICAgICAgbGV0IG1lc3NhZ2VzID0gSlNPTi5wYXJzZShmbGFzaF9tZXNzYWdlKVxuICAgICAgY29uc29sZS5sb2cobWVzc2FnZXMpXG5cbiAgICAgIGlmIChtZXNzYWdlcy5lcnJvcilcbiAgICAgICAgdG9hc3QuZXJyb3IobWVzc2FnZXMuZXJyb3IsIHsgZGVsYXk6IDUwMCwgYXV0b0Nsb3NlOiA1MDAwIH0pXG5cbiAgICAgIGlmIChtZXNzYWdlcy5zdWNjZXNzKVxuICAgICAgICB0b2FzdC5zdWNjZXNzKG1lc3NhZ2VzLnN1Y2Nlc3MsIHsgZGVsYXk6IDUwMCwgYXV0b0Nsb3NlOiA0MDAwIH0pXG5cbiAgICAgIGlmIChtZXNzYWdlcy5pbmZvKVxuICAgICAgICB0b2FzdC5pbmZvKG1lc3NhZ2VzLmluZm8sIHsgZGVsYXk6IDUwMCwgYXV0b0Nsb3NlOiA0MDAwIH0pXG5cbiAgICAgIG5vb2tpZXMuZGVzdHJveSh7fSwgJ2ZsYXNoX21lc3NhZ2UnLCB7IHBhdGg6ICcvJyB9KVxuICAgIH1cbiAgfSwgW2ZsYXNoX21lc3NhZ2VdKVxuXG4gIGZ1bmN0aW9uIHJlbmRlckhlYWRlcihtZWRpYSkge1xuICAgIGlmIChoZWFkZXIgIT09ICdoaWRkZW4nKSB7XG4gICAgICByZXR1cm4gPEhlYWRlciB7Li4ue1xuICAgICAgICBjbG9zZWQ6IGhlYWRlciA9PT0gJ2Nsb3NlZCcsXG4gICAgICAgIGxheW91dENvbG9yLFxuICAgICAgICBtZW51czogbWVudXNFcnJvciA/IG51bGwgOiBtZW51cyxcbiAgICAgICAgbWVkaWFcbiAgICAgIH19IC8+XG4gICAgfVxuICAgIHBhZGRpbmdUb3AgPSBmYWxzZVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBmdW5jdGlvbiByZW5kZXJGb290ZXIoKSB7XG4gICAgaWYgKGZvb3RlciAhPT0gJ2hpZGRlbicpIHtcbiAgICAgIHJldHVybiA8Rm9vdGVyIGFwaVZlcnNpb249e2FwaVZlcnNpb259IGxheW91dENvbG9yPXtsYXlvdXRDb2xvcn0gLz5cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e2N1c3RvbUNsYXNzfT5cbiAgICAgIDxUb2FzdENvbnRhaW5lciBuZXdlc3RPblRvcCAvPlxuXG4gICAgICB7cmVuZGVySGVhZGVyKG1lZGlhKX1cblxuICAgICAgPG1haW4gY2xhc3NOYW1lPXshcGFkZGluZ1RvcCA/ICduby1wYWRkaW5nJyA6ICcnfT5cbiAgICAgICAge2NoaWxkcmVufVxuICAgICAgPC9tYWluPlxuXG4gICAgICB7cmVuZGVyRm9vdGVyKCl9XG5cbiAgICAgIDxBdXRoTW9kYWwgLz5cblxuICAgICAgPHN0eWxlIGpzeCBnbG9iYWw+e2BcblxuICAgICAgICA6cm9vdCB7XG4gICAgICAgICAgLS1jb2xvcjogdmFyKC0tJHsgbGF5b3V0Q29sb3IgPT09ICd3aGl0ZScgPyAnYmxhY2snIDogJ3doaXRlJ30pO1xuICAgICAgICB9XG4gICAgICAgIGJvZHkge1xuICAgICAgICAgICR7IGxheW91dENvbG9yID09PSAnd2hpdGUnID8gJ2JhY2tncm91bmQtY29sb3I6IHZhcigtLXdoaXRlKSAhaW1wb3J0YW50OycgOiAnJ30pO1xuICAgICAgICB9XG4gICAgICAgIG1haW4ge1xuICAgICAgICAgIGZsZXgtZ3JvdzogMTtcbiAgICAgICAgICBwYWRkaW5nLXRvcDogdmFyKC0tcGFkZGluZy10b3ApO1xuICAgICAgICB9XG4gICAgICAgIG1haW4ubm8tcGFkZGluZyB7XG4gICAgICAgICAgcGFkZGluZy10b3A6IDA7XG4gICAgICAgIH1cbiAgICAgIGAgfTwvc3R5bGU+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbkxheW91dC5nZXRJbml0aWFsUHJvcHMgPSBhc3luYyBjdHggPT4ge1xuICBjb25zdCB7IGFwaSB9ID0gY3R4XG4gIHRyeSB7XG4gICAgY29uc3QgbWVudXMgPSBhd2FpdCBsb2FkTWVudXMoY3R4KVxuICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYXBpLmdldCgndmVyc2lvbicpXG4gICAgY29uc3QgeyB2ZXJzaW9uOiBhcGlWZXJzaW9uIH0gPSBkYXRhO1xuICAgIGNvbnN0IG1lZGlhID0gY3R4LnF1ZXJ5O1xuXG4gICAgcmV0dXJuIHsgYXBpVmVyc2lvbiwgbWVudXMsIG1lZGlhIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBUaGUgcmVxdWVzdCB3YXMgbWFkZSBhbmQgdGhlIHNlcnZlciByZXNwb25kZWQgd2l0aCBhIHN0YXR1cyBjb2RlXG4gICAgICB0aGF0IGZhbGxzIG91dCBvZiB0aGUgcmFuZ2Ugb2YgMnh4YCwgZXJyb3IucmVzcG9uc2Uuc3RhdHVzKVxuICAgICAgLy8gY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UuaGVhZGVycylcbiAgICAgIC8vIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlLmRhdGEpXG4gICAgfSBlbHNlIGlmIChlcnJvci5yZXF1ZXN0KSB7XG4gICAgICBjb25zb2xlLmxvZygnVGhlIHJlcXVlc3Qgd2FzIG1hZGUgYnV0IG5vIHJlc3BvbnNlIHdhcyByZWNlaXZlZCcpXG4gICAgICAvLyBjb25zb2xlLmxvZyhlcnJvci5yZXF1ZXN0KVxuICAgICAgLy8gYGVycm9yLnJlcXVlc3RgIGlzIGFuIGluc3RhbmNlIG9mIFhNTEh0dHBSZXF1ZXN0IGluIHRoZSBicm93c2VyIGFuZCBhbiBpbnN0YW5jZSBvZlxuICAgICAgLy8gaHR0cC5DbGllbnRSZXF1ZXN0IGluIG5vZGUuanNcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU29tZXRoaW5nIGhhcHBlbmVkIGluIHNldHRpbmcgdXAgdGhlIHJlcXVlc3QgdGhhdCB0cmlnZ2VyZWQgYW4gRXJyb3JcbiAgICAgIGNvbnNvbGUubG9nKCdFcnJvcicsIGVycm9yLm1lc3NhZ2UpXG4gICAgfVxuICAgIHJldHVybiB7IGVycm9yQ29kZTogNTAzIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB3aXRoQXBpKExheW91dClcbiJdfQ== */\n/*@ sourceURL=/Users/rafael/Projects/somosgad/dale/components/layout/Layout.js */`));\n};\n\nLayout.getInitialProps = async ctx => {\n  const {\n    api\n  } = ctx;\n\n  try {\n    const menus = await loadMenus(ctx);\n    const {\n      data\n    } = await api.get('version');\n    const {\n      version: apiVersion\n    } = data;\n    const media = ctx.query;\n    return {\n      apiVersion,\n      menus,\n      media\n    };\n  } catch (error) {\n    if (error.response) {\n      console.log(`The request was made and the server responded with a status code\n      that falls out of the range of 2xx`, error.response.status); // console.log(error.response.headers)\n      // console.log(error.response.data)\n    } else if (error.request) {\n      console.log('The request was made but no response was received'); // console.log(error.request)\n      // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n      // http.ClientRequest in node.js\n    } else {\n      // Something happened in setting up the request that triggered an Error\n      console.log('Error', error.message);\n    }\n\n    return {\n      errorCode: 503\n    };\n  }\n};\n\nexport default withApi(Layout);","map":{"version":3,"sources":["/Users/rafael/Projects/somosgad/dale/components/layout/Layout.js"],"names":["useContext","useEffect","nookies","toast","ToastContainer","Header","Footer","loadMenus","AuthModal","CustomError","withApi","Color","ThemeContext","Layout","media","apiVersion","children","color","layoutColor","errorCode","header","menus","menusError","paddingTop","footer","customClass","theme","primaryColor","colors","primary","hsl","string","flash_message","get","_","messages","JSON","parse","console","log","error","delay","autoClose","success","info","destroy","path","renderHeader","closed","renderFooter","getInitialProps","ctx","api","data","version","query","response","status","request","message"],"mappings":"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","sourcesContent":["import { useContext, useEffect } from 'react'\nimport nookies from 'nookies'\nimport { toast, ToastContainer } from 'react-toastify'\nimport Header from './Header'\nimport Footer from './Footer'\nimport loadMenus from '~/lib/load-menus'\nimport AuthModal from './AuthModal/AuthModal'\nimport CustomError from '~/pages/_error'\nimport withApi from '../withApi'\nimport Color from \"color\";\nimport { ThemeContext } from \"styled-components\";\n\nconst Layout = ({\n  media,\n  apiVersion,\n  children,\n  color: layoutColor = 'black',\n  errorCode,\n  header,\n  menus,\n  menusError,\n  paddingTop = true,\n  footer = '',\n  customClass = ''\n}, ) => {\n  const theme = useContext(ThemeContext)\n  const primaryColor\n    = Color(theme.colors.primary).hsl().string()\n\n  if (errorCode) {\n    return <CustomError statusCode={errorCode} />\n  }\n  if (header === 'closed') {\n    paddingTop = false\n  }\n\n  const { flash_message } = nookies.get({}, 'flash_message')\n\n  useEffect(_ => {\n    if (flash_message) {\n      let messages = JSON.parse(flash_message)\n      console.log(messages)\n\n      if (messages.error)\n        toast.error(messages.error, { delay: 500, autoClose: 5000 })\n\n      if (messages.success)\n        toast.success(messages.success, { delay: 500, autoClose: 4000 })\n\n      if (messages.info)\n        toast.info(messages.info, { delay: 500, autoClose: 4000 })\n\n      nookies.destroy({}, 'flash_message', { path: '/' })\n    }\n  }, [flash_message])\n\n  function renderHeader(media) {\n    if (header !== 'hidden') {\n      return <Header {...{\n        closed: header === 'closed',\n        layoutColor,\n        menus: menusError ? null : menus,\n        media\n      }} />\n    }\n    paddingTop = false\n    return null\n  }\n\n  function renderFooter() {\n    if (footer !== 'hidden') {\n      return <Footer apiVersion={apiVersion} layoutColor={layoutColor} />\n    }\n    return null\n  }\n\n  return (\n    <div className={customClass}>\n      <ToastContainer newestOnTop />\n\n      {renderHeader(media)}\n\n      <main className={!paddingTop ? 'no-padding' : ''}>\n        {children}\n      </main>\n\n      {renderFooter()}\n\n      <AuthModal />\n\n      <style jsx global>{`\n\n        :root {\n          --color: var(--${ layoutColor === 'white' ? 'black' : 'white'});\n        }\n        body {\n          ${ layoutColor === 'white' ? 'background-color: var(--white) !important;' : ''});\n        }\n        main {\n          flex-grow: 1;\n          padding-top: var(--padding-top);\n        }\n        main.no-padding {\n          padding-top: 0;\n        }\n      ` }</style>\n    </div>\n  );\n}\n\nLayout.getInitialProps = async ctx => {\n  const { api } = ctx\n  try {\n    const menus = await loadMenus(ctx)\n    const { data } = await api.get('version')\n    const { version: apiVersion } = data;\n    const media = ctx.query;\n\n    return { apiVersion, menus, media }\n  } catch (error) {\n    if (error.response) {\n      console.log(`The request was made and the server responded with a status code\n      that falls out of the range of 2xx`, error.response.status)\n      // console.log(error.response.headers)\n      // console.log(error.response.data)\n    } else if (error.request) {\n      console.log('The request was made but no response was received')\n      // console.log(error.request)\n      // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n      // http.ClientRequest in node.js\n    } else {\n      // Something happened in setting up the request that triggered an Error\n      console.log('Error', error.message)\n    }\n    return { errorCode: 503 }\n  }\n}\n\nexport default withApi(Layout)\n"]},"metadata":{},"sourceType":"module"}