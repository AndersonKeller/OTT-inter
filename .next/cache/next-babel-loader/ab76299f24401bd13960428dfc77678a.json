{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AuthModalProvider = AuthModalProvider;\nexports.AuthModalContext = void 0;\n\nvar _router = require(\"next/router\");\n\nvar _react = require(\"react\");\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nconst AuthModalContext = (0, _react.createContext)();\nexports.AuthModalContext = AuthModalContext;\n\nfunction AuthModalProvider({\n  children\n}) {\n  const allowedTabs = ['login', 'password', 'register'];\n  const router = (0, _router.useRouter)();\n  const {\n    modal,\n    code,\n    socialProvider\n  } = router.query;\n  const shouldAutoOpen = allowedTabs.includes(modal);\n  const {\n    0: show,\n    1: setShow\n  } = (0, _react.useState)(shouldAutoOpen ? true : false);\n  const {\n    0: tab,\n    1: setTab\n  } = (0, _react.useState)(shouldAutoOpen ? modal : 'login');\n  const {\n    0: tabsHistory,\n    1: setTabHistory\n  } = (0, _react.useState)([]);\n  const {\n    0: packageId,\n    1: setPackageId\n  } = (0, _react.useState)();\n\n  function backTab() {\n    if (tabsHistory.length <= 1) {\n      throw \"can't back tab 'cause there are no more tabs on history\";\n    }\n\n    const newTab = tabsHistory[tabsHistory.length - 2];\n    setTab(newTab);\n    const newTabHistory = tabsHistory.slice(0, -1);\n    setTabHistory(newTabHistory);\n    return true;\n  }\n\n  function changeTab(tabName) {\n    validateTab(tabName);\n    setTab(tabName);\n    const newTabHistory = [...tabsHistory, tabName];\n    setTabHistory(newTabHistory);\n    return true;\n  }\n\n  function closeAuthModal() {\n    setShow(false);\n    return true;\n  }\n\n  function openAuthModal(wishedTab = 'login', packageId = null) {\n    validateTab(wishedTab);\n\n    if (tab !== wishedTab) {\n      setTab(wishedTab);\n    }\n\n    const newTabHistory = [wishedTab];\n    setTabHistory(newTabHistory);\n    setPackageId(packageId);\n    setShow(true);\n    return true;\n  }\n\n  function validateTab(tabName) {\n    if (!allowedTabs.includes(tabName)) {\n      throw 'unknown tab';\n    }\n\n    return true;\n  }\n\n  return __jsx(AuthModalContext.Provider, {\n    value: _objectSpread({}, {\n      backTab,\n      changeTab,\n      closeAuthModal,\n      openAuthModal,\n      packageId,\n      show,\n      tab,\n      tabsHistory,\n      code,\n      socialProvider\n    })\n  }, children);\n}","map":{"version":3,"sources":["/Users/rafael/Projects/somosgad/dale/contexts/AuthModalContext.js"],"names":["AuthModalContext","AuthModalProvider","children","allowedTabs","router","modal","code","socialProvider","query","shouldAutoOpen","includes","show","setShow","tab","setTab","tabsHistory","setTabHistory","packageId","setPackageId","backTab","length","newTab","newTabHistory","slice","changeTab","tabName","validateTab","closeAuthModal","openAuthModal","wishedTab"],"mappings":";;;;;;;;AAAA;;AACA;;;;;;;;;;;AAEO,MAAMA,gBAAgB,GAAG,2BAAzB;;;AAEA,SAASC,iBAAT,CAA2B;AAAEC,EAAAA;AAAF,CAA3B,EAAyC;AAE9C,QAAMC,WAAW,GAAG,CAAC,OAAD,EAAU,UAAV,EAAsB,UAAtB,CAApB;AACA,QAAMC,MAAM,GAAG,wBAAf;AACA,QAAM;AAAEC,IAAAA,KAAF;AAASC,IAAAA,IAAT;AAAeC,IAAAA;AAAf,MAAkCH,MAAM,CAACI,KAA/C;AACA,QAAMC,cAAc,GAAGN,WAAW,CAACO,QAAZ,CAAqBL,KAArB,CAAvB;AACA,QAAM;AAAA,OAAEM,IAAF;AAAA,OAAQC;AAAR,MAAoB,qBAASH,cAAc,GAAG,IAAH,GAAU,KAAjC,CAA1B;AACA,QAAM;AAAA,OAAEI,GAAF;AAAA,OAAOC;AAAP,MAAkB,qBAASL,cAAc,GAAGJ,KAAH,GAAW,OAAlC,CAAxB;AACA,QAAM;AAAA,OAAEU,WAAF;AAAA,OAAeC;AAAf,MAAiC,qBAAS,EAAT,CAAvC;AACA,QAAM;AAAA,OAAEC,SAAF;AAAA,OAAaC;AAAb,MAA8B,sBAApC;;AAEA,WAASC,OAAT,GAAmB;AACjB,QAAIJ,WAAW,CAACK,MAAZ,IAAsB,CAA1B,EAA6B;AAC3B,YAAM,yDAAN;AACD;;AACD,UAAMC,MAAM,GAAGN,WAAW,CAACA,WAAW,CAACK,MAAZ,GAAqB,CAAtB,CAA1B;AACAN,IAAAA,MAAM,CAACO,MAAD,CAAN;AACA,UAAMC,aAAa,GAAGP,WAAW,CAACQ,KAAZ,CAAkB,CAAlB,EAAqB,CAAC,CAAtB,CAAtB;AACAP,IAAAA,aAAa,CAACM,aAAD,CAAb;AACA,WAAO,IAAP;AACD;;AAED,WAASE,SAAT,CAAmBC,OAAnB,EAA4B;AAC1BC,IAAAA,WAAW,CAACD,OAAD,CAAX;AACAX,IAAAA,MAAM,CAACW,OAAD,CAAN;AACA,UAAMH,aAAa,GAAG,CAAC,GAAGP,WAAJ,EAAiBU,OAAjB,CAAtB;AACAT,IAAAA,aAAa,CAACM,aAAD,CAAb;AACA,WAAO,IAAP;AACD;;AAED,WAASK,cAAT,GAA0B;AACxBf,IAAAA,OAAO,CAAC,KAAD,CAAP;AACA,WAAO,IAAP;AACD;;AAED,WAASgB,aAAT,CAAuBC,SAAS,GAAG,OAAnC,EAA4CZ,SAAS,GAAG,IAAxD,EAA8D;AAC5DS,IAAAA,WAAW,CAACG,SAAD,CAAX;;AACA,QAAIhB,GAAG,KAAKgB,SAAZ,EAAuB;AACrBf,MAAAA,MAAM,CAACe,SAAD,CAAN;AACD;;AACD,UAAMP,aAAa,GAAG,CAACO,SAAD,CAAtB;AACAb,IAAAA,aAAa,CAACM,aAAD,CAAb;AACAJ,IAAAA,YAAY,CAACD,SAAD,CAAZ;AACAL,IAAAA,OAAO,CAAC,IAAD,CAAP;AACA,WAAO,IAAP;AACD;;AAED,WAASc,WAAT,CAAqBD,OAArB,EAA8B;AAC5B,QAAK,CAAEtB,WAAW,CAACO,QAAZ,CAAqBe,OAArB,CAAP,EAAsC;AACpC,YAAM,aAAN;AACD;;AACD,WAAO,IAAP;AACD;;AAED,SACE,MAAC,gBAAD,CAAkB,QAAlB;AAA2B,IAAA,KAAK,oBAAM;AACpCN,MAAAA,OADoC;AAEpCK,MAAAA,SAFoC;AAGpCG,MAAAA,cAHoC;AAIpCC,MAAAA,aAJoC;AAKpCX,MAAAA,SALoC;AAMpCN,MAAAA,IANoC;AAOpCE,MAAAA,GAPoC;AAQpCE,MAAAA,WARoC;AASpCT,MAAAA,IAToC;AAUpCC,MAAAA;AAVoC,KAAN;AAAhC,KAYGL,QAZH,CADF;AAgBD","sourcesContent":["import { useRouter } from 'next/router'\nimport { createContext, useState } from 'react'\n\nexport const AuthModalContext = createContext()\n\nexport function AuthModalProvider({ children }) {\n\n  const allowedTabs = ['login', 'password', 'register']\n  const router = useRouter()\n  const { modal, code, socialProvider } = router.query\n  const shouldAutoOpen = allowedTabs.includes(modal)\n  const [ show, setShow ] = useState(shouldAutoOpen ? true : false)\n  const [ tab, setTab ] = useState(shouldAutoOpen ? modal : 'login')\n  const [ tabsHistory, setTabHistory ] = useState([])\n  const [ packageId, setPackageId ] = useState()\n\n  function backTab() {\n    if (tabsHistory.length <= 1) {\n      throw \"can't back tab 'cause there are no more tabs on history\"\n    }\n    const newTab = tabsHistory[tabsHistory.length - 2]\n    setTab(newTab)\n    const newTabHistory = tabsHistory.slice(0, -1)\n    setTabHistory(newTabHistory)\n    return true\n  }\n\n  function changeTab(tabName) {\n    validateTab(tabName)\n    setTab(tabName)\n    const newTabHistory = [...tabsHistory, tabName]\n    setTabHistory(newTabHistory)\n    return true\n  }\n\n  function closeAuthModal() {\n    setShow(false)\n    return true\n  }\n\n  function openAuthModal(wishedTab = 'login', packageId = null) {\n    validateTab(wishedTab)\n    if (tab !== wishedTab) {\n      setTab(wishedTab)\n    }\n    const newTabHistory = [wishedTab]\n    setTabHistory(newTabHistory)\n    setPackageId(packageId)\n    setShow(true)\n    return true\n  }\n\n  function validateTab(tabName) {\n    if ( ! allowedTabs.includes(tabName)) {\n      throw 'unknown tab'\n    }\n    return true\n  }\n\n  return (\n    <AuthModalContext.Provider value={{...{\n      backTab,\n      changeTab,\n      closeAuthModal,\n      openAuthModal,\n      packageId,\n      show,\n      tab,\n      tabsHistory,\n      code,\n      socialProvider\n    }}}>\n      {children}\n    </AuthModalContext.Provider>\n  )\n}\n"]},"metadata":{},"sourceType":"script"}