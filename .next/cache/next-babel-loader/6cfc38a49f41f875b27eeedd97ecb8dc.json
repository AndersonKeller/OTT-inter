{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n/*\n * Loading example found at:\n * https://github.com/zeit/next.js/blob/canary/examples/with-loading/\n */\nimport 'nprogress/nprogress.css';\nimport 'react-toastify/dist/ReactToastify.min.css';\nimport 'shaka-player/dist/controls.css';\nimport React from 'react';\nimport NProgress from 'nprogress';\nimport * as Sentry from '@sentry/node';\nimport App from 'next/app';\nimport Router from 'next/router';\nimport Layout from '../components/layout/Layout';\nimport GlobalStyle from '~/styles';\nimport { AuthModalProvider } from '../contexts/AuthModalContext';\nimport { SearchProvider } from '../contexts/SearchContext';\nimport { ThemeProvider } from 'styled-components';\nimport { UserProvider } from '../contexts/UserContext';\nimport * as gtag from '~/lib/gtag'; // import CssBaseline from '@material-ui/core/CssBaseline'\n\nimport theme from '~/theme'; // import withBasicAuth from '~/basic-auth'\n\nimport \"~/styles/main.scss\";\nimport 'netslider/dist/styles.min.css';\nimport Loading from \"~/components/Loading/Loading\";\nNProgress.configure({\n  showSpinner: false\n});\nlet isPoppingState = false;\nSentry.init({\n  dsn: process.env.SENTRY_DSN,\n  environment: process.env.TENANT + '_' + (\"development\" || 'testing')\n});\n\nclass MyApp extends App {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true\n    };\n  }\n\n  static async getInitialProps({\n    Component,\n    router,\n    ctx\n  }) {\n    let layoutPropsTasks = {},\n        pagePropsTasks = {};\n\n    if (Layout.getInitialProps) {\n      layoutPropsTasks = Layout.getInitialProps(ctx);\n    }\n\n    if (Component.getInitialProps) {\n      pagePropsTasks = Component.getInitialProps(ctx);\n    }\n\n    const [layoutProps, pageProps] = await Promise.all([layoutPropsTasks, pagePropsTasks]);\n    return {\n      layoutProps,\n      pageProps\n    };\n  }\n\n  routeChangeStart(url) {\n    console.log(`Loading ${url}...`);\n    NProgress.start();\n  }\n\n  routeChangeComplete(url) {\n    console.log(`Loaded ${url}!`);\n    NProgress.done();\n\n    if (isPoppingState) {\n      isPoppingState = false;\n    } else {\n      window.scrollTo(0, 0);\n    }\n\n    gtag.pageview(url);\n  }\n\n  routeChangeError() {\n    NProgress.done();\n  }\n\n  componentDidMount() {\n    // Remove the server-side injected CSS.\n    const jssStyles = document.querySelector('#jss-server-side');\n\n    if (jssStyles) {\n      jssStyles.parentElement.removeChild(jssStyles);\n    }\n\n    Router.events.on('routeChangeStart', this.routeChangeStart);\n    Router.beforePopState(({\n      url,\n      as,\n      options\n    }) => {\n      isPoppingState = true;\n      return true;\n    });\n    Router.events.on('routeChangeComplete', this.routeChangeComplete);\n    Router.events.on('routeChangeError', this.routeChangeError);\n    this.setState({\n      loading: false\n    });\n  }\n\n  componentWillUnmount() {\n    Router.events.off('routeChangeStart', this.routeChangeStart);\n    Router.events.off('routeChangeComplete', this.routeChangeComplete);\n    Router.events.off('routeChangeError', this.routeChangeError);\n  }\n\n  componentDidCatch(error, errorInfo) {\n    Sentry.withScope(scope => {\n      Object.keys(errorInfo).forEach(key => {\n        scope.setExtra(key, errorInfo[key]);\n      });\n      Sentry.captureException(error);\n    });\n    super.componentDidCatch(error, errorInfo);\n  }\n\n  render() {\n    const {\n      Component,\n      layoutProps,\n      pageProps\n    } = this.props;\n    return __jsx(ThemeProvider, {\n      theme: theme\n    }, __jsx(GlobalStyle, null), __jsx(UserProvider, null, __jsx(AuthModalProvider, null, __jsx(SearchProvider, null, this.state.loading && __jsx(Loading, {\n      loadingState: this.state.loading\n    }), __jsx(Component, _extends({\n      layoutProps: layoutProps\n    }, pageProps))))));\n  }\n\n}\n/* Enable pwd page protection while in development */\n// export default withBasicAuth(MyApp)\n\n\nexport default MyApp;","map":{"version":3,"sources":["/Users/rafael/Projects/somosgad/dale/pages/_app.js"],"names":["React","NProgress","Sentry","App","Router","Layout","GlobalStyle","AuthModalProvider","SearchProvider","ThemeProvider","UserProvider","gtag","theme","Loading","configure","showSpinner","isPoppingState","init","dsn","process","env","SENTRY_DSN","environment","TENANT","MyApp","constructor","props","state","loading","getInitialProps","Component","router","ctx","layoutPropsTasks","pagePropsTasks","layoutProps","pageProps","Promise","all","routeChangeStart","url","console","log","start","routeChangeComplete","done","window","scrollTo","pageview","routeChangeError","componentDidMount","jssStyles","document","querySelector","parentElement","removeChild","events","on","beforePopState","as","options","setState","componentWillUnmount","off","componentDidCatch","error","errorInfo","withScope","scope","Object","keys","forEach","key","setExtra","captureException","render"],"mappings":"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","sourcesContent":["/*\n * Loading example found at:\n * https://github.com/zeit/next.js/blob/canary/examples/with-loading/\n */\n\nimport 'nprogress/nprogress.css'\nimport 'react-toastify/dist/ReactToastify.min.css'\nimport 'shaka-player/dist/controls.css'\nimport React from 'react'\nimport NProgress from 'nprogress'\nimport * as Sentry from '@sentry/node'\nimport App from 'next/app'\nimport Router from 'next/router'\nimport Layout from '../components/layout/Layout'\nimport GlobalStyle from '~/styles'\nimport { AuthModalProvider } from '../contexts/AuthModalContext'\nimport { SearchProvider } from '../contexts/SearchContext'\nimport { ThemeProvider } from 'styled-components'\nimport { UserProvider } from '../contexts/UserContext'\nimport * as gtag from '~/lib/gtag'\n\n\n// import CssBaseline from '@material-ui/core/CssBaseline'\nimport theme from '~/theme'\n// import withBasicAuth from '~/basic-auth'\nimport \"~/styles/main.scss\"\nimport 'netslider/dist/styles.min.css';\nimport Loading from \"~/components/Loading/Loading\";\n\nNProgress.configure({ showSpinner: false })\n\nlet isPoppingState = false\n\nSentry.init({\n  dsn: process.env.SENTRY_DSN,\n  environment: process.env.TENANT + '_' + (process.env.NODE_ENV || 'testing'),\n})\n\nclass MyApp extends App {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true\n    };\n  }\n\n\n  static async getInitialProps({ Component, router, ctx }) {\n    let layoutPropsTasks = { }, pagePropsTasks = { }\n\n    if (Layout.getInitialProps) {\n      layoutPropsTasks = Layout.getInitialProps(ctx)\n    }\n\n    if (Component.getInitialProps) {\n      pagePropsTasks = Component.getInitialProps(ctx)\n    }\n\n    const [ layoutProps, pageProps ] = await Promise.all([\n      layoutPropsTasks,\n      pagePropsTasks,\n    ])\n\n    return { layoutProps, pageProps }\n  }\n\n  routeChangeStart(url) {\n    console.log(`Loading ${url}...`)\n    NProgress.start()\n  }\n\n  routeChangeComplete(url) {\n    console.log(`Loaded ${url}!`)\n    NProgress.done()\n    if (isPoppingState) {\n      isPoppingState = false\n    } else {\n      window.scrollTo(0, 0)\n    }\n    gtag.pageview(url)\n  }\n\n  routeChangeError() {\n    NProgress.done()\n  }\n\n  componentDidMount() {\n    // Remove the server-side injected CSS.\n    const jssStyles = document.querySelector('#jss-server-side')\n    if (jssStyles) {\n      jssStyles.parentElement.removeChild(jssStyles)\n    }\n    Router.events.on('routeChangeStart', this.routeChangeStart)\n    Router.beforePopState(({ url, as, options }) => {\n      isPoppingState = true\n      return true\n    })\n    Router.events.on('routeChangeComplete', this.routeChangeComplete)\n    Router.events.on('routeChangeError', this.routeChangeError)\n\n    this.setState({ loading: false });\n  }\n\n  componentWillUnmount() {\n    Router.events.off('routeChangeStart', this.routeChangeStart)\n    Router.events.off('routeChangeComplete', this.routeChangeComplete)\n    Router.events.off('routeChangeError', this.routeChangeError)\n  }\n\n  componentDidCatch(error, errorInfo) {\n    Sentry.withScope((scope) => {\n      Object.keys(errorInfo).forEach((key) => {\n        scope.setExtra(key, errorInfo[key])\n      })\n\n      Sentry.captureException(error)\n    })\n\n    super.componentDidCatch(error, errorInfo)\n  }\n\n  render() {\n    const { Component, layoutProps, pageProps } = this.props\n    return (\n      <ThemeProvider theme={theme}>\n        {/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\n        {/* <CssBaseline /> */}\n        <GlobalStyle />\n        <UserProvider>\n          <AuthModalProvider>\n            <SearchProvider>\n              {this.state.loading && <Loading loadingState={this.state.loading} />}\n              <Component layoutProps={layoutProps} {...pageProps} />\n            </SearchProvider>\n          </AuthModalProvider>\n        </UserProvider>\n      </ThemeProvider>\n    )\n  }\n}\n\n/* Enable pwd page protection while in development */\n// export default withBasicAuth(MyApp)\n\nexport default MyApp\n"]},"metadata":{},"sourceType":"module"}