{"ast":null,"code":"import nookies from 'nookies';\nexport var ACCESS_TOKEN_KEY = 'access_token';\nexport var getAccessToken = function getAccessToken(ctx) {\n  var cookies = nookies.get(ctx, ACCESS_TOKEN_KEY);\n  return cookies[ACCESS_TOKEN_KEY];\n};\nexport var setAccessToken = function setAccessToken(accessToken) {\n  nookies.set({}, ACCESS_TOKEN_KEY, accessToken, {\n    path: '/'\n  });\n};\nexport var removeAccessToken = function removeAccessToken(ctx) {\n  nookies.destroy(ctx, ACCESS_TOKEN_KEY, {\n    path: '/'\n  });\n};\nexport var frontendLogout = function frontendLogout(signOut) {\n  signOut();\n};\nexport var backendLogout = function backendLogout(ctx) {\n  removeAccessToken(ctx);\n  nookies.destroy(ctx, 'user', {\n    path: '/'\n  });\n  ctx.res.redirect('/login');\n  ctx.res.end();\n}; // export const isAuthenticated = _ => getAccessToken() !== null\n\n/* export const login = accessToken => {\n  setAccessToken(accessToken)\n} */","map":{"version":3,"sources":["/Users/rafael/Projects/somosgad/dale/services/auth.js"],"names":["nookies","ACCESS_TOKEN_KEY","getAccessToken","ctx","cookies","get","setAccessToken","accessToken","set","path","removeAccessToken","destroy","frontendLogout","signOut","backendLogout","res","redirect","end"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,SAApB;AAEA,OAAO,IAAMC,gBAAgB,GAAG,cAAzB;AAEP,OAAO,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAAAC,GAAG,EAAI;AACnC,MAAMC,OAAO,GAAGJ,OAAO,CAACK,GAAR,CAAYF,GAAZ,EAAiBF,gBAAjB,CAAhB;AACA,SAAOG,OAAO,CAACH,gBAAD,CAAd;AACD,CAHM;AAKP,OAAO,IAAMK,cAAc,GAAG,SAAjBA,cAAiB,CAAAC,WAAW,EAAI;AAC3CP,EAAAA,OAAO,CAACQ,GAAR,CAAY,EAAZ,EAAgBP,gBAAhB,EAAkCM,WAAlC,EAA+C;AAAEE,IAAAA,IAAI,EAAE;AAAR,GAA/C;AACD,CAFM;AAIP,OAAO,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAP,GAAG,EAAI;AACtCH,EAAAA,OAAO,CAACW,OAAR,CAAgBR,GAAhB,EAAqBF,gBAArB,EAAuC;AAAEQ,IAAAA,IAAI,EAAE;AAAR,GAAvC;AACD,CAFM;AAIP,OAAO,IAAMG,cAAc,GAAG,SAAjBA,cAAiB,CAAAC,OAAO,EAAI;AACvCA,EAAAA,OAAO;AACR,CAFM;AAIP,OAAO,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAAAX,GAAG,EAAI;AAClCO,EAAAA,iBAAiB,CAACP,GAAD,CAAjB;AACAH,EAAAA,OAAO,CAACW,OAAR,CAAgBR,GAAhB,EAAqB,MAArB,EAA6B;AAAEM,IAAAA,IAAI,EAAE;AAAR,GAA7B;AACAN,EAAAA,GAAG,CAACY,GAAJ,CAAQC,QAAR,CAAiB,QAAjB;AACAb,EAAAA,GAAG,CAACY,GAAJ,CAAQE,GAAR;AACD,CALM,C,CAOP;;AAEA","sourcesContent":["import nookies from 'nookies'\n\nexport const ACCESS_TOKEN_KEY = 'access_token'\n\nexport const getAccessToken = ctx => {\n  const cookies = nookies.get(ctx, ACCESS_TOKEN_KEY)\n  return cookies[ACCESS_TOKEN_KEY]\n}\n\nexport const setAccessToken = accessToken => {\n  nookies.set({}, ACCESS_TOKEN_KEY, accessToken, { path: '/' })\n}\n\nexport const removeAccessToken = ctx => {\n  nookies.destroy(ctx, ACCESS_TOKEN_KEY, { path: '/' })\n}\n\nexport const frontendLogout = signOut => {\n  signOut()\n}\n\nexport const backendLogout = ctx => {\n  removeAccessToken(ctx)\n  nookies.destroy(ctx, 'user', { path: '/' })\n  ctx.res.redirect('/login')\n  ctx.res.end()\n}\n\n// export const isAuthenticated = _ => getAccessToken() !== null\n\n/* export const login = accessToken => {\n  setAccessToken(accessToken)\n} */\n"]},"metadata":{},"sourceType":"module"}