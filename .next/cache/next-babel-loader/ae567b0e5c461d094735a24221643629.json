{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/esm/slicedToArray\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/esm/asyncToGenerator\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/esm/extends\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/esm/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/esm/createClass\"));\n\nvar _get2 = _interopRequireDefault(require(\"@babel/runtime/helpers/esm/get\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/esm/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/esm/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/esm/getPrototypeOf\"));\n\nrequire(\"nprogress/nprogress.css\");\n\nrequire(\"react-toastify/dist/ReactToastify.min.css\");\n\nrequire(\"shaka-player/dist/controls.css\");\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _nprogress2 = _interopRequireDefault(require(\"nprogress\"));\n\nvar Sentry = _interopRequireWildcard(require(\"@sentry/node\"));\n\nvar _app = _interopRequireDefault(require(\"next/app\"));\n\nvar _router = _interopRequireDefault(require(\"next/router\"));\n\nvar _Layout = _interopRequireDefault(require(\"../components/layout/Layout\"));\n\nvar _styles = _interopRequireDefault(require(\"~/styles\"));\n\nvar _AuthModalContext = require(\"../contexts/AuthModalContext\");\n\nvar _SearchContext = require(\"../contexts/SearchContext\");\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _UserContext = require(\"../contexts/UserContext\");\n\nvar gtag = _interopRequireWildcard(require(\"~/lib/gtag\"));\n\nvar _theme = _interopRequireDefault(require(\"~/theme\"));\n\nrequire(\"~/styles/main.scss\");\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n_nprogress2[\"default\"].configure({\n  showSpinner: false\n});\n\nvar isPoppingState = false;\nSentry.init({\n  dsn: process.env.SENTRY_DSN,\n  environment: process.env.TENANT + '_' + (\"development\" || 'testing')\n});\n\nvar MyApp = /*#__PURE__*/function (_App) {\n  (0, _inherits2[\"default\"])(MyApp, _App);\n\n  var _super = _createSuper(MyApp);\n\n  function MyApp() {\n    (0, _classCallCheck2[\"default\"])(this, MyApp);\n    return _super.apply(this, arguments);\n  }\n\n  (0, _createClass2[\"default\"])(MyApp, [{\n    key: \"routeChangeStart\",\n    value: function routeChangeStart(url) {\n      console.log(\"Loading \".concat(url, \"...\"));\n\n      _nprogress2[\"default\"].start();\n    }\n  }, {\n    key: \"routeChangeComplete\",\n    value: function routeChangeComplete(url) {\n      console.log(\"Loaded \".concat(url, \"!\"));\n\n      _nprogress2[\"default\"].done();\n\n      if (isPoppingState) {\n        isPoppingState = false;\n      } else {\n        window.scrollTo(0, 0);\n      }\n\n      gtag.pageview(url);\n    }\n  }, {\n    key: \"routeChangeError\",\n    value: function routeChangeError() {\n      _nprogress2[\"default\"].done();\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // Remove the server-side injected CSS.\n      var jssStyles = document.querySelector('#jss-server-side');\n\n      if (jssStyles) {\n        jssStyles.parentElement.removeChild(jssStyles);\n      }\n\n      _router[\"default\"].events.on('routeChangeStart', this.routeChangeStart);\n\n      _router[\"default\"].beforePopState(function (_ref) {\n        var url = _ref.url,\n            as = _ref.as,\n            options = _ref.options;\n        isPoppingState = true;\n        return true;\n      });\n\n      _router[\"default\"].events.on('routeChangeComplete', this.routeChangeComplete);\n\n      _router[\"default\"].events.on('routeChangeError', this.routeChangeError);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      _router[\"default\"].events.off('routeChangeStart', this.routeChangeStart);\n\n      _router[\"default\"].events.off('routeChangeComplete', this.routeChangeComplete);\n\n      _router[\"default\"].events.off('routeChangeError', this.routeChangeError);\n    }\n  }, {\n    key: \"componentDidCatch\",\n    value: function componentDidCatch(error, errorInfo) {\n      Sentry.withScope(function (scope) {\n        Object.keys(errorInfo).forEach(function (key) {\n          scope.setExtra(key, errorInfo[key]);\n        });\n        Sentry.captureException(error);\n      });\n      (0, _get2[\"default\"])((0, _getPrototypeOf2[\"default\"])(MyApp.prototype), \"componentDidCatch\", this).call(this, error, errorInfo);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          Component = _this$props.Component,\n          layoutProps = _this$props.layoutProps,\n          pageProps = _this$props.pageProps;\n      return __jsx(_styledComponents.ThemeProvider, {\n        theme: _theme[\"default\"]\n      }, __jsx(_styles[\"default\"], null), __jsx(_UserContext.UserProvider, null, __jsx(_AuthModalContext.AuthModalProvider, null, __jsx(_SearchContext.SearchProvider, null, __jsx(Component, (0, _extends2[\"default\"])({\n        layoutProps: layoutProps\n      }, pageProps))))));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(_ref2) {\n        var Component, router, ctx, layoutPropsTasks, pagePropsTasks, _yield$Promise$all, _yield$Promise$all2, layoutProps, pageProps;\n\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                Component = _ref2.Component, router = _ref2.router, ctx = _ref2.ctx;\n                layoutPropsTasks = {}, pagePropsTasks = {};\n\n                if (_Layout[\"default\"].getInitialProps) {\n                  layoutPropsTasks = _Layout[\"default\"].getInitialProps(ctx);\n                }\n\n                if (Component.getInitialProps) {\n                  pagePropsTasks = Component.getInitialProps(ctx);\n                }\n\n                _context.next = 6;\n                return Promise.all([layoutPropsTasks, pagePropsTasks]);\n\n              case 6:\n                _yield$Promise$all = _context.sent;\n                _yield$Promise$all2 = (0, _slicedToArray2[\"default\"])(_yield$Promise$all, 2);\n                layoutProps = _yield$Promise$all2[0];\n                pageProps = _yield$Promise$all2[1];\n                return _context.abrupt(\"return\", {\n                  layoutProps: layoutProps,\n                  pageProps: pageProps\n                });\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n  return MyApp;\n}(_app[\"default\"]);\n/* Enable pwd page protection while in development */\n// export default withBasicAuth(MyApp)\n\n\nvar _default = MyApp;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/rafael/Projects/somosgad/dale/pages/_app.js"],"names":["NProgress","configure","showSpinner","isPoppingState","Sentry","init","dsn","process","env","SENTRY_DSN","environment","TENANT","MyApp","url","console","log","start","done","window","scrollTo","gtag","pageview","jssStyles","document","querySelector","parentElement","removeChild","Router","events","on","routeChangeStart","beforePopState","as","options","routeChangeComplete","routeChangeError","off","error","errorInfo","withScope","scope","Object","keys","forEach","key","setExtra","captureException","props","Component","layoutProps","pageProps","theme","router","ctx","layoutPropsTasks","pagePropsTasks","Layout","getInitialProps","Promise","all","App"],"mappings":"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","sourcesContent":["/*\n * Loading example found at:\n * https://github.com/zeit/next.js/blob/canary/examples/with-loading/\n */\n\nimport 'nprogress/nprogress.css'\nimport 'react-toastify/dist/ReactToastify.min.css'\nimport 'shaka-player/dist/controls.css'\nimport React from 'react'\nimport NProgress from 'nprogress'\nimport * as Sentry from '@sentry/node'\nimport App from 'next/app'\nimport Router from 'next/router'\nimport Layout from '../components/layout/Layout'\nimport GlobalStyle from '~/styles'\nimport { AuthModalProvider } from '../contexts/AuthModalContext'\nimport { SearchProvider } from '../contexts/SearchContext'\nimport { ThemeProvider } from 'styled-components'\nimport { UserProvider } from '../contexts/UserContext'\nimport * as gtag from '~/lib/gtag'\n\n\n// import CssBaseline from '@material-ui/core/CssBaseline'\nimport theme from '~/theme'\n// import withBasicAuth from '~/basic-auth'\nimport \"~/styles/main.scss\"\n\nNProgress.configure({ showSpinner: false })\n\nlet isPoppingState = false\n\nSentry.init({\n  dsn: process.env.SENTRY_DSN,\n  environment: process.env.TENANT + '_' + (process.env.NODE_ENV || 'testing'),\n})\n\nclass MyApp extends App {\n\n  static async getInitialProps({ Component, router, ctx }) {\n    let layoutPropsTasks = { }, pagePropsTasks = { }\n\n    if (Layout.getInitialProps) {\n      layoutPropsTasks = Layout.getInitialProps(ctx)\n    }\n\n    if (Component.getInitialProps) {\n      pagePropsTasks = Component.getInitialProps(ctx)\n    }\n\n    const [ layoutProps, pageProps ] = await Promise.all([\n      layoutPropsTasks,\n      pagePropsTasks,\n    ])\n\n    return { layoutProps, pageProps }\n  }\n\n  routeChangeStart(url) {\n    console.log(`Loading ${url}...`)\n    NProgress.start()\n  }\n\n  routeChangeComplete(url) {\n    console.log(`Loaded ${url}!`)\n    NProgress.done()\n    if (isPoppingState) {\n      isPoppingState = false\n    } else {\n      window.scrollTo(0, 0)\n    }\n    gtag.pageview(url)\n  }\n\n  routeChangeError() {\n    NProgress.done()\n  }\n\n  componentDidMount() {\n    // Remove the server-side injected CSS.\n    const jssStyles = document.querySelector('#jss-server-side')\n    if (jssStyles) {\n      jssStyles.parentElement.removeChild(jssStyles)\n    }\n    Router.events.on('routeChangeStart', this.routeChangeStart)\n    Router.beforePopState(({ url, as, options }) => {\n      isPoppingState = true\n      return true\n    })\n    Router.events.on('routeChangeComplete', this.routeChangeComplete)\n    Router.events.on('routeChangeError', this.routeChangeError)\n  }\n\n  componentWillUnmount() {\n    Router.events.off('routeChangeStart', this.routeChangeStart)\n    Router.events.off('routeChangeComplete', this.routeChangeComplete)\n    Router.events.off('routeChangeError', this.routeChangeError)\n  }\n\n  componentDidCatch(error, errorInfo) {\n    Sentry.withScope((scope) => {\n      Object.keys(errorInfo).forEach((key) => {\n        scope.setExtra(key, errorInfo[key])\n      })\n\n      Sentry.captureException(error)\n    })\n\n    super.componentDidCatch(error, errorInfo)\n  }\n\n  render() {\n    const { Component, layoutProps, pageProps } = this.props\n    return (\n      <ThemeProvider theme={theme}>\n        {/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\n        {/* <CssBaseline /> */}\n        <GlobalStyle />\n        <UserProvider>\n          <AuthModalProvider>\n            <SearchProvider>\n              <Component layoutProps={layoutProps} {...pageProps} />\n            </SearchProvider>\n          </AuthModalProvider>\n        </UserProvider>\n      </ThemeProvider>\n    )\n  }\n}\n\n/* Enable pwd page protection while in development */\n// export default withBasicAuth(MyApp)\n\nexport default MyApp\n"]},"metadata":{},"sourceType":"script"}