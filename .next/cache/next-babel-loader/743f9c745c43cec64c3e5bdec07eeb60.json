{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"nprogress/nprogress.css\");\n\nrequire(\"react-toastify/dist/ReactToastify.min.css\");\n\nrequire(\"shaka-player/dist/controls.css\");\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _nprogress2 = _interopRequireDefault(require(\"nprogress\"));\n\nvar Sentry = _interopRequireWildcard(require(\"@sentry/node\"));\n\nvar _app = _interopRequireDefault(require(\"next/app\"));\n\nvar _router = _interopRequireDefault(require(\"next/router\"));\n\nvar _Layout = _interopRequireDefault(require(\"../components/layout/Layout\"));\n\nvar _styles = _interopRequireDefault(require(\"~/styles\"));\n\nvar _AuthModalContext = require(\"../contexts/AuthModalContext\");\n\nvar _SearchContext = require(\"../contexts/SearchContext\");\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _UserContext = require(\"../contexts/UserContext\");\n\nvar gtag = _interopRequireWildcard(require(\"~/lib/gtag\"));\n\nvar _theme = _interopRequireDefault(require(\"~/theme\"));\n\nrequire(\"~/styles/main.scss\");\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n_nprogress2.default.configure({\n  showSpinner: false\n});\n\nlet isPoppingState = false;\nSentry.init({\n  dsn: process.env.SENTRY_DSN,\n  environment: process.env.TENANT + '_' + (\"development\" || 'testing')\n});\n\nclass MyApp extends _app.default {\n  static async getInitialProps({\n    Component,\n    router,\n    ctx\n  }) {\n    let layoutPropsTasks = {},\n        pagePropsTasks = {};\n\n    if (_Layout.default.getInitialProps) {\n      layoutPropsTasks = _Layout.default.getInitialProps(ctx);\n    }\n\n    if (Component.getInitialProps) {\n      pagePropsTasks = Component.getInitialProps(ctx);\n    }\n\n    const [layoutProps, pageProps] = await Promise.all([layoutPropsTasks, pagePropsTasks]);\n    return {\n      layoutProps,\n      pageProps\n    };\n  }\n\n  routeChangeStart(url) {\n    console.log(`Loading ${url}...`);\n\n    _nprogress2.default.start();\n  }\n\n  routeChangeComplete(url) {\n    console.log(`Loaded ${url}!`);\n\n    _nprogress2.default.done();\n\n    if (isPoppingState) {\n      isPoppingState = false;\n    } else {\n      window.scrollTo(0, 0);\n    }\n\n    gtag.pageview(url);\n  }\n\n  routeChangeError() {\n    _nprogress2.default.done();\n  }\n\n  componentDidMount() {\n    // Remove the server-side injected CSS.\n    const jssStyles = document.querySelector('#jss-server-side');\n\n    if (jssStyles) {\n      jssStyles.parentElement.removeChild(jssStyles);\n    }\n\n    _router.default.events.on('routeChangeStart', this.routeChangeStart);\n\n    _router.default.beforePopState(({\n      url,\n      as,\n      options\n    }) => {\n      isPoppingState = true;\n      return true;\n    });\n\n    _router.default.events.on('routeChangeComplete', this.routeChangeComplete);\n\n    _router.default.events.on('routeChangeError', this.routeChangeError);\n  }\n\n  componentWillUnmount() {\n    _router.default.events.off('routeChangeStart', this.routeChangeStart);\n\n    _router.default.events.off('routeChangeComplete', this.routeChangeComplete);\n\n    _router.default.events.off('routeChangeError', this.routeChangeError);\n  }\n\n  componentDidCatch(error, errorInfo) {\n    Sentry.withScope(scope => {\n      Object.keys(errorInfo).forEach(key => {\n        scope.setExtra(key, errorInfo[key]);\n      });\n      Sentry.captureException(error);\n    });\n    super.componentDidCatch(error, errorInfo);\n  }\n\n  render() {\n    const {\n      Component,\n      layoutProps,\n      pageProps\n    } = this.props;\n    return __jsx(_styledComponents.ThemeProvider, {\n      theme: _theme.default\n    }, __jsx(_styles.default, null), __jsx(_UserContext.UserProvider, null, __jsx(_AuthModalContext.AuthModalProvider, null, __jsx(_SearchContext.SearchProvider, null, __jsx(Component, _extends({\n      layoutProps: layoutProps\n    }, pageProps))))));\n  }\n\n}\n/* Enable pwd page protection while in development */\n// export default withBasicAuth(MyApp)\n\n\nvar _default = MyApp;\nexports.default = _default;","map":{"version":3,"sources":["/Users/rafael/Projects/somosgad/dale/pages/_app.js"],"names":["NProgress","configure","showSpinner","isPoppingState","Sentry","init","dsn","process","env","SENTRY_DSN","environment","TENANT","MyApp","App","getInitialProps","Component","router","ctx","layoutPropsTasks","pagePropsTasks","Layout","layoutProps","pageProps","Promise","all","routeChangeStart","url","console","log","start","routeChangeComplete","done","window","scrollTo","gtag","pageview","routeChangeError","componentDidMount","jssStyles","document","querySelector","parentElement","removeChild","Router","events","on","beforePopState","as","options","componentWillUnmount","off","componentDidCatch","error","errorInfo","withScope","scope","Object","keys","forEach","key","setExtra","captureException","render","props","theme"],"mappings":"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","sourcesContent":["/*\n * Loading example found at:\n * https://github.com/zeit/next.js/blob/canary/examples/with-loading/\n */\n\nimport 'nprogress/nprogress.css'\nimport 'react-toastify/dist/ReactToastify.min.css'\nimport 'shaka-player/dist/controls.css'\nimport React from 'react'\nimport NProgress from 'nprogress'\nimport * as Sentry from '@sentry/node'\nimport App from 'next/app'\nimport Router from 'next/router'\nimport Layout from '../components/layout/Layout'\nimport GlobalStyle from '~/styles'\nimport { AuthModalProvider } from '../contexts/AuthModalContext'\nimport { SearchProvider } from '../contexts/SearchContext'\nimport { ThemeProvider } from 'styled-components'\nimport { UserProvider } from '../contexts/UserContext'\nimport * as gtag from '~/lib/gtag'\n\n\n// import CssBaseline from '@material-ui/core/CssBaseline'\nimport theme from '~/theme'\n// import withBasicAuth from '~/basic-auth'\nimport \"~/styles/main.scss\"\n\nNProgress.configure({ showSpinner: false })\n\nlet isPoppingState = false\n\nSentry.init({\n  dsn: process.env.SENTRY_DSN,\n  environment: process.env.TENANT + '_' + (process.env.NODE_ENV || 'testing'),\n})\n\nclass MyApp extends App {\n\n  static async getInitialProps({ Component, router, ctx }) {\n    let layoutPropsTasks = { }, pagePropsTasks = { }\n\n    if (Layout.getInitialProps) {\n      layoutPropsTasks = Layout.getInitialProps(ctx)\n    }\n\n    if (Component.getInitialProps) {\n      pagePropsTasks = Component.getInitialProps(ctx)\n    }\n\n    const [ layoutProps, pageProps ] = await Promise.all([\n      layoutPropsTasks,\n      pagePropsTasks,\n    ])\n\n    return { layoutProps, pageProps }\n  }\n\n  routeChangeStart(url) {\n    console.log(`Loading ${url}...`)\n    NProgress.start()\n  }\n\n  routeChangeComplete(url) {\n    console.log(`Loaded ${url}!`)\n    NProgress.done()\n    if (isPoppingState) {\n      isPoppingState = false\n    } else {\n      window.scrollTo(0, 0)\n    }\n    gtag.pageview(url)\n  }\n\n  routeChangeError() {\n    NProgress.done()\n  }\n\n  componentDidMount() {\n    // Remove the server-side injected CSS.\n    const jssStyles = document.querySelector('#jss-server-side')\n    if (jssStyles) {\n      jssStyles.parentElement.removeChild(jssStyles)\n    }\n    Router.events.on('routeChangeStart', this.routeChangeStart)\n    Router.beforePopState(({ url, as, options }) => {\n      isPoppingState = true\n      return true\n    })\n    Router.events.on('routeChangeComplete', this.routeChangeComplete)\n    Router.events.on('routeChangeError', this.routeChangeError)\n  }\n\n  componentWillUnmount() {\n    Router.events.off('routeChangeStart', this.routeChangeStart)\n    Router.events.off('routeChangeComplete', this.routeChangeComplete)\n    Router.events.off('routeChangeError', this.routeChangeError)\n  }\n\n  componentDidCatch(error, errorInfo) {\n    Sentry.withScope((scope) => {\n      Object.keys(errorInfo).forEach((key) => {\n        scope.setExtra(key, errorInfo[key])\n      })\n\n      Sentry.captureException(error)\n    })\n\n    super.componentDidCatch(error, errorInfo)\n  }\n\n  render() {\n    const { Component, layoutProps, pageProps } = this.props\n    return (\n      <ThemeProvider theme={theme}>\n        {/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\n        {/* <CssBaseline /> */}\n        <GlobalStyle />\n        <UserProvider>\n          <AuthModalProvider>\n            <SearchProvider>\n              <Component layoutProps={layoutProps} {...pageProps} />\n            </SearchProvider>\n          </AuthModalProvider>\n        </UserProvider>\n      </ThemeProvider>\n    )\n  }\n}\n\n/* Enable pwd page protection while in development */\n// export default withBasicAuth(MyApp)\n\nexport default MyApp\n"]},"metadata":{},"sourceType":"script"}