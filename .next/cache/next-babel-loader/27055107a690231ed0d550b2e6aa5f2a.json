{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport FormGroup from '~/components/layout/AuthModal/FormGroup';\nimport Label from '~/components/Form/Label';\nimport Input from '~/components/layout/AuthModal/Input';\nimport React, { useContext, useEffect, useState } from 'react';\nimport withAuth from '~/components/withAuth';\nimport { IS_PRODUCTION } from \"~/constants/constants\";\nimport UserContext from \"~/contexts/UserContext\";\nimport Select from \"~/components/Select/Select\";\nimport Loading from \"~/components/Loading/Loading\";\nimport Button from \"~/components/button\";\nimport InvalidFeedback from \"~/components/Form/InvalidFeedback\";\nimport { GoSearch } from 'react-icons/go';\nimport Color from 'color';\nimport { ThemeContext } from 'styled-components';\nimport Flatpickr from \"react-flatpickr\";\nimport { CONFIG } from \"~/config\";\nimport NameProject from \"~/components/NameProject\";\nimport { es } from \"flatpickr/dist/l10n/es.js\";\n\nconst UserDataForm = ({\n  api,\n  layoutProps,\n  handleSubmit,\n  formData,\n  setFormData\n}) => {\n  const theme = useContext(ThemeContext);\n  const primaryColor = Color(theme.colors.primary).hsl().string();\n  const requireds = IS_PRODUCTION;\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: date,\n    1: setDate\n  } = useState({\n    birthdate: null\n  });\n  let minDate = new Date().getFullYear() - 18;\n  const {\n    0: initialDate,\n    1: setinitialDate\n  } = useState(`${minDate}-12-31`);\n  const {\n    0: values,\n    1: setValues\n  } = useState({\n    name: \"\",\n    gender_id: \"\",\n    document: \"\",\n    nickname: \"\",\n    birthdate: \"\",\n    registration: \"\",\n    isPartner: \"\",\n    birth_of_date: \"\",\n    abonado: \"\"\n  });\n  const {\n    user\n  } = useContext(UserContext);\n  const {\n    0: genders,\n    1: setGenders\n  } = useState();\n  const {\n    0: discounts,\n    1: setDiscounts\n  } = useState(false);\n  const {\n    0: blockDiscountFields,\n    1: setBlockDiscountFields\n  } = useState(false);\n  const {\n    0: error,\n    1: setError\n  } = useState();\n  /* get genders */\n\n  useEffect(_ => {\n    (async _ => {\n      const {\n        data\n      } = await api.get(\"genders\");\n      setGenders(data);\n    })();\n  }, []);\n  useEffect(() => {\n    if (user) {\n      setDate(_objectSpread(_objectSpread({}, date), {}, {\n        birthdate: new Date()\n      }));\n\n      if (Object.values(formData).length == 0) {\n        setValues(_objectSpread(_objectSpread({}, values), {}, {\n          name: user.name,\n          gender_id: user.gender_id,\n          document: user.document,\n          nickname: user.nickname,\n          birthdate: user.birthdate,\n          registration: user.registration,\n          isPartner: user.is_partner,\n          abonado: null,\n          terms: user.terms,\n          messageismiembro: \"\",\n          abonado_select: null\n        }));\n      } else {\n        setValues(_objectSpread(_objectSpread({}, formData), {}, {\n          name: formData.name,\n          gender_id: formData.gender_id,\n          document: formData.document,\n          nickname: formData.nickname,\n          birthdate: formData.birthdate,\n          registration: formData.registration,\n          isPartner: formData.is_partner,\n          abonado: null,\n          terms: formData.terms,\n          messageismiembro: \"\",\n          abonado_select: null\n        }));\n      } // setValues({\n      //   ...values,\n      // name: user.name,\n      // gender_id: user.gender_id,\n      // document: user.document,\n      // nickname: user.nickname,\n      // birthdate: user.birthdate,\n      // registration: user.registration,\n      // isPartner: user.is_partner,\n      // abonado: null,\n      // terms: user.terms,\n      // messageismiembro: \"\",\n      // abonado_select: null\n      // });\n\n    }\n  }, [user]);\n  /* fill user form */\n  // useEffect(\n  //   _ => {\n  //     if (user) {\n  //       setDate({\n  //         ...date,\n  //         birthdate: new Date()\n  //       });\n  //       setValues({\n  //         ...values,\n  //         name: user.name,\n  //         gender_id: user.gender_id,\n  //         document: user.document,\n  //         nickname: user.nickname,\n  //         birthdate: user.birthdate,\n  //         registration: user.registration,\n  //         isPartner: user.is_partner,\n  //         abonado: null,\n  //         terms: user.terms,\n  //         messageismiembro: \"\",\n  //         abonado_select: null\n  //       });\n  //     }\n  //   },\n  //   [user]\n  // );\n  // console.log(`\\n\\nuser -- ${JSON.stringify(user)}\\n\\n`);\n\n  useEffect(() => {\n    if (Object.values(formData).filter(x => x != null).length > 0) {\n      console.log(`\\n\\n\\nAqui o formData -- ${JSON.stringify(formData)}\\n\\n\\n`);\n\n      for (let key in formData) {\n        if (values.hasOwnProperty(key) && values[key] != null) {\n          values[key] = formData[key];\n        }\n      }\n    }\n  }, [values]);\n\n  const handleInputChange = e => {\n    const {\n      checked,\n      name,\n      value,\n      type\n    } = e.target;\n    setValues(_objectSpread(_objectSpread({}, values), {}, {\n      [name]: type === \"checkbox\" ? checked ? value === \"true\" ? true : value : false : value\n    }));\n    setFormData(_objectSpread(_objectSpread({}, values), {}, {\n      [name]: type === \"checkbox\" ? checked ? value === \"true\" ? true : value : false : value\n    }));\n  };\n\n  const submit = async e => {\n    e.preventDefault();\n    setLoading(true);\n\n    try {\n      let userData = {\n        name: values.name,\n        gender_id: values.gender_id,\n        document: values.document,\n        email: user.email,\n        nickname: values.nickname,\n        registration: values.registration,\n        birthdate: date.birthdate,\n        is_partner: values.isPartner,\n        abonado: values.terms ? values.abonado_select : null,\n        terms: values.terms,\n        messageismiembro: \"\",\n        abona_select: null\n      };\n\n      if (userData.abonado == \"undefined\" || userData.abonado == null && values.terms == true) {\n        setError({\n          errors: {\n            abonado: \"Código no encontrado\"\n          }\n        });\n        setValues({\n          name: values.name,\n          gender_id: values.gender_id,\n          document: values.document,\n          email: user.email,\n          nickname: values.nickname,\n          registration: values.registration,\n          birthdate: date.birthdate,\n          is_partner: values.isPartner,\n          abonado: \"\",\n          terms: false,\n          messageismiembro: \"\"\n        });\n        setLoading(false);\n      } else {\n        setError();\n        const res = await api.post(`register/complete-user`, userData);\n        setFormData(_objectSpread({}, values));\n        console.log(`\\n\\n\\nAqui o userData -- ${JSON.stringify(userData)}\\n\\n\\n`);\n        handleSubmit(1, userData);\n      }\n    } catch (error) {\n      if (error.response) {\n        const {\n          data,\n          status\n        } = error.response;\n\n        if (status === 422) {\n          setError(data);\n        }\n      } else if (error.request) {\n        setError(error);\n      } else {\n        setError(error);\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const submitCod = async e => {\n    e.preventDefault();\n    setLoading(true);\n\n    try {\n      let params = {\n        abonado: values.abonado\n      };\n      const res = await api.get(`register/search-cod/` + params.abonado);\n\n      if (!res.data.status && values.terms == true) {\n        setError({\n          errors: {\n            abonado: \"Código no encontrado\"\n          }\n        });\n        setValues({\n          name: values.name,\n          gender_id: values.gender_id,\n          document: values.document,\n          email: user.email,\n          nickname: values.nickname,\n          registration: values.registration,\n          birthdate: date.birthdate,\n          is_partner: values.isPartner,\n          abonado: null,\n          terms: false,\n          messageismiembro: \"\"\n        });\n        setLoading(false);\n      } else {\n        setError();\n        setValues({\n          name: values.name,\n          gender_id: values.gender_id,\n          document: values.document,\n          email: user.email,\n          nickname: values.nickname,\n          registration: values.registration,\n          birthdate: date.birthdate,\n          is_partner: values.isPartner,\n          abonado_select: res.data.message,\n          terms: true,\n          messageismiembro: res.data.message\n        });\n        setLoading(false);\n      }\n    } catch (error) {\n      if (error.response) {\n        const {\n          data,\n          status\n        } = error.response;\n\n        if (status === 422) {\n          setError(data);\n        }\n      } else if (error.request) {\n        setError(error);\n      } else {\n        setError(error);\n      }\n    }\n  };\n\n  function appName() {\n    if (CONFIG.projectName) {\n      return __jsx(\"div\", {\n        style: {\n          display: \"inline-block\"\n        }\n      }, __jsx(\"strong\", {\n        className: \"text-primary\"\n      }, CONFIG.projectName.split(\" \")[0]), CONFIG.projectName.split(\" \")[1]);\n    } else if (CONFIG.appName) {\n      return __jsx(\"div\", {\n        style: {\n          display: \"inline-block\"\n        }\n      }, __jsx(\"strong\", {\n        className: \"text-primary\"\n      }, CONFIG.appName.split(\" \")[0]), CONFIG.appName.split(\" \")[1]);\n    }\n\n    return __jsx(\"div\", {\n      style: {\n        display: \"inline-block\"\n      }\n    }, __jsx(\"strong\", {\n      className: \"text-primary\"\n    }, \"Project\"), \"Name!\");\n  }\n\n  return __jsx(\"form\", {\n    method: \"post\",\n    onSubmit: submit,\n    className: _JSXStyle.dynamic([[\"4137018266\", [primaryColor, primaryColor, primaryColor, values.terms ? `display:block` : `display:none!important; `]]])\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"4137018266\", [primaryColor, primaryColor, primaryColor, values.terms ? `display:block` : `display:none!important; `]]]) + \" \" + \"register-confirm container text-center\"\n  }, __jsx(\"h2\", {\n    className: _JSXStyle.dynamic([[\"4137018266\", [primaryColor, primaryColor, primaryColor, values.terms ? `display:block` : `display:none!important; `]]]) + \" \" + \"card-title text-center\"\n  }, __jsx(\"span\", {\n    className: _JSXStyle.dynamic([[\"4137018266\", [primaryColor, primaryColor, primaryColor, values.terms ? `display:block` : `display:none!important; `]]]) + \" \" + \"text-primary\"\n  }, \"\\xA1\"), \"S\\xE9 parte de \", __jsx(NameProject, null), __jsx(\"span\", {\n    className: _JSXStyle.dynamic([[\"4137018266\", [primaryColor, primaryColor, primaryColor, values.terms ? `display:block` : `display:none!important; `]]]) + \" \" + \"text-primary\"\n  }, \"!\")), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"4137018266\", [primaryColor, primaryColor, primaryColor, values.terms ? `display:block` : `display:none!important; `]]]) + \" \" + \"card-subtitle\"\n  }, \"\\xA1Antes de seguir, queremos saber m\\xE1s de ti!\"), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"4137018266\", [primaryColor, primaryColor, primaryColor, values.terms ? `display:block` : `display:none!important; `]]]) + \" \" + \"row\"\n  }, __jsx(\"div\", {\n    style: {\n      padding: 0\n    },\n    className: _JSXStyle.dynamic([[\"4137018266\", [primaryColor, primaryColor, primaryColor, values.terms ? `display:block` : `display:none!important; `]]]) + \" \" + \"col-md-12\"\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"4137018266\", [primaryColor, primaryColor, primaryColor, values.terms ? `display:block` : `display:none!important; `]]]) + \" \" + \"row\"\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"4137018266\", [primaryColor, primaryColor, primaryColor, values.terms ? `display:block` : `display:none!important; `]]]) + \" \" + \"col-md-6\"\n  }, __jsx(FormGroup, null, __jsx(Label, {\n    htmlFor: \"name\"\n  }, \"Nombre completo\"), __jsx(Input, {\n    id: \"name\",\n    name: \"name\",\n    value: formData.name || values.name,\n    onChange: handleInputChange\n  }), __jsx(InvalidFeedback, {\n    error: error,\n    loading: loading,\n    name: \"name\"\n  }))), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"4137018266\", [primaryColor, primaryColor, primaryColor, values.terms ? `display:block` : `display:none!important; `]]]) + \" \" + \"col-md-6\"\n  }, __jsx(FormGroup, null, __jsx(Label, {\n    htmlFor: \"gender_id\"\n  }, \"G\\xE9nero\"), __jsx(Select, {\n    id: \"gender_id\",\n    name: \"gender_id\",\n    required: requireds,\n    onChange: handleInputChange,\n    value: formData.gender_id || values.gender_id\n  }, !genders ? __jsx(\"option\", {\n    disabled: true,\n    value: \"\",\n    className: _JSXStyle.dynamic([[\"4137018266\", [primaryColor, primaryColor, primaryColor, values.terms ? `display:block` : `display:none!important; `]]])\n  }, \"Cargando...\") : genders.length ? __jsx(React.Fragment, null, __jsx(\"option\", {\n    disabled: true,\n    value: \"\",\n    className: _JSXStyle.dynamic([[\"4137018266\", [primaryColor, primaryColor, primaryColor, values.terms ? `display:block` : `display:none!important; `]]])\n  }, \"Selecciona tu g\\xE9nero\"), genders.map((genre, key) => __jsx(\"option\", _extends({\n    key\n  }, {\n    value: genre.id,\n    className: _JSXStyle.dynamic([[\"4137018266\", [primaryColor, primaryColor, primaryColor, values.terms ? `display:block` : `display:none!important; `]]])\n  }), genre.name))) : __jsx(\"option\", {\n    disabled: true,\n    value: \"\",\n    className: _JSXStyle.dynamic([[\"4137018266\", [primaryColor, primaryColor, primaryColor, values.terms ? `display:block` : `display:none!important; `]]])\n  }, \"Incapaz de cargar g\\xE9neros\")), __jsx(InvalidFeedback, {\n    error: error,\n    loading: loading,\n    name: \"gender_id\"\n  }))), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"4137018266\", [primaryColor, primaryColor, primaryColor, values.terms ? `display:block` : `display:none!important; `]]]) + \" \" + \"col-md-6\"\n  }, __jsx(FormGroup, null, __jsx(Label, {\n    htmlFor: \"name\"\n  }, \"Apellidos\"), __jsx(Input, {\n    id: \"nickname\",\n    name: \"nickname\",\n    value: formData.nickname || values.nickname,\n    onChange: handleInputChange\n  }), __jsx(InvalidFeedback, {\n    error: error,\n    loading: loading,\n    name: \"nickname\"\n  }))), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"4137018266\", [primaryColor, primaryColor, primaryColor, values.terms ? `display:block` : `display:none!important; `]]]) + \" \" + \"col-md-6\"\n  }, __jsx(FormGroup, null, __jsx(Label, {\n    htmlFor: \"birth\"\n  }, \"Fecha de nacimiento\"), __jsx(Flatpickr, {\n    id: \"birthdate\",\n    name: \" birthdate\",\n    options: {\n      altInput: \"true\",\n      altFormat: \"d-m-y\",\n      dateFormat: \"Y-m-d\",\n      locale: \"es\",\n      maxDate: initialDate\n    },\n    onChange: birthdate => {\n      setDate({\n        birthdate: birthdate\n      });\n    },\n    value: formData.birth_of_date,\n    className: \"form-control\"\n  }), __jsx(InvalidFeedback, {\n    error: error,\n    loading: loading,\n    name: \"birthdate\"\n  }))), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"4137018266\", [primaryColor, primaryColor, primaryColor, values.terms ? `display:block` : `display:none!important; `]]]) + \" \" + \"col-md-6 \"\n  }, __jsx(FormGroup, null, __jsx(Label, {\n    htmlFor: \"document\"\n  }, \"Documento\"), __jsx(Input, {\n    id: \"document\",\n    name: \"document\",\n    onChange: handleInputChange,\n    required: requireds,\n    type: \"text\",\n    value: formData.document || values.document\n  }), __jsx(InvalidFeedback, {\n    error: error,\n    loading: loading,\n    name: \"document\"\n  }))), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"4137018266\", [primaryColor, primaryColor, primaryColor, values.terms ? `display:block` : `display:none!important; `]]]) + \" \" + \"col-md-6\"\n  }, __jsx(Label, null), __jsx(FormGroup, null, __jsx(\"label\", {\n    className: _JSXStyle.dynamic([[\"4137018266\", [primaryColor, primaryColor, primaryColor, values.terms ? `display:block` : `display:none!important; `]]]) + \" \" + \"terms\"\n  }, __jsx(\"input\", {\n    checked: formData.terms || values.terms,\n    name: \"terms\",\n    onChange: handleInputChange,\n    type: \"checkbox\",\n    value: `true`,\n    className: _JSXStyle.dynamic([[\"4137018266\", [primaryColor, primaryColor, primaryColor, values.terms ? `display:block` : `display:none!important; `]]])\n  }), __jsx(\"span\", {\n    style: {\n      paddingLeft: \"10px\"\n    },\n    className: _JSXStyle.dynamic([[\"4137018266\", [primaryColor, primaryColor, primaryColor, values.terms ? `display:block` : `display:none!important; `]]])\n  }, \"Miembro del Club\")), __jsx(InvalidFeedback, {\n    error: error,\n    loading: loading,\n    name: \"terms\"\n  })), __jsx(InvalidFeedback, {\n    error: error,\n    loading: loading,\n    name: \"abonado\"\n  }), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"4137018266\", [primaryColor, primaryColor, primaryColor, values.terms ? `display:block` : `display:none!important; `]]]) + \" \" + \"is-miembro \"\n  }, __jsx(FormGroup, null, __jsx(Label, {\n    htmlFor: \"document\"\n  }, \"Abonado\", __jsx(\"span\", {\n    className: _JSXStyle.dynamic([[\"4137018266\", [primaryColor, primaryColor, primaryColor, values.terms ? `display:block` : `display:none!important; `]]]) + \" \" + \"miembro-encontrado\"\n  }, \": \", formData.messageismiembro || values.messageismiembro)), __jsx(\"div\", {\n    style: {\n      display: \"flex\",\n      alignItems: \"baseline\",\n      paddingTop: \" 1px\"\n    },\n    className: _JSXStyle.dynamic([[\"4137018266\", [primaryColor, primaryColor, primaryColor, values.terms ? `display:block` : `display:none!important; `]]])\n  }, __jsx(Input, {\n    id: \"abonado\",\n    name: \"abonado\",\n    onChange: handleInputChange,\n    type: \"text\",\n    value: formData.abonado || values.abonado\n  }), __jsx(Button, {\n    style: {},\n    fontSize: \"14px!important\",\n    color: \"secondary\",\n    onClick: submitCod,\n    disabled: loading,\n    loading: loading\n  }, __jsx(\"div\", {\n    style: {\n      padding: \"0px\",\n      fontSize: \"14px!important\",\n      width: \"19px\",\n      height: \"16px\"\n    },\n    className: _JSXStyle.dynamic([[\"4137018266\", [primaryColor, primaryColor, primaryColor, values.terms ? `display:block` : `display:none!important; `]]])\n  }, __jsx(GoSearch, {\n    style: {\n      size: \"10px\",\n      fontSize: \"14px!important\",\n      padding: \"padding: 12px 16px 7px 16px!importan\"\n    },\n    fontSize: 14,\n    padding: 0\n  })))))))), discounts && discounts.map(d => __jsx(FormGroup, {\n    key: d.id\n  }, __jsx(Label, {\n    htmlFor: d.dsc_id\n  }, d.name), __jsx(Input, {\n    disabled: discounts.find(disc => ![\"\", undefined].includes(values[disc.dsc_id]) && disc.id != d.id),\n    id: d.id,\n    maxLength: 5,\n    name: d.dsc_id,\n    onChange: handleDiscountChange,\n    type: \"text\",\n    style: values.discount_id == d.id ? {\n      backgroundColor: \"rgb(206, 249, 206)\"\n    } : {},\n    value: values[d.dsc_id] || \"\",\n    readOnly: blockDiscountFields\n  }), __jsx(\"div\", {\n    style: {\n      float: \"right\",\n      paddingTop: \"10px\"\n    },\n    className: _JSXStyle.dynamic([[\"4137018266\", [primaryColor, primaryColor, primaryColor, values.terms ? `display:block` : `display:none!important; `]]])\n  }, __jsx(Loading, {\n    size: \"20\",\n    color: \"white\",\n    loadingState: values.discount_id == d.id && blockDiscountFields\n  })))), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"4137018266\", [primaryColor, primaryColor, primaryColor, values.terms ? `display:block` : `display:none!important; `]]]) + \" \" + \"text-center\"\n  }, __jsx(Button, {\n    color: \"secondary\",\n    type: \"submit\",\n    disabled: loading,\n    style: {\n      width: \"150px\"\n    },\n    loading: loading\n  }, \"Siguiente\"))))), __jsx(_JSXStyle, {\n    id: \"4137018266\",\n    dynamic: [primaryColor, primaryColor, primaryColor, values.terms ? `display:block` : `display:none!important; `]\n  }, `.text-primary{color:${primaryColor} !important;}strong.text-primary{color:${primaryColor} !important;}h2.card-title{font-weight:normal;color:#000;margin-bottom:1em;font-size:1.7em;}.pes{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}div.card-subtitle{font-size:1.1em;font-weight:500;margin-bottom:2.5em;}.miembro-encontrado{color:green;}.text-primary{color:${primaryColor} !important;}.register-confirm{padding-top:0;padding-bottom:0;color:#666666;}.is-miembro{${values.terms ? `display:block` : `display:none!important; `};}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9yYWZhZWwvUHJvamVjdHMvc29tb3NnYWQvZGFsZS9wYWdlcy9yZWdpc3Rlci93aXphcmQvdXNlci1kYXRhLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQW9tQmdDLEFBR3lELEFBSUEsQUFJM0IsQUFNTixBQUdHLEFBTUosQUFJa0MsQUFHaEMsQUFNakIsWUFaQyxFQU9tQixFQWJELEdBVEwsVUEyQmIsQ0ExQm9CLENBc0JKLENBYk0sYUFjdEIsQ0FoQ0EsQUFJQSxBQXVCQSxFQWpCa0IsSUFTbEIsWUFSQSxVQUdBIiwiZmlsZSI6Ii9Vc2Vycy9yYWZhZWwvUHJvamVjdHMvc29tb3NnYWQvZGFsZS9wYWdlcy9yZWdpc3Rlci93aXphcmQvdXNlci1kYXRhLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEZvcm1Hcm91cCBmcm9tICd+L2NvbXBvbmVudHMvbGF5b3V0L0F1dGhNb2RhbC9Gb3JtR3JvdXAnXG5pbXBvcnQgTGFiZWwgZnJvbSAnfi9jb21wb25lbnRzL0Zvcm0vTGFiZWwnXG5pbXBvcnQgSW5wdXQgZnJvbSAnfi9jb21wb25lbnRzL2xheW91dC9BdXRoTW9kYWwvSW5wdXQnXG5pbXBvcnQgUmVhY3QsIHsgdXNlQ29udGV4dCwgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHdpdGhBdXRoIGZyb20gJ34vY29tcG9uZW50cy93aXRoQXV0aCdcbmltcG9ydCB7IElTX1BST0RVQ1RJT04gfSBmcm9tIFwifi9jb25zdGFudHMvY29uc3RhbnRzXCI7XG5pbXBvcnQgVXNlckNvbnRleHQgZnJvbSBcIn4vY29udGV4dHMvVXNlckNvbnRleHRcIjtcbmltcG9ydCBTZWxlY3QgZnJvbSBcIn4vY29tcG9uZW50cy9TZWxlY3QvU2VsZWN0XCI7XG5pbXBvcnQgTG9hZGluZyBmcm9tIFwifi9jb21wb25lbnRzL0xvYWRpbmcvTG9hZGluZ1wiO1xuaW1wb3J0IEJ1dHRvbiBmcm9tIFwifi9jb21wb25lbnRzL2J1dHRvblwiO1xuaW1wb3J0IEludmFsaWRGZWVkYmFjayBmcm9tIFwifi9jb21wb25lbnRzL0Zvcm0vSW52YWxpZEZlZWRiYWNrXCI7XG5pbXBvcnQgeyBHb1NlYXJjaCB9IGZyb20gJ3JlYWN0LWljb25zL2dvJztcbmltcG9ydCBDb2xvciBmcm9tICdjb2xvcidcbmltcG9ydCB7IFRoZW1lQ29udGV4dCB9IGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJ1xuaW1wb3J0IEZsYXRwaWNrciBmcm9tIFwicmVhY3QtZmxhdHBpY2tyXCI7XG5pbXBvcnQgeyBDT05GSUcgfSBmcm9tIFwifi9jb25maWdcIjtcbmltcG9ydCBOYW1lUHJvamVjdCBmcm9tIFwifi9jb21wb25lbnRzL05hbWVQcm9qZWN0XCI7XG5pbXBvcnQgeyBlcyB9IGZyb20gXCJmbGF0cGlja3IvZGlzdC9sMTBuL2VzLmpzXCJcblxuY29uc3QgVXNlckRhdGFGb3JtID0gKHsgYXBpLCBsYXlvdXRQcm9wcywgaGFuZGxlU3VibWl0LCBmb3JtRGF0YSwgc2V0Rm9ybURhdGEgfSkgPT4ge1xuXG4gIGNvbnN0IHRoZW1lID0gdXNlQ29udGV4dChUaGVtZUNvbnRleHQpO1xuICBjb25zdCBwcmltYXJ5Q29sb3IgPSBDb2xvcih0aGVtZS5jb2xvcnMucHJpbWFyeSlcbiAgICAuaHNsKClcbiAgICAuc3RyaW5nKCk7XG5cbiAgY29uc3QgcmVxdWlyZWRzID0gSVNfUFJPRFVDVElPTjtcblxuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkYXRlLCBzZXREYXRlXSA9IHVzZVN0YXRlKHtcbiAgICBiaXJ0aGRhdGU6IG51bGxcbiAgfSk7XG4gIGxldCBtaW5EYXRlID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpIC0gMTg7XG4gIGNvbnN0IFtpbml0aWFsRGF0ZSwgc2V0aW5pdGlhbERhdGVdID0gdXNlU3RhdGUoYCR7bWluRGF0ZX0tMTItMzFgKTtcblxuICBjb25zdCBbdmFsdWVzLCBzZXRWYWx1ZXNdID0gdXNlU3RhdGUoe1xuICAgIG5hbWU6IFwiXCIsXG4gICAgZ2VuZGVyX2lkOiBcIlwiLFxuICAgIGRvY3VtZW50OiBcIlwiLFxuICAgIG5pY2tuYW1lOiBcIlwiLFxuICAgIGJpcnRoZGF0ZTogXCJcIixcbiAgICByZWdpc3RyYXRpb246IFwiXCIsXG4gICAgaXNQYXJ0bmVyOiBcIlwiLFxuICAgIGJpcnRoX29mX2RhdGU6IFwiXCIsXG4gICAgYWJvbmFkbzogXCJcIlxuICB9KTtcblxuICBjb25zdCB7IHVzZXIgfSA9IHVzZUNvbnRleHQoVXNlckNvbnRleHQpO1xuICBjb25zdCBbZ2VuZGVycywgc2V0R2VuZGVyc10gPSB1c2VTdGF0ZSgpO1xuICBjb25zdCBbZGlzY291bnRzLCBzZXREaXNjb3VudHNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbYmxvY2tEaXNjb3VudEZpZWxkcywgc2V0QmxvY2tEaXNjb3VudEZpZWxkc10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGUoKTtcblxuICAvKiBnZXQgZ2VuZGVycyAqL1xuICB1c2VFZmZlY3QoXyA9PiB7XG4gICAgKGFzeW5jIF8gPT4ge1xuICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBhcGkuZ2V0KFwiZ2VuZGVyc1wiKTtcbiAgICAgIHNldEdlbmRlcnMoZGF0YSk7XG4gICAgfSkoKTtcbiAgfSwgW10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHVzZXIpIHtcbiAgICAgIHNldERhdGUoe1xuICAgICAgICAuLi5kYXRlLFxuICAgICAgICBiaXJ0aGRhdGU6IG5ldyBEYXRlKClcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoT2JqZWN0LnZhbHVlcyhmb3JtRGF0YSkubGVuZ3RoID09IDApIHtcbiAgICAgICAgc2V0VmFsdWVzKHtcbiAgICAgICAgICAuLi52YWx1ZXMsXG4gICAgICAgICAgbmFtZTogdXNlci5uYW1lLFxuICAgICAgICAgIGdlbmRlcl9pZDogdXNlci5nZW5kZXJfaWQsXG4gICAgICAgICAgZG9jdW1lbnQ6IHVzZXIuZG9jdW1lbnQsXG4gICAgICAgICAgbmlja25hbWU6IHVzZXIubmlja25hbWUsXG4gICAgICAgICAgYmlydGhkYXRlOiB1c2VyLmJpcnRoZGF0ZSxcbiAgICAgICAgICByZWdpc3RyYXRpb246IHVzZXIucmVnaXN0cmF0aW9uLFxuICAgICAgICAgIGlzUGFydG5lcjogdXNlci5pc19wYXJ0bmVyLFxuICAgICAgICAgIGFib25hZG86IG51bGwsXG4gICAgICAgICAgdGVybXM6IHVzZXIudGVybXMsXG4gICAgICAgICAgbWVzc2FnZWlzbWllbWJybzogXCJcIixcbiAgICAgICAgICBhYm9uYWRvX3NlbGVjdDogbnVsbFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldFZhbHVlcyh7XG4gICAgICAgICAgLi4uZm9ybURhdGEsXG4gICAgICAgICAgbmFtZTogZm9ybURhdGEubmFtZSxcbiAgICAgICAgICBnZW5kZXJfaWQ6IGZvcm1EYXRhLmdlbmRlcl9pZCxcbiAgICAgICAgICBkb2N1bWVudDogZm9ybURhdGEuZG9jdW1lbnQsXG4gICAgICAgICAgbmlja25hbWU6IGZvcm1EYXRhLm5pY2tuYW1lLFxuICAgICAgICAgIGJpcnRoZGF0ZTogZm9ybURhdGEuYmlydGhkYXRlLFxuICAgICAgICAgIHJlZ2lzdHJhdGlvbjogZm9ybURhdGEucmVnaXN0cmF0aW9uLFxuICAgICAgICAgIGlzUGFydG5lcjogZm9ybURhdGEuaXNfcGFydG5lcixcbiAgICAgICAgICBhYm9uYWRvOiBudWxsLFxuICAgICAgICAgIHRlcm1zOiBmb3JtRGF0YS50ZXJtcyxcbiAgICAgICAgICBtZXNzYWdlaXNtaWVtYnJvOiBcIlwiLFxuICAgICAgICAgIGFib25hZG9fc2VsZWN0OiBudWxsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgLy8gc2V0VmFsdWVzKHtcbiAgICAgIC8vICAgLi4udmFsdWVzLFxuICAgICAgLy8gbmFtZTogdXNlci5uYW1lLFxuICAgICAgLy8gZ2VuZGVyX2lkOiB1c2VyLmdlbmRlcl9pZCxcbiAgICAgIC8vIGRvY3VtZW50OiB1c2VyLmRvY3VtZW50LFxuICAgICAgLy8gbmlja25hbWU6IHVzZXIubmlja25hbWUsXG4gICAgICAvLyBiaXJ0aGRhdGU6IHVzZXIuYmlydGhkYXRlLFxuICAgICAgLy8gcmVnaXN0cmF0aW9uOiB1c2VyLnJlZ2lzdHJhdGlvbixcbiAgICAgIC8vIGlzUGFydG5lcjogdXNlci5pc19wYXJ0bmVyLFxuICAgICAgLy8gYWJvbmFkbzogbnVsbCxcbiAgICAgIC8vIHRlcm1zOiB1c2VyLnRlcm1zLFxuICAgICAgLy8gbWVzc2FnZWlzbWllbWJybzogXCJcIixcbiAgICAgIC8vIGFib25hZG9fc2VsZWN0OiBudWxsXG4gICAgICAvLyB9KTtcbiAgICB9XG4gIH0sIFt1c2VyXSk7XG5cbiAgLyogZmlsbCB1c2VyIGZvcm0gKi9cbiAgLy8gdXNlRWZmZWN0KFxuICAvLyAgIF8gPT4ge1xuICAvLyAgICAgaWYgKHVzZXIpIHtcbiAgLy8gICAgICAgc2V0RGF0ZSh7XG4gIC8vICAgICAgICAgLi4uZGF0ZSxcbiAgLy8gICAgICAgICBiaXJ0aGRhdGU6IG5ldyBEYXRlKClcbiAgLy8gICAgICAgfSk7XG4gIC8vICAgICAgIHNldFZhbHVlcyh7XG4gIC8vICAgICAgICAgLi4udmFsdWVzLFxuICAvLyAgICAgICAgIG5hbWU6IHVzZXIubmFtZSxcbiAgLy8gICAgICAgICBnZW5kZXJfaWQ6IHVzZXIuZ2VuZGVyX2lkLFxuICAvLyAgICAgICAgIGRvY3VtZW50OiB1c2VyLmRvY3VtZW50LFxuICAvLyAgICAgICAgIG5pY2tuYW1lOiB1c2VyLm5pY2tuYW1lLFxuICAvLyAgICAgICAgIGJpcnRoZGF0ZTogdXNlci5iaXJ0aGRhdGUsXG4gIC8vICAgICAgICAgcmVnaXN0cmF0aW9uOiB1c2VyLnJlZ2lzdHJhdGlvbixcbiAgLy8gICAgICAgICBpc1BhcnRuZXI6IHVzZXIuaXNfcGFydG5lcixcbiAgLy8gICAgICAgICBhYm9uYWRvOiBudWxsLFxuICAvLyAgICAgICAgIHRlcm1zOiB1c2VyLnRlcm1zLFxuICAvLyAgICAgICAgIG1lc3NhZ2Vpc21pZW1icm86IFwiXCIsXG4gIC8vICAgICAgICAgYWJvbmFkb19zZWxlY3Q6IG51bGxcbiAgLy8gICAgICAgfSk7XG4gIC8vICAgICB9XG4gIC8vICAgfSxcbiAgLy8gICBbdXNlcl1cbiAgLy8gKTtcblxuICAvLyBjb25zb2xlLmxvZyhgXFxuXFxudXNlciAtLSAke0pTT04uc3RyaW5naWZ5KHVzZXIpfVxcblxcbmApO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKE9iamVjdC52YWx1ZXMoZm9ybURhdGEpLmZpbHRlcih4ID0+IHggIT0gbnVsbCkubGVuZ3RoID4gMCkge1xuICAgICAgY29uc29sZS5sb2coYFxcblxcblxcbkFxdWkgbyBmb3JtRGF0YSAtLSAke0pTT04uc3RyaW5naWZ5KGZvcm1EYXRhKX1cXG5cXG5cXG5gKTtcblxuICAgICAgZm9yIChsZXQga2V5IGluIGZvcm1EYXRhKSB7XG4gICAgICAgIGlmICh2YWx1ZXMuaGFzT3duUHJvcGVydHkoa2V5KSAmJiB2YWx1ZXNba2V5XSAhPSBudWxsKSB7XG4gICAgICAgICAgdmFsdWVzW2tleV0gPSBmb3JtRGF0YVtrZXldO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICB9XG4gIH0sIFt2YWx1ZXNdKVxuXG4gIGNvbnN0IGhhbmRsZUlucHV0Q2hhbmdlID0gZSA9PiB7XG5cbiAgICBjb25zdCB7IGNoZWNrZWQsIG5hbWUsIHZhbHVlLCB0eXBlIH0gPSBlLnRhcmdldDtcblxuICAgIHNldFZhbHVlcyh7XG4gICAgICAuLi52YWx1ZXMsXG4gICAgICBbbmFtZV06XG4gICAgICAgIHR5cGUgPT09IFwiY2hlY2tib3hcIlxuICAgICAgICAgID8gY2hlY2tlZFxuICAgICAgICAgICAgPyB2YWx1ZSA9PT0gXCJ0cnVlXCJcbiAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgIDogdmFsdWVcbiAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICA6IHZhbHVlXG4gICAgfSk7XG4gICAgc2V0Rm9ybURhdGEoe1xuICAgICAgLi4udmFsdWVzLFxuICAgICAgW25hbWVdOlxuICAgICAgICB0eXBlID09PSBcImNoZWNrYm94XCJcbiAgICAgICAgICA/IGNoZWNrZWRcbiAgICAgICAgICAgID8gdmFsdWUgPT09IFwidHJ1ZVwiXG4gICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICA6IHZhbHVlXG4gICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgOiB2YWx1ZVxuICAgIH1cbiAgICApO1xuICB9O1xuXG4gIGNvbnN0IHN1Ym1pdCA9IGFzeW5jIGUgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIHNldExvYWRpbmcodHJ1ZSk7XG5cbiAgICB0cnkge1xuICAgICAgbGV0IHVzZXJEYXRhID0ge1xuICAgICAgICBuYW1lOiB2YWx1ZXMubmFtZSxcbiAgICAgICAgZ2VuZGVyX2lkOiB2YWx1ZXMuZ2VuZGVyX2lkLFxuICAgICAgICBkb2N1bWVudDogdmFsdWVzLmRvY3VtZW50LFxuICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgbmlja25hbWU6IHZhbHVlcy5uaWNrbmFtZSxcbiAgICAgICAgcmVnaXN0cmF0aW9uOiB2YWx1ZXMucmVnaXN0cmF0aW9uLFxuICAgICAgICBiaXJ0aGRhdGU6IGRhdGUuYmlydGhkYXRlLFxuICAgICAgICBpc19wYXJ0bmVyOiB2YWx1ZXMuaXNQYXJ0bmVyLFxuICAgICAgICBhYm9uYWRvOiB2YWx1ZXMudGVybXMgPyB2YWx1ZXMuYWJvbmFkb19zZWxlY3QgOiBudWxsLFxuICAgICAgICB0ZXJtczogdmFsdWVzLnRlcm1zLFxuICAgICAgICBtZXNzYWdlaXNtaWVtYnJvOiBcIlwiLFxuICAgICAgICBhYm9uYV9zZWxlY3Q6IG51bGxcbiAgICAgIH07XG4gICAgICBpZiAoXG4gICAgICAgIHVzZXJEYXRhLmFib25hZG8gPT0gXCJ1bmRlZmluZWRcIiB8fFxuICAgICAgICAodXNlckRhdGEuYWJvbmFkbyA9PSBudWxsICYmIHZhbHVlcy50ZXJtcyA9PSB0cnVlKVxuICAgICAgKSB7XG4gICAgICAgIHNldEVycm9yKHtcbiAgICAgICAgICBlcnJvcnM6IHtcbiAgICAgICAgICAgIGFib25hZG86IFwiQ8OzZGlnbyBubyBlbmNvbnRyYWRvXCJcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBzZXRWYWx1ZXMoe1xuICAgICAgICAgIG5hbWU6IHZhbHVlcy5uYW1lLFxuICAgICAgICAgIGdlbmRlcl9pZDogdmFsdWVzLmdlbmRlcl9pZCxcbiAgICAgICAgICBkb2N1bWVudDogdmFsdWVzLmRvY3VtZW50LFxuICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgIG5pY2tuYW1lOiB2YWx1ZXMubmlja25hbWUsXG4gICAgICAgICAgcmVnaXN0cmF0aW9uOiB2YWx1ZXMucmVnaXN0cmF0aW9uLFxuICAgICAgICAgIGJpcnRoZGF0ZTogZGF0ZS5iaXJ0aGRhdGUsXG4gICAgICAgICAgaXNfcGFydG5lcjogdmFsdWVzLmlzUGFydG5lcixcbiAgICAgICAgICBhYm9uYWRvOiBcIlwiLFxuICAgICAgICAgIHRlcm1zOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlaXNtaWVtYnJvOiBcIlwiXG4gICAgICAgIH0pO1xuICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldEVycm9yKCk7XG5cbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLnBvc3QoYHJlZ2lzdGVyL2NvbXBsZXRlLXVzZXJgLCB1c2VyRGF0YSk7XG5cbiAgICAgICAgc2V0Rm9ybURhdGEoeyAuLi52YWx1ZXMgfSk7XG5cbiAgICAgICAgY29uc29sZS5sb2coYFxcblxcblxcbkFxdWkgbyB1c2VyRGF0YSAtLSAke0pTT04uc3RyaW5naWZ5KHVzZXJEYXRhKX1cXG5cXG5cXG5gKTtcblxuICAgICAgICBoYW5kbGVTdWJtaXQoMSwgdXNlckRhdGEpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHtcbiAgICAgICAgY29uc3QgeyBkYXRhLCBzdGF0dXMgfSA9IGVycm9yLnJlc3BvbnNlO1xuICAgICAgICBpZiAoc3RhdHVzID09PSA0MjIpIHtcbiAgICAgICAgICBzZXRFcnJvcihkYXRhKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChlcnJvci5yZXF1ZXN0KSB7XG4gICAgICAgIHNldEVycm9yKGVycm9yKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldEVycm9yKGVycm9yKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgfVxuXG4gIH07XG5cbiAgY29uc3Qgc3VibWl0Q29kID0gYXN5bmMgZSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgc2V0TG9hZGluZyh0cnVlKTtcblxuICAgIHRyeSB7XG4gICAgICBsZXQgcGFyYW1zID0ge1xuICAgICAgICBhYm9uYWRvOiB2YWx1ZXMuYWJvbmFkb1xuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLmdldChgcmVnaXN0ZXIvc2VhcmNoLWNvZC9gICsgcGFyYW1zLmFib25hZG8pO1xuICAgICAgaWYgKCFyZXMuZGF0YS5zdGF0dXMgJiYgdmFsdWVzLnRlcm1zID09IHRydWUpIHtcbiAgICAgICAgc2V0RXJyb3Ioe1xuICAgICAgICAgIGVycm9yczoge1xuICAgICAgICAgICAgYWJvbmFkbzogXCJDw7NkaWdvIG5vIGVuY29udHJhZG9cIlxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHNldFZhbHVlcyh7XG4gICAgICAgICAgbmFtZTogdmFsdWVzLm5hbWUsXG4gICAgICAgICAgZ2VuZGVyX2lkOiB2YWx1ZXMuZ2VuZGVyX2lkLFxuICAgICAgICAgIGRvY3VtZW50OiB2YWx1ZXMuZG9jdW1lbnQsXG4gICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgICAgbmlja25hbWU6IHZhbHVlcy5uaWNrbmFtZSxcbiAgICAgICAgICByZWdpc3RyYXRpb246IHZhbHVlcy5yZWdpc3RyYXRpb24sXG4gICAgICAgICAgYmlydGhkYXRlOiBkYXRlLmJpcnRoZGF0ZSxcbiAgICAgICAgICBpc19wYXJ0bmVyOiB2YWx1ZXMuaXNQYXJ0bmVyLFxuICAgICAgICAgIGFib25hZG86IG51bGwsXG4gICAgICAgICAgdGVybXM6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2Vpc21pZW1icm86IFwiXCJcbiAgICAgICAgfSk7XG4gICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0RXJyb3IoKTtcbiAgICAgICAgc2V0VmFsdWVzKHtcbiAgICAgICAgICBuYW1lOiB2YWx1ZXMubmFtZSxcbiAgICAgICAgICBnZW5kZXJfaWQ6IHZhbHVlcy5nZW5kZXJfaWQsXG4gICAgICAgICAgZG9jdW1lbnQ6IHZhbHVlcy5kb2N1bWVudCxcbiAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgICBuaWNrbmFtZTogdmFsdWVzLm5pY2tuYW1lLFxuICAgICAgICAgIHJlZ2lzdHJhdGlvbjogdmFsdWVzLnJlZ2lzdHJhdGlvbixcbiAgICAgICAgICBiaXJ0aGRhdGU6IGRhdGUuYmlydGhkYXRlLFxuICAgICAgICAgIGlzX3BhcnRuZXI6IHZhbHVlcy5pc1BhcnRuZXIsXG4gICAgICAgICAgYWJvbmFkb19zZWxlY3Q6IHJlcy5kYXRhLm1lc3NhZ2UsXG4gICAgICAgICAgdGVybXM6IHRydWUsXG4gICAgICAgICAgbWVzc2FnZWlzbWllbWJybzogcmVzLmRhdGEubWVzc2FnZVxuICAgICAgICB9KTtcbiAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvci5yZXNwb25zZSkge1xuICAgICAgICBjb25zdCB7IGRhdGEsIHN0YXR1cyB9ID0gZXJyb3IucmVzcG9uc2U7XG4gICAgICAgIGlmIChzdGF0dXMgPT09IDQyMikge1xuICAgICAgICAgIHNldEVycm9yKGRhdGEpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGVycm9yLnJlcXVlc3QpIHtcbiAgICAgICAgc2V0RXJyb3IoZXJyb3IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0RXJyb3IoZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBhcHBOYW1lKCkge1xuICAgIGlmIChDT05GSUcucHJvamVjdE5hbWUpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogXCJpbmxpbmUtYmxvY2tcIiB9fT5cbiAgICAgICAgICA8c3Ryb25nIGNsYXNzTmFtZT1cInRleHQtcHJpbWFyeVwiPlxuICAgICAgICAgICAge0NPTkZJRy5wcm9qZWN0TmFtZS5zcGxpdChcIiBcIilbMF19XG4gICAgICAgICAgPC9zdHJvbmc+XG4gICAgICAgICAge0NPTkZJRy5wcm9qZWN0TmFtZS5zcGxpdChcIiBcIilbMV19XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKENPTkZJRy5hcHBOYW1lKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6IFwiaW5saW5lLWJsb2NrXCIgfX0+XG4gICAgICAgICAgPHN0cm9uZyBjbGFzc05hbWU9XCJ0ZXh0LXByaW1hcnlcIj5cbiAgICAgICAgICAgIHtDT05GSUcuYXBwTmFtZS5zcGxpdChcIiBcIilbMF19XG4gICAgICAgICAgPC9zdHJvbmc+XG4gICAgICAgICAge0NPTkZJRy5hcHBOYW1lLnNwbGl0KFwiIFwiKVsxXX1cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiBcImlubGluZS1ibG9ja1wiIH19PlxuICAgICAgICA8c3Ryb25nIGNsYXNzTmFtZT1cInRleHQtcHJpbWFyeVwiPlByb2plY3Q8L3N0cm9uZz5OYW1lIVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGZvcm0gbWV0aG9kPVwicG9zdFwiIG9uU3VibWl0PXtzdWJtaXR9PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWdpc3Rlci1jb25maXJtIGNvbnRhaW5lciB0ZXh0LWNlbnRlclwiPlxuXG4gICAgICAgIDxoMiBjbGFzc05hbWU9XCJjYXJkLXRpdGxlIHRleHQtY2VudGVyXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtcInRleHQtcHJpbWFyeVwifT7CoTwvc3Bhbj5Tw6kgcGFydGUgZGUgezxOYW1lUHJvamVjdCAvPn08c3BhbiBjbGFzc05hbWU9e1widGV4dC1wcmltYXJ5XCJ9PiE8L3NwYW4+XG4gICAgICAgIDwvaDI+XG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e1wiY2FyZC1zdWJ0aXRsZVwifT5cbiAgICAgICAgICDCoUFudGVzIGRlIHNlZ3VpciwgcXVlcmVtb3Mgc2FiZXIgbcOhcyBkZSB0aSFcbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC0xMlwiIHN0eWxlPXt7IHBhZGRpbmc6IDAgfX0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC02XCI+XG4gICAgICAgICAgICAgICAgPEZvcm1Hcm91cD5cbiAgICAgICAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPVwibmFtZVwiPk5vbWJyZSBjb21wbGV0bzwvTGFiZWw+XG4gICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgaWQ9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17Zm9ybURhdGEubmFtZSB8fCB2YWx1ZXMubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUlucHV0Q2hhbmdlfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDxJbnZhbGlkRmVlZGJhY2tcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I9e2Vycm9yfVxuICAgICAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nfVxuICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvRm9ybUdyb3VwPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtbWQtNlwiPlxuICAgICAgICAgICAgICAgIDxGb3JtR3JvdXA+XG4gICAgICAgICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj1cImdlbmRlcl9pZFwiPkfDqW5lcm88L0xhYmVsPlxuICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICBpZD1cImdlbmRlcl9pZFwiXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJnZW5kZXJfaWRcIlxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZD17cmVxdWlyZWRzfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlSW5wdXRDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXtmb3JtRGF0YS5nZW5kZXJfaWQgfHwgdmFsdWVzLmdlbmRlcl9pZH1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgeyFnZW5kZXJzID8gKFxuICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gZGlzYWJsZWQgdmFsdWU9XCJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIENhcmdhbmRvLi4uXG4gICAgICAgICAgICAgICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICkgOiBnZW5kZXJzLmxlbmd0aCA/IChcbiAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiBkaXNhYmxlZCB2YWx1ZT1cIlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBTZWxlY2Npb25hIHR1IGfDqW5lcm9cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAge2dlbmRlcnMubWFwKChnZW5yZSwga2V5KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gey4uLnsga2V5IH19IHZhbHVlPXtnZW5yZS5pZH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2dlbnJlLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gZGlzYWJsZWQgdmFsdWU9XCJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbmNhcGF6IGRlIGNhcmdhciBnw6luZXJvc1xuICAgICAgICAgICAgICAgICAgICAgIDwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgPEludmFsaWRGZWVkYmFja1xuICAgICAgICAgICAgICAgICAgICBlcnJvcj17ZXJyb3J9XG4gICAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmd9XG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJnZW5kZXJfaWRcIlxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L0Zvcm1Hcm91cD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLW1kLTZcIj5cbiAgICAgICAgICAgICAgICA8Rm9ybUdyb3VwPlxuICAgICAgICAgICAgICAgICAgPExhYmVsIGh0bWxGb3I9XCJuYW1lXCI+QXBlbGxpZG9zPC9MYWJlbD5cbiAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICBpZD1cIm5pY2tuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm5pY2tuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2Zvcm1EYXRhLm5pY2tuYW1lIHx8IHZhbHVlcy5uaWNrbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUlucHV0Q2hhbmdlfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDxJbnZhbGlkRmVlZGJhY2tcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I9e2Vycm9yfVxuICAgICAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nfVxuICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmlja25hbWVcIlxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L0Zvcm1Hcm91cD5cbiAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtbWQtNlwiPlxuICAgICAgICAgICAgICAgIDxGb3JtR3JvdXA+XG4gICAgICAgICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj1cImJpcnRoXCI+RmVjaGEgZGUgbmFjaW1pZW50bzwvTGFiZWw+XG4gICAgICAgICAgICAgICAgICA8RmxhdHBpY2tyXG4gICAgICAgICAgICAgICAgICAgIGlkPVwiYmlydGhkYXRlXCJcbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cIiBiaXJ0aGRhdGVcIlxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zPXt7XG4gICAgICAgICAgICAgICAgICAgICAgYWx0SW5wdXQ6IFwidHJ1ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgIGFsdEZvcm1hdDogXCJkLW0teVwiLFxuICAgICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQ6IFwiWS1tLWRcIixcbiAgICAgICAgICAgICAgICAgICAgICBsb2NhbGU6IFwiZXNcIixcbiAgICAgICAgICAgICAgICAgICAgICBtYXhEYXRlOiBpbml0aWFsRGF0ZVxuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17YmlydGhkYXRlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXREYXRlKHsgYmlydGhkYXRlOiBiaXJ0aGRhdGUgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXtmb3JtRGF0YS5iaXJ0aF9vZl9kYXRlfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e1wiZm9ybS1jb250cm9sXCJ9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPEludmFsaWRGZWVkYmFja1xuICAgICAgICAgICAgICAgICAgICBlcnJvcj17ZXJyb3J9XG4gICAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmd9XG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJiaXJ0aGRhdGVcIlxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L0Zvcm1Hcm91cD5cbiAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtbWQtNiBcIj5cbiAgICAgICAgICAgICAgICA8Rm9ybUdyb3VwPlxuICAgICAgICAgICAgICAgICAgPExhYmVsIGh0bWxGb3I9XCJkb2N1bWVudFwiPkRvY3VtZW50bzwvTGFiZWw+XG4gICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgaWQ9XCJkb2N1bWVudFwiXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkb2N1bWVudFwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVJbnB1dENoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ9e3JlcXVpcmVkc31cbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17Zm9ybURhdGEuZG9jdW1lbnQgfHwgdmFsdWVzLmRvY3VtZW50fVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDxJbnZhbGlkRmVlZGJhY2tcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I9e2Vycm9yfVxuICAgICAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nfVxuICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZG9jdW1lbnRcIlxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L0Zvcm1Hcm91cD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIHsvKiA8L2Rpdj4gKi99XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLW1kLTZcIj5cbiAgICAgICAgICAgICAgICA8TGFiZWw+PC9MYWJlbD5cbiAgICAgICAgICAgICAgICA8Rm9ybUdyb3VwPlxuICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cInRlcm1zXCI+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2Zvcm1EYXRhLnRlcm1zIHx8IHZhbHVlcy50ZXJtc31cbiAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwidGVybXNcIlxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVJbnB1dENoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtgdHJ1ZWB9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IHBhZGRpbmdMZWZ0OiBcIjEwcHhcIiB9fT5cbiAgICAgICAgICAgICAgICAgICAgICBNaWVtYnJvIGRlbCBDbHViXG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICA8SW52YWxpZEZlZWRiYWNrXG4gICAgICAgICAgICAgICAgICAgIGVycm9yPXtlcnJvcn1cbiAgICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ31cbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cInRlcm1zXCJcbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9Gb3JtR3JvdXA+XG4gICAgICAgICAgICAgICAgPEludmFsaWRGZWVkYmFja1xuICAgICAgICAgICAgICAgICAgZXJyb3I9e2Vycm9yfVxuICAgICAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ31cbiAgICAgICAgICAgICAgICAgIG5hbWU9XCJhYm9uYWRvXCJcbiAgICAgICAgICAgICAgICAvPlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpcy1taWVtYnJvIFwiPlxuICAgICAgICAgICAgICAgICAgPEZvcm1Hcm91cD5cbiAgICAgICAgICAgICAgICAgICAgPExhYmVsIGh0bWxGb3I9XCJkb2N1bWVudFwiPlxuICAgICAgICAgICAgICAgICAgICAgIEFib25hZG9cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJtaWVtYnJvLWVuY29udHJhZG9cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDoge2Zvcm1EYXRhLm1lc3NhZ2Vpc21pZW1icm8gfHwgdmFsdWVzLm1lc3NhZ2Vpc21pZW1icm99XG4gICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L0xhYmVsPlxuXG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogXCJmbGV4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGlnbkl0ZW1zOiBcImJhc2VsaW5lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nVG9wOiBcIiAxcHhcIlxuICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPVwiYWJvbmFkb1wiXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiYWJvbmFkb1wiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlSW5wdXRDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17Zm9ybURhdGEuYWJvbmFkbyB8fCB2YWx1ZXMuYWJvbmFkb31cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuXG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t9fVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU9XCIxNHB4IWltcG9ydGFudFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcj1cInNlY29uZGFyeVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtzdWJtaXRDb2R9XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17bG9hZGluZ31cbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmd9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IFwiMHB4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IFwiMTRweCFpbXBvcnRhbnRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogXCIxOXB4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBcIjE2cHhcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8R29TZWFyY2hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogXCIxMHB4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogXCIxNHB4IWltcG9ydGFudFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogXCJwYWRkaW5nOiAxMnB4IDE2cHggN3B4IDE2cHghaW1wb3J0YW5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU9ezE0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc9ezB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L0Zvcm1Hcm91cD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAge2Rpc2NvdW50cyAmJlxuICAgICAgICAgICAgICBkaXNjb3VudHMubWFwKGQgPT4gKFxuICAgICAgICAgICAgICAgIDxGb3JtR3JvdXAga2V5PXtkLmlkfT5cbiAgICAgICAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPXtkLmRzY19pZH0+e2QubmFtZX08L0xhYmVsPlxuICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNjb3VudHMuZmluZChcbiAgICAgICAgICAgICAgICAgICAgICBkaXNjID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAhW1wiXCIsIHVuZGVmaW5lZF0uaW5jbHVkZXModmFsdWVzW2Rpc2MuZHNjX2lkXSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2MuaWQgIT0gZC5pZFxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICBpZD17ZC5pZH1cbiAgICAgICAgICAgICAgICAgICAgbWF4TGVuZ3RoPXs1fVxuICAgICAgICAgICAgICAgICAgICBuYW1lPXtkLmRzY19pZH1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZURpc2NvdW50Q2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXtcbiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXMuZGlzY291bnRfaWQgPT0gZC5pZFxuICAgICAgICAgICAgICAgICAgICAgICAgPyB7IGJhY2tncm91bmRDb2xvcjogXCJyZ2IoMjA2LCAyNDksIDIwNilcIiB9XG4gICAgICAgICAgICAgICAgICAgICAgICA6IHt9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3ZhbHVlc1tkLmRzY19pZF0gfHwgXCJcIn1cbiAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk9e2Jsb2NrRGlzY291bnRGaWVsZHN9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmbG9hdDogXCJyaWdodFwiLCBwYWRkaW5nVG9wOiBcIjEwcHhcIiB9fT5cbiAgICAgICAgICAgICAgICAgICAgPExvYWRpbmdcbiAgICAgICAgICAgICAgICAgICAgICBzaXplPVwiMjBcIlxuICAgICAgICAgICAgICAgICAgICAgIGNvbG9yPVwid2hpdGVcIlxuICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmdTdGF0ZT17XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXMuZGlzY291bnRfaWQgPT0gZC5pZCAmJiBibG9ja0Rpc2NvdW50RmllbGRzXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9Gb3JtR3JvdXA+XG4gICAgICAgICAgICAgICkpfVxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyXCI+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICBjb2xvcj1cInNlY29uZGFyeVwiXG4gICAgICAgICAgICAgICAgdHlwZT1cInN1Ym1pdFwiXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2xvYWRpbmd9XG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IFwiMTUwcHhcIiB9fVxuICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmd9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBTaWd1aWVudGVcbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxzdHlsZSBqc3ggZ2xvYmFsPXt0cnVlfT57YFxuICAgICAgICAudGV4dC1wcmltYXJ5IHtcbiAgICAgICAgICBjb2xvcjogJHtwcmltYXJ5Q29sb3J9ICFpbXBvcnRhbnQ7XG4gICAgICAgIH1cblxuICAgICAgICBzdHJvbmcudGV4dC1wcmltYXJ5IHtcbiAgICAgICAgICBjb2xvcjogJHtwcmltYXJ5Q29sb3J9ICFpbXBvcnRhbnQ7XG4gICAgICAgIH1cblxuICAgICAgICBoMi5jYXJkLXRpdGxlIHtcbiAgICAgICAgICBmb250LXdlaWdodDogbm9ybWFsO1xuICAgICAgICAgIGNvbG9yOiAjMDAwO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDFlbTtcbiAgICAgICAgICBmb250LXNpemU6IDEuN2VtO1xuICAgICAgICB9XG4gICAgICAgIC5wZXMge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIH1cbiAgICAgICAgZGl2LmNhcmQtc3VidGl0bGUge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMS4xZW07XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyLjVlbTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5taWVtYnJvLWVuY29udHJhZG8ge1xuICAgICAgICAgIGNvbG9yOiBncmVlbjtcbiAgICAgICAgfVxuXG4gICAgICAgIC50ZXh0LXByaW1hcnkge1xuICAgICAgICAgIGNvbG9yOiAke3ByaW1hcnlDb2xvcn0gIWltcG9ydGFudDtcbiAgICAgICAgfVxuICAgICAgICAucmVnaXN0ZXItY29uZmlybSB7XG4gICAgICAgICAgcGFkZGluZy10b3A6IDA7XG4gICAgICAgICAgcGFkZGluZy1ib3R0b206IDA7XG4gICAgICAgICAgY29sb3I6ICM2NjY2NjY7XG4gICAgICAgIH1cbiAgICAgICAgLmlzLW1pZW1icm8ge1xuICAgICAgICAgICR7dmFsdWVzLnRlcm1zID8gYGRpc3BsYXk6YmxvY2tgIDogYGRpc3BsYXk6bm9uZSFpbXBvcnRhbnQ7IGB9XG4gICAgICAgIH1cbiAgICAgIGB9PC9zdHlsZT5cbiAgICA8L2Zvcm0+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB3aXRoQXV0aChVc2VyRGF0YUZvcm0sIHRydWUpO1xuIl19 */\n/*@ sourceURL=/Users/rafael/Projects/somosgad/dale/pages/register/wizard/user-data.js */`));\n};\n\nexport default withAuth(UserDataForm, true);","map":{"version":3,"sources":["/Users/rafael/Projects/somosgad/dale/pages/register/wizard/user-data.js"],"names":["FormGroup","Label","Input","React","useContext","useEffect","useState","withAuth","IS_PRODUCTION","UserContext","Select","Loading","Button","InvalidFeedback","GoSearch","Color","ThemeContext","Flatpickr","CONFIG","NameProject","es","UserDataForm","api","layoutProps","handleSubmit","formData","setFormData","theme","primaryColor","colors","primary","hsl","string","requireds","loading","setLoading","date","setDate","birthdate","minDate","Date","getFullYear","initialDate","setinitialDate","values","setValues","name","gender_id","document","nickname","registration","isPartner","birth_of_date","abonado","user","genders","setGenders","discounts","setDiscounts","blockDiscountFields","setBlockDiscountFields","error","setError","_","data","get","Object","length","is_partner","terms","messageismiembro","abonado_select","filter","x","console","log","JSON","stringify","key","hasOwnProperty","handleInputChange","e","checked","value","type","target","submit","preventDefault","userData","email","abona_select","errors","res","post","response","status","request","submitCod","params","message","appName","projectName","display","split","padding","map","genre","id","altInput","altFormat","dateFormat","locale","maxDate","paddingLeft","alignItems","paddingTop","fontSize","width","height","size","d","dsc_id","find","disc","undefined","includes","handleDiscountChange","discount_id","backgroundColor","float"],"mappings":";;;;;;;;;;;AAAA,OAAOA,SAAP,MAAsB,yCAAtB;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,KAAP,MAAkB,qCAAlB;AACA,OAAOC,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,EAAuCC,QAAvC,QAAuD,OAAvD;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,SAASC,aAAT,QAA8B,uBAA9B;AACA,OAAOC,WAAP,MAAwB,wBAAxB;AACA,OAAOC,MAAP,MAAmB,4BAAnB;AACA,OAAOC,OAAP,MAAoB,8BAApB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,eAAP,MAA4B,mCAA5B;AACA,SAASC,QAAT,QAAyB,gBAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,YAAT,QAA6B,mBAA7B;AACA,OAAOC,SAAP,MAAsB,iBAAtB;AACA,SAASC,MAAT,QAAuB,UAAvB;AACA,OAAOC,WAAP,MAAwB,0BAAxB;AACA,SAASC,EAAT,QAAmB,2BAAnB;;AAEA,MAAMC,YAAY,GAAG,CAAC;AAAEC,EAAAA,GAAF;AAAOC,EAAAA,WAAP;AAAoBC,EAAAA,YAApB;AAAkCC,EAAAA,QAAlC;AAA4CC,EAAAA;AAA5C,CAAD,KAA+D;AAElF,QAAMC,KAAK,GAAGvB,UAAU,CAACY,YAAD,CAAxB;AACA,QAAMY,YAAY,GAAGb,KAAK,CAACY,KAAK,CAACE,MAAN,CAAaC,OAAd,CAAL,CAClBC,GADkB,GAElBC,MAFkB,EAArB;AAIA,QAAMC,SAAS,GAAGzB,aAAlB;AAEA,QAAM;AAAA,OAAC0B,OAAD;AAAA,OAAUC;AAAV,MAAwB7B,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM;AAAA,OAAC8B,IAAD;AAAA,OAAOC;AAAP,MAAkB/B,QAAQ,CAAC;AAC/BgC,IAAAA,SAAS,EAAE;AADoB,GAAD,CAAhC;AAGA,MAAIC,OAAO,GAAG,IAAIC,IAAJ,GAAWC,WAAX,KAA2B,EAAzC;AACA,QAAM;AAAA,OAACC,WAAD;AAAA,OAAcC;AAAd,MAAgCrC,QAAQ,CAAE,GAAEiC,OAAQ,QAAZ,CAA9C;AAEA,QAAM;AAAA,OAACK,MAAD;AAAA,OAASC;AAAT,MAAsBvC,QAAQ,CAAC;AACnCwC,IAAAA,IAAI,EAAE,EAD6B;AAEnCC,IAAAA,SAAS,EAAE,EAFwB;AAGnCC,IAAAA,QAAQ,EAAE,EAHyB;AAInCC,IAAAA,QAAQ,EAAE,EAJyB;AAKnCX,IAAAA,SAAS,EAAE,EALwB;AAMnCY,IAAAA,YAAY,EAAE,EANqB;AAOnCC,IAAAA,SAAS,EAAE,EAPwB;AAQnCC,IAAAA,aAAa,EAAE,EARoB;AASnCC,IAAAA,OAAO,EAAE;AAT0B,GAAD,CAApC;AAYA,QAAM;AAAEC,IAAAA;AAAF,MAAWlD,UAAU,CAACK,WAAD,CAA3B;AACA,QAAM;AAAA,OAAC8C,OAAD;AAAA,OAAUC;AAAV,MAAwBlD,QAAQ,EAAtC;AACA,QAAM;AAAA,OAACmD,SAAD;AAAA,OAAYC;AAAZ,MAA4BpD,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM;AAAA,OAACqD,mBAAD;AAAA,OAAsBC;AAAtB,MAAgDtD,QAAQ,CAAC,KAAD,CAA9D;AACA,QAAM;AAAA,OAACuD,KAAD;AAAA,OAAQC;AAAR,MAAoBxD,QAAQ,EAAlC;AAEA;;AACAD,EAAAA,SAAS,CAAC0D,CAAC,IAAI;AACb,KAAC,MAAMA,CAAN,IAAW;AACV,YAAM;AAAEC,QAAAA;AAAF,UAAW,MAAM1C,GAAG,CAAC2C,GAAJ,CAAQ,SAAR,CAAvB;AACAT,MAAAA,UAAU,CAACQ,IAAD,CAAV;AACD,KAHD;AAID,GALQ,EAKN,EALM,CAAT;AAOA3D,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIiD,IAAJ,EAAU;AACRjB,MAAAA,OAAO,iCACFD,IADE;AAELE,QAAAA,SAAS,EAAE,IAAIE,IAAJ;AAFN,SAAP;;AAKA,UAAI0B,MAAM,CAACtB,MAAP,CAAcnB,QAAd,EAAwB0C,MAAxB,IAAkC,CAAtC,EAAyC;AACvCtB,QAAAA,SAAS,iCACJD,MADI;AAEPE,UAAAA,IAAI,EAAEQ,IAAI,CAACR,IAFJ;AAGPC,UAAAA,SAAS,EAAEO,IAAI,CAACP,SAHT;AAIPC,UAAAA,QAAQ,EAAEM,IAAI,CAACN,QAJR;AAKPC,UAAAA,QAAQ,EAAEK,IAAI,CAACL,QALR;AAMPX,UAAAA,SAAS,EAAEgB,IAAI,CAAChB,SANT;AAOPY,UAAAA,YAAY,EAAEI,IAAI,CAACJ,YAPZ;AAQPC,UAAAA,SAAS,EAAEG,IAAI,CAACc,UART;AASPf,UAAAA,OAAO,EAAE,IATF;AAUPgB,UAAAA,KAAK,EAAEf,IAAI,CAACe,KAVL;AAWPC,UAAAA,gBAAgB,EAAE,EAXX;AAYPC,UAAAA,cAAc,EAAE;AAZT,WAAT;AAcD,OAfD,MAeO;AACL1B,QAAAA,SAAS,iCACJpB,QADI;AAEPqB,UAAAA,IAAI,EAAErB,QAAQ,CAACqB,IAFR;AAGPC,UAAAA,SAAS,EAAEtB,QAAQ,CAACsB,SAHb;AAIPC,UAAAA,QAAQ,EAAEvB,QAAQ,CAACuB,QAJZ;AAKPC,UAAAA,QAAQ,EAAExB,QAAQ,CAACwB,QALZ;AAMPX,UAAAA,SAAS,EAAEb,QAAQ,CAACa,SANb;AAOPY,UAAAA,YAAY,EAAEzB,QAAQ,CAACyB,YAPhB;AAQPC,UAAAA,SAAS,EAAE1B,QAAQ,CAAC2C,UARb;AASPf,UAAAA,OAAO,EAAE,IATF;AAUPgB,UAAAA,KAAK,EAAE5C,QAAQ,CAAC4C,KAVT;AAWPC,UAAAA,gBAAgB,EAAE,EAXX;AAYPC,UAAAA,cAAc,EAAE;AAZT,WAAT;AAcD,OApCO,CAqCR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACD;AACF,GArDQ,EAqDN,CAACjB,IAAD,CArDM,CAAT;AAuDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAEAjD,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI6D,MAAM,CAACtB,MAAP,CAAcnB,QAAd,EAAwB+C,MAAxB,CAA+BC,CAAC,IAAIA,CAAC,IAAI,IAAzC,EAA+CN,MAA/C,GAAwD,CAA5D,EAA+D;AAC7DO,MAAAA,OAAO,CAACC,GAAR,CAAa,4BAA2BC,IAAI,CAACC,SAAL,CAAepD,QAAf,CAAyB,QAAjE;;AAEA,WAAK,IAAIqD,GAAT,IAAgBrD,QAAhB,EAA0B;AACxB,YAAImB,MAAM,CAACmC,cAAP,CAAsBD,GAAtB,KAA8BlC,MAAM,CAACkC,GAAD,CAAN,IAAe,IAAjD,EAAuD;AACrDlC,UAAAA,MAAM,CAACkC,GAAD,CAAN,GAAcrD,QAAQ,CAACqD,GAAD,CAAtB;AACD;AACF;AAEF;AACF,GAXQ,EAWN,CAAClC,MAAD,CAXM,CAAT;;AAaA,QAAMoC,iBAAiB,GAAGC,CAAC,IAAI;AAE7B,UAAM;AAAEC,MAAAA,OAAF;AAAWpC,MAAAA,IAAX;AAAiBqC,MAAAA,KAAjB;AAAwBC,MAAAA;AAAxB,QAAiCH,CAAC,CAACI,MAAzC;AAEAxC,IAAAA,SAAS,iCACJD,MADI;AAEP,OAACE,IAAD,GACEsC,IAAI,KAAK,UAAT,GACIF,OAAO,GACLC,KAAK,KAAK,MAAV,GACE,IADF,GAEEA,KAHG,GAIL,KALN,GAMIA;AATC,OAAT;AAWAzD,IAAAA,WAAW,iCACNkB,MADM;AAET,OAACE,IAAD,GACEsC,IAAI,KAAK,UAAT,GACIF,OAAO,GACLC,KAAK,KAAK,MAAV,GACE,IADF,GAEEA,KAHG,GAIL,KALN,GAMIA;AATG,OAAX;AAYD,GA3BD;;AA6BA,QAAMG,MAAM,GAAG,MAAML,CAAN,IAAW;AACxBA,IAAAA,CAAC,CAACM,cAAF;AAEApD,IAAAA,UAAU,CAAC,IAAD,CAAV;;AAEA,QAAI;AACF,UAAIqD,QAAQ,GAAG;AACb1C,QAAAA,IAAI,EAAEF,MAAM,CAACE,IADA;AAEbC,QAAAA,SAAS,EAAEH,MAAM,CAACG,SAFL;AAGbC,QAAAA,QAAQ,EAAEJ,MAAM,CAACI,QAHJ;AAIbyC,QAAAA,KAAK,EAAEnC,IAAI,CAACmC,KAJC;AAKbxC,QAAAA,QAAQ,EAAEL,MAAM,CAACK,QALJ;AAMbC,QAAAA,YAAY,EAAEN,MAAM,CAACM,YANR;AAObZ,QAAAA,SAAS,EAAEF,IAAI,CAACE,SAPH;AAQb8B,QAAAA,UAAU,EAAExB,MAAM,CAACO,SARN;AASbE,QAAAA,OAAO,EAAET,MAAM,CAACyB,KAAP,GAAezB,MAAM,CAAC2B,cAAtB,GAAuC,IATnC;AAUbF,QAAAA,KAAK,EAAEzB,MAAM,CAACyB,KAVD;AAWbC,QAAAA,gBAAgB,EAAE,EAXL;AAYboB,QAAAA,YAAY,EAAE;AAZD,OAAf;;AAcA,UACEF,QAAQ,CAACnC,OAAT,IAAoB,WAApB,IACCmC,QAAQ,CAACnC,OAAT,IAAoB,IAApB,IAA4BT,MAAM,CAACyB,KAAP,IAAgB,IAF/C,EAGE;AACAP,QAAAA,QAAQ,CAAC;AACP6B,UAAAA,MAAM,EAAE;AACNtC,YAAAA,OAAO,EAAE;AADH;AADD,SAAD,CAAR;AAKAR,QAAAA,SAAS,CAAC;AACRC,UAAAA,IAAI,EAAEF,MAAM,CAACE,IADL;AAERC,UAAAA,SAAS,EAAEH,MAAM,CAACG,SAFV;AAGRC,UAAAA,QAAQ,EAAEJ,MAAM,CAACI,QAHT;AAIRyC,UAAAA,KAAK,EAAEnC,IAAI,CAACmC,KAJJ;AAKRxC,UAAAA,QAAQ,EAAEL,MAAM,CAACK,QALT;AAMRC,UAAAA,YAAY,EAAEN,MAAM,CAACM,YANb;AAORZ,UAAAA,SAAS,EAAEF,IAAI,CAACE,SAPR;AAQR8B,UAAAA,UAAU,EAAExB,MAAM,CAACO,SARX;AASRE,UAAAA,OAAO,EAAE,EATD;AAURgB,UAAAA,KAAK,EAAE,KAVC;AAWRC,UAAAA,gBAAgB,EAAE;AAXV,SAAD,CAAT;AAaAnC,QAAAA,UAAU,CAAC,KAAD,CAAV;AACD,OAvBD,MAuBO;AACL2B,QAAAA,QAAQ;AAER,cAAM8B,GAAG,GAAG,MAAMtE,GAAG,CAACuE,IAAJ,CAAU,wBAAV,EAAmCL,QAAnC,CAAlB;AAEA9D,QAAAA,WAAW,mBAAMkB,MAAN,EAAX;AAEA8B,QAAAA,OAAO,CAACC,GAAR,CAAa,4BAA2BC,IAAI,CAACC,SAAL,CAAeW,QAAf,CAAyB,QAAjE;AAEAhE,QAAAA,YAAY,CAAC,CAAD,EAAIgE,QAAJ,CAAZ;AACD;AACF,KAjDD,CAiDE,OAAO3B,KAAP,EAAc;AACd,UAAIA,KAAK,CAACiC,QAAV,EAAoB;AAClB,cAAM;AAAE9B,UAAAA,IAAF;AAAQ+B,UAAAA;AAAR,YAAmBlC,KAAK,CAACiC,QAA/B;;AACA,YAAIC,MAAM,KAAK,GAAf,EAAoB;AAClBjC,UAAAA,QAAQ,CAACE,IAAD,CAAR;AACD;AACF,OALD,MAKO,IAAIH,KAAK,CAACmC,OAAV,EAAmB;AACxBlC,QAAAA,QAAQ,CAACD,KAAD,CAAR;AACD,OAFM,MAEA;AACLC,QAAAA,QAAQ,CAACD,KAAD,CAAR;AACD;AACF,KA5DD,SA4DU;AACR1B,MAAAA,UAAU,CAAC,KAAD,CAAV;AACD;AAEF,GArED;;AAuEA,QAAM8D,SAAS,GAAG,MAAMhB,CAAN,IAAW;AAC3BA,IAAAA,CAAC,CAACM,cAAF;AAEApD,IAAAA,UAAU,CAAC,IAAD,CAAV;;AAEA,QAAI;AACF,UAAI+D,MAAM,GAAG;AACX7C,QAAAA,OAAO,EAAET,MAAM,CAACS;AADL,OAAb;AAIA,YAAMuC,GAAG,GAAG,MAAMtE,GAAG,CAAC2C,GAAJ,CAAS,sBAAD,GAAyBiC,MAAM,CAAC7C,OAAxC,CAAlB;;AACA,UAAI,CAACuC,GAAG,CAAC5B,IAAJ,CAAS+B,MAAV,IAAoBnD,MAAM,CAACyB,KAAP,IAAgB,IAAxC,EAA8C;AAC5CP,QAAAA,QAAQ,CAAC;AACP6B,UAAAA,MAAM,EAAE;AACNtC,YAAAA,OAAO,EAAE;AADH;AADD,SAAD,CAAR;AAKAR,QAAAA,SAAS,CAAC;AACRC,UAAAA,IAAI,EAAEF,MAAM,CAACE,IADL;AAERC,UAAAA,SAAS,EAAEH,MAAM,CAACG,SAFV;AAGRC,UAAAA,QAAQ,EAAEJ,MAAM,CAACI,QAHT;AAIRyC,UAAAA,KAAK,EAAEnC,IAAI,CAACmC,KAJJ;AAKRxC,UAAAA,QAAQ,EAAEL,MAAM,CAACK,QALT;AAMRC,UAAAA,YAAY,EAAEN,MAAM,CAACM,YANb;AAORZ,UAAAA,SAAS,EAAEF,IAAI,CAACE,SAPR;AAQR8B,UAAAA,UAAU,EAAExB,MAAM,CAACO,SARX;AASRE,UAAAA,OAAO,EAAE,IATD;AAURgB,UAAAA,KAAK,EAAE,KAVC;AAWRC,UAAAA,gBAAgB,EAAE;AAXV,SAAD,CAAT;AAaAnC,QAAAA,UAAU,CAAC,KAAD,CAAV;AACD,OApBD,MAoBO;AACL2B,QAAAA,QAAQ;AACRjB,QAAAA,SAAS,CAAC;AACRC,UAAAA,IAAI,EAAEF,MAAM,CAACE,IADL;AAERC,UAAAA,SAAS,EAAEH,MAAM,CAACG,SAFV;AAGRC,UAAAA,QAAQ,EAAEJ,MAAM,CAACI,QAHT;AAIRyC,UAAAA,KAAK,EAAEnC,IAAI,CAACmC,KAJJ;AAKRxC,UAAAA,QAAQ,EAAEL,MAAM,CAACK,QALT;AAMRC,UAAAA,YAAY,EAAEN,MAAM,CAACM,YANb;AAORZ,UAAAA,SAAS,EAAEF,IAAI,CAACE,SAPR;AAQR8B,UAAAA,UAAU,EAAExB,MAAM,CAACO,SARX;AASRoB,UAAAA,cAAc,EAAEqB,GAAG,CAAC5B,IAAJ,CAASmC,OATjB;AAUR9B,UAAAA,KAAK,EAAE,IAVC;AAWRC,UAAAA,gBAAgB,EAAEsB,GAAG,CAAC5B,IAAJ,CAASmC;AAXnB,SAAD,CAAT;AAaAhE,QAAAA,UAAU,CAAC,KAAD,CAAV;AACD;AACF,KA3CD,CA2CE,OAAO0B,KAAP,EAAc;AACd,UAAIA,KAAK,CAACiC,QAAV,EAAoB;AAClB,cAAM;AAAE9B,UAAAA,IAAF;AAAQ+B,UAAAA;AAAR,YAAmBlC,KAAK,CAACiC,QAA/B;;AACA,YAAIC,MAAM,KAAK,GAAf,EAAoB;AAClBjC,UAAAA,QAAQ,CAACE,IAAD,CAAR;AACD;AACF,OALD,MAKO,IAAIH,KAAK,CAACmC,OAAV,EAAmB;AACxBlC,QAAAA,QAAQ,CAACD,KAAD,CAAR;AACD,OAFM,MAEA;AACLC,QAAAA,QAAQ,CAACD,KAAD,CAAR;AACD;AACF;AACF,GA5DD;;AA8DA,WAASuC,OAAT,GAAmB;AACjB,QAAIlF,MAAM,CAACmF,WAAX,EAAwB;AACtB,aACE;AAAK,QAAA,KAAK,EAAE;AAAEC,UAAAA,OAAO,EAAE;AAAX;AAAZ,SACE;AAAQ,QAAA,SAAS,EAAC;AAAlB,SACGpF,MAAM,CAACmF,WAAP,CAAmBE,KAAnB,CAAyB,GAAzB,EAA8B,CAA9B,CADH,CADF,EAIGrF,MAAM,CAACmF,WAAP,CAAmBE,KAAnB,CAAyB,GAAzB,EAA8B,CAA9B,CAJH,CADF;AAQD,KATD,MASO,IAAIrF,MAAM,CAACkF,OAAX,EAAoB;AACzB,aACE;AAAK,QAAA,KAAK,EAAE;AAAEE,UAAAA,OAAO,EAAE;AAAX;AAAZ,SACE;AAAQ,QAAA,SAAS,EAAC;AAAlB,SACGpF,MAAM,CAACkF,OAAP,CAAeG,KAAf,CAAqB,GAArB,EAA0B,CAA1B,CADH,CADF,EAIGrF,MAAM,CAACkF,OAAP,CAAeG,KAAf,CAAqB,GAArB,EAA0B,CAA1B,CAJH,CADF;AAQD;;AACD,WACE;AAAK,MAAA,KAAK,EAAE;AAAED,QAAAA,OAAO,EAAE;AAAX;AAAZ,OACE;AAAQ,MAAA,SAAS,EAAC;AAAlB,iBADF,UADF;AAKD;;AAED,SACE;AAAM,IAAA,MAAM,EAAC,MAAb;AAAoB,IAAA,QAAQ,EAAEhB,MAA9B;AAAA,kDA0Qe1D,YA1Qf,EA8QeA,YA9Qf,EAqSeA,YArSf,EA6SQgB,MAAM,CAACyB,KAAP,GAAgB,eAAhB,GAAkC,0BA7S1C;AAAA,KACE;AAAA,kDAyQazC,YAzQb,EA6QaA,YA7Qb,EAoSaA,YApSb,EA4SMgB,MAAM,CAACyB,KAAP,GAAgB,eAAhB,GAAkC,0BA5SxC,aAAe;AAAf,KAEE;AAAA,kDAuQWzC,YAvQX,EA2QWA,YA3QX,EAkSWA,YAlSX,EA0SIgB,MAAM,CAACyB,KAAP,GAAgB,eAAhB,GAAkC,0BA1StC,aAAc;AAAd,KACE;AAAA,kDAsQSzC,YAtQT,EA0QSA,YA1QT,EAiSSA,YAjST,EAySEgB,MAAM,CAACyB,KAAP,GAAgB,eAAhB,GAAkC,0BAzSpC,aAAiB;AAAjB,YADF,qBACwD,MAAC,WAAD,OADxD,EACwE;AAAA,kDAsQ7DzC,YAtQ6D,EA0Q7DA,YA1Q6D,EAiS7DA,YAjS6D,EAySpEgB,MAAM,CAACyB,KAAP,GAAgB,eAAhB,GAAkC,0BAzSkC,aAAiB;AAAjB,SADxE,CAFF,EAME;AAAA,kDAmQWzC,YAnQX,EAuQWA,YAvQX,EA8RWA,YA9RX,EAsSIgB,MAAM,CAACyB,KAAP,GAAgB,eAAhB,GAAkC,0BAtStC,aAAgB;AAAhB,yDANF,EAUE;AAAA,kDA+PWzC,YA/PX,EAmQWA,YAnQX,EA0RWA,YA1RX,EAkSIgB,MAAM,CAACyB,KAAP,GAAgB,eAAhB,GAAkC,0BAlStC,aAAe;AAAf,KACE;AAA2B,IAAA,KAAK,EAAE;AAAEmC,MAAAA,OAAO,EAAE;AAAX,KAAlC;AAAA,kDA8PS5E,YA9PT,EAkQSA,YAlQT,EAyRSA,YAzRT,EAiSEgB,MAAM,CAACyB,KAAP,GAAgB,eAAhB,GAAkC,0BAjSpC,aAAe;AAAf,KACE;AAAA,kDA6POzC,YA7PP,EAiQOA,YAjQP,EAwROA,YAxRP,EAgSAgB,MAAM,CAACyB,KAAP,GAAgB,eAAhB,GAAkC,0BAhSlC,aAAe;AAAf,KACE;AAAA,kDA4PKzC,YA5PL,EAgQKA,YAhQL,EAuRKA,YAvRL,EA+RFgB,MAAM,CAACyB,KAAP,GAAgB,eAAhB,GAAkC,0BA/RhC,aAAe;AAAf,KACE,MAAC,SAAD,QACE,MAAC,KAAD;AAAO,IAAA,OAAO,EAAC;AAAf,uBADF,EAEE,MAAC,KAAD;AACE,IAAA,EAAE,EAAC,MADL;AAEE,IAAA,IAAI,EAAC,MAFP;AAGE,IAAA,KAAK,EAAE5C,QAAQ,CAACqB,IAAT,IAAiBF,MAAM,CAACE,IAHjC;AAIE,IAAA,QAAQ,EAAEkC;AAJZ,IAFF,EAQE,MAAC,eAAD;AACE,IAAA,KAAK,EAAEnB,KADT;AAEE,IAAA,OAAO,EAAE3B,OAFX;AAGE,IAAA,IAAI,EAAC;AAHP,IARF,CADF,CADF,EAiBE;AAAA,kDA4OKN,YA5OL,EAgPKA,YAhPL,EAuQKA,YAvQL,EA+QFgB,MAAM,CAACyB,KAAP,GAAgB,eAAhB,GAAkC,0BA/QhC,aAAe;AAAf,KACE,MAAC,SAAD,QACE,MAAC,KAAD;AAAO,IAAA,OAAO,EAAC;AAAf,iBADF,EAEE,MAAC,MAAD;AACE,IAAA,EAAE,EAAC,WADL;AAEE,IAAA,IAAI,EAAC,WAFP;AAGE,IAAA,QAAQ,EAAEpC,SAHZ;AAIE,IAAA,QAAQ,EAAE+C,iBAJZ;AAKE,IAAA,KAAK,EAAEvD,QAAQ,CAACsB,SAAT,IAAsBH,MAAM,CAACG;AALtC,KAOG,CAACQ,OAAD,GACC;AAAQ,IAAA,QAAQ,MAAhB;AAAiB,IAAA,KAAK,EAAC,EAAvB;AAAA,kDAiOH3B,YAjOG,EAqOHA,YArOG,EA4PHA,YA5PG,EAoQVgB,MAAM,CAACyB,KAAP,GAAgB,eAAhB,GAAkC,0BApQxB;AAAA,mBADD,GAIGd,OAAO,CAACY,MAAR,GACF,4BACE;AAAQ,IAAA,QAAQ,MAAhB;AAAiB,IAAA,KAAK,EAAC,EAAvB;AAAA,kDA4NLvC,YA5NK,EAgOLA,YAhOK,EAuPLA,YAvPK,EA+PZgB,MAAM,CAACyB,KAAP,GAAgB,eAAhB,GAAkC,0BA/PtB;AAAA,+BADF,EAIGd,OAAO,CAACkD,GAAR,CAAY,CAACC,KAAD,EAAQ5B,GAAR,KACX,yBAAY;AAAEA,IAAAA;AAAF,GAAZ;AAAqB,IAAA,KAAK,EAAE4B,KAAK,CAACC,EAAlC;AAAA,kDAwNP/E,YAxNO,EA4NPA,YA5NO,EAmPPA,YAnPO,EA2PdgB,MAAM,CAACyB,KAAP,GAAgB,eAAhB,GAAkC,0BA3PpB;AAAA,MACGqC,KAAK,CAAC5D,IADT,CADD,CAJH,CADE,GAYE;AAAQ,IAAA,QAAQ,MAAhB;AAAiB,IAAA,KAAK,EAAC,EAAvB;AAAA,kDAkNPlB,YAlNO,EAsNPA,YAtNO,EA6OPA,YA7OO,EAqPdgB,MAAM,CAACyB,KAAP,GAAgB,eAAhB,GAAkC,0BArPpB;AAAA,oCAvBR,CAFF,EA8BE,MAAC,eAAD;AACE,IAAA,KAAK,EAAER,KADT;AAEE,IAAA,OAAO,EAAE3B,OAFX;AAGE,IAAA,IAAI,EAAC;AAHP,IA9BF,CADF,CAjBF,EAuDE;AAAA,kDAsMKN,YAtML,EA0MKA,YA1ML,EAiOKA,YAjOL,EAyOFgB,MAAM,CAACyB,KAAP,GAAgB,eAAhB,GAAkC,0BAzOhC,aAAe;AAAf,KACE,MAAC,SAAD,QACE,MAAC,KAAD;AAAO,IAAA,OAAO,EAAC;AAAf,iBADF,EAEE,MAAC,KAAD;AACE,IAAA,EAAE,EAAC,UADL;AAEE,IAAA,IAAI,EAAC,UAFP;AAGE,IAAA,KAAK,EAAE5C,QAAQ,CAACwB,QAAT,IAAqBL,MAAM,CAACK,QAHrC;AAIE,IAAA,QAAQ,EAAE+B;AAJZ,IAFF,EAQE,MAAC,eAAD;AACE,IAAA,KAAK,EAAEnB,KADT;AAEE,IAAA,OAAO,EAAE3B,OAFX;AAGE,IAAA,IAAI,EAAC;AAHP,IARF,CADF,CAvDF,EAwEE;AAAA,kDAqLKN,YArLL,EAyLKA,YAzLL,EAgNKA,YAhNL,EAwNFgB,MAAM,CAACyB,KAAP,GAAgB,eAAhB,GAAkC,0BAxNhC,aAAe;AAAf,KACE,MAAC,SAAD,QACE,MAAC,KAAD;AAAO,IAAA,OAAO,EAAC;AAAf,2BADF,EAEE,MAAC,SAAD;AACE,IAAA,EAAE,EAAC,WADL;AAEE,IAAA,IAAI,EAAC,YAFP;AAGE,IAAA,OAAO,EAAE;AACPuC,MAAAA,QAAQ,EAAE,MADH;AAEPC,MAAAA,SAAS,EAAE,OAFJ;AAGPC,MAAAA,UAAU,EAAE,OAHL;AAIPC,MAAAA,MAAM,EAAE,IAJD;AAKPC,MAAAA,OAAO,EAAEtE;AALF,KAHX;AAUE,IAAA,QAAQ,EAAEJ,SAAS,IAAI;AACrBD,MAAAA,OAAO,CAAC;AAAEC,QAAAA,SAAS,EAAEA;AAAb,OAAD,CAAP;AACD,KAZH;AAaE,IAAA,KAAK,EAAEb,QAAQ,CAAC2B,aAblB;AAcE,IAAA,SAAS,EAAE;AAdb,IAFF,EAkBE,MAAC,eAAD;AACE,IAAA,KAAK,EAAES,KADT;AAEE,IAAA,OAAO,EAAE3B,OAFX;AAGE,IAAA,IAAI,EAAC;AAHP,IAlBF,CADF,CAxEF,EAmGE;AAAA,kDA0JKN,YA1JL,EA8JKA,YA9JL,EAqLKA,YArLL,EA6LFgB,MAAM,CAACyB,KAAP,GAAgB,eAAhB,GAAkC,0BA7LhC,aAAe;AAAf,KACE,MAAC,SAAD,QACE,MAAC,KAAD;AAAO,IAAA,OAAO,EAAC;AAAf,iBADF,EAEE,MAAC,KAAD;AACE,IAAA,EAAE,EAAC,UADL;AAEE,IAAA,IAAI,EAAC,UAFP;AAGE,IAAA,QAAQ,EAAEW,iBAHZ;AAIE,IAAA,QAAQ,EAAE/C,SAJZ;AAKE,IAAA,IAAI,EAAC,MALP;AAME,IAAA,KAAK,EAAER,QAAQ,CAACuB,QAAT,IAAqBJ,MAAM,CAACI;AANrC,IAFF,EAUE,MAAC,eAAD;AACE,IAAA,KAAK,EAAEa,KADT;AAEE,IAAA,OAAO,EAAE3B,OAFX;AAGE,IAAA,IAAI,EAAC;AAHP,IAVF,CADF,CAnGF,EAsHE;AAAA,kDAuIKN,YAvIL,EA2IKA,YA3IL,EAkKKA,YAlKL,EA0KFgB,MAAM,CAACyB,KAAP,GAAgB,eAAhB,GAAkC,0BA1KhC,aAAe;AAAf,KACE,MAAC,KAAD,OADF,EAEE,MAAC,SAAD,QACE;AAAA,kDAoICzC,YApID,EAwICA,YAxID,EA+JCA,YA/JD,EAuKNgB,MAAM,CAACyB,KAAP,GAAgB,eAAhB,GAAkC,0BAvK5B,aAAiB;AAAjB,KACE;AACE,IAAA,OAAO,EAAE5C,QAAQ,CAAC4C,KAAT,IAAkBzB,MAAM,CAACyB,KADpC;AAEE,IAAA,IAAI,EAAC,OAFP;AAGE,IAAA,QAAQ,EAAEW,iBAHZ;AAIE,IAAA,IAAI,EAAC,UAJP;AAKE,IAAA,KAAK,EAAG,MALV;AAAA,kDAmIDpD,YAnIC,EAuIDA,YAvIC,EA8JDA,YA9JC,EAsKRgB,MAAM,CAACyB,KAAP,GAAgB,eAAhB,GAAkC,0BAtK1B;AAAA,IADF,EAQE;AAAM,IAAA,KAAK,EAAE;AAAE4C,MAAAA,WAAW,EAAE;AAAf,KAAb;AAAA,kDA4HDrF,YA5HC,EAgIDA,YAhIC,EAuJDA,YAvJC,EA+JRgB,MAAM,CAACyB,KAAP,GAAgB,eAAhB,GAAkC,0BA/J1B;AAAA,wBARF,CADF,EAaE,MAAC,eAAD;AACE,IAAA,KAAK,EAAER,KADT;AAEE,IAAA,OAAO,EAAE3B,OAFX;AAGE,IAAA,IAAI,EAAC;AAHP,IAbF,CAFF,EAqBE,MAAC,eAAD;AACE,IAAA,KAAK,EAAE2B,KADT;AAEE,IAAA,OAAO,EAAE3B,OAFX;AAGE,IAAA,IAAI,EAAC;AAHP,IArBF,EA2BE;AAAA,kDA4GGN,YA5GH,EAgHGA,YAhHH,EAuIGA,YAvIH,EA+IJgB,MAAM,CAACyB,KAAP,GAAgB,eAAhB,GAAkC,0BA/I9B,aAAe;AAAf,KACE,MAAC,SAAD,QACE,MAAC,KAAD;AAAO,IAAA,OAAO,EAAC;AAAf,gBAEE;AAAA,kDAwGHzC,YAxGG,EA4GHA,YA5GG,EAmIHA,YAnIG,EA2IVgB,MAAM,CAACyB,KAAP,GAAgB,eAAhB,GAAkC,0BA3IxB,aAAgB;AAAhB,WACK5C,QAAQ,CAAC6C,gBAAT,IAA6B1B,MAAM,CAAC0B,gBADzC,CAFF,CADF,EAQE;AACE,IAAA,KAAK,EAAE;AACLgC,MAAAA,OAAO,EAAE,MADJ;AAELY,MAAAA,UAAU,EAAE,UAFP;AAGLC,MAAAA,UAAU,EAAE;AAHP,KADT;AAAA,kDAmGDvF,YAnGC,EAuGDA,YAvGC,EA8HDA,YA9HC,EAsIRgB,MAAM,CAACyB,KAAP,GAAgB,eAAhB,GAAkC,0BAtI1B;AAAA,KAOE,MAAC,KAAD;AACE,IAAA,EAAE,EAAC,SADL;AAEE,IAAA,IAAI,EAAC,SAFP;AAGE,IAAA,QAAQ,EAAEW,iBAHZ;AAIE,IAAA,IAAI,EAAC,MAJP;AAKE,IAAA,KAAK,EAAEvD,QAAQ,CAAC4B,OAAT,IAAoBT,MAAM,CAACS;AALpC,IAPF,EAeE,MAAC,MAAD;AACE,IAAA,KAAK,EAAE,EADT;AAEE,IAAA,QAAQ,EAAC,gBAFX;AAGE,IAAA,KAAK,EAAC,WAHR;AAIE,IAAA,OAAO,EAAE4C,SAJX;AAKE,IAAA,QAAQ,EAAE/D,OALZ;AAME,IAAA,OAAO,EAAEA;AANX,KAQE;AACE,IAAA,KAAK,EAAE;AACLsE,MAAAA,OAAO,EAAE,KADJ;AAELY,MAAAA,QAAQ,EAAE,gBAFL;AAGLC,MAAAA,KAAK,EAAE,MAHF;AAILC,MAAAA,MAAM,EAAE;AAJH,KADT;AAAA,kDA4EL1F,YA5EK,EAgFLA,YAhFK,EAuGLA,YAvGK,EA+GZgB,MAAM,CAACyB,KAAP,GAAgB,eAAhB,GAAkC,0BA/GtB;AAAA,KAQE,MAAC,QAAD;AACE,IAAA,KAAK,EAAE;AACLkD,MAAAA,IAAI,EAAE,MADD;AAELH,MAAAA,QAAQ,EAAE,gBAFL;AAGLZ,MAAAA,OAAO,EAAE;AAHJ,KADT;AAME,IAAA,QAAQ,EAAE,EANZ;AAOE,IAAA,OAAO,EAAE;AAPX,IARF,CARF,CAfF,CARF,CADF,CA3BF,CAtHF,CADF,EA2MG/C,SAAS,IACRA,SAAS,CAACgD,GAAV,CAAce,CAAC,IACb,MAAC,SAAD;AAAW,IAAA,GAAG,EAAEA,CAAC,CAACb;AAAlB,KACE,MAAC,KAAD;AAAO,IAAA,OAAO,EAAEa,CAAC,CAACC;AAAlB,KAA2BD,CAAC,CAAC1E,IAA7B,CADF,EAEE,MAAC,KAAD;AACE,IAAA,QAAQ,EAAEW,SAAS,CAACiE,IAAV,CACRC,IAAI,IACF,CAAC,CAAC,EAAD,EAAKC,SAAL,EAAgBC,QAAhB,CAAyBjF,MAAM,CAAC+E,IAAI,CAACF,MAAN,CAA/B,CAAD,IACAE,IAAI,CAAChB,EAAL,IAAWa,CAAC,CAACb,EAHP,CADZ;AAME,IAAA,EAAE,EAAEa,CAAC,CAACb,EANR;AAOE,IAAA,SAAS,EAAE,CAPb;AAQE,IAAA,IAAI,EAAEa,CAAC,CAACC,MARV;AASE,IAAA,QAAQ,EAAEK,oBATZ;AAUE,IAAA,IAAI,EAAC,MAVP;AAWE,IAAA,KAAK,EACHlF,MAAM,CAACmF,WAAP,IAAsBP,CAAC,CAACb,EAAxB,GACI;AAAEqB,MAAAA,eAAe,EAAE;AAAnB,KADJ,GAEI,EAdR;AAgBE,IAAA,KAAK,EAAEpF,MAAM,CAAC4E,CAAC,CAACC,MAAH,CAAN,IAAoB,EAhB7B;AAiBE,IAAA,QAAQ,EAAE9D;AAjBZ,IAFF,EAqBE;AAAK,IAAA,KAAK,EAAE;AAAEsE,MAAAA,KAAK,EAAE,OAAT;AAAkBd,MAAAA,UAAU,EAAE;AAA9B,KAAZ;AAAA,kDA4BCvF,YA5BD,EAgCCA,YAhCD,EAuDCA,YAvDD,EA+DNgB,MAAM,CAACyB,KAAP,GAAgB,eAAhB,GAAkC,0BA/D5B;AAAA,KACE,MAAC,OAAD;AACE,IAAA,IAAI,EAAC,IADP;AAEE,IAAA,KAAK,EAAC,OAFR;AAGE,IAAA,YAAY,EACVzB,MAAM,CAACmF,WAAP,IAAsBP,CAAC,CAACb,EAAxB,IAA8BhD;AAJlC,IADF,CArBF,CADF,CA5MJ,EA8OE;AAAA,kDAgBO/B,YAhBP,EAoBOA,YApBP,EA2COA,YA3CP,EAmDAgB,MAAM,CAACyB,KAAP,GAAgB,eAAhB,GAAkC,0BAnDlC,aAAe;AAAf,KACE,MAAC,MAAD;AACE,IAAA,KAAK,EAAC,WADR;AAEE,IAAA,IAAI,EAAC,QAFP;AAGE,IAAA,QAAQ,EAAEnC,OAHZ;AAIE,IAAA,KAAK,EAAE;AAAEmF,MAAAA,KAAK,EAAE;AAAT,KAJT;AAKE,IAAA,OAAO,EAAEnF;AALX,iBADF,CA9OF,CADF,CAVF,CADF;AAAA;AAAA,cA0QeN,YA1Qf,EA8QeA,YA9Qf,EAqSeA,YArSf,EA6SQgB,MAAM,CAACyB,KAAP,GAAgB,eAAhB,GAAkC,0BA7S1C;AAAA,4BA0QezC,YA1Qf,0CA8QeA,YA9Qf,2SAqSeA,YArSf,4FA6SQgB,MAAM,CAACyB,KAAP,GAAgB,eAAhB,GAAkC,0BA7S1C;;yFAAA,EADF;AAmTD,CA3nBD;;AA6nBA,eAAe9D,QAAQ,CAACc,YAAD,EAAe,IAAf,CAAvB","sourcesContent":["import FormGroup from '~/components/layout/AuthModal/FormGroup'\nimport Label from '~/components/Form/Label'\nimport Input from '~/components/layout/AuthModal/Input'\nimport React, { useContext, useEffect, useState } from 'react'\nimport withAuth from '~/components/withAuth'\nimport { IS_PRODUCTION } from \"~/constants/constants\";\nimport UserContext from \"~/contexts/UserContext\";\nimport Select from \"~/components/Select/Select\";\nimport Loading from \"~/components/Loading/Loading\";\nimport Button from \"~/components/button\";\nimport InvalidFeedback from \"~/components/Form/InvalidFeedback\";\nimport { GoSearch } from 'react-icons/go';\nimport Color from 'color'\nimport { ThemeContext } from 'styled-components'\nimport Flatpickr from \"react-flatpickr\";\nimport { CONFIG } from \"~/config\";\nimport NameProject from \"~/components/NameProject\";\nimport { es } from \"flatpickr/dist/l10n/es.js\"\n\nconst UserDataForm = ({ api, layoutProps, handleSubmit, formData, setFormData }) => {\n\n  const theme = useContext(ThemeContext);\n  const primaryColor = Color(theme.colors.primary)\n    .hsl()\n    .string();\n\n  const requireds = IS_PRODUCTION;\n\n  const [loading, setLoading] = useState(false);\n  const [date, setDate] = useState({\n    birthdate: null\n  });\n  let minDate = new Date().getFullYear() - 18;\n  const [initialDate, setinitialDate] = useState(`${minDate}-12-31`);\n\n  const [values, setValues] = useState({\n    name: \"\",\n    gender_id: \"\",\n    document: \"\",\n    nickname: \"\",\n    birthdate: \"\",\n    registration: \"\",\n    isPartner: \"\",\n    birth_of_date: \"\",\n    abonado: \"\"\n  });\n\n  const { user } = useContext(UserContext);\n  const [genders, setGenders] = useState();\n  const [discounts, setDiscounts] = useState(false);\n  const [blockDiscountFields, setBlockDiscountFields] = useState(false);\n  const [error, setError] = useState();\n\n  /* get genders */\n  useEffect(_ => {\n    (async _ => {\n      const { data } = await api.get(\"genders\");\n      setGenders(data);\n    })();\n  }, []);\n\n  useEffect(() => {\n    if (user) {\n      setDate({\n        ...date,\n        birthdate: new Date()\n      });\n\n      if (Object.values(formData).length == 0) {\n        setValues({\n          ...values,\n          name: user.name,\n          gender_id: user.gender_id,\n          document: user.document,\n          nickname: user.nickname,\n          birthdate: user.birthdate,\n          registration: user.registration,\n          isPartner: user.is_partner,\n          abonado: null,\n          terms: user.terms,\n          messageismiembro: \"\",\n          abonado_select: null\n        });\n      } else {\n        setValues({\n          ...formData,\n          name: formData.name,\n          gender_id: formData.gender_id,\n          document: formData.document,\n          nickname: formData.nickname,\n          birthdate: formData.birthdate,\n          registration: formData.registration,\n          isPartner: formData.is_partner,\n          abonado: null,\n          terms: formData.terms,\n          messageismiembro: \"\",\n          abonado_select: null\n        });\n      }\n      // setValues({\n      //   ...values,\n      // name: user.name,\n      // gender_id: user.gender_id,\n      // document: user.document,\n      // nickname: user.nickname,\n      // birthdate: user.birthdate,\n      // registration: user.registration,\n      // isPartner: user.is_partner,\n      // abonado: null,\n      // terms: user.terms,\n      // messageismiembro: \"\",\n      // abonado_select: null\n      // });\n    }\n  }, [user]);\n\n  /* fill user form */\n  // useEffect(\n  //   _ => {\n  //     if (user) {\n  //       setDate({\n  //         ...date,\n  //         birthdate: new Date()\n  //       });\n  //       setValues({\n  //         ...values,\n  //         name: user.name,\n  //         gender_id: user.gender_id,\n  //         document: user.document,\n  //         nickname: user.nickname,\n  //         birthdate: user.birthdate,\n  //         registration: user.registration,\n  //         isPartner: user.is_partner,\n  //         abonado: null,\n  //         terms: user.terms,\n  //         messageismiembro: \"\",\n  //         abonado_select: null\n  //       });\n  //     }\n  //   },\n  //   [user]\n  // );\n\n  // console.log(`\\n\\nuser -- ${JSON.stringify(user)}\\n\\n`);\n\n  useEffect(() => {\n    if (Object.values(formData).filter(x => x != null).length > 0) {\n      console.log(`\\n\\n\\nAqui o formData -- ${JSON.stringify(formData)}\\n\\n\\n`);\n\n      for (let key in formData) {\n        if (values.hasOwnProperty(key) && values[key] != null) {\n          values[key] = formData[key];\n        }\n      }\n\n    }\n  }, [values])\n\n  const handleInputChange = e => {\n\n    const { checked, name, value, type } = e.target;\n\n    setValues({\n      ...values,\n      [name]:\n        type === \"checkbox\"\n          ? checked\n            ? value === \"true\"\n              ? true\n              : value\n            : false\n          : value\n    });\n    setFormData({\n      ...values,\n      [name]:\n        type === \"checkbox\"\n          ? checked\n            ? value === \"true\"\n              ? true\n              : value\n            : false\n          : value\n    }\n    );\n  };\n\n  const submit = async e => {\n    e.preventDefault();\n\n    setLoading(true);\n\n    try {\n      let userData = {\n        name: values.name,\n        gender_id: values.gender_id,\n        document: values.document,\n        email: user.email,\n        nickname: values.nickname,\n        registration: values.registration,\n        birthdate: date.birthdate,\n        is_partner: values.isPartner,\n        abonado: values.terms ? values.abonado_select : null,\n        terms: values.terms,\n        messageismiembro: \"\",\n        abona_select: null\n      };\n      if (\n        userData.abonado == \"undefined\" ||\n        (userData.abonado == null && values.terms == true)\n      ) {\n        setError({\n          errors: {\n            abonado: \"Código no encontrado\"\n          }\n        });\n        setValues({\n          name: values.name,\n          gender_id: values.gender_id,\n          document: values.document,\n          email: user.email,\n          nickname: values.nickname,\n          registration: values.registration,\n          birthdate: date.birthdate,\n          is_partner: values.isPartner,\n          abonado: \"\",\n          terms: false,\n          messageismiembro: \"\"\n        });\n        setLoading(false);\n      } else {\n        setError();\n\n        const res = await api.post(`register/complete-user`, userData);\n\n        setFormData({ ...values });\n\n        console.log(`\\n\\n\\nAqui o userData -- ${JSON.stringify(userData)}\\n\\n\\n`);\n\n        handleSubmit(1, userData);\n      }\n    } catch (error) {\n      if (error.response) {\n        const { data, status } = error.response;\n        if (status === 422) {\n          setError(data);\n        }\n      } else if (error.request) {\n        setError(error);\n      } else {\n        setError(error);\n      }\n    } finally {\n      setLoading(false);\n    }\n\n  };\n\n  const submitCod = async e => {\n    e.preventDefault();\n\n    setLoading(true);\n\n    try {\n      let params = {\n        abonado: values.abonado\n      };\n\n      const res = await api.get(`register/search-cod/` + params.abonado);\n      if (!res.data.status && values.terms == true) {\n        setError({\n          errors: {\n            abonado: \"Código no encontrado\"\n          }\n        });\n        setValues({\n          name: values.name,\n          gender_id: values.gender_id,\n          document: values.document,\n          email: user.email,\n          nickname: values.nickname,\n          registration: values.registration,\n          birthdate: date.birthdate,\n          is_partner: values.isPartner,\n          abonado: null,\n          terms: false,\n          messageismiembro: \"\"\n        });\n        setLoading(false);\n      } else {\n        setError();\n        setValues({\n          name: values.name,\n          gender_id: values.gender_id,\n          document: values.document,\n          email: user.email,\n          nickname: values.nickname,\n          registration: values.registration,\n          birthdate: date.birthdate,\n          is_partner: values.isPartner,\n          abonado_select: res.data.message,\n          terms: true,\n          messageismiembro: res.data.message\n        });\n        setLoading(false);\n      }\n    } catch (error) {\n      if (error.response) {\n        const { data, status } = error.response;\n        if (status === 422) {\n          setError(data);\n        }\n      } else if (error.request) {\n        setError(error);\n      } else {\n        setError(error);\n      }\n    }\n  };\n\n  function appName() {\n    if (CONFIG.projectName) {\n      return (\n        <div style={{ display: \"inline-block\" }}>\n          <strong className=\"text-primary\">\n            {CONFIG.projectName.split(\" \")[0]}\n          </strong>\n          {CONFIG.projectName.split(\" \")[1]}\n        </div>\n      );\n    } else if (CONFIG.appName) {\n      return (\n        <div style={{ display: \"inline-block\" }}>\n          <strong className=\"text-primary\">\n            {CONFIG.appName.split(\" \")[0]}\n          </strong>\n          {CONFIG.appName.split(\" \")[1]}\n        </div>\n      );\n    }\n    return (\n      <div style={{ display: \"inline-block\" }}>\n        <strong className=\"text-primary\">Project</strong>Name!\n      </div>\n    );\n  }\n\n  return (\n    <form method=\"post\" onSubmit={submit}>\n      <div className=\"register-confirm container text-center\">\n\n        <h2 className=\"card-title text-center\">\n          <span className={\"text-primary\"}>¡</span>Sé parte de {<NameProject />}<span className={\"text-primary\"}>!</span>\n        </h2>\n\n        <div className={\"card-subtitle\"}>\n          ¡Antes de seguir, queremos saber más de ti!\n        </div>\n\n        <div className=\"row\">\n          <div className=\"col-md-12\" style={{ padding: 0 }}>\n            <div className=\"row\">\n              <div className=\"col-md-6\">\n                <FormGroup>\n                  <Label htmlFor=\"name\">Nombre completo</Label>\n                  <Input\n                    id=\"name\"\n                    name=\"name\"\n                    value={formData.name || values.name}\n                    onChange={handleInputChange}\n                  />\n                  <InvalidFeedback\n                    error={error}\n                    loading={loading}\n                    name=\"name\"\n                  />\n                </FormGroup>\n              </div>\n              <div className=\"col-md-6\">\n                <FormGroup>\n                  <Label htmlFor=\"gender_id\">Género</Label>\n                  <Select\n                    id=\"gender_id\"\n                    name=\"gender_id\"\n                    required={requireds}\n                    onChange={handleInputChange}\n                    value={formData.gender_id || values.gender_id}\n                  >\n                    {!genders ? (\n                      <option disabled value=\"\">\n                        Cargando...\n                      </option>\n                    ) : genders.length ? (\n                      <>\n                        <option disabled value=\"\">\n                          Selecciona tu género\n                        </option>\n                        {genders.map((genre, key) => (\n                          <option {...{ key }} value={genre.id}>\n                            {genre.name}\n                          </option>\n                        ))}\n                      </>\n                    ) : (\n                          <option disabled value=\"\">\n                            Incapaz de cargar géneros\n                      </option>\n                        )}\n                  </Select>\n                  <InvalidFeedback\n                    error={error}\n                    loading={loading}\n                    name=\"gender_id\"\n                  />\n                </FormGroup>\n              </div>\n              <div className=\"col-md-6\">\n                <FormGroup>\n                  <Label htmlFor=\"name\">Apellidos</Label>\n                  <Input\n                    id=\"nickname\"\n                    name=\"nickname\"\n                    value={formData.nickname || values.nickname}\n                    onChange={handleInputChange}\n                  />\n                  <InvalidFeedback\n                    error={error}\n                    loading={loading}\n                    name=\"nickname\"\n                  />\n                </FormGroup>\n              </div>\n\n              <div className=\"col-md-6\">\n                <FormGroup>\n                  <Label htmlFor=\"birth\">Fecha de nacimiento</Label>\n                  <Flatpickr\n                    id=\"birthdate\"\n                    name=\" birthdate\"\n                    options={{\n                      altInput: \"true\",\n                      altFormat: \"d-m-y\",\n                      dateFormat: \"Y-m-d\",\n                      locale: \"es\",\n                      maxDate: initialDate\n                    }}\n                    onChange={birthdate => {\n                      setDate({ birthdate: birthdate });\n                    }}\n                    value={formData.birth_of_date}\n                    className={\"form-control\"}\n                  />\n                  <InvalidFeedback\n                    error={error}\n                    loading={loading}\n                    name=\"birthdate\"\n                  />\n                </FormGroup>\n              </div>\n\n              <div className=\"col-md-6 \">\n                <FormGroup>\n                  <Label htmlFor=\"document\">Documento</Label>\n                  <Input\n                    id=\"document\"\n                    name=\"document\"\n                    onChange={handleInputChange}\n                    required={requireds}\n                    type=\"text\"\n                    value={formData.document || values.document}\n                  />\n                  <InvalidFeedback\n                    error={error}\n                    loading={loading}\n                    name=\"document\"\n                  />\n                </FormGroup>\n              </div>\n              {/* </div> */}\n              <div className=\"col-md-6\">\n                <Label></Label>\n                <FormGroup>\n                  <label className=\"terms\">\n                    <input\n                      checked={formData.terms || values.terms}\n                      name=\"terms\"\n                      onChange={handleInputChange}\n                      type=\"checkbox\"\n                      value={`true`}\n                    />\n                    <span style={{ paddingLeft: \"10px\" }}>\n                      Miembro del Club\n                    </span>\n                  </label>\n                  <InvalidFeedback\n                    error={error}\n                    loading={loading}\n                    name=\"terms\"\n                  />\n                </FormGroup>\n                <InvalidFeedback\n                  error={error}\n                  loading={loading}\n                  name=\"abonado\"\n                />\n\n                <div className=\"is-miembro \">\n                  <FormGroup>\n                    <Label htmlFor=\"document\">\n                      Abonado\n                      <span className=\"miembro-encontrado\">\n                        : {formData.messageismiembro || values.messageismiembro}\n                      </span>\n                    </Label>\n\n                    <div\n                      style={{\n                        display: \"flex\",\n                        alignItems: \"baseline\",\n                        paddingTop: \" 1px\"\n                      }}\n                    >\n                      <Input\n                        id=\"abonado\"\n                        name=\"abonado\"\n                        onChange={handleInputChange}\n                        type=\"text\"\n                        value={formData.abonado || values.abonado}\n                      />\n\n                      <Button\n                        style={{}}\n                        fontSize=\"14px!important\"\n                        color=\"secondary\"\n                        onClick={submitCod}\n                        disabled={loading}\n                        loading={loading}\n                      >\n                        <div\n                          style={{\n                            padding: \"0px\",\n                            fontSize: \"14px!important\",\n                            width: \"19px\",\n                            height: \"16px\"\n                          }}\n                        >\n                          <GoSearch\n                            style={{\n                              size: \"10px\",\n                              fontSize: \"14px!important\",\n                              padding: \"padding: 12px 16px 7px 16px!importan\"\n                            }}\n                            fontSize={14}\n                            padding={0}\n                          />\n                        </div>\n                      </Button>\n                    </div>\n                  </FormGroup>\n                </div>\n              </div>\n            </div>\n\n            {discounts &&\n              discounts.map(d => (\n                <FormGroup key={d.id}>\n                  <Label htmlFor={d.dsc_id}>{d.name}</Label>\n                  <Input\n                    disabled={discounts.find(\n                      disc =>\n                        ![\"\", undefined].includes(values[disc.dsc_id]) &&\n                        disc.id != d.id\n                    )}\n                    id={d.id}\n                    maxLength={5}\n                    name={d.dsc_id}\n                    onChange={handleDiscountChange}\n                    type=\"text\"\n                    style={\n                      values.discount_id == d.id\n                        ? { backgroundColor: \"rgb(206, 249, 206)\" }\n                        : {}\n                    }\n                    value={values[d.dsc_id] || \"\"}\n                    readOnly={blockDiscountFields}\n                  />\n                  <div style={{ float: \"right\", paddingTop: \"10px\" }}>\n                    <Loading\n                      size=\"20\"\n                      color=\"white\"\n                      loadingState={\n                        values.discount_id == d.id && blockDiscountFields\n                      }\n                    />\n                  </div>\n                </FormGroup>\n              ))}\n\n            <div className=\"text-center\">\n              <Button\n                color=\"secondary\"\n                type=\"submit\"\n                disabled={loading}\n                style={{ width: \"150px\" }}\n                loading={loading}\n              >\n                Siguiente\n              </Button>\n            </div>\n          </div>\n        </div>\n      </div>\n      <style jsx global={true}>{`\n        .text-primary {\n          color: ${primaryColor} !important;\n        }\n\n        strong.text-primary {\n          color: ${primaryColor} !important;\n        }\n\n        h2.card-title {\n          font-weight: normal;\n          color: #000;\n          margin-bottom: 1em;\n          font-size: 1.7em;\n        }\n        .pes {\n          display: flex;\n        }\n        div.card-subtitle {\n          font-size: 1.1em;\n          font-weight: 500;\n          margin-bottom: 2.5em;\n        }\n\n        .miembro-encontrado {\n          color: green;\n        }\n\n        .text-primary {\n          color: ${primaryColor} !important;\n        }\n        .register-confirm {\n          padding-top: 0;\n          padding-bottom: 0;\n          color: #666666;\n        }\n        .is-miembro {\n          ${values.terms ? `display:block` : `display:none!important; `}\n        }\n      `}</style>\n    </form>\n  );\n};\n\nexport default withAuth(UserDataForm, true);\n"]},"metadata":{},"sourceType":"module"}