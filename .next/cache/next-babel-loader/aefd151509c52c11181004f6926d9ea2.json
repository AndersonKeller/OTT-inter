{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n// next imports\nimport Head from 'next/head'; // react imports\n\nimport { useEffect, useState, useContext } from 'react'; // app imports\n\nimport Layout from '../components/layout/Layout';\nimport { CONFIG } from '../config';\nimport api from '../services/api';\nimport Loading from '../components/Loading/Loading';\nimport MediaList from '../components/MediaList/MediaList';\nimport Button from '../components/button';\nimport UserContext from '../contexts/UserContext';\nimport Router from 'next/router'; // wishlist page\n\nvar WishlistPage = function WishlistPage(_ref) {\n  var layoutProps = _ref.layoutProps;\n\n  var _useState = useState(),\n      medias = _useState[0],\n      setMedias = _useState[1];\n\n  var _useState2 = useState(true),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState(),\n      error = _useState3[0],\n      setError = _useState3[1];\n\n  var _useContext = useContext(UserContext),\n      user = _useContext.user;\n  /* temporarily handle user presence */\n\n\n  useEffect(function (_) {\n    var timeout = setTimeout(function (_) {\n      if (!user) {\n        Router.push('/login');\n      }\n    }, 1000);\n    return function cleanup() {\n      clearTimeout(timeout);\n    };\n  }, [user]);\n\n  var fetchData = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_) {\n      var _yield$api$get, _medias;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setLoading(true);\n              _context.prev = 1;\n              _context.next = 4;\n              return api().get('/wishlist');\n\n            case 4:\n              _yield$api$get = _context.sent;\n              _medias = _yield$api$get.data;\n              setMedias(_medias);\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](1);\n              setError(500);\n\n            case 12:\n              setLoading(false);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 9]]);\n    }));\n\n    return function fetchData(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function (_) {\n    fetchData();\n  }, []);\n  return __jsx(Layout, layoutProps, __jsx(Head, null, __jsx(\"title\", {\n    className: \"jsx-373446342\"\n  }, \"Mi lista < \", CONFIG.appName)), __jsx(\"div\", {\n    className: \"jsx-373446342\" + \" \" + \"container-fluid\"\n  }, __jsx(\"div\", {\n    className: \"jsx-373446342\" + \" \" + \"row\"\n  }, __jsx(\"div\", {\n    className: \"jsx-373446342\" + \" \" + \"col-md-10 offset-md-1\"\n  }, __jsx(\"header\", {\n    className: \"jsx-373446342\"\n  }, __jsx(\"h1\", {\n    className: \"jsx-373446342\" + \" \" + \"h2\"\n  }, \"Mi lista\")), __jsx(Loading, {\n    loadingState: loading\n  }), !loading && medias && medias.length === 0 && __jsx(\"div\", {\n    className: \"jsx-373446342\"\n  }, __jsx(\"div\", {\n    className: \"jsx-373446342\" + \" \" + \"info\"\n  }, __jsx(\"p\", {\n    className: \"jsx-373446342\"\n  }, \"A\\xFAn no hay videos en tu lista.\")), __jsx(Button, {\n    href: \"/movies\"\n  }, \"Agregar videos\")), !loading && error && !medias && __jsx(\"p\", {\n    className: \"jsx-373446342\"\n  }, error), !loading && !error && medias && medias.length >= 1 && __jsx(MediaList, {\n    medias: medias,\n    wishlist: true\n  })))), __jsx(_JSXStyle, {\n    id: \"373446342\"\n  }, [\"header.jsx-373446342{padding-top:15px;}\", \".h2.jsx-373446342{margin-bottom:30px;}\", \".info.jsx-373446342{margin-bottom:30px;}\", \"@media (min-width:768px){header.jsx-373446342{padding-top:30px;}}\"]));\n};\n\nexport default WishlistPage;","map":{"version":3,"sources":["/Users/rafael/Projects/somosgad/dale/pages/wishlist.js"],"names":["Head","useEffect","useState","useContext","Layout","CONFIG","api","Loading","MediaList","Button","UserContext","Router","WishlistPage","layoutProps","medias","setMedias","loading","setLoading","error","setError","user","_","timeout","setTimeout","push","cleanup","clearTimeout","fetchData","get","data","appName","length","wishlist"],"mappings":"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","sourcesContent":["// next imports\nimport Head from 'next/head'\n\n// react imports\nimport { useEffect, useState, useContext } from 'react'\n\n// app imports\nimport Layout from '../components/layout/Layout'\nimport { CONFIG } from '../config'\nimport api from '../services/api'\nimport Loading from '../components/Loading/Loading'\nimport MediaList from '../components/MediaList/MediaList'\nimport Button from '../components/button'\nimport UserContext from '../contexts/UserContext'\nimport Router from 'next/router'\n\n// wishlist page\nconst WishlistPage = ({layoutProps}) => {\n\n  const [medias, setMedias] = useState()\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState()\n  const {user} = useContext(UserContext)\n\n  /* temporarily handle user presence */\n  useEffect(_ => {\n    const timeout = setTimeout(_ => {\n      if ( ! user) {\n        Router.push('/login')\n      }\n    }, 1000)\n    return function cleanup() {\n      clearTimeout(timeout)\n    }\n  }, [user])\n\n  const fetchData = async _ => {\n    setLoading(true)\n    try {\n      const {data: medias} = await api().get('/wishlist')\n      setMedias(medias);\n    } catch (e) {\n      setError(500)\n    }\n    setLoading(false)\n  }\n\n  useEffect( _ => { fetchData() }, [])\n\n  return (\n    <Layout {...layoutProps}>\n      <Head>\n        <title>Mi lista &lt; {CONFIG.appName}</title>\n      </Head>\n      <div className=\"container-fluid\">\n        <div className=\"row\">\n          <div className=\"col-md-10 offset-md-1\">\n\n            {/* heading */}\n            <header>\n              <h1 className=\"h2\">Mi lista</h1>\n            </header>\n\n            {/* loading */}\n            <Loading loadingState={loading} />\n\n            {/* empty msg */}\n            { ! loading && medias && medias.length === 0 && (\n              <div>\n                <div className=\"info\">\n                  <p>AÃºn no hay videos en tu lista.</p>\n                </div>\n                <Button href=\"/movies\">Agregar videos</Button>\n              </div>\n            ) }\n\n            {/* error msg */}\n            { ! loading && error && ! medias && (\n              <p>{error}</p>\n            ) }\n\n            {/* media list */}\n            { ! loading && ! error && medias && medias.length >= 1 && (\n              <MediaList {...{medias, wishlist: true}} />\n            ) }\n\n          </div>\n        </div>\n      </div>\n      <style jsx>{`\n        header {\n          padding-top: 15px;\n        }\n        .h2 {\n          margin-bottom: 30px;\n        }\n        .info {\n          margin-bottom: 30px;\n        }\n        @media (min-width: 768px) {\n          header {\n            padding-top: 30px;\n          }\n        }\n      `}</style>\n    </Layout>\n  );\n}\n\nexport default WishlistPage\n\n"]},"metadata":{},"sourceType":"module"}