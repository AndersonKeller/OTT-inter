{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n// next\nimport Router from 'next/router';\nimport Head from 'next/head'; // react\n\nimport nookies from 'nookies'; //components\n\nimport Layout from '~/components/layout/Layout';\nimport UserForm from '~/components/form-user';\nimport withAuth from '~/components/withAuth';\nimport api from '~/services/api';\nimport { CONFIG } from '~/config';\n\nvar userDataPage = function userDataPage(_ref) {\n  var layoutProps = _ref.layoutProps,\n      user = _ref.user,\n      updateUser = _ref.updateUser;\n\n  var initialValues = function (_ref2) {\n    var gender = _ref2.gender_id,\n        country = _ref2.country_id,\n        data = _objectWithoutProperties(_ref2, [\"gender_id\", \"country_id\"]);\n\n    return _objectSpread({\n      gender: gender,\n      country: country\n    }, data);\n  }(user);\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(fields, actions) {\n      var msg, res, _ref4, message;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              msg = '';\n              _context.prev = 1;\n              _context.next = 4;\n              return api().post(\"user/\".concat(user.id), fields);\n\n            case 4:\n              res = _context.sent;\n              updateUser(res.data);\n              msg = JSON.stringify({\n                success: \"Cambio de datos completo.\"\n              });\n              _context.next = 13;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](1);\n              _ref4 = _context.t0.message ? _context.t0 : _context.t0.response ? _context.t0.response.data : '', message = _ref4.message;\n              msg = JSON.stringify({\n                error: \"An Error Occured while updating: \" + message\n              });\n\n            case 13:\n              _context.prev = 13;\n              nookies.set({}, 'flash_message', msg, {\n                path: '/'\n              });\n              Router.push('/user/account');\n              return _context.finish(13);\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 9, 13, 17]]);\n    }));\n\n    return function handleSubmit(_x, _x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(Layout, layoutProps, __jsx(Head, null, __jsx(\"title\", {\n    className: \"jsx-2618477860\"\n  }, \"Mi Cuenta < \", CONFIG.appName)), __jsx(\"div\", {\n    className: \"jsx-2618477860\" + \" \" + \"rgpage container-fluid\"\n  }, __jsx(\"div\", {\n    className: \"jsx-2618477860\" + \" \" + \"row\"\n  }, __jsx(\"div\", {\n    className: \"jsx-2618477860\" + \" \" + \"col-xl-8 offset-xl-2\"\n  }, __jsx(\"h1\", {\n    className: \"jsx-2618477860\" + \" \" + \"h2\"\n  }, \"Datos Personales\"), __jsx(\"hr\", {\n    className: \"jsx-2618477860\"\n  }), user && __jsx(UserForm, _extends({\n    handleSubmit: handleSubmit,\n    initialValues: initialValues\n  }, {\n    button: true\n  }))))), __jsx(_JSXStyle, {\n    id: \"2618477860\"\n  }, \".rgpage.jsx-2618477860{padding-top:40px;padding-bottom:120px;}.h2.jsx-2618477860{margin-bottom:10px;}.h3{font-size:20px;font-weight:bold;margin-bottom:10px;}hr.jsx-2618477860{margin-top:25px;margin-bottom:15px;background-color:white;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9yYWZhZWwvUHJvamVjdHMvc29tb3NnYWQvZGFsZS9wYWdlcy91c2VyL2RhdGEuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBcURrQixBQUc0QixBQUlFLEFBR0osQUFLQyxlQUpDLENBS0UsQ0FaRSxFQUl2QixhQUlxQixHQUtJLEdBWnpCLGFBUUEsT0FLQSIsImZpbGUiOiIvVXNlcnMvcmFmYWVsL1Byb2plY3RzL3NvbW9zZ2FkL2RhbGUvcGFnZXMvdXNlci9kYXRhLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gbmV4dFxuaW1wb3J0IFJvdXRlciBmcm9tICduZXh0L3JvdXRlcidcbmltcG9ydCBIZWFkICAgZnJvbSAnbmV4dC9oZWFkJ1xuXG4vLyByZWFjdFxuaW1wb3J0IG5vb2tpZXMgIGZyb20gJ25vb2tpZXMnXG5cbi8vY29tcG9uZW50c1xuaW1wb3J0IExheW91dCAgICAgICBmcm9tICd+L2NvbXBvbmVudHMvbGF5b3V0L0xheW91dCdcbmltcG9ydCBVc2VyRm9ybSAgICAgZnJvbSAnfi9jb21wb25lbnRzL2Zvcm0tdXNlcidcbmltcG9ydCB3aXRoQXV0aCAgICAgZnJvbSAnfi9jb21wb25lbnRzL3dpdGhBdXRoJ1xuaW1wb3J0IGFwaSAgICAgICAgICBmcm9tICd+L3NlcnZpY2VzL2FwaSdcbmltcG9ydCB7IENPTkZJRyB9ICAgZnJvbSAnfi9jb25maWcnXG5cbmNvbnN0IHVzZXJEYXRhUGFnZSA9ICh7IGxheW91dFByb3BzLCB1c2VyLCB1cGRhdGVVc2VyIH0pID0+IHtcblxuICBjb25zdCBpbml0aWFsVmFsdWVzID0gKCh7Z2VuZGVyX2lkOiBnZW5kZXIsIGNvdW50cnlfaWQ6IGNvdW50cnksIC4uLmRhdGF9KSA9PiB7XG4gICAgcmV0dXJuIHtnZW5kZXIsIGNvdW50cnksIC4uLmRhdGF9fSkodXNlcilcblxuICBjb25zdCBoYW5kbGVTdWJtaXQgPSBhc3luYyAgKGZpZWxkcywgYWN0aW9ucykgPT4ge1xuICAgIHZhciBtc2cgPSAnJ1xuXG4gICAgdHJ5e1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXBpKCkucG9zdChgdXNlci8ke3VzZXIuaWR9YCwgZmllbGRzKVxuICAgICAgdXBkYXRlVXNlcihyZXMuZGF0YSlcbiAgICAgIG1zZyA9IEpTT04uc3RyaW5naWZ5KHsgc3VjY2VzczogXCJDYW1iaW8gZGUgZGF0b3MgY29tcGxldG8uXCIgfSlcblxuICAgIH1jYXRjaChlcnJvcikge1xuICAgICAgdmFyIHsgbWVzc2FnZSB9ID0gZXJyb3IubWVzc2FnZSA/IGVycm9yIDogZXJyb3IucmVzcG9uc2UgPyBlcnJvci5yZXNwb25zZS5kYXRhIDogJydcbiAgICAgIG1zZyA9IEpTT04uc3RyaW5naWZ5KHsgZXJyb3I6IFwiQW4gRXJyb3IgT2NjdXJlZCB3aGlsZSB1cGRhdGluZzogXCIgKyBtZXNzYWdlIH0pXG5cbiAgICB9ZmluYWxseXtcbiAgICAgIG5vb2tpZXMuc2V0KHt9LCAnZmxhc2hfbWVzc2FnZScsIG1zZyAsIHsgcGF0aDogJy8nIH0pXG4gICAgICBSb3V0ZXIucHVzaCgnL3VzZXIvYWNjb3VudCcpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8TGF5b3V0IHsuLi5sYXlvdXRQcm9wc30+XG4gICAgICA8SGVhZD5cbiAgICAgICAgPHRpdGxlPk1pIEN1ZW50YSAmbHQ7IHtDT05GSUcuYXBwTmFtZX08L3RpdGxlPlxuICAgICAgPC9IZWFkPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZ3BhZ2UgY29udGFpbmVyLWZsdWlkXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wteGwtOCBvZmZzZXQteGwtMlwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImgyXCI+RGF0b3MgUGVyc29uYWxlczwvaDE+XG4gICAgICAgICAgICA8aHIgLz5cbiAgICAgICAgICAgICAge3VzZXIgJiZcbiAgICAgICAgICAgICAgICA8VXNlckZvcm0gey4uLntoYW5kbGVTdWJtaXQsIGluaXRpYWxWYWx1ZXN9fSBidXR0b24gLz5cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAucmdwYWdlIHtcbiAgICAgICAgICBwYWRkaW5nLXRvcDogNDBweDtcbiAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLmgyIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgICAgICB9XG4gICAgICAgIDpnbG9iYWwoLmgzKSB7XG4gICAgICAgICAgZm9udC1zaXplOiAyMHB4O1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICAgIH1cbiAgICAgICAgaHIge1xuICAgICAgICAgIG1hcmdpbi10b3A6IDI1cHg7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgICAgICAgfVxuICAgICAgYH08L3N0eWxlPlxuICAgIDwvTGF5b3V0PlxuICApO1xufVxuXG5leHBvcnQgZGVmYXVsdCB3aXRoQXV0aCh1c2VyRGF0YVBhZ2UpXG4iXX0= */\\n/*@ sourceURL=/Users/rafael/Projects/somosgad/dale/pages/user/data.js */\"));\n};\n\nexport default withAuth(userDataPage);","map":{"version":3,"sources":["/Users/rafael/Projects/somosgad/dale/pages/user/data.js"],"names":["Router","Head","nookies","Layout","UserForm","withAuth","api","CONFIG","userDataPage","layoutProps","user","updateUser","initialValues","gender","gender_id","country","country_id","data","handleSubmit","fields","actions","msg","post","id","res","JSON","stringify","success","message","response","error","set","path","push","appName"],"mappings":";;;;;;;;;;;;;AAAA;AACA,OAAOA,MAAP,MAAmB,aAAnB;AACA,OAAOC,IAAP,MAAmB,WAAnB,C,CAEA;;AACA,OAAOC,OAAP,MAAqB,SAArB,C,CAEA;;AACA,OAAOC,MAAP,MAAyB,4BAAzB;AACA,OAAOC,QAAP,MAAyB,wBAAzB;AACA,OAAOC,QAAP,MAAyB,uBAAzB;AACA,OAAOC,GAAP,MAAyB,gBAAzB;AACA,SAASC,MAAT,QAAyB,UAAzB;;AAEA,IAAMC,YAAY,GAAG,SAAfA,YAAe,OAAuC;AAAA,MAApCC,WAAoC,QAApCA,WAAoC;AAAA,MAAvBC,IAAuB,QAAvBA,IAAuB;AAAA,MAAjBC,UAAiB,QAAjBA,UAAiB;;AAE1D,MAAMC,aAAa,GAAI,iBAAuD;AAAA,QAA1CC,MAA0C,SAArDC,SAAqD;AAAA,QAAtBC,OAAsB,SAAlCC,UAAkC;AAAA,QAAVC,IAAU;;AAC5E;AAAQJ,MAAAA,MAAM,EAANA,MAAR;AAAgBE,MAAAA,OAAO,EAAPA;AAAhB,OAA4BE,IAA5B;AAAkC,GADd,CACgBP,IADhB,CAAtB;;AAGA,MAAMQ,YAAY;AAAA,yEAAG,iBAAQC,MAAR,EAAgBC,OAAhB;AAAA;;AAAA;AAAA;AAAA;AAAA;AACfC,cAAAA,GADe,GACT,EADS;AAAA;AAAA;AAAA,qBAICf,GAAG,GAAGgB,IAAN,gBAAmBZ,IAAI,CAACa,EAAxB,GAA8BJ,MAA9B,CAJD;;AAAA;AAIXK,cAAAA,GAJW;AAKjBb,cAAAA,UAAU,CAACa,GAAG,CAACP,IAAL,CAAV;AACAI,cAAAA,GAAG,GAAGI,IAAI,CAACC,SAAL,CAAe;AAAEC,gBAAAA,OAAO,EAAE;AAAX,eAAf,CAAN;AANiB;AAAA;;AAAA;AAAA;AAAA;AAAA,sBASC,YAAMC,OAAN,iBAAwB,YAAMC,QAAN,GAAiB,YAAMA,QAAN,CAAeZ,IAAhC,GAAuC,EAThE,EASXW,OATW,SASXA,OATW;AAUjBP,cAAAA,GAAG,GAAGI,IAAI,CAACC,SAAL,CAAe;AAAEI,gBAAAA,KAAK,EAAE,sCAAsCF;AAA/C,eAAf,CAAN;;AAViB;AAAA;AAajB1B,cAAAA,OAAO,CAAC6B,GAAR,CAAY,EAAZ,EAAgB,eAAhB,EAAiCV,GAAjC,EAAuC;AAAEW,gBAAAA,IAAI,EAAE;AAAR,eAAvC;AACAhC,cAAAA,MAAM,CAACiC,IAAP,CAAY,eAAZ;AAdiB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAZf,YAAY;AAAA;AAAA;AAAA,KAAlB;;AAkBA,SACE,MAAC,MAAD,EAAYT,WAAZ,EACE,MAAC,IAAD,QACE;AAAA;AAAA,qBAAuBF,MAAM,CAAC2B,OAA9B,CADF,CADF,EAIE;AAAA,wCAAe;AAAf,KACE;AAAA,wCAAe;AAAf,KACE;AAAA,wCAAe;AAAf,KACE;AAAA,wCAAc;AAAd,wBADF,EAEE;AAAA;AAAA,IAFF,EAGKxB,IAAI,IACH,MAAC,QAAD,WAAc;AAACQ,IAAAA,YAAY,EAAZA,YAAD;AAAeN,IAAAA,aAAa,EAAbA;AAAf,GAAd;AAA6C,IAAA,MAAM;AAAnD,KAJN,CADF,CADF,CAJF;AAAA;AAAA,8hHADF;AAqCD,CA5DD;;AA8DA,eAAeP,QAAQ,CAACG,YAAD,CAAvB","sourcesContent":["// next\nimport Router from 'next/router'\nimport Head   from 'next/head'\n\n// react\nimport nookies  from 'nookies'\n\n//components\nimport Layout       from '~/components/layout/Layout'\nimport UserForm     from '~/components/form-user'\nimport withAuth     from '~/components/withAuth'\nimport api          from '~/services/api'\nimport { CONFIG }   from '~/config'\n\nconst userDataPage = ({ layoutProps, user, updateUser }) => {\n\n  const initialValues = (({gender_id: gender, country_id: country, ...data}) => {\n    return {gender, country, ...data}})(user)\n\n  const handleSubmit = async  (fields, actions) => {\n    var msg = ''\n\n    try{\n      const res = await api().post(`user/${user.id}`, fields)\n      updateUser(res.data)\n      msg = JSON.stringify({ success: \"Cambio de datos completo.\" })\n\n    }catch(error) {\n      var { message } = error.message ? error : error.response ? error.response.data : ''\n      msg = JSON.stringify({ error: \"An Error Occured while updating: \" + message })\n\n    }finally{\n      nookies.set({}, 'flash_message', msg , { path: '/' })\n      Router.push('/user/account')\n    }\n  }\n\n  return (\n    <Layout {...layoutProps}>\n      <Head>\n        <title>Mi Cuenta &lt; {CONFIG.appName}</title>\n      </Head>\n      <div className=\"rgpage container-fluid\">\n        <div className=\"row\">\n          <div className=\"col-xl-8 offset-xl-2\">\n            <h1 className=\"h2\">Datos Personales</h1>\n            <hr />\n              {user &&\n                <UserForm {...{handleSubmit, initialValues}} button />\n              }\n          </div>\n        </div>\n      </div>\n      <style jsx>{`\n        .rgpage {\n          padding-top: 40px;\n          padding-bottom: 120px;\n        }\n        .h2 {\n          margin-bottom: 10px;\n        }\n        :global(.h3) {\n          font-size: 20px;\n          font-weight: bold;\n          margin-bottom: 10px;\n        }\n        hr {\n          margin-top: 25px;\n          margin-bottom: 15px;\n          background-color: white;\n        }\n      `}</style>\n    </Layout>\n  );\n}\n\nexport default withAuth(userDataPage)\n"]},"metadata":{},"sourceType":"module"}