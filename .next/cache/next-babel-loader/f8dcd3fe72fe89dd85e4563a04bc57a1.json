{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useEffect, useState } from \"react\";\nimport FormGroup from \"~/components/layout/AuthModal/FormGroup\";\nimport Label from \"~/components/layout/AuthModal/Label\";\nimport Input from \"~/components/layout/AuthModal/Input\";\nimport InputRadio from \"~/components/Form/InputRadio\";\nimport withAuth from \"~/components/withAuth\";\nimport Layout from \"~/components/layout/Layout\";\nimport InvalidFeedback from \"~/components/Form/InvalidFeedback\";\nimport { HAS_WINDOW } from \"~/constants/constants\";\n\nconst Payment = ({\n  layoutProps,\n  api,\n  cash_payment_method_id,\n  error,\n  isCardPayment,\n  isPayUReady,\n  loading,\n  requireds\n}) => {\n  const payUEnv = 'test';\n  const businessUnitPublicKey = '88985036-6530-4b5a-a7ec-c4e07ec07f6c';\n  const POS = ready && HAS_WINDOW ? window.POS : null;\n  const POSStyle = {\n    base: {\n      borderRadius: '.15rem',\n      backgroundColor: 'white',\n      height: 'calc(1.5em + .75rem + 2px)',\n      fontSize: '12px',\n      padding: '0px 3px',\n      marginLeft: '5px',\n      cardImage: {\n        borderTopRightRadius: 0,\n        borderBottomRightRadius: 0,\n        margin: 0\n      },\n      pan: {\n        width: '160px',\n        borderTopLeftRadius: 0,\n        borderBottomLeftRadius: 0,\n        marginLeft: 0\n      },\n      expirationDate: {\n        width: '47px'\n      },\n      secureFields: {\n        left: '40px'\n      },\n      cvv: {\n        width: '35px'\n      }\n    }\n  };\n  useEffect(_ => {\n    if (POS) {\n      POS.setPublicKey(businessUnitPublicKey);\n      POS.setEnvironment(payUEnv);\n      POS.setStyle(POSStyle);\n      POS.setCardNumberPlaceholder('Tarjeta de crédito');\n      POS.setExpirationDatePlaceholder('MM/AA');\n      setIsPayUReady(true);\n    }\n  }, [POS]);\n  /* handle payment method change */\n\n  function onPaymentChange(e) {\n    setValues(_objectSpread(_objectSpread({}, values), {}, {\n      payment_method_id: parseInt(e.target.value, 10),\n      cash_payment_method_id: null\n    }));\n  }\n\n  function onCashPaymentMethodChange(e) {\n    setValues(_objectSpread(_objectSpread({}, values), {}, {\n      cash_payment_method_id: parseInt(e.target.value, 10)\n    }));\n  } // payment methods\n\n\n  const {\n    0: paymentMethods,\n    1: setPaymentMethods\n  } = useState(); // get payment methods\n\n  useEffect(_ => {\n    const getPaymentMethods = async _ => {\n      const {\n        data\n      } = await api.get('payment-methods');\n      setPaymentMethods(data);\n    };\n\n    getPaymentMethods();\n  }, []); // init card secure fields\n\n  useEffect(_ => {\n    if (isPayUReady && isCardPayment) {\n      POS.initSecureFields('card-secure-fields');\n    }\n  }, [isPayUReady, isCardPayment]); // cash payment methods\n\n  const {\n    0: cashPaymentMethods,\n    1: setCashPaymentMethods\n  } = useState(); // get cash payment methods\n\n  useEffect(_ => {\n    const getCashPaymentMethods = async _ => {\n      const {\n        data\n      } = await api.get('cash-payment-methods');\n      setCashPaymentMethods(data);\n    };\n\n    getCashPaymentMethods();\n  }, []);\n  return __jsx(\"div\", {\n    className: \"jsx-2298570347\" + \" \" + \"row\"\n  }, __jsx(\"div\", {\n    className: \"jsx-2298570347\" + \" \" + \"offset-md-2 col-md-8\"\n  }, __jsx(\"h3\", {\n    className: \"jsx-2298570347\" + \" \" + \"h3\"\n  }, \"Pago\"), __jsx(\"div\", {\n    className: \"jsx-2298570347\" + \" \" + \"row\"\n  }, __jsx(\"div\", {\n    className: \"jsx-2298570347\" + \" \" + \"col-md-6\"\n  }, __jsx(FormGroup, null, paymentMethods && paymentMethods.map((paymentMethod, key) => __jsx(InputRadio, {\n    key: key,\n    label: paymentMethod.name,\n    name: \"payment\",\n    onChange: onChange,\n    state: payment_method_id,\n    value: paymentMethod.id\n  })), validationError && __jsx(\"div\", {\n    className: \"jsx-2298570347\" + \" \" + \"invalid-feedback\"\n  }, validationError))), __jsx(\"div\", {\n    className: \"jsx-2298570347\" + \" \" + \"col-md-6\"\n  }, isCardPayment ? __jsx(\"div\", {\n    className: \"jsx-2298570347\" + \" \" + \"card-inputs\"\n  }, __jsx(FormGroup, null, __jsx(Label, {\n    htmlFor: \"cardholder-name\"\n  }, \"Nombre impreso en tarjeta\"), __jsx(Input, {\n    id: \"cardholder-name\",\n    name: \"cardholder-name\",\n    required: requireds,\n    type: \"text\"\n  })), __jsx(FormGroup, null, __jsx(\"div\", {\n    id: \"card-secure-fields\",\n    className: \"jsx-2298570347\"\n  }), __jsx(InvalidFeedback, {\n    error: error,\n    loading: loading,\n    name: \"payment_os\"\n  }))) // cash payment methods\n  : payment_method_id === 3 && __jsx(FormGroup, null, cashPaymentMethods == null ? __jsx(\"p\", {\n    className: \"jsx-2298570347\"\n  }, \"Cargando...\") : cashPaymentMethods.length ? cashPaymentMethods.map((item, key) => __jsx(InputRadio, {\n    key: key,\n    label: item.name,\n    name: \"cash_payment_method_id\",\n    onChange: onCashPaymentMethodChange,\n    state: cash_payment_method_id,\n    value: item.id\n  })) : __jsx(\"p\", {\n    className: \"jsx-2298570347\"\n  }, \"Sin m\\xE9todo de pago configurado.\"), __jsx(InvalidFeedback, {\n    error: error,\n    loading: loading,\n    name: \"cash_payment_method_id\"\n  }))))), __jsx(_JSXStyle, {\n    id: \"2298570347\"\n  }, \"@media (min-width:768px){.card-inputs.jsx-2298570347{margin-top:-21px;}}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9yYWZhZWwvUHJvamVjdHMvc29tb3NnYWQvZGFsZS9wYWdlcy9yZWdpc3Rlci93aXphcmQvcGF5bWVudC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF1TG1CLEFBSThCLGlCQUNuQiIsImZpbGUiOiIvVXNlcnMvcmFmYWVsL1Byb2plY3RzL3NvbW9zZ2FkL2RhbGUvcGFnZXMvcmVnaXN0ZXIvd2l6YXJkL3BheW1lbnQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgRm9ybUdyb3VwIGZyb20gXCJ+L2NvbXBvbmVudHMvbGF5b3V0L0F1dGhNb2RhbC9Gb3JtR3JvdXBcIjtcbmltcG9ydCBMYWJlbCBmcm9tIFwifi9jb21wb25lbnRzL2xheW91dC9BdXRoTW9kYWwvTGFiZWxcIjtcbmltcG9ydCBJbnB1dCBmcm9tIFwifi9jb21wb25lbnRzL2xheW91dC9BdXRoTW9kYWwvSW5wdXRcIjtcbmltcG9ydCBJbnB1dFJhZGlvIGZyb20gXCJ+L2NvbXBvbmVudHMvRm9ybS9JbnB1dFJhZGlvXCI7XG5pbXBvcnQgd2l0aEF1dGggZnJvbSBcIn4vY29tcG9uZW50cy93aXRoQXV0aFwiO1xuaW1wb3J0IExheW91dCBmcm9tIFwifi9jb21wb25lbnRzL2xheW91dC9MYXlvdXRcIjtcbmltcG9ydCBJbnZhbGlkRmVlZGJhY2sgZnJvbSBcIn4vY29tcG9uZW50cy9Gb3JtL0ludmFsaWRGZWVkYmFja1wiXG5pbXBvcnQgeyBIQVNfV0lORE9XIH0gZnJvbSBcIn4vY29uc3RhbnRzL2NvbnN0YW50c1wiO1xuXG5jb25zdCBQYXltZW50ID0gKHtcbiAgICAgICAgICAgICAgICAgICBsYXlvdXRQcm9wcyxcbiAgICAgICAgICAgICAgICAgICBhcGksXG4gICAgICAgICAgICAgICAgICAgY2FzaF9wYXltZW50X21ldGhvZF9pZCxcbiAgICAgICAgICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgICAgICAgICBpc0NhcmRQYXltZW50LFxuICAgICAgICAgICAgICAgICAgIGlzUGF5VVJlYWR5LFxuICAgICAgICAgICAgICAgICAgIGxvYWRpbmcsXG4gICAgICAgICAgICAgICAgICAgcmVxdWlyZWRzLFxuXG4gICAgICAgICAgICAgICAgIH0pID0+IHtcblxuICBjb25zdCBwYXlVRW52ID0gJ3Rlc3QnXG4gIGNvbnN0IGJ1c2luZXNzVW5pdFB1YmxpY0tleSA9ICc4ODk4NTAzNi02NTMwLTRiNWEtYTdlYy1jNGUwN2VjMDdmNmMnXG4gIGNvbnN0IFBPUyA9IHJlYWR5ICYmIEhBU19XSU5ET1cgPyB3aW5kb3cuUE9TIDogbnVsbFxuXG4gIGNvbnN0IFBPU1N0eWxlID0ge1xuICAgIGJhc2U6IHtcbiAgICAgIGJvcmRlclJhZGl1czogJy4xNXJlbScsXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6ICd3aGl0ZScsXG4gICAgICBoZWlnaHQ6ICdjYWxjKDEuNWVtICsgLjc1cmVtICsgMnB4KScsXG4gICAgICBmb250U2l6ZTogJzEycHgnLFxuICAgICAgcGFkZGluZzogJzBweCAzcHgnLFxuICAgICAgbWFyZ2luTGVmdDogJzVweCcsXG4gICAgICBjYXJkSW1hZ2U6IHtcbiAgICAgICAgYm9yZGVyVG9wUmlnaHRSYWRpdXM6IDAsXG4gICAgICAgIGJvcmRlckJvdHRvbVJpZ2h0UmFkaXVzOiAwLFxuICAgICAgICBtYXJnaW46IDAsXG4gICAgICB9LFxuICAgICAgcGFuOiB7XG4gICAgICAgIHdpZHRoOiAnMTYwcHgnLFxuICAgICAgICBib3JkZXJUb3BMZWZ0UmFkaXVzOiAwLFxuICAgICAgICBib3JkZXJCb3R0b21MZWZ0UmFkaXVzOiAwLFxuICAgICAgICBtYXJnaW5MZWZ0OiAwLFxuICAgICAgfSxcbiAgICAgIGV4cGlyYXRpb25EYXRlOiB7IHdpZHRoOiAnNDdweCcgfSxcbiAgICAgIHNlY3VyZUZpZWxkczogeyBsZWZ0OiAnNDBweCcgfSxcbiAgICAgIGN2djogeyB3aWR0aDogJzM1cHgnIH1cbiAgICB9XG4gIH1cblxuXG4gIHVzZUVmZmVjdChfID0+IHtcbiAgICBpZiAoUE9TKSB7XG4gICAgICBQT1Muc2V0UHVibGljS2V5KGJ1c2luZXNzVW5pdFB1YmxpY0tleSlcbiAgICAgIFBPUy5zZXRFbnZpcm9ubWVudChwYXlVRW52KVxuICAgICAgUE9TLnNldFN0eWxlKFBPU1N0eWxlKVxuICAgICAgUE9TLnNldENhcmROdW1iZXJQbGFjZWhvbGRlcignVGFyamV0YSBkZSBjcsOpZGl0bycpXG4gICAgICBQT1Muc2V0RXhwaXJhdGlvbkRhdGVQbGFjZWhvbGRlcignTU0vQUEnKTtcbiAgICAgIHNldElzUGF5VVJlYWR5KHRydWUpXG4gICAgfVxuICB9LCBbUE9TXSlcblxuXG5cbiAgLyogaGFuZGxlIHBheW1lbnQgbWV0aG9kIGNoYW5nZSAqL1xuICBmdW5jdGlvbiBvblBheW1lbnRDaGFuZ2UoZSkge1xuICAgIHNldFZhbHVlcyh7XG4gICAgICAuLi52YWx1ZXMsXG4gICAgICBwYXltZW50X21ldGhvZF9pZDogcGFyc2VJbnQoZS50YXJnZXQudmFsdWUsIDEwKSxcbiAgICAgIGNhc2hfcGF5bWVudF9tZXRob2RfaWQ6IG51bGwsXG4gICAgfSlcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uQ2FzaFBheW1lbnRNZXRob2RDaGFuZ2UoZSkge1xuICAgIHNldFZhbHVlcyh7XG4gICAgICAuLi52YWx1ZXMsXG4gICAgICBjYXNoX3BheW1lbnRfbWV0aG9kX2lkOiBwYXJzZUludChlLnRhcmdldC52YWx1ZSwgMTApLFxuICAgIH0pXG4gIH1cblxuICAvLyBwYXltZW50IG1ldGhvZHNcbiAgY29uc3QgW3BheW1lbnRNZXRob2RzLCBzZXRQYXltZW50TWV0aG9kc10gPSB1c2VTdGF0ZSgpXG5cbiAgLy8gZ2V0IHBheW1lbnQgbWV0aG9kc1xuICB1c2VFZmZlY3QoXyA9PiB7XG4gICAgY29uc3QgZ2V0UGF5bWVudE1ldGhvZHMgPSBhc3luYyBfID0+IHtcbiAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYXBpLmdldCgncGF5bWVudC1tZXRob2RzJylcbiAgICAgIHNldFBheW1lbnRNZXRob2RzKGRhdGEpXG4gICAgfVxuICAgIGdldFBheW1lbnRNZXRob2RzKClcbiAgfSwgW10pXG5cbiAgLy8gaW5pdCBjYXJkIHNlY3VyZSBmaWVsZHNcbiAgdXNlRWZmZWN0KF8gPT4ge1xuICAgIGlmIChpc1BheVVSZWFkeSAmJiBpc0NhcmRQYXltZW50KSB7XG4gICAgICBQT1MuaW5pdFNlY3VyZUZpZWxkcygnY2FyZC1zZWN1cmUtZmllbGRzJylcbiAgICB9XG4gIH0sIFtpc1BheVVSZWFkeSwgaXNDYXJkUGF5bWVudF0pXG5cbiAgLy8gY2FzaCBwYXltZW50IG1ldGhvZHNcbiAgY29uc3QgW2Nhc2hQYXltZW50TWV0aG9kcywgc2V0Q2FzaFBheW1lbnRNZXRob2RzXSA9IHVzZVN0YXRlKClcblxuICAvLyBnZXQgY2FzaCBwYXltZW50IG1ldGhvZHNcbiAgdXNlRWZmZWN0KF8gPT4ge1xuICAgIGNvbnN0IGdldENhc2hQYXltZW50TWV0aG9kcyA9IGFzeW5jIF8gPT4ge1xuICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBhcGkuZ2V0KCdjYXNoLXBheW1lbnQtbWV0aG9kcycpXG4gICAgICBzZXRDYXNoUGF5bWVudE1ldGhvZHMoZGF0YSlcbiAgICB9XG4gICAgZ2V0Q2FzaFBheW1lbnRNZXRob2RzKClcbiAgfSwgW10pXG5cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm9mZnNldC1tZC0yIGNvbC1tZC04XCI+XG5cbiAgICAgICAgPGgzIGNsYXNzTmFtZT1cImgzXCI+UGFnbzwvaDM+XG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cblxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLW1kLTZcIj5cbiAgICAgICAgICAgIDxGb3JtR3JvdXA+XG4gICAgICAgICAgICAgIHsgcGF5bWVudE1ldGhvZHMgJiYgcGF5bWVudE1ldGhvZHMubWFwKChwYXltZW50TWV0aG9kLCBrZXkpID0+IChcbiAgICAgICAgICAgICAgICA8SW5wdXRSYWRpb1xuICAgICAgICAgICAgICAgICAga2V5PXsga2V5IH1cbiAgICAgICAgICAgICAgICAgIGxhYmVsPXsgcGF5bWVudE1ldGhvZC5uYW1lIH1cbiAgICAgICAgICAgICAgICAgIG5hbWU9XCJwYXltZW50XCJcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsgb25DaGFuZ2UgfVxuICAgICAgICAgICAgICAgICAgc3RhdGU9eyBwYXltZW50X21ldGhvZF9pZCB9XG4gICAgICAgICAgICAgICAgICB2YWx1ZT17IHBheW1lbnRNZXRob2QuaWQgfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICkpIH1cbiAgICAgICAgICAgICAgeyB2YWxpZGF0aW9uRXJyb3IgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW52YWxpZC1mZWVkYmFja1wiPnsgdmFsaWRhdGlvbkVycm9yIH08L2Rpdj5cbiAgICAgICAgICAgICAgKSB9XG4gICAgICAgICAgICA8L0Zvcm1Hcm91cD5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLW1kLTZcIj5cblxuICAgICAgICAgICAgey8qIGNyZWRpdCAvIGRlYml0IGNhcmQgKi8gfVxuICAgICAgICAgICAgeyBpc0NhcmRQYXltZW50ID8gKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtaW5wdXRzXCI+XG5cbiAgICAgICAgICAgICAgICB7LyogbWFuZGF0b3J5IGRhdGEgKi8gfVxuICAgICAgICAgICAgICAgIDxGb3JtR3JvdXA+XG4gICAgICAgICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj1cImNhcmRob2xkZXItbmFtZVwiPk5vbWJyZSBpbXByZXNvIGVuIHRhcmpldGE8L0xhYmVsPlxuICAgICAgICAgICAgICAgICAgPElucHV0IGlkPVwiY2FyZGhvbGRlci1uYW1lXCIgbmFtZT1cImNhcmRob2xkZXItbmFtZVwiIHJlcXVpcmVkPXsgcmVxdWlyZWRzIH0gdHlwZT1cInRleHRcIi8+XG4gICAgICAgICAgICAgICAgPC9Gb3JtR3JvdXA+XG5cbiAgICAgICAgICAgICAgICB7LyogY2FyZCBmaWVsZHMgKi8gfVxuICAgICAgICAgICAgICAgIDxGb3JtR3JvdXA+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGlkPVwiY2FyZC1zZWN1cmUtZmllbGRzXCIvPlxuICAgICAgICAgICAgICAgICAgPEludmFsaWRGZWVkYmFjayBlcnJvcj17IGVycm9yIH0gbG9hZGluZz17IGxvYWRpbmcgfSBuYW1lPVwicGF5bWVudF9vc1wiLz5cbiAgICAgICAgICAgICAgICA8L0Zvcm1Hcm91cD5cblxuICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAvLyBjYXNoIHBheW1lbnQgbWV0aG9kc1xuICAgICAgICAgICAgKSA6IHBheW1lbnRfbWV0aG9kX2lkID09PSAzICYmIChcbiAgICAgICAgICAgICAgPEZvcm1Hcm91cD5cbiAgICAgICAgICAgICAgICB7IGNhc2hQYXltZW50TWV0aG9kcyA9PSBudWxsID8gKFxuICAgICAgICAgICAgICAgICAgPHA+Q2FyZ2FuZG8uLi48L3A+XG4gICAgICAgICAgICAgICAgKSA6IGNhc2hQYXltZW50TWV0aG9kcy5sZW5ndGggPyBjYXNoUGF5bWVudE1ldGhvZHMubWFwKChpdGVtLCBrZXkpID0+IChcbiAgICAgICAgICAgICAgICAgIDxJbnB1dFJhZGlvXG4gICAgICAgICAgICAgICAgICAgIGtleT17IGtleSB9XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsPXsgaXRlbS5uYW1lIH1cbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cImNhc2hfcGF5bWVudF9tZXRob2RfaWRcIlxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17IG9uQ2FzaFBheW1lbnRNZXRob2RDaGFuZ2UgfVxuICAgICAgICAgICAgICAgICAgICBzdGF0ZT17IGNhc2hfcGF5bWVudF9tZXRob2RfaWQgfVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17IGl0ZW0uaWQgfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApKSA6IChcbiAgICAgICAgICAgICAgICAgIDxwPlNpbiBtw6l0b2RvIGRlIHBhZ28gY29uZmlndXJhZG8uPC9wPlxuICAgICAgICAgICAgICAgICkgfVxuICAgICAgICAgICAgICAgIDxJbnZhbGlkRmVlZGJhY2sgZXJyb3I9eyBlcnJvciB9IGxvYWRpbmc9eyBsb2FkaW5nIH0gbmFtZT1cImNhc2hfcGF5bWVudF9tZXRob2RfaWRcIi8+XG4gICAgICAgICAgICAgIDwvRm9ybUdyb3VwPlxuICAgICAgICAgICAgKSB9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICA8L2Rpdj5cbiAgICAgIDxzdHlsZSBqc3g+eyBgXG4gICAgICAgIEBtZWRpYSAobWluLXdpZHRoOiA3NjhweCkge1xuICAgICAgICAgIC5jYXJkLWlucHV0cyB7XG4gICAgICAgICAgICBtYXJnaW4tdG9wOiAtMjFweDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIGAgfTwvc3R5bGU+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuXG5leHBvcnQgZGVmYXVsdCB3aXRoQXV0aChQYXltZW50LCB0cnVlKTtcbiJdfQ== */\\n/*@ sourceURL=/Users/rafael/Projects/somosgad/dale/pages/register/wizard/payment.js */\"));\n};\n\nexport default withAuth(Payment, true);","map":{"version":3,"sources":["/Users/rafael/Projects/somosgad/dale/pages/register/wizard/payment.js"],"names":["useEffect","useState","FormGroup","Label","Input","InputRadio","withAuth","Layout","InvalidFeedback","HAS_WINDOW","Payment","layoutProps","api","cash_payment_method_id","error","isCardPayment","isPayUReady","loading","requireds","payUEnv","businessUnitPublicKey","POS","ready","window","POSStyle","base","borderRadius","backgroundColor","height","fontSize","padding","marginLeft","cardImage","borderTopRightRadius","borderBottomRightRadius","margin","pan","width","borderTopLeftRadius","borderBottomLeftRadius","expirationDate","secureFields","left","cvv","_","setPublicKey","setEnvironment","setStyle","setCardNumberPlaceholder","setExpirationDatePlaceholder","setIsPayUReady","onPaymentChange","e","setValues","values","payment_method_id","parseInt","target","value","onCashPaymentMethodChange","paymentMethods","setPaymentMethods","getPaymentMethods","data","get","initSecureFields","cashPaymentMethods","setCashPaymentMethods","getCashPaymentMethods","map","paymentMethod","key","name","onChange","id","validationError","length","item"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport FormGroup from \"~/components/layout/AuthModal/FormGroup\";\nimport Label from \"~/components/layout/AuthModal/Label\";\nimport Input from \"~/components/layout/AuthModal/Input\";\nimport InputRadio from \"~/components/Form/InputRadio\";\nimport withAuth from \"~/components/withAuth\";\nimport Layout from \"~/components/layout/Layout\";\nimport InvalidFeedback from \"~/components/Form/InvalidFeedback\"\nimport { HAS_WINDOW } from \"~/constants/constants\";\n\nconst Payment = ({\n                   layoutProps,\n                   api,\n                   cash_payment_method_id,\n                   error,\n                   isCardPayment,\n                   isPayUReady,\n                   loading,\n                   requireds,\n\n                 }) => {\n\n  const payUEnv = 'test'\n  const businessUnitPublicKey = '88985036-6530-4b5a-a7ec-c4e07ec07f6c'\n  const POS = ready && HAS_WINDOW ? window.POS : null\n\n  const POSStyle = {\n    base: {\n      borderRadius: '.15rem',\n      backgroundColor: 'white',\n      height: 'calc(1.5em + .75rem + 2px)',\n      fontSize: '12px',\n      padding: '0px 3px',\n      marginLeft: '5px',\n      cardImage: {\n        borderTopRightRadius: 0,\n        borderBottomRightRadius: 0,\n        margin: 0,\n      },\n      pan: {\n        width: '160px',\n        borderTopLeftRadius: 0,\n        borderBottomLeftRadius: 0,\n        marginLeft: 0,\n      },\n      expirationDate: { width: '47px' },\n      secureFields: { left: '40px' },\n      cvv: { width: '35px' }\n    }\n  }\n\n\n  useEffect(_ => {\n    if (POS) {\n      POS.setPublicKey(businessUnitPublicKey)\n      POS.setEnvironment(payUEnv)\n      POS.setStyle(POSStyle)\n      POS.setCardNumberPlaceholder('Tarjeta de crédito')\n      POS.setExpirationDatePlaceholder('MM/AA');\n      setIsPayUReady(true)\n    }\n  }, [POS])\n\n\n\n  /* handle payment method change */\n  function onPaymentChange(e) {\n    setValues({\n      ...values,\n      payment_method_id: parseInt(e.target.value, 10),\n      cash_payment_method_id: null,\n    })\n  }\n\n  function onCashPaymentMethodChange(e) {\n    setValues({\n      ...values,\n      cash_payment_method_id: parseInt(e.target.value, 10),\n    })\n  }\n\n  // payment methods\n  const [paymentMethods, setPaymentMethods] = useState()\n\n  // get payment methods\n  useEffect(_ => {\n    const getPaymentMethods = async _ => {\n      const { data } = await api.get('payment-methods')\n      setPaymentMethods(data)\n    }\n    getPaymentMethods()\n  }, [])\n\n  // init card secure fields\n  useEffect(_ => {\n    if (isPayUReady && isCardPayment) {\n      POS.initSecureFields('card-secure-fields')\n    }\n  }, [isPayUReady, isCardPayment])\n\n  // cash payment methods\n  const [cashPaymentMethods, setCashPaymentMethods] = useState()\n\n  // get cash payment methods\n  useEffect(_ => {\n    const getCashPaymentMethods = async _ => {\n      const { data } = await api.get('cash-payment-methods')\n      setCashPaymentMethods(data)\n    }\n    getCashPaymentMethods()\n  }, [])\n\n\n  return (\n    <div className=\"row\">\n      <div className=\"offset-md-2 col-md-8\">\n\n        <h3 className=\"h3\">Pago</h3>\n\n        <div className=\"row\">\n\n          <div className=\"col-md-6\">\n            <FormGroup>\n              { paymentMethods && paymentMethods.map((paymentMethod, key) => (\n                <InputRadio\n                  key={ key }\n                  label={ paymentMethod.name }\n                  name=\"payment\"\n                  onChange={ onChange }\n                  state={ payment_method_id }\n                  value={ paymentMethod.id }\n                />\n              )) }\n              { validationError && (\n                <div className=\"invalid-feedback\">{ validationError }</div>\n              ) }\n            </FormGroup>\n          </div>\n\n          <div className=\"col-md-6\">\n\n            {/* credit / debit card */ }\n            { isCardPayment ? (\n              <div className=\"card-inputs\">\n\n                {/* mandatory data */ }\n                <FormGroup>\n                  <Label htmlFor=\"cardholder-name\">Nombre impreso en tarjeta</Label>\n                  <Input id=\"cardholder-name\" name=\"cardholder-name\" required={ requireds } type=\"text\"/>\n                </FormGroup>\n\n                {/* card fields */ }\n                <FormGroup>\n                  <div id=\"card-secure-fields\"/>\n                  <InvalidFeedback error={ error } loading={ loading } name=\"payment_os\"/>\n                </FormGroup>\n\n              </div>\n\n              // cash payment methods\n            ) : payment_method_id === 3 && (\n              <FormGroup>\n                { cashPaymentMethods == null ? (\n                  <p>Cargando...</p>\n                ) : cashPaymentMethods.length ? cashPaymentMethods.map((item, key) => (\n                  <InputRadio\n                    key={ key }\n                    label={ item.name }\n                    name=\"cash_payment_method_id\"\n                    onChange={ onCashPaymentMethodChange }\n                    state={ cash_payment_method_id }\n                    value={ item.id }\n                  />\n                )) : (\n                  <p>Sin método de pago configurado.</p>\n                ) }\n                <InvalidFeedback error={ error } loading={ loading } name=\"cash_payment_method_id\"/>\n              </FormGroup>\n            ) }\n          </div>\n        </div>\n\n      </div>\n      <style jsx>{ `\n        @media (min-width: 768px) {\n          .card-inputs {\n            margin-top: -21px;\n          }\n        }\n      ` }</style>\n    </div>\n  )\n}\n\n\nexport default withAuth(Payment, true);\n"]},"metadata":{},"sourceType":"module"}