{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _s = $RefreshSig$();\n\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Button from '../components/button';\nimport { useEffect, useState } from 'react';\nimport api from '../services/api';\n\nvar WishlistBtn = function WishlistBtn(_ref) {\n  _s();\n\n  var block = _ref.block,\n      color = _ref.color,\n      inside = _ref.inside,\n      movieId = _ref.movieId,\n      home = _ref.home;\n\n  var InsideBtn = function InsideBtn(_ref2) {\n    var icon = _ref2.icon,\n        size = _ref2.size,\n        onClick = _ref2.onClick;\n    return __jsx(React.Fragment, null, __jsx(\"button\", {\n      onClick: onClick,\n      className: \"jsx-1743738566\" + \" \" + \"btn inside-btn\"\n    }, __jsx(\"img\", {\n      height: size,\n      src: icon,\n      width: size,\n      className: \"jsx-1743738566\"\n    }), __jsx(\"span\", {\n      className: \"jsx-1743738566\"\n    }, \"Mi Lista\")), __jsx(_JSXStyle, {\n      id: \"1743738566\"\n    }, \".inside-btn.jsx-1743738566{z-index:3;width:65px;padding:2px 5px;margin:0px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:5px;color:black;background-color:white;}span.jsx-1743738566{margin-left:6px;font-size:8px;font-weight:bold;}.inside-btn.jsx-1743738566:hover{background-color:lightgray;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9yYWZhZWwvUHJvamVjdHMvc29tb3NnYWQvZGFsZS9jb21wb25lbnRzL3dpc2hsaXN0LWJ0bi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFlb0IsQUFHdUIsQUFVTSxBQUtXLFVBZGhCLE1BVUcsS0FURSxNQWNsQixHQUptQixPQVRQLFVBVVosQ0FUZSwwRUFDRixXQUNDLFlBQ1csdUJBQ3pCIiwiZmlsZSI6Ii9Vc2Vycy9yYWZhZWwvUHJvamVjdHMvc29tb3NnYWQvZGFsZS9jb21wb25lbnRzL3dpc2hsaXN0LWJ0bi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCdXR0b24gZnJvbSAnLi4vY29tcG9uZW50cy9idXR0b24nXG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgYXBpIGZyb20gJy4uL3NlcnZpY2VzL2FwaSdcblxuY29uc3QgV2lzaGxpc3RCdG4gPSAoeyBibG9jaywgY29sb3IsIGluc2lkZSwgbW92aWVJZCwgaG9tZSB9KSA9PiB7XG5cbiAgY29uc3QgSW5zaWRlQnRuID0gKHsgaWNvbiwgc2l6ZSwgb25DbGljayB9KSA9PiB7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPD5cbiAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9e2BidG4gaW5zaWRlLWJ0bmB9IG9uQ2xpY2s9e29uQ2xpY2t9PlxuICAgICAgICAgIDxpbWcgaGVpZ2h0PXtzaXplfSBzcmM9e2ljb259IHdpZHRoPXtzaXplfSAvPlxuICAgICAgICAgIDxzcGFuPk1pIExpc3RhPC9zcGFuPlxuICAgICAgICA8L2J1dHRvbj5cblxuICAgICAgICA8c3R5bGUganN4PntgXG4gICAgICAgICAgLmluc2lkZS1idG4ge1xuICAgICAgICAgICAgei1pbmRleDogMztcbiAgICAgICAgICAgIHdpZHRoOiA2NXB4O1xuICAgICAgICAgICAgcGFkZGluZzogMnB4IDVweDtcbiAgICAgICAgICAgIG1hcmdpbjowcHg7XG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgbWFyZ2luOiA1cHg7XG4gICAgICAgICAgICBjb2xvcjogYmxhY2s7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc3BhbiB7XG4gICAgICAgICAgICBtYXJnaW4tbGVmdDogNnB4O1xuICAgICAgICAgICAgZm9udC1zaXplOiA4cHg7XG4gICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICAgICB9XG4gICAgICAgICAgLmluc2lkZS1idG46aG92ZXIge1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogbGlnaHRncmF5O1xuICAgICAgICAgIH1cbiAgICAgICAgYH08L3N0eWxlPlxuICAgICAgPC8+XG4gICAgKVxuICB9XG5cbiAgY29uc3QgW3dpc2hsaXN0ZWQsIHNldFdpc2hsaXN0ZWRdID0gdXNlU3RhdGUoZmFsc2UpXG5cbiAgY29uc3QgaGFuZGxlVG9nZ2xlID0gYXN5bmMgZSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgdHJ5e1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGkoKS5wb3N0KCcvd2lzaGxpc3QnLHtpZCA6IG1vdmllSWR9KVxuICAgICAgY29uc3Qge2F0dGFjaGVkLCBkZXRhY2hlZCB9ID0gcmVzcG9uc2UuZGF0YVxuICAgICAgY29uc3QgaW5MaXN0ID0gYXR0YWNoZWQuaW5jbHVkZXMobW92aWVJZCkgJiYgISBkZXRhY2hlZC5pbmNsdWRlcyhtb3ZpZUlkKVxuICAgICAgc2V0V2lzaGxpc3RlZChpbkxpc3QpXG4gICAgfWNhdGNoKGVycm9yKXtcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHdpc2hsaXN0ID0gYXN5bmMgXyA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaSgpLmdldChgL3dpc2hsaXN0LyR7bW92aWVJZH1gKVxuICAgICAgc2V0V2lzaGxpc3RlZChPYmplY3Qua2V5cyhyZXMuZGF0YSkubGVuZ3RoID4gMClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coZXJyb3IpXG4gICAgfVxuICB9XG5cbiAgdXNlRWZmZWN0KCBfID0+IHsgd2lzaGxpc3QoKSB9LCBbXSlcblxuICByZXR1cm4gKFxuICAgIHdpc2hsaXN0ZWQgP1xuICAgICAgaW5zaWRlID9cbiAgICAgICAgPEluc2lkZUJ0biBpY29uPVwiL3N0YXRpYy9pY29ucy9yZW1vdmUuc3ZnXCIgc2l6ZT1cIjEwXCIgb25DbGljaz17aGFuZGxlVG9nZ2xlfSAvPlxuICAgICAgOlxuICAgICAgICA8QnV0dG9uIGJsb2NrPXtibG9ja30gaG9tZT17aG9tZX0gb25DbGljaz17aGFuZGxlVG9nZ2xlfT5cbiAgICAgICAgICA8aW1nIGhlaWdodD1cIjEzXCIgc3JjPVwiL3N0YXRpYy9pY29ucy9yZW1vdmUuc3ZnXCIgd2lkdGg9XCIxM1wiIC8+XG4gICAgICAgICAgPHNwYW4+TWkgTGlzdGE8L3NwYW4+XG4gICAgICAgIDwvQnV0dG9uPlxuICAgIDpcbiAgICAgIGluc2lkZSA/XG4gICAgICAgIDxJbnNpZGVCdG4gaWNvbj1cIi9zdGF0aWMvaWNvbnMvYWRkLnN2Z1wiIHNpemU9XCIxMFwiICBvbkNsaWNrPXtoYW5kbGVUb2dnbGV9IC8+XG4gICAgICA6XG4gICAgICAgIDxCdXR0b24gYmxvY2s9e2Jsb2NrfSBob21lPXtob21lfSBjb2xvcj1cInNlY29uZGFyeVwiIG91dGxpbmUgdGV4dENvbG9yPXtjb2xvcn0gb25DbGljaz17aGFuZGxlVG9nZ2xlfT5cbiAgICAgICAgICA8aW1nIGhlaWdodD1cIjEzXCIgc3JjPVwiL3N0YXRpYy9pY29ucy9hZGQuc3ZnXCIgd2lkdGg9XCIxM1wiIC8+XG4gICAgICAgICAgPHNwYW4+TWkgTGlzdGE8L3NwYW4+XG4gICAgICAgIDwvQnV0dG9uPlxuICApXG59XG5cbmV4cG9ydCBkZWZhdWx0IFdpc2hsaXN0QnRuXG4iXX0= */\\n/*@ sourceURL=/Users/rafael/Projects/somosgad/dale/components/wishlist-btn.js */\"));\n  };\n\n  var _useState = useState(false),\n      wishlisted = _useState[0],\n      setWishlisted = _useState[1];\n\n  var handleToggle = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var response, _response$data, attached, detached, inList;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              _context.prev = 1;\n              _context.next = 4;\n              return api().post('/wishlist', {\n                id: movieId\n              });\n\n            case 4:\n              response = _context.sent;\n              _response$data = response.data, attached = _response$data.attached, detached = _response$data.detached;\n              inList = attached.includes(movieId) && !detached.includes(movieId);\n              setWishlisted(inList);\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](1);\n              console.log(_context.t0);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 10]]);\n    }));\n\n    return function handleToggle(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var wishlist = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return api().get(\"/wishlist/\".concat(movieId));\n\n            case 3:\n              res = _context2.sent;\n              setWishlisted(Object.keys(res.data).length > 0);\n              _context2.next = 10;\n              break;\n\n            case 7:\n              _context2.prev = 7;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.log(_context2.t0);\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 7]]);\n    }));\n\n    return function wishlist(_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function (_) {\n    wishlist();\n  }, []);\n  return wishlisted ? inside ? __jsx(InsideBtn, {\n    icon: \"/static/icons/remove.svg\",\n    size: \"10\",\n    onClick: handleToggle\n  }) : __jsx(Button, {\n    block: block,\n    home: home,\n    onClick: handleToggle\n  }, __jsx(\"img\", {\n    height: \"13\",\n    src: \"/static/icons/remove.svg\",\n    width: \"13\"\n  }), __jsx(\"span\", null, \"Mi Lista\")) : inside ? __jsx(InsideBtn, {\n    icon: \"/static/icons/add.svg\",\n    size: \"10\",\n    onClick: handleToggle\n  }) : __jsx(Button, {\n    block: block,\n    home: home,\n    color: \"secondary\",\n    outline: true,\n    textColor: color,\n    onClick: handleToggle\n  }, __jsx(\"img\", {\n    height: \"13\",\n    src: \"/static/icons/add.svg\",\n    width: \"13\"\n  }), __jsx(\"span\", null, \"Mi Lista\"));\n};\n\n_s(WishlistBtn, \"rOFpswWHrEb27+JVu/9W12eFDWo=\");\n\n_c = WishlistBtn;\nexport default WishlistBtn;\n\nvar _c;\n\n$RefreshReg$(_c, \"WishlistBtn\");","map":{"version":3,"sources":["/Users/rafael/Projects/somosgad/dale/components/wishlist-btn.js"],"names":["Button","useEffect","useState","api","WishlistBtn","block","color","inside","movieId","home","InsideBtn","icon","size","onClick","wishlisted","setWishlisted","handleToggle","e","preventDefault","post","id","response","data","attached","detached","inList","includes","console","log","wishlist","_","get","res","Object","keys","length"],"mappings":"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","sourcesContent":["import Button from '../components/button'\nimport { useEffect, useState } from 'react'\nimport api from '../services/api'\n\nconst WishlistBtn = ({ block, color, inside, movieId, home }) => {\n\n  const InsideBtn = ({ icon, size, onClick }) => {\n\n    return (\n      <>\n        <button className={`btn inside-btn`} onClick={onClick}>\n          <img height={size} src={icon} width={size} />\n          <span>Mi Lista</span>\n        </button>\n\n        <style jsx>{`\n          .inside-btn {\n            z-index: 3;\n            width: 65px;\n            padding: 2px 5px;\n            margin:0px;\n            display: flex;\n            margin: 5px;\n            color: black;\n            background-color: white;\n          }\n          span {\n            margin-left: 6px;\n            font-size: 8px;\n            font-weight: bold;\n          }\n          .inside-btn:hover {\n            background-color: lightgray;\n          }\n        `}</style>\n      </>\n    )\n  }\n\n  const [wishlisted, setWishlisted] = useState(false)\n\n  const handleToggle = async e => {\n    e.preventDefault()\n    try{\n      const response = await api().post('/wishlist',{id : movieId})\n      const {attached, detached } = response.data\n      const inList = attached.includes(movieId) && ! detached.includes(movieId)\n      setWishlisted(inList)\n    }catch(error){\n      console.log(error)\n    }\n  }\n\n  const wishlist = async _ => {\n    try {\n      const res = await api().get(`/wishlist/${movieId}`)\n      setWishlisted(Object.keys(res.data).length > 0)\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  useEffect( _ => { wishlist() }, [])\n\n  return (\n    wishlisted ?\n      inside ?\n        <InsideBtn icon=\"/static/icons/remove.svg\" size=\"10\" onClick={handleToggle} />\n      :\n        <Button block={block} home={home} onClick={handleToggle}>\n          <img height=\"13\" src=\"/static/icons/remove.svg\" width=\"13\" />\n          <span>Mi Lista</span>\n        </Button>\n    :\n      inside ?\n        <InsideBtn icon=\"/static/icons/add.svg\" size=\"10\"  onClick={handleToggle} />\n      :\n        <Button block={block} home={home} color=\"secondary\" outline textColor={color} onClick={handleToggle}>\n          <img height=\"13\" src=\"/static/icons/add.svg\" width=\"13\" />\n          <span>Mi Lista</span>\n        </Button>\n  )\n}\n\nexport default WishlistBtn\n"]},"metadata":{},"sourceType":"module"}