{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _toArray from \"@babel/runtime/helpers/esm/toArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport Head from 'next/head';\nimport Link from 'next/link';\nimport React, { useContext, useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport Button from '../components/button';\nimport CarouselSection from '../components/carousel-section';\nimport Featured from '../components/featured';\nimport Layout from '../components/layout/Layout';\nimport Loading from '../components/Loading/Loading';\nimport MediaLink from '../components/MediaLink/MediaLink';\nimport WishlistBtn from '../components/wishlist-btn';\nimport UserContext from '../contexts/UserContext';\nimport { CONFIG } from '../config';\nimport api from '../services/api';\nimport withApi from '~/components/withApi';\nimport Color from 'color';\nimport { TENANT } from \"~/constants/constants\";\nimport Router from \"next/router\";\n\nvar HomePage = function HomePage(_ref) {\n  var api = _ref.api,\n      contents = _ref.contents,\n      featuredMedia = _ref.featuredMedia,\n      featuredMediaError = _ref.featuredMediaError,\n      media = _ref.media,\n      layoutProps = _ref.layoutProps;\n\n  var _useContext = useContext(UserContext),\n      user = _useContext.user;\n\n  var pageTitle = CONFIG.appName;\n\n  var _useState = useState(0),\n      idx = _useState[0],\n      setIdx = _useState[1];\n\n  return __jsx(Layout, _extends({\n    paddingTop: false\n  }, layoutProps, {\n    media: featuredMedia\n  }), __jsx(Head, null, __jsx(\"title\", {\n    className: \"jsx-3651139852\"\n  }, pageTitle), \"x\", __jsx(\"link\", {\n    rel: \"apple-touch-icon\",\n    sizes: \"180x180\",\n    href: \"/static/\".concat(TENANT, \"/favicon/faviconlau-180x180.png\"),\n    className: \"jsx-3651139852\"\n  }), __jsx(\"link\", {\n    rel: \"icon\",\n    type: \"image/png\",\n    sizes: \"32x32\",\n    href: \"/static/\".concat(TENANT, \"/favicon/faviconlau-32x32.png\"),\n    className: \"jsx-3651139852\"\n  }), __jsx(\"link\", {\n    rel: \"icon\",\n    type: \"image/png\",\n    sizes: \"16x16\",\n    href: \"/static/\".concat(TENANT, \"/favicon/faviconlau-16x16.png\"),\n    className: \"jsx-3651139852\"\n  }), __jsx(\"link\", {\n    rel: \"manifest\",\n    href: \"/static/\".concat(TENANT, \"/favicon/site.webmanifest\"),\n    className: \"jsx-3651139852\"\n  }), __jsx(\"link\", {\n    rel: \"mask-icon\",\n    href: \"/static/\".concat(TENANT, \"/favicon/safari-pinned-tab.svg\"),\n    color: \"#5bbad5\",\n    className: \"jsx-3651139852\"\n  }), __jsx(\"meta\", {\n    name: \"msapplication-TileColor\",\n    content: \"#da532c\",\n    className: \"jsx-3651139852\"\n  }), __jsx(\"meta\", {\n    name: \"theme-color\",\n    content: \"#ffffff\",\n    className: \"jsx-3651139852\"\n  })), __jsx(\"div\", {\n    className: \"jsx-3651139852\" + \" \" + \"index\"\n  }, __jsx(Cover, {\n    error: featuredMediaError,\n    media: featuredMedia\n  }), __jsx(\"div\", {\n    className: \"jsx-3651139852\" + \" \" + \"index__contents\"\n  }, contents && contents.map(function (item, index) {\n    var showBanner = item.is_paid && user || !item.is_paid && !user;\n    var contentableType = item.contentable_type;\n\n    switch (contentableType) {\n      case 'categories':\n        return __jsx(HomeCarouselSection, {\n          api: api,\n          category: item.slug,\n          key: index,\n          idx: index\n        });\n\n      case 'banners':\n        return showBanner && __jsx(BannerSection, {\n          id: item.contentable_id,\n          key: index\n        });\n\n      case 'movies':\n        return showBanner && __jsx(BannerSection, {\n          movie: item.slug,\n          key: index\n        });\n    }\n  }))), __jsx(_JSXStyle, {\n    id: \"3651139852\"\n  }, [\".index.jsx-3651139852{margin-bottom:75px;}\", \".index__contents.jsx-3651139852{position:relative;z-index:2;padding-bottom:4em;}\", \".home-carousel-section.jsx-3651139852:first-child{padding:3.5em 0;}\", \"@media (min-width:768px){.index.jsx-3651139852{margin-bottom:30px;}}\"]));\n};\n\nHomePage.getInitialProps = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(ctx) {\n    var api, _yield$api$get, homePage, _homePage$contents, firstContent, contents, _yield$api$get2, featuredMedia, _homePage$contents2, _contents;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            api = ctx.api;\n            _context.next = 3;\n            return api.get('pages/home');\n\n          case 3:\n            _yield$api$get = _context.sent;\n            homePage = _yield$api$get.data;\n            _context.prev = 5;\n            _homePage$contents = _toArray(homePage.contents), firstContent = _homePage$contents[0], contents = _homePage$contents.slice(1);\n            _context.next = 9;\n            return api.get('movie/' + firstContent.slug + '?for=home-cover');\n\n          case 9:\n            _yield$api$get2 = _context.sent;\n            featuredMedia = _yield$api$get2.data.movie;\n            true ? Router.push('/login') : ctx.res.writeHead(302, {\n              Location: '/signup'\n            }).end(); // return { contents, featuredMedia }\n\n            _context.next = 18;\n            break;\n\n          case 14:\n            _context.prev = 14;\n            _context.t0 = _context[\"catch\"](5);\n            _homePage$contents2 = _toArray(homePage.contents), _contents = _homePage$contents2.slice(0);\n            return _context.abrupt(\"return\", {\n              contents: _contents,\n              featuredMediaError: _context.t0\n            });\n\n          case 18:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[5, 14]]);\n  }));\n\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nexport default withApi(HomePage);\nvar CoverImgContent = styled.div.withConfig({\n  displayName: \"pages__CoverImgContent\",\n  componentId: \"zvtr18-0\"\n})([\"background-image:linear-gradient(to bottom,\", \" 80%,\", \" 100%),url('\", \"');background-position:50% 0,50% 0,75% 0;background-repeat:no-repeat,no-repeat,no-repeat;background-size:cover,cover,cover;&::before{content:'';display:block;padding-bottom:112.5%;}@media (min-width:768px){background-image:linear-gradient(to bottom,\", \" 65%,\", \" 100%),url('\", \"');background-position:50% 0,50% 0,40% 50%;&::before{padding-bottom:80%;}}@media (min-width:1200px){background-position:50% 0,50% 0,75% 50%;&::before{padding-bottom:48%;}}\"], function (props) {\n  return Color(props.theme.colors.background).fade(1).string();\n}, function (props) {\n  return props.theme.colors.background;\n}, function (props) {\n  return props.posterUrl;\n}, function (props) {\n  return Color(props.theme.colors.background).fade(1).string();\n}, function (props) {\n  return props.theme.colors.background;\n}, function (props) {\n  return props.posterUrl;\n});\n\nvar Cover = function Cover(_ref3) {\n  var error = _ref3.error,\n      media = _ref3.media;\n\n  if (error) {\n    return __jsx(\"p\", null, \"No se puede cargar contenido destacado\");\n  }\n\n  var _useContext2 = useContext(UserContext),\n      user = _useContext2.user;\n\n  var _ref4 = media || {},\n      description = _ref4.description,\n      logo = _ref4.logo,\n      poster_url = _ref4.poster_url;\n\n  var _ref5 = logo || {},\n      height = _ref5.height,\n      _ref5$url = _ref5.url;\n\n  _ref5$url = _ref5$url === void 0 ? {} : _ref5$url;\n  var fallback = _ref5$url[\"default\"],\n      png = _ref5$url.png,\n      webp = _ref5$url.webp,\n      width = _ref5.width;\n  var empezaYa = CONFIG.lang === 'es-CL' ? '¡Vívelo ahora!' : '¡Empieza Ya!';\n  return __jsx(Link, {\n    href: media && media.video_file ? \"/media/\".concat(media.slug, \"/watch\") : '/'\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1807027609\", [logo ? height * 100 / width + '%' : 0]]]) + \" \" + \"cover container-fluid\"\n  }, poster_url && __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1807027609\", [logo ? height * 100 / width + '%' : 0]]]) + \" \" + \"cover__img row\"\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1807027609\", [logo ? height * 100 / width + '%' : 0]]]) + \" \" + \"col p-0\"\n  }, __jsx(CoverImgContent, {\n    posterUrl: poster_url\n  }, __jsx(\"img\", {\n    alt: \"\",\n    src: poster_url,\n    className: _JSXStyle.dynamic([[\"1807027609\", [logo ? height * 100 / width + '%' : 0]]]) + \" \" + \"d-none\"\n  })))), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1807027609\", [logo ? height * 100 / width + '%' : 0]]]) + \" \" + \"cover__contents row\"\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1807027609\", [logo ? height * 100 / width + '%' : 0]]]) + \" \" + \"col-12 col-md-4 offset-md-1\"\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1807027609\", [logo ? height * 100 / width + '%' : 0]]]) + \" \" + \"cover__infos\"\n  }, logo && __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1807027609\", [logo ? height * 100 / width + '%' : 0]]]) + \" \" + \"row\"\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1807027609\", [logo ? height * 100 / width + '%' : 0]]]) + \" \" + \"col-8 offset-2 col-md-12 offset-md-0\"\n  }, __jsx(\"h1\", {\n    className: _JSXStyle.dynamic([[\"1807027609\", [logo ? height * 100 / width + '%' : 0]]]) + \" \" + \"cover__logo\"\n  }, __jsx(\"picture\", {\n    className: _JSXStyle.dynamic([[\"1807027609\", [logo ? height * 100 / width + '%' : 0]]])\n  }, __jsx(\"source\", {\n    srcSet: webp,\n    type: \"media/webp\",\n    className: _JSXStyle.dynamic([[\"1807027609\", [logo ? height * 100 / width + '%' : 0]]])\n  }), __jsx(\"source\", {\n    srcSet: png,\n    type: \"media/png\",\n    className: _JSXStyle.dynamic([[\"1807027609\", [logo ? height * 100 / width + '%' : 0]]])\n  }), __jsx(\"img\", {\n    height: height,\n    src: fallback,\n    width: width,\n    className: _JSXStyle.dynamic([[\"1807027609\", [logo ? height * 100 / width + '%' : 0]]]) + \" \" + \"img-fluid\"\n  }))))), description && __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1807027609\", [logo ? height * 100 / width + '%' : 0]]]) + \" \" + \"row cover__description\"\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1807027609\", [logo ? height * 100 / width + '%' : 0]]]) + \" \" + \"col-10 offset-1 col-md-12 offset-md-0\"\n  }, __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"1807027609\", [logo ? height * 100 / width + '%' : 0]]]) + \" \" + \"mb-0\"\n  }, description)))), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1807027609\", [logo ? height * 100 / width + '%' : 0]]]) + \" \" + \"row justify-content-center gutter-15\"\n  }, !user ? __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1807027609\", [logo ? height * 100 / width + '%' : 0]]]) + \" \" + \"col-auto\"\n  }, __jsx(Link, {\n    href: \"/signup\",\n    passHref: true\n  }, __jsx(Button, null, empezaYa))) : __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1807027609\", [logo ? height * 100 / width + '%' : 0]]]) + \" \" + \"col-auto\"\n  }, __jsx(MediaLink, _extends({\n    media: media\n  }, {\n    passHref: true\n  }), __jsx(Button, null, \"Mira\"))), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1807027609\", [logo ? height * 100 / width + '%' : 0]]]) + \" \" + \"col-auto\"\n  }, __jsx(WishlistBtn, {\n    movieId: media.id\n  })))))), __jsx(_JSXStyle, {\n    id: \"1807027609\",\n    dynamic: [logo ? height * 100 / width + '%' : 0]\n  }, [\".cover.__jsx-style-dynamic-selector{font-size:12px;line-height:1.4;margin-bottom:15px;overflow:hidden;padding-bottom:15px;position:relative;text-align:center;z-index:1;}\", \".cover__img.__jsx-style-dynamic-selector{margin-bottom:-90px;}\", \".cover__infos.__jsx-style-dynamic-selector{margin-bottom:15px;}\", \".cover__logo.__jsx-style-dynamic-selector{margin-top:0;margin-bottom:15px;position:relative;}\", \".cover__logo.__jsx-style-dynamic-selector::before{content:'';display:block;padding-bottom:\".concat(logo ? height * 100 / width + '%' : 0, \";}\"), \".cover__logo.__jsx-style-dynamic-selector img.__jsx-style-dynamic-selector{left:0;position:absolute;top:0;}\", \"@media (min-width:768px){.cover.__jsx-style-dynamic-selector{font-size:16px;line-height:1.5;margin-bottom:-60px;text-align:left;}.cover__img.__jsx-style-dynamic-selector{margin-bottom:0;}.cover__contents.__jsx-style-dynamic-selector{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%;padding-top:var(--padding-top);padding-bottom:60px;position:absolute;width:100%;top:0;}.cover__infos.__jsx-style-dynamic-selector{margin-bottom:15px;}}\"])));\n};\n\nvar HomeCarouselSection = function HomeCarouselSection(_ref6) {\n  var api = _ref6.api,\n      categorySlug = _ref6.category,\n      idx = _ref6.idx;\n\n  var _useState2 = useState(null),\n      category = _useState2[0],\n      setCategory = _useState2[1];\n\n  var _useState3 = useState(false),\n      error = _useState3[0],\n      setError = _useState3[1];\n\n  var _useState4 = useState(false),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var lang = CONFIG.lang;\n  useEffect(function () {\n    function fetchData() {\n      return _fetchData.apply(this, arguments);\n    }\n\n    function _fetchData() {\n      _fetchData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var _yield$api$get3, data, errorMessage;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                setError(false);\n                setLoading(true);\n                _context2.prev = 2;\n                _context2.next = 5;\n                return api.get(\"category/\".concat(categorySlug));\n\n              case 5:\n                _yield$api$get3 = _context2.sent;\n                data = _yield$api$get3.data;\n                console.log(data);\n                setCategory(data);\n                _context2.next = 15;\n                break;\n\n              case 11:\n                _context2.prev = 11;\n                _context2.t0 = _context2[\"catch\"](2);\n                errorMessage = ['es', 'es-CL'].includes(lang) ? 'Error al intentar cargar la categoría' : 'Error trying to load category';\n                setError(errorMessage);\n\n              case 15:\n                setLoading(false);\n\n              case 16:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[2, 11]]);\n      }));\n      return _fetchData.apply(this, arguments);\n    }\n\n    fetchData();\n  }, [categorySlug]); // alert(key)\n\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"jsx-2384396703\" + \" \" + \"home-carousel-section\"\n  }, loading ? __jsx(\"div\", {\n    className: \"jsx-2384396703\" + \" \" + \"text-center\"\n  }, __jsx(Loading, {\n    loadingState: loading\n  })) : category ? __jsx(CarouselSection, {\n    category: category,\n    idx: idx\n  }) : error && __jsx(\"div\", {\n    className: \"jsx-2384396703\" + \" \" + \"text-center\"\n  }, error)), __jsx(\"br\", {\n    className: \"jsx-2384396703\"\n  }), __jsx(_JSXStyle, {\n    id: \"2384396703\"\n  }, [\"@media (min-width:768px){}\"]));\n};\n\nvar BannerSection = function BannerSection(_ref7) {\n  var id = _ref7.id,\n      movie = _ref7.movie;\n\n  var _useState5 = useState(),\n      banner = _useState5[0],\n      setBanner = _useState5[1];\n\n  var _useState6 = useState(false),\n      loading = _useState6[0],\n      setLoading = _useState6[1];\n\n  var _useState7 = useState(),\n      error = _useState7[0],\n      setError = _useState7[1];\n\n  useEffect(function (_) {\n    function fetchData() {\n      return _fetchData2.apply(this, arguments);\n    }\n\n    function _fetchData2() {\n      _fetchData2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var _yield, data;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                setLoading(true);\n                _context3.prev = 1;\n                _context3.next = 4;\n                return id ? api().get(\"/banners/\".concat(id)) : api().get(\"/movie/\".concat(movie));\n\n              case 4:\n                _yield = _context3.sent;\n                data = _yield.data;\n                setBanner(data);\n                _context3.next = 12;\n                break;\n\n              case 9:\n                _context3.prev = 9;\n                _context3.t0 = _context3[\"catch\"](1);\n                setError(true);\n\n              case 12:\n                setLoading(false);\n\n              case 13:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[1, 9]]);\n      }));\n      return _fetchData2.apply(this, arguments);\n    }\n\n    fetchData();\n  }, [id]);\n  return __jsx(\"div\", {\n    className: \"jsx-1694855813\"\n  }, __jsx(\"div\", {\n    className: \"jsx-1694855813\" + \" \" + \"section\"\n  }, __jsx(\"div\", {\n    className: \"jsx-1694855813\" + \" \" + \"text-center\"\n  }, __jsx(Loading, {\n    loadingState: loading\n  })), banner && id && __jsx(\"a\", {\n    href: banner.link,\n    target: \"_blank\",\n    className: \"jsx-1694855813\" + \" \" + \"sponsor-link\"\n  }, __jsx(Featured, {\n    img: banner.banner_url\n  })), banner && movie && __jsx(MediaLink, {\n    media: banner.movie,\n    passHref: true\n  }, __jsx(\"a\", {\n    className: \"jsx-1694855813\"\n  }, __jsx(Featured, {\n    className: \"gradient\",\n    img: banner.movie.poster_url\n  }))), error && __jsx(\"div\", {\n    className: \"jsx-1694855813\" + \" \" + \"text-center\"\n  }, \"Error\")), __jsx(_JSXStyle, {\n    id: \"1694855813\"\n  }, [\".sponsor-link.jsx-1694855813{color:white !important;-webkit-text-decoration:none;text-decoration:none;}\", \".sponsor-link.jsx-1694855813:hover{color:white !important;-webkit-text-decoration:none;text-decoration:none;}\", \"a.jsx-1694855813:not([href]):not([tabindex]):hover{color:white !important;-webkit-text-decoration:none;text-decoration:none;}\"]));\n};","map":{"version":3,"sources":["/Users/rafael/Projects/somosgad/dale/pages/index.js"],"names":["Head","Link","React","useContext","useEffect","useState","styled","Button","CarouselSection","Featured","Layout","Loading","MediaLink","WishlistBtn","UserContext","CONFIG","api","withApi","Color","TENANT","Router","HomePage","contents","featuredMedia","featuredMediaError","media","layoutProps","user","pageTitle","appName","idx","setIdx","map","item","index","showBanner","is_paid","contentableType","contentable_type","slug","contentable_id","getInitialProps","ctx","get","homePage","data","firstContent","movie","push","res","writeHead","Location","end","CoverImgContent","div","props","theme","colors","background","fade","string","posterUrl","Cover","error","description","logo","poster_url","height","url","fallback","png","webp","width","empezaYa","lang","video_file","id","HomeCarouselSection","categorySlug","category","setCategory","setError","loading","setLoading","fetchData","console","log","errorMessage","includes","BannerSection","banner","setBanner","_","link","banner_url"],"mappings":"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","sourcesContent":["import Head from 'next/head'\nimport Link from 'next/link'\nimport React, { useContext, useEffect, useState } from 'react'\nimport styled from 'styled-components'\nimport Button from '../components/button'\nimport CarouselSection from '../components/carousel-section'\nimport Featured from '../components/featured'\nimport Layout from '../components/layout/Layout'\nimport Loading from '../components/Loading/Loading'\nimport MediaLink from '../components/MediaLink/MediaLink'\nimport WishlistBtn from '../components/wishlist-btn'\nimport UserContext from '../contexts/UserContext'\nimport { CONFIG } from '../config'\nimport api from '../services/api'\nimport withApi from '~/components/withApi'\nimport Color from 'color'\nimport { TENANT } from \"~/constants/constants\";\nimport Router from \"next/router\";\n\nconst HomePage = ({ api, contents, featuredMedia, featuredMediaError, media, layoutProps }) => {\n\n  const { user } = useContext(UserContext)\n  const { appName: pageTitle } = CONFIG\n  let [idx, setIdx] = useState(0)\n\n  return (\n    <Layout paddingTop={false} {...layoutProps} media={featuredMedia}>\n      <Head>\n        <title>{pageTitle}</title>x\n        <link rel=\"apple-touch-icon\" sizes=\"180x180\" href={`/static/${TENANT}/favicon/faviconlau-180x180.png`} />\n        <link rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href={`/static/${TENANT}/favicon/faviconlau-32x32.png`} />\n        <link rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href={`/static/${TENANT}/favicon/faviconlau-16x16.png`} />\n        <link rel=\"manifest\" href={`/static/${TENANT}/favicon/site.webmanifest`} />\n        <link rel=\"mask-icon\" href={`/static/${TENANT}/favicon/safari-pinned-tab.svg`} color=\"#5bbad5\" />\n        <meta name=\"msapplication-TileColor\" content=\"#da532c\" />\n        <meta name=\"theme-color\" content=\"#ffffff\" />\n      </Head>\n      <div className=\"index\">\n\n        {/* cover */}\n        <Cover error={featuredMediaError} media={featuredMedia} />\n        {/* <Cover media={featuredMedia} /> */}\n\n        {/* contents */}\n        <div className=\"index__contents\">\n          {contents && contents.map((item, index) => {\n            const showBanner = (item.is_paid && user || !item.is_paid && !user)\n            const { contentable_type: contentableType } = item\n            switch (contentableType) {\n              case 'categories':\n                return <HomeCarouselSection api={api} category={item.slug} key={index} idx={index} />\n              case 'banners':\n                return showBanner && <BannerSection id={item.contentable_id} key={index} />\n              case 'movies':\n                return showBanner && <BannerSection movie={item.slug} key={index} />\n            }\n          })}\n        </div>\n\n      </div>\n      <style jsx>{`\n        .index {\n          margin-bottom: 75px;\n        }\n        .index__contents {\n          position: relative;\n          z-index: 2;\n          padding-bottom: 4em;\n        }\n\n        .home-carousel-section:first-child {\n          padding: 3.5em 0;\n        }\n        @media (min-width: 768px) {\n          .index {\n            margin-bottom: 30px;\n          }\n        }\n      ` }</style>\n    </Layout>\n  )\n}\n\nHomePage.getInitialProps = async ctx => {\n  const { api } = ctx\n  const { data: homePage } = await api.get('pages/home');\n\n  try {\n    const [firstContent, ...contents] = homePage.contents\n    const { data: { movie: featuredMedia } } = await api.get('movie/' + firstContent.slug + '?for=home-cover')\n\n    typeof window !== 'undefined'\n      ? Router.push('/login')\n      : ctx.res.writeHead(302, { Location: '/signup' }).end()\n\n    // return { contents, featuredMedia }\n  } catch (error) {\n    const [...contents] = homePage.contents;\n    return { contents, featuredMediaError: error };\n  }\n}\n\nexport default withApi(HomePage)\n\nconst CoverImgContent = styled.div`\n  background-image:\n    linear-gradient(to bottom, ${props => Color(props.theme.colors.background).fade(1).string()} 80%, ${props => props.theme.colors.background} 100%),\n    url('${props => props.posterUrl}');\n  background-position: 50% 0, 50% 0, 75% 0;\n  background-repeat: no-repeat, no-repeat, no-repeat;\n  background-size: cover, cover, cover;\n  &::before {\n    content: '';\n    display: block;\n    padding-bottom: 112.5%;\n  }\n  @media (min-width: 768px) {\n    background-image:\n      linear-gradient(to bottom, ${props => Color(props.theme.colors.background).fade(1).string()} 65%, ${props => props.theme.colors.background} 100%),\n      url('${props => props.posterUrl}');\n    background-position: 50% 0, 50% 0, 40% 50%;\n    &::before {\n      padding-bottom: 80%;\n    }\n  }\n  @media (min-width: 1200px) {\n    background-position: 50% 0, 50% 0, 75% 50%;\n    &::before {\n      padding-bottom: 48%;\n    }\n  }\n`\n\nconst Cover = ({ error, media }) => {\n\n  if (error) {\n    return (\n      <p>No se puede cargar contenido destacado</p>\n    )\n  }\n  const { user } = useContext(UserContext)\n  const { description, logo, poster_url } = media || {}\n  const {\n    height,\n    url: { default: fallback, png, webp } = {},\n    width,\n  } = logo || {}\n  const empezaYa = CONFIG.lang === 'es-CL' ? '¡Vívelo ahora!' : '¡Empieza Ya!'\n  return (\n\n    <Link href={media && media.video_file ? `/media/${media.slug}/watch` : '/'} >\n\n\n      <div className=\"cover container-fluid\">\n\n        {/* poster backaground banner image */}\n\n        {poster_url && (\n          <div className=\"cover__img row\">\n            <div className=\"col p-0\">\n\n              <CoverImgContent posterUrl={poster_url}>\n\n                <img alt=\"\" className=\"d-none\" src={poster_url} />\n\n\n              </CoverImgContent>\n\n\n            </div>\n          </div>\n        )\n        }\n\n\n        <div className=\"cover__contents row\">\n          <div className=\"col-12 col-md-4 offset-md-1\">\n            <div className=\"cover__infos\">\n\n              {/* logo overlay image */}\n              {logo && (\n                <div className=\"row\">\n                  <div className=\"col-8 offset-2 col-md-12 offset-md-0\">\n                    <h1 className=\"cover__logo\">\n                      <picture>\n                        <source srcSet={webp} type=\"media/webp\" />\n                        <source srcSet={png} type=\"media/png\" />\n                        <img className=\"img-fluid\" height={height} src={fallback} width={width} />\n                      </picture>\n                    </h1>\n                  </div>\n                </div>\n              )}\n\n              {/* content's description */}\n              {description && (\n                <div className=\"row cover__description\">\n                  <div className=\"col-10 offset-1 col-md-12 offset-md-0\">\n                    <p className=\"mb-0\">{description}</p>\n                  </div>\n                </div>\n              )}\n\n            </div>\n\n            {/* cta buttons */}\n            <div className=\"row justify-content-center gutter-15\">\n              {!user ? (\n                <div className=\"col-auto\">\n                  <Link href=\"/signup\" passHref>\n                    <Button>{empezaYa}</Button>\n                  </Link>\n                </div>\n              ) : <>\n                  <div className=\"col-auto\">\n                    <MediaLink {...{ media }} passHref>\n                      <Button>Mira</Button>\n                    </MediaLink>\n                  </div>\n                  <div className=\"col-auto\">\n                    <WishlistBtn movieId={media.id} />\n                  </div>\n                </>}\n            </div>\n          </div>\n\n        </div>\n        {/* styles */}\n        <style jsx>{`\n        .cover {\n          font-size: 12px;\n          line-height: 1.4;\n          margin-bottom: 15px;\n          overflow: hidden;\n          padding-bottom: 15px;\n          position: relative;\n          text-align: center;\n          z-index: 1;\n        }\n        .cover__img {\n          margin-bottom: -90px;\n        }\n        .cover__infos {\n          margin-bottom: 15px;\n        }\n        .cover__logo {\n          margin-top: 0;\n          margin-bottom: 15px;\n          position: relative;\n        }\n        .cover__logo::before {\n          content: '';\n          display: block;\n          padding-bottom: ${ logo ? height * 100 / width + '%' : 0};\n        }\n        .cover__logo img {\n          left: 0;\n          position: absolute;\n          top: 0;\n        }\n        @media (min-width: 768px) {\n          .cover {\n            font-size: 16px;\n            line-height: 1.5;\n            margin-bottom: -60px;\n            text-align: left;\n          }\n          .cover__img {\n            margin-bottom: 0;\n          }\n          .cover__contents {\n            align-items: center;\n            height: 100%;\n            padding-top: var(--padding-top);\n            padding-bottom: 60px;\n            position: absolute;\n            width: 100%;\n            top: 0;\n          }\n          .cover__infos {\n            margin-bottom: 15px;\n          }\n        }\n      ` }</style>\n\n      </div >\n    </Link >\n  )\n}\n\nconst HomeCarouselSection = ({ api, category: categorySlug, idx }) => {\n\n  const [category, setCategory] = useState(null)\n  const [error, setError] = useState(false)\n  const [loading, setLoading] = useState(false)\n  const { lang } = CONFIG\n\n  useEffect(() => {\n    async function fetchData() {\n      setError(false)\n      setLoading(true)\n      try {\n        const { data } = await api.get(`category/${categorySlug}`)\n        console.log(data);\n        setCategory(data)\n      } catch (error) {\n        const errorMessage = ['es', 'es-CL'].includes(lang) ? 'Error al intentar cargar la categoría'\n          : 'Error trying to load category'\n        setError(errorMessage)\n      }\n      setLoading(false)\n    }\n\n    fetchData()\n  }, [categorySlug])\n\n  // alert(key)\n  return (\n    <>\n      <div className=\"home-carousel-section\">\n        {loading ? (\n          <div className=\"text-center\">\n            <Loading loadingState={loading} />\n          </div>\n        ) : category ? (\n          <CarouselSection category={category} idx={idx} />\n        ) : error && (\n          <div className=\"text-center\">\n            {error}\n          </div>\n        )}\n      </div>\n      <br></br>\n      <style jsx>{`\n        .home-carousel-section {\n            //margin-bottom: 75px;\n            //margin-top: 75px;\n            //padding: 1.5em 0;\n            //overflow: hidden;\n        }\n        @media (min-width: 768px) {\n          .home-carousel-section {\n            //margin-bottom: 55px;\n          }\n        }\n      ` }</style>\n    </>\n  )\n}\n\nconst BannerSection = ({ id, movie }) => {\n  const [banner, setBanner] = useState()\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState()\n\n  useEffect(_ => {\n    async function fetchData() {\n      setLoading(true)\n      try {\n        const { data } = await (id ? api().get(`/banners/${id}`) : api().get(`/movie/${movie}`))\n        setBanner(data)\n\n      } catch (error) {\n        setError(true)\n      }\n      setLoading(false)\n    }\n\n    fetchData()\n  }, [id])\n\n  return (\n    <div>\n      <div className=\"section\">\n\n        {/* loading */}\n        <div className=\"text-center\">\n          <Loading loadingState={loading} />\n        </div>\n\n        {/* features */}\n        {banner && id &&\n          <a className=\"sponsor-link\" href={banner.link} target=\"_blank\">\n            <Featured img={banner.banner_url} />\n          </a>\n        }\n\n        {banner && movie &&\n          <MediaLink media={banner.movie} passHref>\n            <a>\n              <Featured\n                className=\"gradient\"\n                img={banner.movie.poster_url}\n              />\n            </a>\n          </MediaLink>\n        }\n\n        {/* error */}\n        {error && (\n          <div className=\"text-center\">Error</div>\n        )}\n\n      </div>\n      <style jsx>{`\n        .sponsor-link {\n          color: white !important;\n          text-decoration: none;\n        }\n        .sponsor-link:hover {\n          color: white !important;\n          text-decoration: none;\n        }\n        a:not([href]):not([tabindex]):hover {\n          color: white !important;\n          text-decoration: none;\n        }\n      ` }</style>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}