{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.backendLogout = exports.frontendLogout = exports.removeAccessToken = exports.setAccessToken = exports.getAccessToken = exports.ACCESS_TOKEN_KEY = void 0;\n\nvar _nookies = _interopRequireDefault(require(\"nookies\"));\n\nvar ACCESS_TOKEN_KEY = 'access_token';\nexports.ACCESS_TOKEN_KEY = ACCESS_TOKEN_KEY;\n\nvar getAccessToken = function getAccessToken(ctx) {\n  var cookies = _nookies[\"default\"].get(ctx, ACCESS_TOKEN_KEY);\n\n  return cookies[ACCESS_TOKEN_KEY];\n};\n\nexports.getAccessToken = getAccessToken;\n\nvar setAccessToken = function setAccessToken(accessToken) {\n  _nookies[\"default\"].set({}, ACCESS_TOKEN_KEY, accessToken, {\n    path: '/'\n  });\n};\n\nexports.setAccessToken = setAccessToken;\n\nvar removeAccessToken = function removeAccessToken(ctx) {\n  _nookies[\"default\"].destroy(ctx, ACCESS_TOKEN_KEY, {\n    path: '/'\n  });\n};\n\nexports.removeAccessToken = removeAccessToken;\n\nvar frontendLogout = function frontendLogout(signOut) {\n  signOut();\n};\n\nexports.frontendLogout = frontendLogout;\n\nvar backendLogout = function backendLogout(ctx) {\n  removeAccessToken(ctx);\n\n  _nookies[\"default\"].destroy(ctx, 'user', {\n    path: '/'\n  });\n\n  ctx.res.redirect('/login');\n  ctx.res.end();\n}; // export const isAuthenticated = _ => getAccessToken() !== null\n\n/* export const login = accessToken => {\n  setAccessToken(accessToken)\n} */\n\n\nexports.backendLogout = backendLogout;","map":{"version":3,"sources":["/Users/rafael/Projects/somosgad/dale/services/auth.js"],"names":["ACCESS_TOKEN_KEY","getAccessToken","ctx","cookies","nookies","get","setAccessToken","accessToken","set","path","removeAccessToken","destroy","frontendLogout","signOut","backendLogout","res","redirect","end"],"mappings":";;;;;;;;;AAAA;;AAEO,IAAMA,gBAAgB,GAAG,cAAzB;;;AAEA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAAAC,GAAG,EAAI;AACnC,MAAMC,OAAO,GAAGC,oBAAQC,GAAR,CAAYH,GAAZ,EAAiBF,gBAAjB,CAAhB;;AACA,SAAOG,OAAO,CAACH,gBAAD,CAAd;AACD,CAHM;;;;AAKA,IAAMM,cAAc,GAAG,SAAjBA,cAAiB,CAAAC,WAAW,EAAI;AAC3CH,sBAAQI,GAAR,CAAY,EAAZ,EAAgBR,gBAAhB,EAAkCO,WAAlC,EAA+C;AAAEE,IAAAA,IAAI,EAAE;AAAR,GAA/C;AACD,CAFM;;;;AAIA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAR,GAAG,EAAI;AACtCE,sBAAQO,OAAR,CAAgBT,GAAhB,EAAqBF,gBAArB,EAAuC;AAAES,IAAAA,IAAI,EAAE;AAAR,GAAvC;AACD,CAFM;;;;AAIA,IAAMG,cAAc,GAAG,SAAjBA,cAAiB,CAAAC,OAAO,EAAI;AACvCA,EAAAA,OAAO;AACR,CAFM;;;;AAIA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAAAZ,GAAG,EAAI;AAClCQ,EAAAA,iBAAiB,CAACR,GAAD,CAAjB;;AACAE,sBAAQO,OAAR,CAAgBT,GAAhB,EAAqB,MAArB,EAA6B;AAAEO,IAAAA,IAAI,EAAE;AAAR,GAA7B;;AACAP,EAAAA,GAAG,CAACa,GAAJ,CAAQC,QAAR,CAAiB,QAAjB;AACAd,EAAAA,GAAG,CAACa,GAAJ,CAAQE,GAAR;AACD,CALM,C,CAOP;;AAEA","sourcesContent":["import nookies from 'nookies'\n\nexport const ACCESS_TOKEN_KEY = 'access_token'\n\nexport const getAccessToken = ctx => {\n  const cookies = nookies.get(ctx, ACCESS_TOKEN_KEY)\n  return cookies[ACCESS_TOKEN_KEY]\n}\n\nexport const setAccessToken = accessToken => {\n  nookies.set({}, ACCESS_TOKEN_KEY, accessToken, { path: '/' })\n}\n\nexport const removeAccessToken = ctx => {\n  nookies.destroy(ctx, ACCESS_TOKEN_KEY, { path: '/' })\n}\n\nexport const frontendLogout = signOut => {\n  signOut()\n}\n\nexport const backendLogout = ctx => {\n  removeAccessToken(ctx)\n  nookies.destroy(ctx, 'user', { path: '/' })\n  ctx.res.redirect('/login')\n  ctx.res.end()\n}\n\n// export const isAuthenticated = _ => getAccessToken() !== null\n\n/* export const login = accessToken => {\n  setAccessToken(accessToken)\n} */\n"]},"metadata":{},"sourceType":"script"}