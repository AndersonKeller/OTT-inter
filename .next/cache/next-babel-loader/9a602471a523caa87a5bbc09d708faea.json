{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.backendLogout = exports.frontendLogout = exports.removeAccessToken = exports.setAccessToken = exports.getAccessToken = exports.ACCESS_TOKEN_KEY = void 0;\n\nvar _nookies = _interopRequireDefault(require(\"nookies\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst ACCESS_TOKEN_KEY = 'access_token';\nexports.ACCESS_TOKEN_KEY = ACCESS_TOKEN_KEY;\n\nconst getAccessToken = ctx => {\n  const cookies = _nookies.default.get(ctx, ACCESS_TOKEN_KEY);\n\n  return cookies[ACCESS_TOKEN_KEY];\n};\n\nexports.getAccessToken = getAccessToken;\n\nconst setAccessToken = accessToken => {\n  _nookies.default.set({}, ACCESS_TOKEN_KEY, accessToken, {\n    path: '/'\n  });\n};\n\nexports.setAccessToken = setAccessToken;\n\nconst removeAccessToken = ctx => {\n  _nookies.default.destroy(ctx, ACCESS_TOKEN_KEY, {\n    path: '/'\n  });\n};\n\nexports.removeAccessToken = removeAccessToken;\n\nconst frontendLogout = signOut => {\n  signOut();\n};\n\nexports.frontendLogout = frontendLogout;\n\nconst backendLogout = ctx => {\n  removeAccessToken(ctx);\n\n  _nookies.default.destroy(ctx, 'user', {\n    path: '/'\n  });\n\n  ctx.res.redirect('/login');\n  ctx.res.end();\n}; // export const isAuthenticated = _ => getAccessToken() !== null\n\n/* export const login = accessToken => {\n  setAccessToken(accessToken)\n} */\n\n\nexports.backendLogout = backendLogout;","map":{"version":3,"sources":["/Users/rafael/Projects/somosgad/dale/services/auth.js"],"names":["ACCESS_TOKEN_KEY","getAccessToken","ctx","cookies","nookies","get","setAccessToken","accessToken","set","path","removeAccessToken","destroy","frontendLogout","signOut","backendLogout","res","redirect","end"],"mappings":";;;;;;;AAAA;;;;AAEO,MAAMA,gBAAgB,GAAG,cAAzB;;;AAEA,MAAMC,cAAc,GAAGC,GAAG,IAAI;AACnC,QAAMC,OAAO,GAAGC,iBAAQC,GAAR,CAAYH,GAAZ,EAAiBF,gBAAjB,CAAhB;;AACA,SAAOG,OAAO,CAACH,gBAAD,CAAd;AACD,CAHM;;;;AAKA,MAAMM,cAAc,GAAGC,WAAW,IAAI;AAC3CH,mBAAQI,GAAR,CAAY,EAAZ,EAAgBR,gBAAhB,EAAkCO,WAAlC,EAA+C;AAAEE,IAAAA,IAAI,EAAE;AAAR,GAA/C;AACD,CAFM;;;;AAIA,MAAMC,iBAAiB,GAAGR,GAAG,IAAI;AACtCE,mBAAQO,OAAR,CAAgBT,GAAhB,EAAqBF,gBAArB,EAAuC;AAAES,IAAAA,IAAI,EAAE;AAAR,GAAvC;AACD,CAFM;;;;AAIA,MAAMG,cAAc,GAAGC,OAAO,IAAI;AACvCA,EAAAA,OAAO;AACR,CAFM;;;;AAIA,MAAMC,aAAa,GAAGZ,GAAG,IAAI;AAClCQ,EAAAA,iBAAiB,CAACR,GAAD,CAAjB;;AACAE,mBAAQO,OAAR,CAAgBT,GAAhB,EAAqB,MAArB,EAA6B;AAAEO,IAAAA,IAAI,EAAE;AAAR,GAA7B;;AACAP,EAAAA,GAAG,CAACa,GAAJ,CAAQC,QAAR,CAAiB,QAAjB;AACAd,EAAAA,GAAG,CAACa,GAAJ,CAAQE,GAAR;AACD,CALM,C,CAOP;;AAEA","sourcesContent":["import nookies from 'nookies'\n\nexport const ACCESS_TOKEN_KEY = 'access_token'\n\nexport const getAccessToken = ctx => {\n  const cookies = nookies.get(ctx, ACCESS_TOKEN_KEY)\n  return cookies[ACCESS_TOKEN_KEY]\n}\n\nexport const setAccessToken = accessToken => {\n  nookies.set({}, ACCESS_TOKEN_KEY, accessToken, { path: '/' })\n}\n\nexport const removeAccessToken = ctx => {\n  nookies.destroy(ctx, ACCESS_TOKEN_KEY, { path: '/' })\n}\n\nexport const frontendLogout = signOut => {\n  signOut()\n}\n\nexport const backendLogout = ctx => {\n  removeAccessToken(ctx)\n  nookies.destroy(ctx, 'user', { path: '/' })\n  ctx.res.redirect('/login')\n  ctx.res.end()\n}\n\n// export const isAuthenticated = _ => getAccessToken() !== null\n\n/* export const login = accessToken => {\n  setAccessToken(accessToken)\n} */\n"]},"metadata":{},"sourceType":"script"}