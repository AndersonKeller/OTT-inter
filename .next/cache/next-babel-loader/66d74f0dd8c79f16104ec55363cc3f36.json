{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n// next imports\nimport Head from 'next/head';\nimport Router, { useRouter } from 'next/router'; // react imports\n\nimport { useEffect, useState, useContext } from 'react';\nimport nookies from 'nookies'; // app imports\n\nimport Layout from '../../components/layout/Layout';\nimport { CONFIG } from '../../config';\nimport withApi from '~/components/withApi';\nimport Loading from '~/components/Loading/Loading';\n\nvar CheckEmail = function CheckEmail(_ref) {\n  var layoutProps = _ref.layoutProps,\n      message = _ref.message;\n  useEffect(function (_) {\n    message = JSON.stringify(message);\n    nookies.set({}, 'flash_message', message, {\n      path: \"/\"\n    });\n    Router.push(\"/\");\n  }, []);\n  return __jsx(Layout, layoutProps, __jsx(Head, null, __jsx(\"title\", {\n    className: \"jsx-654964715\"\n  }, \"Verificaci\\xF3n de email < \", CONFIG.appName)), __jsx(\"div\", {\n    className: \"jsx-654964715\" + \" \" + \"container-fluid\"\n  }, __jsx(\"div\", {\n    className: \"jsx-654964715\" + \" \" + \"row\"\n  }, __jsx(\"div\", {\n    className: \"jsx-654964715\" + \" \" + \"col-md-10 offset-md-1\"\n  }, __jsx(\"h1\", {\n    className: \"jsx-654964715\" + \" \" + \"h2\"\n  }, \"Verificaci\\xF3n de email\"), __jsx(Loading, {\n    loadingState: true\n  })))), __jsx(_JSXStyle, {\n    id: \"654964715\"\n  }, [\"header.jsx-654964715{padding-top:15px;}\", \".h2.jsx-654964715{margin-bottom:30px;}\", \"@media (min-width:768px){header.jsx-654964715{padding-top:30px;}}\"]));\n};\n\nCheckEmail.getInitialProps = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(ctx) {\n    var api, query, verifyURL, message, path, _yield$api$get, status;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            api = ctx.api, query = ctx.query;\n            verifyURL = query.apiurl;\n            message = {};\n            path = \"/\";\n            _context.next = 7;\n            return api.get(\"\", {\n              baseURL: decodeURI(verifyURL)\n            });\n\n          case 7:\n            _yield$api$get = _context.sent;\n            status = _yield$api$get.status;\n            message = status == 200 ? {\n              success: \"Email verificado con éxito\"\n            } : {\n              error: \"Este correo electrónico no pudo ser verificado\"\n            };\n            _context.next = 15;\n            break;\n\n          case 12:\n            _context.prev = 12;\n            _context.t0 = _context[\"catch\"](0);\n            message = {\n              info: \"Este enlace ha expirado\"\n            };\n\n          case 15:\n            return _context.abrupt(\"return\", {\n              message: message\n            });\n\n          case 16:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 12]]);\n  }));\n\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nexport default withApi(CheckEmail);","map":{"version":3,"sources":["/Users/rafael/Projects/somosgad/dale/pages/user/verifyEmail.js"],"names":["Head","Router","useRouter","useEffect","useState","useContext","nookies","Layout","CONFIG","withApi","Loading","CheckEmail","layoutProps","message","_","JSON","stringify","set","path","push","appName","getInitialProps","ctx","api","query","verifyURL","apiurl","get","baseURL","decodeURI","status","success","error","info"],"mappings":";;;;;AAAA;AACA,OAAOA,IAAP,MAAiB,WAAjB;AACA,OAAOC,MAAP,IAAiBC,SAAjB,QAAkC,aAAlC,C,CAEA;;AACA,SAASC,SAAT,EAAoBC,QAApB,EAA8BC,UAA9B,QAAgD,OAAhD;AACA,OAAOC,OAAP,MAAoB,SAApB,C,CAEA;;AACA,OAAOC,MAAP,MAAmB,gCAAnB;AACA,SAASC,MAAT,QAAuB,cAAvB;AACA,OAAOC,OAAP,MAAoB,sBAApB;AACA,OAAOC,OAAP,MAAoB,8BAApB;;AAEA,IAAMC,UAAU,GAAG,SAAbA,UAAa,OAA8B;AAAA,MAA3BC,WAA2B,QAA3BA,WAA2B;AAAA,MAAdC,OAAc,QAAdA,OAAc;AAE/CV,EAAAA,SAAS,CAAC,UAAAW,CAAC,EAAI;AACXD,IAAAA,OAAO,GAAGE,IAAI,CAACC,SAAL,CAAeH,OAAf,CAAV;AACAP,IAAAA,OAAO,CAACW,GAAR,CAAY,EAAZ,EAAgB,eAAhB,EAAiCJ,OAAjC,EAA0C;AAAEK,MAAAA,IAAI,EAAE;AAAR,KAA1C;AACAjB,IAAAA,MAAM,CAACkB,IAAP,CAAY,GAAZ;AACH,GAJQ,EAIN,EAJM,CAAT;AAMA,SACE,MAAC,MAAD,EAAYP,WAAZ,EACE,MAAC,IAAD,QACE;AAAA;AAAA,oCAAmCJ,MAAM,CAACY,OAA1C,CADF,CADF,EAIE;AAAA,uCAAe;AAAf,KACE;AAAA,uCAAe;AAAf,KACE;AAAA,uCAAe;AAAf,KACE;AAAA,uCAAc;AAAd,gCADF,EAEE,MAAC,OAAD;AAAS,IAAA,YAAY,EAAE;AAAvB,IAFF,CADF,CADF,CAJF;AAAA;AAAA,iKADF;AA4BD,CApCD;;AAsCAT,UAAU,CAACU,eAAX;AAAA,uEAA6B,iBAAMC,GAAN;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEjBC,YAAAA,GAFiB,GAEFD,GAFE,CAEjBC,GAFiB,EAEZC,KAFY,GAEFF,GAFE,CAEZE,KAFY;AAGnBC,YAAAA,SAHmB,GAGPD,KAAK,CAACE,MAHC;AAIrBb,YAAAA,OAJqB,GAIX,EAJW;AAKrBK,YAAAA,IALqB,GAKd,GALc;AAAA;AAAA,mBAOAK,GAAG,CAACI,GAAJ,CAAQ,EAAR,EAAW;AAACC,cAAAA,OAAO,EAAEC,SAAS,CAACJ,SAAD;AAAnB,aAAX,CAPA;;AAAA;AAAA;AAOjBK,YAAAA,MAPiB,kBAOjBA,MAPiB;AAQzBjB,YAAAA,OAAO,GAAIiB,MAAM,IAAI,GAAX,GACR;AAACC,cAAAA,OAAO,EAAE;AAAV,aADQ,GAGR;AAACC,cAAAA,KAAK,EAAE;AAAR,aAHF;AARyB;AAAA;;AAAA;AAAA;AAAA;AAczBnB,YAAAA,OAAO,GAAG;AAACoB,cAAAA,IAAI,EAAE;AAAP,aAAV;;AAdyB;AAAA,6CAiBpB;AAAEpB,cAAAA,OAAO,EAAPA;AAAF,aAjBoB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA7B;;AAAA;AAAA;AAAA;AAAA;;AAoBA,eAAeJ,OAAO,CAACE,UAAD,CAAtB","sourcesContent":["// next imports\nimport Head from 'next/head'\nimport Router, { useRouter } from 'next/router'\n\n// react imports\nimport { useEffect, useState, useContext } from 'react'\nimport nookies from 'nookies'\n\n// app imports\nimport Layout from '../../components/layout/Layout'\nimport { CONFIG } from '../../config'\nimport withApi from '~/components/withApi'\nimport Loading from '~/components/Loading/Loading'\n\nconst CheckEmail = ({ layoutProps, message }) => {\n\n  useEffect(_ => {\n      message = JSON.stringify(message)\n      nookies.set({}, 'flash_message', message, { path: \"/\" })\n      Router.push(\"/\")\n  }, [])\n\n  return (\n    <Layout {...layoutProps}>\n      <Head>\n        <title>Verificación de email &lt; {CONFIG.appName}</title>\n      </Head>\n      <div className=\"container-fluid\">\n        <div className=\"row\">\n          <div className=\"col-md-10 offset-md-1\">\n            <h1 className=\"h2\">Verificación de email</h1>\n            <Loading loadingState={true} />\n          </div>\n        </div>\n      </div>\n      <style jsx>{`\n        header {\n          padding-top: 15px;\n        }\n        .h2 {\n          margin-bottom: 30px;\n        }\n        @media (min-width: 768px) {\n          header {\n            padding-top: 30px;\n          }\n        }\n      `}</style>\n    </Layout>\n  );\n}\n\nCheckEmail.getInitialProps = async ctx => {\n  try {\n    const { api, query } = ctx\n    const verifyURL = query.apiurl\n    var message = {}\n    var path = \"/\"\n\n    const { status } = await api.get(\"\",{baseURL: decodeURI(verifyURL)})\n    message = (status == 200) ?\n      {success: \"Email verificado con éxito\"}\n    :\n      {error: \"Este correo electrónico no pudo ser verificado\"}\n\n  } catch (e) {\n    message = {info: \"Este enlace ha expirado\"}\n  }\n\n  return { message }\n}\n\nexport default withApi(CheckEmail)\n"]},"metadata":{},"sourceType":"module"}