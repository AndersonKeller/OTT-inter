{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n// import { useContext } from 'react'\nimport React, { Component } from 'react';\nimport Head from 'next/head';\nimport BlockedPlayer from '~/components/Player/BlockedPlayer'; // import CommentSection from '~/components/comment-section'\n\nimport Layout from '~/components/layout/Layout'; // import LikeNCommentsBtns from '~/components/like-n-comments-btns'\n\nimport MediaDescription from '~/components/media-description';\nimport MoreContentCarousel from '~/components/more-content-carousel'; // import SocialShareBtns from '~/components/social-share-btns'\n// import UserContext from '~/contexts/UserContext'\n\nimport { CONFIG } from '~/config';\nimport { STATIC_PATH, TENANT } from '~/constants/constants';\nimport api from '~/services/api';\nimport MediaLink from '~/components/MediaLink/MediaLink';\nimport Router from 'next/router';\n\nfunction Related(_ref) {\n  var category = _ref.category,\n      medias = _ref.medias;\n  return __jsx(\"div\", null, medias.map(function (media, key) {\n    return __jsx(RelatedVideo, {\n      category: category,\n      media: media,\n      key: key\n    });\n  }));\n}\n\nfunction RelatedVideo(_ref2) {\n  var _ref2$category = _ref2.category,\n      category = _ref2$category === void 0 ? null : _ref2$category,\n      media = _ref2.media;\n  return __jsx(\"div\", {\n    className: \"jsx-48361767\" + \" \" + \"more-card\"\n  }, __jsx(MediaLink, _extends({\n    category: category,\n    media: media\n  }, {\n    watch: true\n  }), __jsx(\"a\", {\n    className: \"jsx-48361767\"\n  }, __jsx(\"div\", {\n    className: \"jsx-48361767\" + \" \" + \"row align-items-center gutter-15\"\n  }, __jsx(\"div\", {\n    className: \"jsx-48361767\" + \" \" + \"col-7\"\n  }, __jsx(\"img\", {\n    height: \"123\",\n    src: media.thumbnail2_url ? media.thumbnail2_url : '//placehold.jp/220x123.png',\n    width: \"220\",\n    className: \"jsx-48361767\" + \" \" + \"img-fluid\"\n  })), __jsx(\"div\", {\n    className: \"jsx-48361767\" + \" \" + \"col-4\"\n  }, __jsx(\"p\", {\n    className: \"jsx-48361767\"\n  }, __jsx(\"strong\", {\n    className: \"jsx-48361767\"\n  }, media.title)))))), __jsx(_JSXStyle, {\n    id: \"48361767\"\n  }, [\".more-card.jsx-48361767{font-size:11px;line-height:1.5;margin-bottom:15px;}\", \".more-card.jsx-48361767 a.jsx-48361767{display:block;-webkit-text-decoration:none;text-decoration:none;}\", \".more-card.jsx-48361767 a.jsx-48361767:focus,.more-card.jsx-48361767 a.jsx-48361767:hover{color:var(--white);}\", \".more-card.jsx-48361767 p.jsx-48361767{margin-bottom:0;}\", \"@media (min-width:768px){.more-card.jsx-48361767{line-height:1.75;margin-bottom:0;padding-top:15px;padding-bottom:15px;}}\"]));\n}\n\nvar WatchPage = /*#__PURE__*/function (_Component) {\n  _inherits(WatchPage, _Component);\n\n  var _super = _createSuper(WatchPage);\n\n  function WatchPage(props) {\n    var _this;\n\n    _classCallCheck(this, WatchPage);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      player: __jsx(BlockedPlayer, {\n        image: _this.props.media.thumbnail2_url,\n        media: _this.props.media\n      })\n    });\n\n    Router.events.on('routeChangeComplete', function (_) {\n      _this.setState({\n        player: null\n      });\n\n      _this.setState({\n        player: __jsx(BlockedPlayer, {\n          image: _this.props.media.thumbnail2_url,\n          media: _this.props.media\n        })\n      });\n    });\n    return _this;\n  }\n\n  _createClass(WatchPage, [{\n    key: \"render\",\n    value: function render() {\n      var appName = CONFIG.appName;\n      var mediaTitle = this.props.media.title;\n      var pageTitle = \"\".concat(mediaTitle, \" < \").concat(appName);\n      return __jsx(Layout, _extends({\n        errorCode: this.props.errorCode\n      }, this.props.layoutProps), __jsx(Head, null, __jsx(\"title\", {\n        className: \"jsx-4228821930\"\n      }, pageTitle)), __jsx(\"div\", {\n        className: \"jsx-4228821930\" + \" \" + \"container-fluid\"\n      }, __jsx(\"div\", {\n        className: \"jsx-4228821930\" + \" \" + \"row align-items-center\"\n      }, __jsx(\"div\", {\n        className: \"jsx-4228821930\" + \" \" + \"col-12 col-lg-9\"\n      }, this.state.player), this.props.related && __jsx(\"div\", {\n        className: \"jsx-4228821930\" + \" \" + \"col-12 col-lg-3 d-none d-md-block\"\n      }, __jsx(Related, {\n        category: this.props.category,\n        medias: this.props.related\n      }))), __jsx(\"div\", {\n        className: \"jsx-4228821930\" + \" \" + \"row\"\n      }, __jsx(\"div\", {\n        className: \"jsx-4228821930\" + \" \" + \"col-lg-8\"\n      }, __jsx(MediaDescription, {\n        media: this.props.media\n      }))), this.props.related && __jsx(\"div\", {\n        className: \"jsx-4228821930\" + \" \" + \"d-md-none\"\n      }, __jsx(Related, {\n        category: this.props.category,\n        medias: this.props.related\n      }))), this.props.category && __jsx(MoreContentCarousel, {\n        category: this.props.category\n      }), __jsx(_JSXStyle, {\n        id: \"4228821930\"\n      }, [\".row.jsx-4228821930:first-child{margin-bottom:15px;}\", \".icons-row.jsx-4228821930{margin-bottom:25px;}\", \"@media (min-width:1200px){.container-fluid.jsx-4228821930{padding-right:4%;padding-left:4%;}.row.jsx-4228821930:first-child{margin-bottom:30px;}}\"]));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(ctx) {\n        var _ctx$query, slug, categorySlug, response, _response$data, category, movie, related, errorCode;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _ctx$query = ctx.query, slug = _ctx$query.slug, categorySlug = _ctx$query.category;\n                _context.prev = 1;\n                _context.next = 4;\n                return api(ctx).get(\"/movie/\".concat(slug, \"/category/\").concat(categorySlug));\n\n              case 4:\n                response = _context.sent;\n                _response$data = response.data, category = _response$data.category, movie = _response$data.movie, related = _response$data.related;\n                return _context.abrupt(\"return\", {\n                  category: category,\n                  media: movie,\n                  related: related\n                });\n\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](1);\n                errorCode = 404;\n                return _context.abrupt(\"return\", {\n                  errorCode: errorCode\n                });\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 9]]);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return WatchPage;\n}(Component);\n\nexport { WatchPage as default };","map":{"version":3,"sources":["/Users/rafael/Projects/somosgad/dale/pages/media/[slug]/watch.js"],"names":["React","Component","Head","BlockedPlayer","Layout","MediaDescription","MoreContentCarousel","CONFIG","STATIC_PATH","TENANT","api","MediaLink","Router","Related","category","medias","map","media","key","RelatedVideo","thumbnail2_url","title","WatchPage","props","player","events","on","_","setState","appName","mediaTitle","pageTitle","errorCode","layoutProps","state","related","ctx","query","slug","categorySlug","get","response","data","movie"],"mappings":"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","sourcesContent":["// import { useContext } from 'react'\nimport React, { Component } from 'react';\nimport Head from 'next/head'\nimport BlockedPlayer from '~/components/Player/BlockedPlayer'\n// import CommentSection from '~/components/comment-section'\nimport Layout from '~/components/layout/Layout'\n// import LikeNCommentsBtns from '~/components/like-n-comments-btns'\nimport MediaDescription from '~/components/media-description'\nimport MoreContentCarousel from '~/components/more-content-carousel'\n// import SocialShareBtns from '~/components/social-share-btns'\n// import UserContext from '~/contexts/UserContext'\nimport { CONFIG } from '~/config'\nimport { STATIC_PATH, TENANT } from '~/constants/constants'\nimport api from '~/services/api'\nimport MediaLink from '~/components/MediaLink/MediaLink'\nimport Router from 'next/router'\n\nfunction Related({category, medias}) {\n  return (\n    <div>\n      { medias.map((media, key) => (\n        <RelatedVideo {...{category, media, key}} />\n      )) }\n    </div>\n  )\n}\n\nfunction RelatedVideo({category = null, media}) {\n  return (\n    <div className=\"more-card\">\n      <MediaLink {...{category, media}} watch>\n        <a>\n          <div className=\"row align-items-center gutter-15\">\n            <div className=\"col-7\">\n              <img\n                className=\"img-fluid\"\n                height=\"123\"\n                src={media.thumbnail2_url ? media.thumbnail2_url : '//placehold.jp/220x123.png'} width=\"220\"\n              />\n            </div>\n            <div className=\"col-4\">\n              <p><strong>{media.title}</strong></p>\n            </div>\n          </div>\n        </a>\n      </MediaLink>\n      <style jsx>{`\n        .more-card {\n          font-size: 11px;\n          line-height: 1.5;\n          margin-bottom: 15px;\n        }\n        .more-card a {\n          display: block;\n          text-decoration: none;\n        }\n        .more-card a:focus,\n        .more-card a:hover {\n          color: var(--white);\n        }\n        .more-card p {\n          margin-bottom: 0;\n        }\n        @media (min-width: 768px) {\n          .more-card {\n            line-height: 1.75;\n            margin-bottom: 0;\n            padding-top: 15px;\n            padding-bottom: 15px;\n          }\n        }\n      `}</style>\n    </div>\n  )\n}\n\nexport default class WatchPage extends Component {\n  constructor(props) {\n    super(props);\n    Router.events.on('routeChangeComplete', (_) => {\n      this.setState({player: null});\n      this.setState({\n        player: (\n          <BlockedPlayer \n            image={this.props.media.thumbnail2_url} \n            media={this.props.media}\n          />\n        )\n      });\n    });\n  }\n\n  state = {\n    player: (\n      <BlockedPlayer \n        image={this.props.media.thumbnail2_url} \n        media={this.props.media}\n      />\n    ),\n  }\n\n  static async getInitialProps(ctx) {\n    const {slug, category: categorySlug} = ctx.query;\n    try {\n      const response = await api(ctx).get(`/movie/${slug}/category/${categorySlug}`)\n      const { category, movie, related } = response.data\n      return { category, media: movie, related }\n    } catch (error) {\n      const errorCode = 404\n      return { errorCode }\n    }\n  }\n\n  render() {\n    let { appName } = CONFIG\n    let { title: mediaTitle } = this.props.media\n    let pageTitle = `${mediaTitle} < ${appName}`\n    \n    return (\n       <Layout errorCode={this.props.errorCode} {...this.props.layoutProps}>\n          <Head>\n            <title>{pageTitle}</title>\n          </Head>\n          <div className=\"container-fluid\">\n            <div className=\"row align-items-center\">\n              <div className=\"col-12 col-lg-9\">\n                {this.state.player}\n              </div>\n              { this.props.related && (\n                <div className=\"col-12 col-lg-3 d-none d-md-block\">\n                  <Related {...{category: this.props.category, medias: this.props.related}} />\n                </div>\n              )}\n            </div>\n            <div className=\"row\">\n              <div className=\"col-lg-8\">\n                <MediaDescription {...{media: this.props.media }} />\n              </div>\n            </div>\n            {/* <div className=\"icons-row row\">\n              <div className=\"col\">\n                <LikeNCommentsBtns />\n              </div>\n              <div className=\"col text-right\">\n                <SocialShareBtns />\n              </div>\n            </div> */}\n            { this.props.related && (\n              <div className=\"d-md-none\">\n                <Related {...{category: this.props.category, medias: this.props.related}} />\n                {/* <Related {...{category, medias: related}} /> */}\n              </div>\n            )}\n          </div>\n\n          {this.props.category && (\n            <MoreContentCarousel category={this.props.category} />\n          )}\n\n          {/* <CommentSection /> */}\n\n          <style jsx>{`\n            .row:first-child {\n              margin-bottom: 15px;\n            }\n            .icons-row {\n              margin-bottom: 25px;\n            }\n            @media (min-width: 1200px) {\n              .container-fluid {\n                padding-right: 4%;\n                padding-left: 4%;\n              }\n              .row:first-child {\n                margin-bottom: 30px;\n              }\n            }\n          `}</style>\n       </Layout>\n    );\n  }\n}"]},"metadata":{},"sourceType":"module"}